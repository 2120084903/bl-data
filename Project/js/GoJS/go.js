(function(self) {
	var t;

	function aa(a) {
		var b = 0;
		return function() {
			return b < a.length ? {
				done: !1,
				value: a[b++]
			} : {
				done: !0
			}
		}
	}

	function ba(a) {
		var b = "undefined" != typeof Symbol && Symbol.iterator && a[Symbol.iterator];
		return b ? b.call(a) : {
			next: aa(a)
		}
	}

	function ca(a) {
		for(var b, c = []; !(b = a.next()).done;) c.push(b.value);
		return c
	}
	var ea = "function" == typeof Object.create ? Object.create : function(a) {
			function b() {}
			b.prototype = a;
			return new b
		},
		ha;
	if("function" == typeof Object.setPrototypeOf) ha = Object.setPrototypeOf;
	else {
		var ia;
		a: {
			var ja = {
					a: !0
				},
				ka = {};
			try {
				ka.__proto__ = ja;
				ia = ka.a;
				break a
			} catch(a) {}
			ia = !1
		}
		ha = ia ? function(a, b) {
			a.__proto__ = b;
			if(a.__proto__ !== b) throw new TypeError(a + " is not extensible");
			return a
		} : null
	}
	var ma = ha;

	function na(a, b) {
		a.prototype = ea(b.prototype);
		a.prototype.constructor = a;
		if(ma) ma(a, b);
		else
			for(var c in b)
				if("prototype" != c)
					if(Object.defineProperties) {
						var d = Object.getOwnPropertyDescriptor(b, c);
						d && Object.defineProperty(a, c, d)
					} else a[c] = b[c];
		a.Xz = b.prototype
	}
	var oa = "undefined" != typeof window && window === self ? self : "undefined" != typeof global && null != global ? global : self,
		pa = "function" == typeof Object.defineProperties ? Object.defineProperty : function(a, b, c) {
			a != Array.prototype && a != Object.prototype && (a[b] = c.value)
		};

	function ra(a) {
		if(a) {
			for(var b = oa, c = ["Array", "prototype", "fill"], d = 0; d < c.length - 1; d++) {
				var e = c[d];
				e in b || (b[e] = {});
				b = b[e]
			}
			c = c[c.length - 1];
			d = b[c];
			a = a(d);
			a != d && null != a && pa(b, c, {
				writable: !0,
				value: a
			})
		}
	}
	ra(function(a) {
		return a ? a : function(a, c, d) {
			var b = this.length || 0;
			0 > c && (c = Math.max(0, b + c));
			if(null == d || d > b) d = b;
			d = Number(d);
			0 > d && (d = Math.max(0, b + d));
			for(c = Number(c || 0); c < d; c++) this[c] = a;
			return this
		}
	});
	var w = "object" === typeof self && self.self === self && self || "object" === typeof global && global.l === global && global || "object" === typeof window && window.window === window && window || {};
	void 0 === w.requestAnimationFrame && (w.requestAnimationFrame = setImmediate);

	function sa() {}

	function ta(a, b) {
		var c = -1;
		return function() {
			var d = this,
				e = arguments; - 1 !== c && w.clearTimeout(c);
			c = va(function() {
				c = -1;
				a.apply(d, e)
			}, b)
		}
	}

	function va(a, b) {
		return w.setTimeout(a, b)
	}

	function wa(a) {
		return w.document.createElement(a)
	}

	function A(a) {
		throw Error(a);
	}

	function za(a, b) {
		a = "The object is frozen, so its properties cannot be set: " + a.toString();
		void 0 !== b && (a += "  to value: " + b);
		A(a)
	}

	function Aa(a, b, c, d) {
		c = null === c ? "*" : "string" === typeof c ? c : "function" === typeof c && "string" === typeof c.className ? c.className : "";
		void 0 !== d && (c += "." + d);
		A(c + " is not in the range " + b + ": " + a)
	}

	function Ba(a) {
		w.console && w.console.log(a)
	}

	function Da() {
		w.console && w.console.log("Warning: List/Map/Set constructors no longer take an argument that enforces type.Instead they take an optional collection of Values to add to the collection. See 2.0 changelog for details.")
	}

	function Ea(a) {
		return "object" === typeof a && null !== a
	}

	function Ga(a) {
		return Array.isArray(a) || w.NodeList && a instanceof w.NodeList || w.HTMLCollection && a instanceof w.HTMLCollection
	}

	function Ha(a) {
		return Array.prototype.slice.call(a)
	}

	function Ia(a, b, c) {
		Array.isArray(a) ? b >= a.length ? a.push(c) : a.splice(b, 0, c) : A("Cannot insert an object into an HTMLCollection or NodeList: " + c + " at " + b)
	}

	function Ka(a, b) {
		Array.isArray(a) ? b >= a.length ? a.pop() : a.splice(b, 1) : A("Cannot remove an object from an HTMLCollection or NodeList at " + b)
	}

	function La() {
		var a = Ma.pop();
		return void 0 === a ? [] : a
	}

	function Na(a) {
		a.length = 0;
		Ma.push(a)
	}

	function Oa(a) {
		if("function" === typeof a) {
			if(a.className) return a.className;
			if(a.name) return a.name;
			var b = a.toString();
			b = b.substring(9, b.indexOf("(")).trim();
			if("" !== b) return a._className = b
		} else if(Ea(a) && a.constructor) return Oa(a.constructor);
		return typeof a
	}

	function Qa(a) {
		var b = a;
		Ea(a) && (a.text ? b = a.text : a.name ? b = a.name : void 0 !== a.key ? b = a.key : void 0 !== a.id ? b = a.id : a.constructor === Object && (a.Text ? b = a.Text : a.Name ? b = a.Name : void 0 !== a.Key ? b = a.Key : void 0 !== a.Id ? b = a.Id : void 0 !== a.ID && (b = a.ID)));
		return void 0 === b ? "undefined" : null === b ? "null" : b.toString()
	}

	function Sa(a, b) {
		if(a.hasOwnProperty(b)) return !0;
		for(a = Object.getPrototypeOf(a); a && a !== Function;) {
			if(a.hasOwnProperty(b)) return !0;
			var c = a.Nz;
			if(c && c[b]) return !0;
			a = Object.getPrototypeOf(a)
		}
		return !1
	}

	function Ta(a, b, c) {
		Object.defineProperty(Va.prototype, a, {
			get: b,
			set: c
		})
	}

	function Wa(a) {
		for(var b = [], c = 0; 256 > c; c++) b["0123456789abcdef".charAt(c >> 4) + "0123456789abcdef".charAt(c & 15)] = String.fromCharCode(c);
		a.length % 2 && (a = "0" + a);
		c = [];
		for(var d = 0, e = 0; e < a.length; e += 2) c[d++] = b[a.substr(e, 2)];
		a = c.join("");
		a = "" === a ? "0" : a;
		b = [];
		for(c = 0; 256 > c; c++) b[c] = c;
		for(c = d = 0; 256 > c; c++) d = (d + b[c] + 119) % 256, e = b[c], b[c] = b[d], b[d] = e;
		d = c = 0;
		for(var f = "", g = 0; g < a.length; g++) c = (c + 1) % 256, d = (d + b[c]) % 256, e = b[c], b[c] = b[d], b[d] = e, f += String.fromCharCode(a.charCodeAt(g) ^ b[(b[c] + b[d]) % 256]);
		return f
	}
	var Ya = void 0 !== w.document,
		$a = void 0 !== w.navigator && 0 < w.navigator.userAgent.indexOf("MSIE 9.0"),
		ab = void 0 !== w.navigator && 0 < w.navigator.userAgent.indexOf("MSIE 10.0"),
		bb = void 0 !== w.navigator && 0 < w.navigator.userAgent.indexOf("Trident/7"),
		eb = void 0 !== w.navigator && 0 < w.navigator.userAgent.indexOf("Edge/"),
		fb = void 0 !== w.navigator && void 0 !== w.navigator.platform && 0 <= w.navigator.platform.toUpperCase().indexOf("MAC"),
		ib = void 0 !== w.navigator && void 0 !== w.navigator.platform && null !== w.navigator.platform.match(/(iPhone|iPod|iPad)/i),
		jb = !1,
		lb = null,
		pb = null,
		Ma = [];
	Object.freeze([]);
	sa.className = "Util";
	sa.Dx = "32ab5ff3b26f42dc0ed90f224c2913b5";
	sa.adym = "gojs.net";
	sa.vfo = "28e646fdb37b1981578a09";
	sa.className = "Util";

	function D(a, b, c) {
		rb(this);
		this.l = a;
		this.Ta = b;
		this.u = c
	}
	D.prototype.toString = function() {
		return "EnumValue." + this.Ta
	};

	function sb(a, b) {
		return void 0 === b || null === b || "" === b ? null : a[b]
	}
	oa.Object.defineProperties(D.prototype, {
		classType: {
			get: function() {
				return this.l
			}
		},
		name: {
			get: function() {
				return this.Ta
			}
		},
		value: {
			get: function() {
				return this.u
			}
		}
	});
	D.className = "EnumValue";

	function tb() {
		this.kw = []
	}
	tb.prototype.toString = function() {
		return this.kw.join("")
	};
	tb.prototype.add = function(a) {
		"" !== a && this.kw.push(a)
	};
	tb.className = "StringBuilder";

	function vb() {}
	vb.className = "PropertyCollection";

	function wb() {}
	wb.prototype.reset = function() {};
	wb.prototype.next = function() {
		return !1
	};
	wb.prototype.fd = function() {
		return !1
	};
	wb.prototype.first = function() {
		return null
	};
	wb.prototype.any = function() {
		return !1
	};
	wb.prototype.all = function() {
		return !0
	};
	wb.prototype.each = function() {
		return this
	};
	wb.prototype.map = function() {
		return this
	};
	wb.prototype.filter = function() {
		return this
	};
	wb.prototype.zd = function() {};
	wb.prototype.toString = function() {
		return "EmptyIterator"
	};
	oa.Object.defineProperties(wb.prototype, {
		iterator: {
			get: function() {
				return this
			}
		},
		count: {
			get: function() {
				return 0
			}
		}
	});
	wb.prototype.first = wb.prototype.first;
	wb.prototype.hasNext = wb.prototype.fd;
	wb.prototype.next = wb.prototype.next;
	wb.prototype.reset = wb.prototype.reset;
	var xb = null;
	wb.className = "EmptyIterator";
	xb = new wb;

	function yb(a) {
		this.key = -1;
		this.value = a
	}
	yb.prototype.reset = function() {
		this.key = -1
	};
	yb.prototype.next = function() {
		return -1 === this.key ? (this.key = 0, !0) : !1
	};
	yb.prototype.fd = function() {
		return this.next()
	};
	yb.prototype.first = function() {
		this.key = 0;
		return this.value
	};
	yb.prototype.any = function(a) {
		this.key = -1;
		return a(this.value)
	};
	yb.prototype.all = function(a) {
		this.key = -1;
		return a(this.value)
	};
	yb.prototype.each = function(a) {
		this.key = -1;
		a(this.value);
		return this
	};
	yb.prototype.map = function(a) {
		return new yb(a(this.value))
	};
	yb.prototype.filter = function(a) {
		return a(this.value) ? new yb(this.value) : xb
	};
	yb.prototype.zd = function() {
		this.value = null
	};
	yb.prototype.toString = function() {
		return "SingletonIterator(" + this.value + ")"
	};
	oa.Object.defineProperties(yb.prototype, {
		iterator: {
			get: function() {
				return this
			}
		},
		count: {
			get: function() {
				return 1
			}
		}
	});
	yb.prototype.first = yb.prototype.first;
	yb.prototype.hasNext = yb.prototype.fd;
	yb.prototype.next = yb.prototype.next;
	yb.prototype.reset = yb.prototype.reset;
	yb.className = "SingletonIterator";

	function zb(a) {
		this.ub = a;
		this.We = null;
		a.Ja = null;
		this.ma = a.Ba;
		this.Qa = -1
	}
	zb.prototype.reset = function() {
		var a = this.ub;
		a.Ja = null;
		this.ma = a.Ba;
		this.Qa = -1
	};
	zb.prototype.next = function() {
		var a = this.ub;
		if(a.Ba !== this.ma && 0 > this.key) return !1;
		a = a.j;
		var b = a.length,
			c = ++this.Qa,
			d = this.We;
		if(null !== d)
			for(; c < b;) {
				var e = a[c];
				if(d(e)) return this.key = this.Qa = c, this.value = e, !0;
				c++
			} else {
				if(c < b) return this.key = c, this.value = a[c], !0;
				this.zd()
			}
		return !1
	};
	zb.prototype.fd = function() {
		return this.next()
	};
	zb.prototype.first = function() {
		var a = this.ub;
		this.ma = a.Ba;
		this.Qa = 0;
		a = a.j;
		var b = a.length,
			c = this.We;
		if(null !== c) {
			for(var d = 0; d < b;) {
				var e = a[d];
				if(c(e)) return this.key = this.Qa = d, this.value = e;
				d++
			}
			return null
		}
		return 0 < b ? (a = a[0], this.key = 0, this.value = a) : null
	};
	zb.prototype.any = function(a) {
		var b = this.ub;
		b.Ja = null;
		this.Qa = -1;
		b = b.j;
		for(var c = b.length, d = this.We, e = 0; e < c; e++) {
			var f = b[e];
			if((null === d || d(f)) && a(f)) return !0
		}
		return !1
	};
	zb.prototype.all = function(a) {
		var b = this.ub;
		b.Ja = null;
		this.Qa = -1;
		b = b.j;
		for(var c = b.length, d = this.We, e = 0; e < c; e++) {
			var f = b[e];
			if((null === d || d(f)) && !a(f)) return !1
		}
		return !0
	};
	zb.prototype.each = function(a) {
		var b = this.ub;
		b.Ja = null;
		this.Qa = -1;
		b = b.j;
		for(var c = b.length, d = this.We, e = 0; e < c; e++) {
			var f = b[e];
			(null === d || d(f)) && a(f)
		}
		return this
	};
	zb.prototype.map = function(a) {
		var b = this.ub;
		b.Ja = null;
		this.Qa = -1;
		var c = [];
		b = b.j;
		for(var d = b.length, e = this.We, f = 0; f < d; f++) {
			var g = b[f];
			(null === e || e(g)) && c.push(a(g))
		}
		a = new E;
		a.j = c;
		a.nb();
		return a.iterator
	};
	zb.prototype.filter = function(a) {
		var b = this.ub;
		b.Ja = null;
		this.Qa = -1;
		var c = [];
		b = b.j;
		for(var d = b.length, e = this.We, f = 0; f < d; f++) {
			var g = b[f];
			(null === e || e(g)) && a(g) && c.push(g)
		}
		a = new E;
		a.j = c;
		a.nb();
		return a.iterator
	};
	zb.prototype.zd = function() {
		this.key = -1;
		this.value = null;
		this.ma = -1;
		this.We = null;
		this.ub.Ja = this
	};
	zb.prototype.toString = function() {
		return "ListIterator@" + this.Qa + "/" + this.ub.count
	};
	oa.Object.defineProperties(zb.prototype, {
		iterator: {
			get: function() {
				return this
			}
		},
		predicate: {
			get: function() {
				return this.We
			},
			set: function(a) {
				this.We = a
			}
		},
		count: {
			get: function() {
				var a = this.We;
				if(null !== a) {
					for(var b = 0, c = this.ub.j, d = c.length, e = 0; e < d; e++) a(c[e]) && b++;
					return b
				}
				return this.ub.j.length
			}
		}
	});
	zb.prototype.first = zb.prototype.first;
	zb.prototype.hasNext = zb.prototype.fd;
	zb.prototype.next = zb.prototype.next;
	zb.prototype.reset = zb.prototype.reset;
	zb.className = "ListIterator";

	function Ab(a) {
		this.ub = a;
		a.Og = null;
		this.ma = a.Ba;
		this.Qa = a.j.length
	}
	Ab.prototype.reset = function() {
		var a = this.ub;
		a.Og = null;
		this.ma = a.Ba;
		this.Qa = a.j.length
	};
	Ab.prototype.next = function() {
		var a = this.ub;
		if(a.Ba !== this.ma && 0 > this.key) return !1;
		var b = --this.Qa;
		if(0 <= b) return this.key = b, this.value = a.j[b], !0;
		this.zd();
		return !1
	};
	Ab.prototype.fd = function() {
		return this.next()
	};
	Ab.prototype.first = function() {
		var a = this.ub;
		this.ma = a.Ba;
		var b = a.j;
		this.Qa = a = b.length - 1;
		return 0 <= a ? (b = b[a], this.key = a, this.value = b) : null
	};
	Ab.prototype.any = function(a) {
		var b = this.ub;
		b.Og = null;
		b = b.j;
		var c = b.length;
		this.Qa = c;
		for(--c; 0 <= c; c--)
			if(a(b[c])) return !0;
		return !1
	};
	Ab.prototype.all = function(a) {
		var b = this.ub;
		b.Og = null;
		b = b.j;
		var c = b.length;
		this.Qa = c;
		for(--c; 0 <= c; c--)
			if(!a(b[c])) return !1;
		return !0
	};
	Ab.prototype.each = function(a) {
		var b = this.ub;
		b.Og = null;
		b = b.j;
		var c = b.length;
		this.Qa = c;
		for(--c; 0 <= c; c--) a(b[c]);
		return this
	};
	Ab.prototype.map = function(a) {
		var b = this.ub;
		b.Og = null;
		var c = [];
		b = b.j;
		var d = b.length;
		this.Qa = d;
		for(--d; 0 <= d; d--) c.push(a(b[d]));
		a = new E;
		a.j = c;
		a.nb();
		return a.iterator
	};
	Ab.prototype.filter = function(a) {
		var b = this.ub;
		b.Og = null;
		var c = [];
		b = b.j;
		var d = b.length;
		this.Qa = d;
		for(--d; 0 <= d; d--) {
			var e = b[d];
			a(e) && c.push(e)
		}
		a = new E;
		a.j = c;
		a.nb();
		return a.iterator
	};
	Ab.prototype.zd = function() {
		this.key = -1;
		this.value = null;
		this.ma = -1;
		this.ub.Og = this
	};
	Ab.prototype.toString = function() {
		return "ListIteratorBackwards(" + this.Qa + "/" + this.ub.count + ")"
	};
	oa.Object.defineProperties(Ab.prototype, {
		iterator: {
			get: function() {
				return this
			}
		},
		count: {
			get: function() {
				return this.ub.j.length
			}
		}
	});
	Ab.prototype.first = Ab.prototype.first;
	Ab.prototype.hasNext = Ab.prototype.fd;
	Ab.prototype.next = Ab.prototype.next;
	Ab.prototype.reset = Ab.prototype.reset;
	Ab.className = "ListIteratorBackwards";

	function E(a) {
		rb(this);
		this.v = !1;
		this.j = [];
		this.Ba = 0;
		this.Og = this.Ja = null;
		void 0 !== a && ("function" === typeof a || "string" === typeof a ? Da() : this.addAll(a))
	}
	t = E.prototype;
	t.nb = function() {
		var a = this.Ba;
		a++;
		999999999 < a && (a = 0);
		this.Ba = a
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		this.v = !1;
		return this
	};
	t.toString = function() {
		return "List()#" + Bb(this)
	};
	t.add = function(a) {
		if(null === a) return this;
		this.v && za(this, a);
		this.j.push(a);
		this.nb();
		return this
	};
	t.push = function(a) {
		this.add(a)
	};
	t.addAll = function(a) {
		if(null === a) return this;
		this.v && za(this);
		var b = this.j;
		if(Ga(a))
			for(var c = a.length, d = 0; d < c; d++) b.push(a[d]);
		else
			for(a = a.iterator; a.next();) b.push(a.value);
		this.nb();
		return this
	};
	t.clear = function() {
		this.v && za(this);
		this.j.length = 0;
		this.nb()
	};
	t.contains = function(a) {
		return null === a ? !1 : -1 !== this.j.indexOf(a)
	};
	t.has = function(a) {
		return this.contains(a)
	};
	t.indexOf = function(a) {
		return null === a ? -1 : this.j.indexOf(a)
	};
	t.N = function(a) {
		var b = this.j;
		(0 > a || a >= b.length) && Aa(a, "0 <= i < length", E, "elt:i");
		return b[a]
	};
	t.get = function(a) {
		return this.N(a)
	};
	t.kd = function(a, b) {
		var c = this.j;
		(0 > a || a >= c.length) && Aa(a, "0 <= i < length", E, "setElt:i");
		this.v && za(this, a);
		c[a] = b
	};
	t.set = function(a, b) {
		this.kd(a, b)
	};
	t.first = function() {
		var a = this.j;
		return 0 === a.length ? null : a[0]
	};
	t.bc = function() {
		var a = this.j,
			b = a.length;
		return 0 < b ? a[b - 1] : null
	};
	t.pop = function() {
		this.v && za(this);
		var a = this.j;
		return 0 < a.length ? a.pop() : null
	};
	E.prototype.any = function(a) {
		for(var b = this.j, c = b.length, d = 0; d < c; d++)
			if(a(b[d])) return !0;
		return !1
	};
	E.prototype.all = function(a) {
		for(var b = this.j, c = b.length, d = 0; d < c; d++)
			if(!a(b[d])) return !1;
		return !0
	};
	E.prototype.each = function(a) {
		for(var b = this.j, c = b.length, d = 0; d < c; d++) a(b[d]);
		return this
	};
	E.prototype.map = function(a) {
		for(var b = new E, c = [], d = this.j, e = d.length, f = 0; f < e; f++) c.push(a(d[f]));
		b.j = c;
		b.nb();
		return b
	};
	E.prototype.filter = function(a) {
		for(var b = new E, c = [], d = this.j, e = d.length, f = 0; f < e; f++) {
			var g = d[f];
			a(g) && c.push(g)
		}
		b.j = c;
		b.nb();
		return b
	};
	t = E.prototype;
	t.Nb = function(a, b) {
		0 > a && Aa(a, ">= 0", E, "insertAt:i");
		this.v && za(this, a);
		var c = this.j;
		a >= c.length ? c.push(b) : c.splice(a, 0, b);
		this.nb()
	};
	t.remove = function(a) {
		if(null === a) return !1;
		this.v && za(this, a);
		var b = this.j;
		a = b.indexOf(a);
		if(-1 === a) return !1;
		a === b.length - 1 ? b.pop() : b.splice(a, 1);
		this.nb();
		return !0
	};
	t.delete = function(a) {
		return this.remove(a)
	};
	t.qb = function(a) {
		var b = this.j;
		(0 > a || a >= b.length) && Aa(a, "0 <= i < length", E, "removeAt:i");
		this.v && za(this, a);
		a === b.length - 1 ? b.pop() : b.splice(a, 1);
		this.nb()
	};
	t.removeRange = function(a, b) {
		var c = this.j,
			d = c.length;
		if(0 > a) a = 0;
		else if(a >= d) return this;
		if(0 > b) return this;
		b >= d && (b = d - 1);
		if(a > b) return this;
		this.v && za(this);
		for(var e = a, f = b + 1; f < d;) c[e++] = c[f++];
		c.length = d - (b - a + 1);
		this.nb();
		return this
	};
	E.prototype.copy = function() {
		var a = new E,
			b = this.j;
		0 < b.length && (a.j = Array.prototype.slice.call(b));
		return a
	};
	t = E.prototype;
	t.La = function() {
		for(var a = this.j, b = this.count, c = Array(b), d = 0; d < b; d++) c[d] = a[d];
		return c
	};
	t.Nv = function() {
		for(var a = new F, b = this.j, c = this.count, d = 0; d < c; d++) a.add(b[d]);
		return a
	};
	t.sort = function(a) {
		this.v && za(this);
		this.j.sort(a);
		this.nb();
		return this
	};
	t.Mi = function(a, b, c) {
		var d = this.j,
			e = d.length;
		void 0 === b && (b = 0);
		void 0 === c && (c = e);
		this.v && za(this);
		var f = c - b;
		if(1 >= f) return this;
		(0 > b || b >= e - 1) && Aa(b, "0 <= from < length", E, "sortRange:from");
		if(2 === f) return c = d[b], e = d[b + 1], 0 < a(c, e) && (d[b] = e, d[b + 1] = c, this.nb()), this;
		if(0 === b)
			if(c >= e) d.sort(a);
			else
				for(b = d.slice(0, c), b.sort(a), a = 0; a < c; a++) d[a] = b[a];
		else if(c >= e)
			for(c = d.slice(b), c.sort(a), a = b; a < e; a++) d[a] = c[a - b];
		else
			for(e = d.slice(b, c), e.sort(a), a = b; a < c; a++) d[a] = e[a - b];
		this.nb();
		return this
	};
	t.reverse = function() {
		this.v && za(this);
		this.j.reverse();
		this.nb();
		return this
	};
	oa.Object.defineProperties(E.prototype, {
		_dataArray: {
			get: function() {
				return this.j
			}
		},
		count: {
			get: function() {
				return this.j.length
			}
		},
		size: {
			get: function() {
				return this.j.length
			}
		},
		length: {
			get: function() {
				return this.j.length
			}
		},
		iterator: {
			get: function() {
				if(0 >= this.j.length) return xb;
				var a = this.Ja;
				return null !== a ? (a.reset(), a) : new zb(this)
			}
		},
		iteratorBackwards: {
			get: function() {
				if(0 >= this.j.length) return xb;
				var a = this.Og;
				return null !== a ? (a.reset(), a) : new Ab(this)
			}
		}
	});
	E.prototype.reverse = E.prototype.reverse;
	E.prototype.sortRange = E.prototype.Mi;
	E.prototype.sort = E.prototype.sort;
	E.prototype.toSet = E.prototype.Nv;
	E.prototype.toArray = E.prototype.La;
	E.prototype.removeRange = E.prototype.removeRange;
	E.prototype.removeAt = E.prototype.qb;
	E.prototype["delete"] = E.prototype.delete;
	E.prototype.remove = E.prototype.remove;
	E.prototype.insertAt = E.prototype.Nb;
	E.prototype.pop = E.prototype.pop;
	E.prototype.last = E.prototype.bc;
	E.prototype.first = E.prototype.first;
	E.prototype.set = E.prototype.set;
	E.prototype.setElt = E.prototype.kd;
	E.prototype.get = E.prototype.get;
	E.prototype.elt = E.prototype.N;
	E.prototype.indexOf = E.prototype.indexOf;
	E.prototype.has = E.prototype.has;
	E.prototype.contains = E.prototype.contains;
	E.prototype.clear = E.prototype.clear;
	E.prototype.addAll = E.prototype.addAll;
	E.prototype.push = E.prototype.push;
	E.prototype.add = E.prototype.add;
	E.prototype.thaw = E.prototype.ha;
	E.prototype.freeze = E.prototype.freeze;
	E.className = "List";

	function Cb(a) {
		this.eg = a;
		a.Ja = null;
		this.ma = a.Ba;
		this.na = null
	}
	Cb.prototype.reset = function() {
		var a = this.eg;
		a.Ja = null;
		this.ma = a.Ba;
		this.na = null
	};
	Cb.prototype.next = function() {
		var a = this.eg;
		if(a.Ba !== this.ma && null === this.key) return !1;
		var b = this.na;
		b = null === b ? a.fa : b.oa;
		if(null !== b) return this.na = b, this.value = b.value, this.key = b.key, !0;
		this.zd();
		return !1
	};
	Cb.prototype.fd = function() {
		return this.next()
	};
	Cb.prototype.first = function() {
		var a = this.eg;
		this.ma = a.Ba;
		a = a.fa;
		if(null !== a) {
			this.na = a;
			var b = a.value;
			this.key = a.key;
			return this.value = b
		}
		return null
	};
	Cb.prototype.any = function(a) {
		var b = this.eg;
		this.na = b.Ja = null;
		for(b = b.fa; null !== b;) {
			if(a(b.value)) return !0;
			b = b.oa
		}
		return !1
	};
	Cb.prototype.all = function(a) {
		var b = this.eg;
		this.na = b.Ja = null;
		for(b = b.fa; null !== b;) {
			if(!a(b.value)) return !1;
			b = b.oa
		}
		return !0
	};
	Cb.prototype.each = function(a) {
		var b = this.eg;
		this.na = b.Ja = null;
		for(b = b.fa; null !== b;) a(b.value), b = b.oa;
		return this
	};
	Cb.prototype.map = function(a) {
		var b = this.eg;
		b.Ja = null;
		var c = new E;
		for(b = b.fa; null !== b;) c.add(a(b.value)), b = b.oa;
		return c.iterator
	};
	Cb.prototype.filter = function(a) {
		var b = this.eg;
		b.Ja = null;
		var c = new E;
		for(b = b.fa; null !== b;) {
			var d = b.value;
			a(d) && c.add(d);
			b = b.oa
		}
		return c.iterator
	};
	Cb.prototype.zd = function() {
		this.value = this.key = null;
		this.ma = -1;
		this.eg.Ja = this
	};
	Cb.prototype.toString = function() {
		return null !== this.na ? "SetIterator@" + this.na.value : "SetIterator"
	};
	oa.Object.defineProperties(Cb.prototype, {
		iterator: {
			get: function() {
				return this
			}
		},
		count: {
			get: function() {
				return this.eg.Gb
			}
		}
	});
	Cb.prototype.first = Cb.prototype.first;
	Cb.prototype.hasNext = Cb.prototype.fd;
	Cb.prototype.next = Cb.prototype.next;
	Cb.prototype.reset = Cb.prototype.reset;
	Cb.className = "SetIterator";

	function F(a) {
		rb(this);
		this.v = !1;
		this.Hb = {};
		this.Gb = 0;
		this.Ja = null;
		this.Ba = 0;
		this.Re = this.fa = null;
		void 0 !== a && ("function" === typeof a || "string" === typeof a ? Da() : this.addAll(a))
	}
	t = F.prototype;
	t.nb = function() {
		var a = this.Ba;
		a++;
		999999999 < a && (a = 0);
		this.Ba = a
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		this.v = !1;
		return this
	};
	t.toString = function() {
		return "Set()#" + Bb(this)
	};
	t.add = function(a) {
		if(null === a) return this;
		this.v && za(this, a);
		var b = a;
		Ea(a) && (b = Fb(a));
		void 0 === this.Hb[b] && (this.Gb++, a = new Gb(a, a), this.Hb[b] = a, b = this.Re, null === b ? this.fa = a : (a.ol = b, b.oa = a), this.Re = a, this.nb());
		return this
	};
	t.addAll = function(a) {
		if(null === a) return this;
		this.v && za(this);
		if(Ga(a))
			for(var b = a.length, c = 0; c < b; c++) this.add(a[c]);
		else
			for(a = a.iterator; a.next();) this.add(a.value);
		return this
	};
	t.contains = function(a) {
		if(null === a) return !1;
		var b = a;
		return Ea(a) && (b = Bb(a), void 0 === b) ? !1 : void 0 !== this.Hb[b]
	};
	t.has = function(a) {
		return this.contains(a)
	};
	t.py = function(a) {
		if(null === a) return !0;
		for(a = a.iterator; a.next();)
			if(!this.contains(a.value)) return !1;
		return !0
	};
	t.qy = function(a) {
		if(null === a) return !0;
		for(a = a.iterator; a.next();)
			if(this.contains(a.value)) return !0;
		return !1
	};
	t.first = function() {
		var a = this.fa;
		return null === a ? null : a.value
	};
	F.prototype.any = function(a) {
		for(var b = this.fa; null !== b;) {
			if(a(b.value)) return !0;
			b = b.oa
		}
		return !1
	};
	F.prototype.all = function(a) {
		for(var b = this.fa; null !== b;) {
			if(!a(b.value)) return !1;
			b = b.oa
		}
		return !0
	};
	F.prototype.each = function(a) {
		for(var b = this.fa; null !== b;) a(b.value), b = b.oa;
		return this
	};
	F.prototype.map = function(a) {
		for(var b = new F, c = this.fa; null !== c;) b.add(a(c.value)), c = c.oa;
		return b
	};
	F.prototype.filter = function(a) {
		for(var b = new F, c = this.fa; null !== c;) {
			var d = c.value;
			a(d) && b.add(d);
			c = c.oa
		}
		return b
	};
	t = F.prototype;
	t.remove = function(a) {
		if(null === a) return !1;
		this.v && za(this, a);
		var b = a;
		if(Ea(a) && (b = Bb(a), void 0 === b)) return !1;
		a = this.Hb[b];
		if(void 0 === a) return !1;
		var c = a.oa,
			d = a.ol;
		null !== c && (c.ol = d);
		null !== d && (d.oa = c);
		this.fa === a && (this.fa = c);
		this.Re === a && (this.Re = d);
		delete this.Hb[b];
		this.Gb--;
		this.nb();
		return !0
	};
	t.delete = function(a) {
		return this.remove(a)
	};
	t.cq = function(a) {
		if(null === a) return this;
		this.v && za(this);
		if(Ga(a))
			for(var b = a.length, c = 0; c < b; c++) this.remove(a[c]);
		else
			for(a = a.iterator; a.next();) this.remove(a.value);
		return this
	};
	t.Az = function(a) {
		if(null === a || 0 === this.count) return this;
		this.v && za(this);
		var b = new F;
		b.addAll(a);
		a = [];
		for(var c = this.iterator; c.next();) {
			var d = c.value;
			b.contains(d) || a.push(d)
		}
		this.cq(a);
		return this
	};
	t.clear = function() {
		this.v && za(this);
		this.Hb = {};
		this.Gb = 0;
		null !== this.Ja && this.Ja.reset();
		this.Re = this.fa = null;
		this.nb()
	};
	F.prototype.copy = function() {
		var a = new F,
			b = this.Hb,
			c;
		for(c in b) a.add(b[c].value);
		return a
	};
	F.prototype.La = function() {
		var a = Array(this.Gb),
			b = this.Hb,
			c = 0,
			d;
		for(d in b) a[c] = b[d].value, c++;
		return a
	};
	F.prototype.Mv = function() {
		var a = new E,
			b = this.Hb,
			c;
		for(c in b) a.add(b[c].value);
		return a
	};

	function rb(a) {
		a.__gohashid = Ib++
	}

	function Fb(a) {
		var b = a.__gohashid;
		void 0 === b && (b = Ib++, a.__gohashid = b);
		return b
	}

	function Bb(a) {
		return a.__gohashid
	}
	oa.Object.defineProperties(F.prototype, {
		count: {
			get: function() {
				return this.Gb
			}
		},
		size: {
			get: function() {
				return this.Gb
			}
		},
		iterator: {
			get: function() {
				if(0 >= this.Gb) return xb;
				var a = this.Ja;
				return null !== a ? (a.reset(), a) : new Cb(this)
			}
		}
	});
	F.prototype.toList = F.prototype.Mv;
	F.prototype.toArray = F.prototype.La;
	F.prototype.clear = F.prototype.clear;
	F.prototype.retainAll = F.prototype.Az;
	F.prototype.removeAll = F.prototype.cq;
	F.prototype["delete"] = F.prototype.delete;
	F.prototype.remove = F.prototype.remove;
	F.prototype.first = F.prototype.first;
	F.prototype.containsAny = F.prototype.qy;
	F.prototype.containsAll = F.prototype.py;
	F.prototype.has = F.prototype.has;
	F.prototype.contains = F.prototype.contains;
	F.prototype.addAll = F.prototype.addAll;
	F.prototype.add = F.prototype.add;
	F.prototype.thaw = F.prototype.ha;
	F.prototype.freeze = F.prototype.freeze;
	var Ib = 1;
	F.className = "Set";
	F.uniqueHash = rb;
	F.hashIdUnique = Fb;
	F.hashId = Bb;

	function Jb(a) {
		this.ja = a;
		this.ma = a.Ba;
		this.na = null
	}
	Jb.prototype.reset = function() {
		this.ma = this.ja.Ba;
		this.na = null
	};
	Jb.prototype.next = function() {
		var a = this.ja;
		if(a.Ba !== this.ma && null === this.key) return !1;
		var b = this.na;
		b = null === b ? a.fa : b.oa;
		if(null !== b) return this.na = b, this.value = this.key = a = b.key, !0;
		this.zd();
		return !1
	};
	Jb.prototype.fd = function() {
		return this.next()
	};
	Jb.prototype.first = function() {
		var a = this.ja;
		this.ma = a.Ba;
		a = a.fa;
		return null !== a ? (this.na = a, this.value = this.key = a = a.key) : null
	};
	Jb.prototype.any = function(a) {
		var b = this.ja;
		this.na = null;
		for(b = b.fa; null !== b;) {
			if(a(b.key)) return !0;
			b = b.oa
		}
		return !1
	};
	Jb.prototype.all = function(a) {
		var b = this.ja;
		this.na = null;
		for(b = b.fa; null !== b;) {
			if(!a(b.key)) return !1;
			b = b.oa
		}
		return !0
	};
	Jb.prototype.each = function(a) {
		var b = this.ja;
		this.na = null;
		for(b = b.fa; null !== b;) a(b.key), b = b.oa;
		return this
	};
	Jb.prototype.map = function(a) {
		var b = this.ja;
		this.na = null;
		var c = new E;
		for(b = b.fa; null !== b;) c.add(a(b.key)), b = b.oa;
		return c.iterator
	};
	Jb.prototype.filter = function(a) {
		var b = this.ja;
		this.na = null;
		var c = new E;
		for(b = b.fa; null !== b;) {
			var d = b.key;
			a(d) && c.add(d);
			b = b.oa
		}
		return c.iterator
	};
	Jb.prototype.zd = function() {
		this.value = this.key = null;
		this.ma = -1
	};
	Jb.prototype.toString = function() {
		return null !== this.na ? "MapKeySetIterator@" + this.na.value : "MapKeySetIterator"
	};
	oa.Object.defineProperties(Jb.prototype, {
		iterator: {
			get: function() {
				return this
			}
		},
		count: {
			get: function() {
				return this.ja.Gb
			}
		}
	});
	Jb.prototype.first = Jb.prototype.first;
	Jb.prototype.hasNext = Jb.prototype.fd;
	Jb.prototype.next = Jb.prototype.next;
	Jb.prototype.reset = Jb.prototype.reset;
	Jb.className = "MapKeySetIterator";

	function Kb(a) {
		F.call(this);
		rb(this);
		this.v = !0;
		this.ja = a
	}
	na(Kb, F);
	t = Kb.prototype;
	t.freeze = function() {
		return this
	};
	t.ha = function() {
		return this
	};
	t.toString = function() {
		return "MapKeySet(" + this.ja.toString() + ")"
	};
	t.add = function() {
		A("This Set is read-only: " + this.toString());
		return this
	};
	t.contains = function(a) {
		return this.ja.contains(a)
	};
	t.has = function(a) {
		return this.contains(a)
	};
	t.remove = function() {
		A("This Set is read-only: " + this.toString());
		return !1
	};
	t.delete = function(a) {
		return this.remove(a)
	};
	t.clear = function() {
		A("This Set is read-only: " + this.toString())
	};
	t.first = function() {
		var a = this.ja.fa;
		return null !== a ? a.key : null
	};
	Kb.prototype.any = function(a) {
		for(var b = this.ja.fa; null !== b;) {
			if(a(b.key)) return !0;
			b = b.oa
		}
		return !1
	};
	Kb.prototype.all = function(a) {
		for(var b = this.ja.fa; null !== b;) {
			if(!a(b.key)) return !1;
			b = b.oa
		}
		return !0
	};
	Kb.prototype.each = function(a) {
		for(var b = this.ja.fa; null !== b;) a(b.key), b = b.oa;
		return this
	};
	Kb.prototype.map = function(a) {
		for(var b = new F, c = this.ja.fa; null !== c;) b.add(a(c.key)), c = c.oa;
		return b
	};
	Kb.prototype.filter = function(a) {
		for(var b = new F, c = this.ja.fa; null !== c;) {
			var d = c.key;
			a(d) && b.add(d);
			c = c.oa
		}
		return b
	};
	Kb.prototype.copy = function() {
		return new Kb(this.ja)
	};
	Kb.prototype.Nv = function() {
		var a = new F,
			b = this.ja.Hb,
			c;
		for(c in b) a.add(b[c].key);
		return a
	};
	Kb.prototype.La = function() {
		var a = this.ja.Hb,
			b = Array(this.ja.Gb),
			c = 0,
			d;
		for(d in a) b[c] = a[d].key, c++;
		return b
	};
	Kb.prototype.Mv = function() {
		var a = new E,
			b = this.ja.Hb,
			c;
		for(c in b) a.add(b[c].key);
		return a
	};
	oa.Object.defineProperties(Kb.prototype, {
		count: {
			get: function() {
				return this.ja.Gb
			}
		},
		size: {
			get: function() {
				return this.ja.Gb
			}
		},
		iterator: {
			get: function() {
				return 0 >= this.ja.Gb ? xb : new Jb(this.ja)
			}
		}
	});
	Kb.prototype.toList = Kb.prototype.Mv;
	Kb.prototype.toArray = Kb.prototype.La;
	Kb.prototype.toSet = Kb.prototype.Nv;
	Kb.prototype.first = Kb.prototype.first;
	Kb.prototype.clear = Kb.prototype.clear;
	Kb.prototype["delete"] = Kb.prototype.delete;
	Kb.prototype.remove = Kb.prototype.remove;
	Kb.prototype.has = Kb.prototype.has;
	Kb.prototype.contains = Kb.prototype.contains;
	Kb.prototype.add = Kb.prototype.add;
	Kb.prototype.thaw = Kb.prototype.ha;
	Kb.prototype.freeze = Kb.prototype.freeze;
	Kb.className = "MapKeySet";

	function Lb(a) {
		this.ja = a;
		a.Qe = null;
		this.ma = a.Ba;
		this.na = null
	}
	Lb.prototype.reset = function() {
		var a = this.ja;
		a.Qe = null;
		this.ma = a.Ba;
		this.na = null
	};
	Lb.prototype.next = function() {
		var a = this.ja;
		if(a.Ba !== this.ma && null === this.key) return !1;
		var b = this.na;
		b = null === b ? a.fa : b.oa;
		if(null !== b) return this.na = b, this.value = b.value, this.key = b.key, !0;
		this.zd();
		return !1
	};
	Lb.prototype.fd = function() {
		return this.next()
	};
	Lb.prototype.first = function() {
		var a = this.ja;
		this.ma = a.Ba;
		a = a.fa;
		if(null !== a) {
			this.na = a;
			var b = a.value;
			this.key = a.key;
			return this.value = b
		}
		return null
	};
	Lb.prototype.any = function(a) {
		var b = this.ja;
		this.na = b.Qe = null;
		for(b = b.fa; null !== b;) {
			if(a(b.value)) return !0;
			b = b.oa
		}
		return !1
	};
	Lb.prototype.all = function(a) {
		var b = this.ja;
		this.na = b.Qe = null;
		for(b = b.fa; null !== b;) {
			if(!a(b.value)) return !1;
			b = b.oa
		}
		return !0
	};
	Lb.prototype.each = function(a) {
		var b = this.ja;
		this.na = b.Qe = null;
		for(b = b.fa; null !== b;) a(b.value), b = b.oa;
		return this
	};
	Lb.prototype.map = function(a) {
		var b = this.ja;
		this.na = b.Qe = null;
		var c = new E;
		for(b = b.fa; null !== b;) c.add(a(b.value)), b = b.oa;
		return c.iterator
	};
	Lb.prototype.filter = function(a) {
		var b = this.ja;
		this.na = b.Qe = null;
		var c = new E;
		for(b = b.fa; null !== b;) {
			var d = b.value;
			a(d) && c.add(d);
			b = b.oa
		}
		return c.iterator
	};
	Lb.prototype.zd = function() {
		this.value = this.key = null;
		this.ma = -1;
		this.ja.Qe = this
	};
	Lb.prototype.toString = function() {
		return null !== this.na ? "MapValueSetIterator@" + this.na.value : "MapValueSetIterator"
	};
	oa.Object.defineProperties(Lb.prototype, {
		iterator: {
			get: function() {
				return this
			}
		},
		count: {
			get: function() {
				return this.ja.Gb
			}
		}
	});
	Lb.prototype.first = Lb.prototype.first;
	Lb.prototype.hasNext = Lb.prototype.fd;
	Lb.prototype.next = Lb.prototype.next;
	Lb.prototype.reset = Lb.prototype.reset;
	Lb.className = "MapValueSetIterator";

	function Gb(a, b) {
		this.key = a;
		this.value = b;
		this.ol = this.oa = null
	}
	Gb.prototype.toString = function() {
		return "{" + this.key + ":" + this.value + "}"
	};
	Gb.className = "KeyValuePair";

	function Mb(a) {
		this.ja = a;
		a.Ja = null;
		this.ma = a.Ba;
		this.na = null
	}
	Mb.prototype.reset = function() {
		var a = this.ja;
		a.Ja = null;
		this.ma = a.Ba;
		this.na = null
	};
	Mb.prototype.next = function() {
		var a = this.ja;
		if(a.Ba !== this.ma && null === this.key) return !1;
		var b = this.na;
		b = null === b ? a.fa : b.oa;
		if(null !== b) return this.na = b, this.key = b.key, this.value = b.value, !0;
		this.zd();
		return !1
	};
	Mb.prototype.fd = function() {
		return this.next()
	};
	Mb.prototype.first = function() {
		var a = this.ja;
		this.ma = a.Ba;
		a = a.fa;
		return null !== a ? (this.na = a, this.key = a.key, this.value = a.value, a) : null
	};
	Mb.prototype.any = function(a) {
		var b = this.ja;
		this.na = b.Ja = null;
		for(b = b.fa; null !== b;) {
			if(a(b)) return !0;
			b = b.oa
		}
		return !1
	};
	Mb.prototype.all = function(a) {
		var b = this.ja;
		this.na = b.Ja = null;
		for(b = b.fa; null !== b;) {
			if(!a(b)) return !1;
			b = b.oa
		}
		return !0
	};
	Mb.prototype.each = function(a) {
		var b = this.ja;
		this.na = b.Ja = null;
		for(b = b.fa; null !== b;) a(b), b = b.oa;
		return this
	};
	Mb.prototype.map = function(a) {
		var b = this.ja;
		this.na = b.Ja = null;
		var c = new E;
		for(b = b.fa; null !== b;) c.add(a(b)), b = b.oa;
		return c.iterator
	};
	Mb.prototype.filter = function(a) {
		var b = this.ja;
		this.na = b.Ja = null;
		var c = new E;
		for(b = b.fa; null !== b;) a(b) && c.add(b), b = b.oa;
		return c.iterator
	};
	Mb.prototype.zd = function() {
		this.value = this.key = null;
		this.ma = -1;
		this.ja.Ja = this
	};
	Mb.prototype.toString = function() {
		return null !== this.na ? "MapIterator@" + this.na : "MapIterator"
	};
	oa.Object.defineProperties(Mb.prototype, {
		iterator: {
			get: function() {
				return this
			}
		},
		count: {
			get: function() {
				return this.ja.Gb
			}
		}
	});
	Mb.prototype.first = Mb.prototype.first;
	Mb.prototype.hasNext = Mb.prototype.fd;
	Mb.prototype.next = Mb.prototype.next;
	Mb.prototype.reset = Mb.prototype.reset;
	Mb.className = "MapIterator";

	function Nb(a) {
		rb(this);
		this.v = !1;
		this.Hb = {};
		this.Gb = 0;
		this.Qe = this.Ja = null;
		this.Ba = 0;
		this.Re = this.fa = null;
		void 0 !== a && ("function" === typeof a || "string" === typeof a ? Da() : this.addAll(a))
	}
	t = Nb.prototype;
	t.nb = function() {
		var a = this.Ba;
		a++;
		999999999 < a && (a = 0);
		this.Ba = a
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		this.v = !1;
		return this
	};
	t.toString = function() {
		return "Map()#" + Bb(this)
	};
	t.add = function(a, b) {
		this.v && za(this, a);
		var c = a;
		Ea(a) && (c = Fb(a));
		var d = this.Hb[c];
		void 0 === d ? (this.Gb++, a = new Gb(a, b), this.Hb[c] = a, c = this.Re, null === c ? this.fa = a : (a.ol = c, c.oa = a), this.Re = a, this.nb()) : d.value = b;
		return this
	};
	t.set = function(a, b) {
		return this.add(a, b)
	};
	t.addAll = function(a) {
		if(null === a) return this;
		if(Ga(a))
			for(var b = a.length, c = 0; c < b; c++) {
				var d = a[c];
				this.add(d.key, d.value)
			} else
				for(a = a.iterator; a.next();) b = a.value, this.add(b.key, b.value);
		return this
	};
	t.first = function() {
		return this.fa
	};
	Nb.prototype.any = function(a) {
		for(var b = this.fa; null !== b;) {
			if(a(b)) return !0;
			b = b.oa
		}
		return !1
	};
	Nb.prototype.all = function(a) {
		for(var b = this.fa; null !== b;) {
			if(!a(b)) return !1;
			b = b.oa
		}
		return !0
	};
	Nb.prototype.each = function(a) {
		for(var b = this.fa; null !== b;) a(b), b = b.oa;
		return this
	};
	Nb.prototype.map = function(a) {
		for(var b = new Nb, c = this.fa; null !== c;) b.add(c.key, a(c)), c = c.oa;
		return b
	};
	Nb.prototype.filter = function(a) {
		for(var b = new Nb, c = this.fa; null !== c;) a(c) && b.add(c.key, c.value), c = c.oa;
		return b
	};
	t = Nb.prototype;
	t.contains = function(a) {
		var b = a;
		return Ea(a) && (b = Bb(a), void 0 === b) ? !1 : void 0 !== this.Hb[b]
	};
	t.has = function(a) {
		return this.contains(a)
	};
	t.J = function(a) {
		var b = a;
		if(Ea(a) && (b = Bb(a), void 0 === b)) return null;
		a = this.Hb[b];
		return void 0 === a ? null : a.value
	};
	t.get = function(a) {
		return this.J(a)
	};
	t.remove = function(a) {
		if(null === a) return !1;
		this.v && za(this, a);
		var b = a;
		if(Ea(a) && (b = Bb(a), void 0 === b)) return !1;
		a = this.Hb[b];
		if(void 0 === a) return !1;
		var c = a.oa,
			d = a.ol;
		null !== c && (c.ol = d);
		null !== d && (d.oa = c);
		this.fa === a && (this.fa = c);
		this.Re === a && (this.Re = d);
		delete this.Hb[b];
		this.Gb--;
		this.nb();
		return !0
	};
	t.delete = function(a) {
		return this.remove(a)
	};
	t.clear = function() {
		this.v && za(this);
		this.Hb = {};
		this.Gb = 0;
		null !== this.Ja && this.Ja.reset();
		null !== this.Qe && this.Qe.reset();
		this.Re = this.fa = null;
		this.nb()
	};
	Nb.prototype.copy = function() {
		var a = new Nb,
			b = this.Hb,
			c;
		for(c in b) {
			var d = b[c];
			a.add(d.key, d.value)
		}
		return a
	};
	Nb.prototype.La = function() {
		var a = this.Hb,
			b = Array(this.Gb),
			c = 0,
			d;
		for(d in a) {
			var e = a[d];
			b[c] = new Gb(e.key, e.value);
			c++
		}
		return b
	};
	Nb.prototype.Zd = function() {
		return new Kb(this)
	};
	oa.Object.defineProperties(Nb.prototype, {
		count: {
			get: function() {
				return this.Gb
			}
		},
		size: {
			get: function() {
				return this.Gb
			}
		},
		iterator: {
			get: function() {
				if(0 >= this.count) return xb;
				var a = this.Ja;
				return null !== a ? (a.reset(), a) : new Mb(this)
			}
		},
		iteratorKeys: {
			get: function() {
				return 0 >= this.count ? xb : new Jb(this)
			}
		},
		iteratorValues: {
			get: function() {
				if(0 >= this.count) return xb;
				var a = this.Qe;
				return null !== a ? (a.reset(), a) : new Lb(this)
			}
		}
	});
	Nb.prototype.toKeySet = Nb.prototype.Zd;
	Nb.prototype.toArray = Nb.prototype.La;
	Nb.prototype.clear = Nb.prototype.clear;
	Nb.prototype["delete"] = Nb.prototype.delete;
	Nb.prototype.remove = Nb.prototype.remove;
	Nb.prototype.get = Nb.prototype.get;
	Nb.prototype.getValue = Nb.prototype.J;
	Nb.prototype.has = Nb.prototype.has;
	Nb.prototype.contains = Nb.prototype.contains;
	Nb.prototype.first = Nb.prototype.first;
	Nb.prototype.addAll = Nb.prototype.addAll;
	Nb.prototype.set = Nb.prototype.set;
	Nb.prototype.add = Nb.prototype.add;
	Nb.prototype.thaw = Nb.prototype.ha;
	Nb.prototype.freeze = Nb.prototype.freeze;
	Nb.className = "Map";

	function G(a, b) {
		void 0 === a ? this.D = this.C = 0 : "number" === typeof a && "number" === typeof b ? (this.C = a, this.D = b) : A("Invalid arguments to Point constructor: " + a + ", " + b);
		this.v = !1
	}
	G.prototype.assign = function(a) {
		this.C = a.C;
		this.D = a.D;
		return this
	};
	G.prototype.h = function(a, b) {
		this.C = a;
		this.D = b;
		return this
	};
	G.prototype.rg = function(a, b) {
		this.C = a;
		this.D = b;
		return this
	};
	G.prototype.set = function(a) {
		this.C = a.C;
		this.D = a.D;
		return this
	};
	G.prototype.copy = function() {
		var a = new G;
		a.C = this.C;
		a.D = this.D;
		return a
	};
	t = G.prototype;
	t.ga = function() {
		this.v = !0;
		Object.freeze(this);
		return this
	};
	t.I = function() {
		return Object.isFrozen(this) ? this : this.copy().freeze()
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		Object.isFrozen(this) && A("cannot thaw constant: " + this);
		this.v = !1;
		return this
	};

	function Rb(a) {
		if("string" === typeof a) {
			a = a.split(" ");
			for(var b = 0, c = 0;
				"" === a[b];) b++;
			var d = a[b++];
			d && (c = parseFloat(d));
			for(var e = 0;
				"" === a[b];) b++;
			(d = a[b++]) && (e = parseFloat(d));
			return new G(c, e)
		}
		return new G
	}

	function Sb(a) {
		return a.x.toString() + " " + a.y.toString()
	}
	t.toString = function() {
		return "Point(" + this.x + "," + this.y + ")"
	};
	t.A = function(a) {
		return a instanceof G ? this.C === a.x && this.D === a.y : !1
	};
	t.yi = function(a, b) {
		return this.C === a && this.D === b
	};
	t.Oa = function(a) {
		return H.w(this.C, a.x) && H.w(this.D, a.y)
	};
	t.add = function(a) {
		this.C += a.x;
		this.D += a.y;
		return this
	};
	t.Ie = function(a) {
		this.C -= a.x;
		this.D -= a.y;
		return this
	};
	t.offset = function(a, b) {
		this.C += a;
		this.D += b;
		return this
	};
	G.prototype.rotate = function(a) {
		if(0 === a) return this;
		var b = this.C,
			c = this.D;
		if(0 === b && 0 === c) return this;
		360 <= a ? a -= 360 : 0 > a && (a += 360);
		if(90 === a) {
			a = 0;
			var d = 1
		} else 180 === a ? (a = -1, d = 0) : 270 === a ? (a = 0, d = -1) : (d = a * Math.PI / 180, a = Math.cos(d), d = Math.sin(d));
		this.C = a * b - d * c;
		this.D = d * b + a * c;
		return this
	};
	t = G.prototype;
	t.scale = function(a, b) {
		this.C *= a;
		this.D *= b;
		return this
	};
	t.Be = function(a) {
		var b = a.x - this.C;
		a = a.y - this.D;
		return b * b + a * a
	};
	t.ed = function(a, b) {
		a -= this.C;
		b -= this.D;
		return a * a + b * b
	};
	t.normalize = function() {
		var a = this.C,
			b = this.D,
			c = Math.sqrt(a * a + b * b);
		0 < c && (this.C = a / c, this.D = b / c);
		return this
	};
	t.Na = function(a) {
		return Tb(a.x - this.C, a.y - this.D)
	};
	t.direction = function(a, b) {
		return Tb(a - this.C, b - this.D)
	};

	function Tb(a, b) {
		if(0 === a) return 0 < b ? 90 : 0 > b ? 270 : 0;
		if(0 === b) return 0 < a ? 0 : 180;
		if(isNaN(a) || isNaN(b)) return 0;
		var c = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
		0 > a ? c = 0 > b ? c + 180 : 180 - c : 0 > b && (c = 360 - c);
		return c
	}
	t.vz = function(a, b, c, d) {
		H.Ii(a, b, c, d, this.C, this.D, this);
		return this
	};
	t.wz = function(a, b) {
		H.Ii(a.x, a.y, b.x, b.y, this.C, this.D, this);
		return this
	};
	t.Fz = function(a, b, c, d) {
		H.Np(this.C, this.D, a, b, c, d, this);
		return this
	};
	t.Gz = function(a, b) {
		H.Np(this.C, this.D, a.x, a.y, b.width, b.height, this);
		return this
	};
	t.Li = function(a, b) {
		this.C = a.x + b.x * a.width + b.offsetX;
		this.D = a.y + b.y * a.height + b.offsetY;
		return this
	};
	t.kk = function(a, b, c, d, e) {
		this.C = a + e.x * c + e.offsetX;
		this.D = b + e.y * d + e.offsetY;
		return this
	};
	t.transform = function(a) {
		a.ta(this);
		return this
	};

	function Ub(a, b) {
		b.Wd(a);
		return a
	}

	function Yb(a, b, c, d, e, f) {
		var g = e - c,
			h = f - d,
			k = g * g + h * h;
		c -= a;
		d -= b;
		var l = -c * g - d * h;
		if(0 >= l || l >= k) return g = e - a, h = f - b, Math.min(c * c + d * d, g * g + h * h);
		a = g * d - h * c;
		return a * a / k
	}

	function Zb(a, b, c, d) {
		a = c - a;
		b = d - b;
		return a * a + b * b
	}

	function $b(a, b, c, d) {
		a = c - a;
		b = d - b;
		if(0 === a) return 0 < b ? 90 : 0 > b ? 270 : 0;
		if(0 === b) return 0 < a ? 0 : 180;
		if(isNaN(a) || isNaN(b)) return 0;
		d = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
		0 > a ? d = 0 > b ? d + 180 : 180 - d : 0 > b && (d = 360 - d);
		return d
	}
	t.s = function() {
		return isFinite(this.x) && isFinite(this.y)
	};
	G.alloc = function() {
		var a = ac.pop();
		return void 0 === a ? new G : a
	};
	G.allocAt = function(a, b) {
		var c = ac.pop();
		if(void 0 === c) return new G(a, b);
		c.x = a;
		c.y = b;
		return c
	};
	G.free = function(a) {
		ac.push(a)
	};
	oa.Object.defineProperties(G.prototype, {
		x: {
			get: function() {
				return this.C
			},
			set: function(a) {
				this.C = a
			}
		},
		y: {
			get: function() {
				return this.D
			},
			set: function(a) {
				this.D = a
			}
		}
	});
	G.prototype.isReal = G.prototype.s;
	G.prototype.setSpot = G.prototype.kk;
	G.prototype.setRectSpot = G.prototype.Li;
	G.prototype.snapToGridPoint = G.prototype.Gz;
	G.prototype.snapToGrid = G.prototype.Fz;
	G.prototype.projectOntoLineSegmentPoint = G.prototype.wz;
	G.prototype.projectOntoLineSegment = G.prototype.vz;
	G.prototype.direction = G.prototype.direction;
	G.prototype.directionPoint = G.prototype.Na;
	G.prototype.normalize = G.prototype.normalize;
	G.prototype.distanceSquared = G.prototype.ed;
	G.prototype.distanceSquaredPoint = G.prototype.Be;
	G.prototype.scale = G.prototype.scale;
	G.prototype.rotate = G.prototype.rotate;
	G.prototype.offset = G.prototype.offset;
	G.prototype.subtract = G.prototype.Ie;
	G.prototype.add = G.prototype.add;
	G.prototype.equalsApprox = G.prototype.Oa;
	G.prototype.equalTo = G.prototype.yi;
	G.prototype.equals = G.prototype.A;
	G.prototype.set = G.prototype.set;
	G.prototype.setTo = G.prototype.rg;
	var bc = null,
		cc = null,
		dc = null,
		ec = null,
		fc = null,
		ac = [];
	G.className = "Point";
	G.parse = Rb;
	G.stringify = Sb;
	G.distanceLineSegmentSquared = Yb;
	G.distanceSquared = Zb;
	G.direction = $b;
	G.Origin = bc = (new G(0, 0)).ga();
	G.InfiniteTopLeft = cc = (new G(-Infinity, -Infinity)).ga();
	G.InfiniteBottomRight = dc = (new G(Infinity, Infinity)).ga();
	G.SixPoint = ec = (new G(6, 6)).ga();
	G.NoPoint = fc = (new G(NaN, NaN)).ga();
	G.parse = Rb;
	G.stringify = Sb;
	G.distanceLineSegmentSquared = Yb;
	G.distanceSquared = Zb;
	G.direction = $b;

	function L(a, b) {
		void 0 === a ? this.Y = this.$ = 0 : "number" === typeof a && (0 <= a || isNaN(a)) && "number" === typeof b && (0 <= b || isNaN(b)) ? (this.$ = a, this.Y = b) : A("Invalid arguments to Size constructor: " + a + ", " + b);
		this.v = !1
	}
	var gc, lc, mc, nc, oc, pc, qc;
	L.prototype.assign = function(a) {
		this.$ = a.$;
		this.Y = a.Y;
		return this
	};
	L.prototype.h = function(a, b) {
		this.$ = a;
		this.Y = b;
		return this
	};
	L.prototype.rg = function(a, b) {
		this.$ = a;
		this.Y = b;
		return this
	};
	L.prototype.set = function(a) {
		this.$ = a.$;
		this.Y = a.Y;
		return this
	};
	L.prototype.copy = function() {
		var a = new L;
		a.$ = this.$;
		a.Y = this.Y;
		return a
	};
	t = L.prototype;
	t.ga = function() {
		this.v = !0;
		Object.freeze(this);
		return this
	};
	t.I = function() {
		return Object.isFrozen(this) ? this : this.copy().freeze()
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		Object.isFrozen(this) && A("cannot thaw constant: " + this);
		this.v = !1;
		return this
	};

	function wc(a) {
		if("string" === typeof a) {
			a = a.split(" ");
			for(var b = 0, c = 0;
				"" === a[b];) b++;
			var d = a[b++];
			d && (c = parseFloat(d));
			for(var e = 0;
				"" === a[b];) b++;
			(d = a[b++]) && (e = parseFloat(d));
			return new L(c, e)
		}
		return new L
	}

	function xc(a) {
		return a.width.toString() + " " + a.height.toString()
	}
	t.toString = function() {
		return "Size(" + this.width + "," + this.height + ")"
	};
	t.A = function(a) {
		return a instanceof L ? this.$ === a.width && this.Y === a.height : !1
	};
	t.yi = function(a, b) {
		return this.$ === a && this.Y === b
	};
	t.Oa = function(a) {
		return H.w(this.$, a.width) && H.w(this.Y, a.height)
	};
	t.s = function() {
		return isFinite(this.width) && isFinite(this.height)
	};
	L.alloc = function() {
		var a = yc.pop();
		return void 0 === a ? new L : a
	};
	L.free = function(a) {
		yc.push(a)
	};
	oa.Object.defineProperties(L.prototype, {
		width: {
			get: function() {
				return this.$
			},
			set: function(a) {
				0 > a && Aa(a, ">= 0", L, "width");
				this.$ = a
			}
		},
		height: {
			get: function() {
				return this.Y
			},
			set: function(a) {
				0 > a && Aa(a, ">= 0", L, "height");
				this.Y = a
			}
		}
	});
	L.prototype.isReal = L.prototype.s;
	L.prototype.equalsApprox = L.prototype.Oa;
	L.prototype.equalTo = L.prototype.yi;
	L.prototype.equals = L.prototype.A;
	L.prototype.set = L.prototype.set;
	L.prototype.setTo = L.prototype.rg;
	var yc = [];
	L.className = "Size";
	L.parse = wc;
	L.stringify = xc;
	L.ZeroSize = gc = (new L(0, 0)).ga();
	L.OneSize = lc = (new L(1, 1)).ga();
	L.SixSize = mc = (new L(6, 6)).ga();
	L.EightSize = nc = (new L(8, 8)).ga();
	L.TenSize = oc = (new L(10, 10)).ga();
	L.InfiniteSize = pc = (new L(Infinity, Infinity)).ga();
	L.NoSize = qc = (new L(NaN, NaN)).ga();
	L.parse = wc;
	L.stringify = xc;

	function M(a, b, c, d) {
		void 0 === a ? this.Y = this.$ = this.D = this.C = 0 : a instanceof G ? b instanceof G ? (this.C = Math.min(a.C, b.C), this.D = Math.min(a.D, b.D), this.$ = Math.abs(a.C - b.C), this.Y = Math.abs(a.D - b.D)) : b instanceof L ? (this.C = a.C, this.D = a.D, this.$ = b.$, this.Y = b.Y) : A("Incorrect arguments supplied to Rect constructor") : "number" === typeof a && "number" === typeof b && "number" === typeof c && (0 <= c || isNaN(c)) && "number" === typeof d && (0 <= d || isNaN(d)) ? (this.C = a, this.D = b, this.$ = c, this.Y = d) : A("Invalid arguments to Rect constructor: " +
			a + ", " + b + ", " + c + ", " + d);
		this.v = !1
	}
	t = M.prototype;
	t.assign = function(a) {
		this.C = a.C;
		this.D = a.D;
		this.$ = a.$;
		this.Y = a.Y;
		return this
	};
	t.h = function(a, b, c, d) {
		this.C = a;
		this.D = b;
		this.$ = c;
		this.Y = d;
		return this
	};

	function zc(a, b, c) {
		a.$ = b;
		a.Y = c
	}
	t.rg = function(a, b, c, d) {
		this.C = a;
		this.D = b;
		this.$ = c;
		this.Y = d;
		return this
	};
	t.set = function(a) {
		this.C = a.C;
		this.D = a.D;
		this.$ = a.$;
		this.Y = a.Y;
		return this
	};
	t.md = function(a) {
		this.C = a.C;
		this.D = a.D;
		return this
	};
	t.Dz = function(a) {
		this.$ = a.$;
		this.Y = a.Y;
		return this
	};
	M.prototype.copy = function() {
		var a = new M;
		a.C = this.C;
		a.D = this.D;
		a.$ = this.$;
		a.Y = this.Y;
		return a
	};
	t = M.prototype;
	t.ga = function() {
		this.v = !0;
		Object.freeze(this);
		return this
	};
	t.I = function() {
		return Object.isFrozen(this) ? this : this.copy().freeze()
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		Object.isFrozen(this) && A("cannot thaw constant: " + this);
		this.v = !1;
		return this
	};

	function Ac(a) {
		if("string" === typeof a) {
			a = a.split(" ");
			for(var b = 0, c = 0;
				"" === a[b];) b++;
			var d = a[b++];
			d && (c = parseFloat(d));
			for(var e = 0;
				"" === a[b];) b++;
			(d = a[b++]) && (e = parseFloat(d));
			for(var f = 0;
				"" === a[b];) b++;
			(d = a[b++]) && (f = parseFloat(d));
			for(var g = 0;
				"" === a[b];) b++;
			(d = a[b++]) && (g = parseFloat(d));
			return new M(c, e, f, g)
		}
		return new M
	}

	function Dc(a) {
		return a.x.toString() + " " + a.y.toString() + " " + a.width.toString() + " " + a.height.toString()
	}
	t.toString = function() {
		return "Rect(" + this.x + "," + this.y + "," + this.width + "," + this.height + ")"
	};
	t.A = function(a) {
		return a instanceof M ? this.C === a.x && this.D === a.y && this.$ === a.width && this.Y === a.height : !1
	};
	t.yi = function(a, b, c, d) {
		return this.C === a && this.D === b && this.$ === c && this.Y === d
	};
	t.Oa = function(a) {
		return H.w(this.C, a.x) && H.w(this.D, a.y) && H.w(this.$, a.width) && H.w(this.Y, a.height)
	};

	function Ec(a, b) {
		return H.ba(a.C, b.x) && H.ba(a.D, b.y) && H.ba(a.$, b.width) && H.ba(a.Y, b.height)
	}
	t.ea = function(a) {
		return this.C <= a.x && this.C + this.$ >= a.x && this.D <= a.y && this.D + this.Y >= a.y
	};
	t.kf = function(a) {
		return this.C <= a.x && a.x + a.width <= this.C + this.$ && this.D <= a.y && a.y + a.height <= this.D + this.Y
	};
	t.contains = function(a, b, c, d) {
		void 0 === c && (c = 0);
		void 0 === d && (d = 0);
		return this.C <= a && a + c <= this.C + this.$ && this.D <= b && b + d <= this.D + this.Y
	};
	t.reset = function() {
		this.Y = this.$ = this.D = this.C = 0
	};
	t.offset = function(a, b) {
		this.C += a;
		this.D += b;
		return this
	};
	t.gd = function(a, b) {
		return Fc(this, b, a, b, a)
	};
	t.Fp = function(a) {
		return Fc(this, a.top, a.right, a.bottom, a.left)
	};
	t.Lv = function(a) {
		return Fc(this, -a.top, -a.right, -a.bottom, -a.left)
	};
	t.ez = function(a, b, c, d) {
		return Fc(this, a, b, c, d)
	};

	function Fc(a, b, c, d, e) {
		var f = a.$;
		c + e <= -f ? (a.C += f / 2, a.$ = 0) : (a.C -= e, a.$ += c + e);
		c = a.Y;
		b + d <= -c ? (a.D += c / 2, a.Y = 0) : (a.D -= b, a.Y += b + d);
		return a
	}
	t.iz = function(a) {
		return Gc(this, a.x, a.y, a.width, a.height)
	};
	t.Yu = function(a, b, c, d) {
		return Gc(this, a, b, c, d)
	};

	function Gc(a, b, c, d, e) {
		var f = Math.max(a.C, b),
			g = Math.max(a.D, c);
		b = Math.min(a.C + a.$, b + d);
		c = Math.min(a.D + a.Y, c + e);
		a.C = f;
		a.D = g;
		a.$ = Math.max(0, b - f);
		a.Y = Math.max(0, c - g);
		return a
	}
	t.Kc = function(a) {
		return this.Zu(a.x, a.y, a.width, a.height)
	};
	t.Zu = function(a, b, c, d) {
		var e = this.$,
			f = this.C;
		if(Infinity !== e && Infinity !== c && (e += f, c += a, isNaN(c) || isNaN(e) || f > c || a > e)) return !1;
		a = this.Y;
		c = this.D;
		return Infinity !== a && Infinity !== d && (a += c, d += b, isNaN(d) || isNaN(a) || c > d || b > a) ? !1 : !0
	};

	function Hc(a, b, c) {
		var d = a.$,
			e = a.C,
			f = b.x - c;
		if(e > b.width + c + c + f || f > d + e) return !1;
		d = a.Y;
		a = a.D;
		e = b.y - c;
		return a > b.height + c + c + e || e > d + a ? !1 : !0
	}
	t.Je = function(a) {
		return Ic(this, a.x, a.y, 0, 0)
	};
	t.Wc = function(a) {
		return Ic(this, a.C, a.D, a.$, a.Y)
	};
	t.Sv = function(a, b, c, d) {
		void 0 === c && (c = 0);
		void 0 === d && (d = 0);
		return Ic(this, a, b, c, d)
	};

	function Ic(a, b, c, d, e) {
		var f = Math.min(a.C, b),
			g = Math.min(a.D, c);
		b = Math.max(a.C + a.$, b + d);
		c = Math.max(a.D + a.Y, c + e);
		a.C = f;
		a.D = g;
		a.$ = b - f;
		a.Y = c - g;
		return a
	}
	t.kk = function(a, b, c) {
		this.C = a - c.offsetX - c.x * this.$;
		this.D = b - c.offsetY - c.y * this.Y;
		return this
	};

	function Jc(a, b, c, d, e, f, g, h) {
		void 0 === g && (g = 0);
		void 0 === h && (h = 0);
		return a <= e && e + g <= a + c && b <= f && f + h <= b + d
	}

	function Lc(a, b, c, d, e, f, g, h) {
		return a > g + e || e > c + a ? !1 : b > h + f || f > d + b ? !1 : !0
	}
	t.s = function() {
		return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height)
	};
	t.kz = function() {
		return 0 === this.width && 0 === this.height
	};
	M.alloc = function() {
		var a = Mc.pop();
		return void 0 === a ? new M : a
	};
	M.allocAt = function(a, b, c, d) {
		var e = Mc.pop();
		return void 0 === e ? new M(a, b, c, d) : e.h(a, b, c, d)
	};
	M.free = function(a) {
		Mc.push(a)
	};
	oa.Object.defineProperties(M.prototype, {
		x: {
			get: function() {
				return this.C
			},
			set: function(a) {
				this.C = a
			}
		},
		y: {
			get: function() {
				return this.D
			},
			set: function(a) {
				this.D = a
			}
		},
		width: {
			get: function() {
				return this.$
			},
			set: function(a) {
				0 > a && Aa(a, ">= 0", M, "width");
				this.$ = a
			}
		},
		height: {
			get: function() {
				return this.Y
			},
			set: function(a) {
				0 > a && Aa(a, ">= 0", M, "height");
				this.Y = a
			}
		},
		left: {
			get: function() {
				return this.C
			},
			set: function(a) {
				this.C = a
			}
		},
		top: {
			get: function() {
				return this.D
			},
			set: function(a) {
				this.D = a
			}
		},
		right: {
			get: function() {
				return this.C + this.$
			},
			set: function(a) {
				this.C += a - (this.C + this.$)
			}
		},
		bottom: {
			get: function() {
				return this.D + this.Y
			},
			set: function(a) {
				this.D += a - (this.D + this.Y)
			}
		},
		position: {
			get: function() {
				return new G(this.C, this.D)
			},
			set: function(a) {
				this.C = a.x;
				this.D =
					a.y
			}
		},
		size: {
			get: function() {
				return new L(this.$, this.Y)
			},
			set: function(a) {
				this.$ = a.width;
				this.Y = a.height
			}
		},
		center: {
			get: function() {
				return new G(this.C + this.$ / 2, this.D + this.Y / 2)
			},
			set: function(a) {
				this.C = a.x - this.$ / 2;
				this.D = a.y - this.Y / 2
			}
		},
		centerX: {
			get: function() {
				return this.C + this.$ / 2
			},
			set: function(a) {
				this.C = a - this.$ / 2
			}
		},
		centerY: {
			get: function() {
				return this.D + this.Y / 2
			},
			set: function(a) {
				this.D =
					a - this.Y / 2
			}
		}
	});
	M.prototype.isEmpty = M.prototype.kz;
	M.prototype.isReal = M.prototype.s;
	M.prototype.setSpot = M.prototype.kk;
	M.prototype.union = M.prototype.Sv;
	M.prototype.unionRect = M.prototype.Wc;
	M.prototype.unionPoint = M.prototype.Je;
	M.prototype.intersects = M.prototype.Zu;
	M.prototype.intersectsRect = M.prototype.Kc;
	M.prototype.intersect = M.prototype.Yu;
	M.prototype.intersectRect = M.prototype.iz;
	M.prototype.grow = M.prototype.ez;
	M.prototype.subtractMargin = M.prototype.Lv;
	M.prototype.addMargin = M.prototype.Fp;
	M.prototype.inflate = M.prototype.gd;
	M.prototype.offset = M.prototype.offset;
	M.prototype.contains = M.prototype.contains;
	M.prototype.containsRect = M.prototype.kf;
	M.prototype.containsPoint = M.prototype.ea;
	M.prototype.equalsApprox = M.prototype.Oa;
	M.prototype.equalTo = M.prototype.yi;
	M.prototype.equals = M.prototype.A;
	M.prototype.setSize = M.prototype.Dz;
	M.prototype.setPoint = M.prototype.md;
	M.prototype.set = M.prototype.set;
	M.prototype.setTo = M.prototype.rg;
	var Nc = null,
		Oc = null,
		Mc = [];
	M.className = "Rect";
	M.parse = Ac;
	M.stringify = Dc;
	M.contains = Jc;
	M.intersects = Lc;
	M.ZeroRect = Nc = (new M(0, 0, 0, 0)).ga();
	M.NoRect = Oc = (new M(NaN, NaN, NaN, NaN)).ga();
	M.parse = Ac;
	M.stringify = Dc;
	M.contains = Jc;
	M.intersects = Lc;

	function Pc(a, b, c, d) {
		void 0 === a ? this.ke = this.ae = this.se = this.ve = 0 : void 0 === b ? this.left = this.bottom = this.right = this.top = a : void 0 === c ? (this.top = a, this.right = b, this.bottom = a, this.left = b) : void 0 !== d ? (this.top = a, this.right = b, this.bottom = c, this.left = d) : A("Invalid arguments to Margin constructor: " + a + ", " + b + ", " + c + ", " + d);
		this.v = !1
	}
	Pc.prototype.assign = function(a) {
		this.ve = a.ve;
		this.se = a.se;
		this.ae = a.ae;
		this.ke = a.ke;
		return this
	};
	Pc.prototype.rg = function(a, b, c, d) {
		this.ve = a;
		this.se = b;
		this.ae = c;
		this.ke = d;
		return this
	};
	Pc.prototype.set = function(a) {
		this.ve = a.ve;
		this.se = a.se;
		this.ae = a.ae;
		this.ke = a.ke;
		return this
	};
	Pc.prototype.copy = function() {
		var a = new Pc;
		a.ve = this.ve;
		a.se = this.se;
		a.ae = this.ae;
		a.ke = this.ke;
		return a
	};
	t = Pc.prototype;
	t.ga = function() {
		this.v = !0;
		Object.freeze(this);
		return this
	};
	t.I = function() {
		return Object.isFrozen(this) ? this : this.copy().freeze()
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		Object.isFrozen(this) && A("cannot thaw constant: " + this);
		this.v = !1;
		return this
	};

	function Qc(a) {
		if("string" === typeof a) {
			a = a.split(" ");
			for(var b = 0, c = NaN;
				"" === a[b];) b++;
			var d = a[b++];
			d && (c = parseFloat(d));
			if(isNaN(c)) return new Pc;
			for(var e = NaN;
				"" === a[b];) b++;
			(d = a[b++]) && (e = parseFloat(d));
			if(isNaN(e)) return new Pc(c);
			for(var f = NaN;
				"" === a[b];) b++;
			(d = a[b++]) && (f = parseFloat(d));
			if(isNaN(f)) return new Pc(c, e);
			for(var g = NaN;
				"" === a[b];) b++;
			(d = a[b++]) && (g = parseFloat(d));
			return isNaN(g) ? new Pc(c, e) : new Pc(c, e, f, g)
		}
		return new Pc
	}

	function Uc(a) {
		return a.top.toString() + " " + a.right.toString() + " " + a.bottom.toString() + " " + a.left.toString()
	}
	t.toString = function() {
		return "Margin(" + this.top + "," + this.right + "," + this.bottom + "," + this.left + ")"
	};
	t.A = function(a) {
		return a instanceof Pc ? this.ve === a.top && this.se === a.right && this.ae === a.bottom && this.ke === a.left : !1
	};
	t.yi = function(a, b, c, d) {
		return this.ve === a && this.se === b && this.ae === c && this.ke === d
	};
	t.Oa = function(a) {
		return H.w(this.ve, a.top) && H.w(this.se, a.right) && H.w(this.ae, a.bottom) && H.w(this.ke, a.left)
	};
	t.s = function() {
		return isFinite(this.top) && isFinite(this.right) && isFinite(this.bottom) && isFinite(this.left)
	};
	Pc.alloc = function() {
		var a = Vc.pop();
		return void 0 === a ? new Pc : a
	};
	Pc.free = function(a) {
		Vc.push(a)
	};
	oa.Object.defineProperties(Pc.prototype, {
		top: {
			get: function() {
				return this.ve
			},
			set: function(a) {
				this.ve = a
			}
		},
		right: {
			get: function() {
				return this.se
			},
			set: function(a) {
				this.se = a
			}
		},
		bottom: {
			get: function() {
				return this.ae
			},
			set: function(a) {
				this.ae = a
			}
		},
		left: {
			get: function() {
				return this.ke
			},
			set: function(a) {
				this.ke = a
			}
		}
	});
	Pc.prototype.isReal = Pc.prototype.s;
	Pc.prototype.equalsApprox = Pc.prototype.Oa;
	Pc.prototype.equalTo = Pc.prototype.yi;
	Pc.prototype.equals = Pc.prototype.A;
	Pc.prototype.set = Pc.prototype.set;
	Pc.prototype.setTo = Pc.prototype.rg;
	var Wc = null,
		Xc = null,
		Vc = [];
	Pc.className = "Margin";
	Pc.parse = Qc;
	Pc.stringify = Uc;
	Pc.ZeroMargin = Wc = (new Pc(0, 0, 0, 0)).ga();
	Pc.TwoMargin = Xc = (new Pc(2, 2, 2, 2)).ga();
	Pc.parse = Qc;
	Pc.stringify = Uc;

	function Yc() {
		this.m11 = 1;
		this.m21 = this.m12 = 0;
		this.m22 = 1;
		this.dy = this.dx = 0
	}
	Yc.prototype.set = function(a) {
		this.m11 = a.m11;
		this.m12 = a.m12;
		this.m21 = a.m21;
		this.m22 = a.m22;
		this.dx = a.dx;
		this.dy = a.dy;
		return this
	};
	Yc.prototype.copy = function() {
		var a = new Yc;
		a.m11 = this.m11;
		a.m12 = this.m12;
		a.m21 = this.m21;
		a.m22 = this.m22;
		a.dx = this.dx;
		a.dy = this.dy;
		return a
	};
	t = Yc.prototype;
	t.toString = function() {
		return "Transform(" + this.m11 + "," + this.m12 + "," + this.m21 + "," + this.m22 + "," + this.dx + "," + this.dy + ")"
	};
	t.A = function(a) {
		return a instanceof Yc ? this.m11 === a.m11 && this.m12 === a.m12 && this.m21 === a.m21 && this.m22 === a.m22 && this.dx === a.dx && this.dy === a.dy : !1
	};
	t.$s = function() {
		return 0 === this.dx && 0 === this.dy && 1 === this.m11 && 0 === this.m12 && 0 === this.m21 && 1 === this.m22
	};
	t.reset = function() {
		this.m11 = 1;
		this.m21 = this.m12 = 0;
		this.m22 = 1;
		this.dy = this.dx = 0;
		return this
	};
	t.multiply = function(a) {
		var b = this.m12 * a.m11 + this.m22 * a.m12,
			c = this.m11 * a.m21 + this.m21 * a.m22,
			d = this.m12 * a.m21 + this.m22 * a.m22,
			e = this.m11 * a.dx + this.m21 * a.dy + this.dx,
			f = this.m12 * a.dx + this.m22 * a.dy + this.dy;
		this.m11 = this.m11 * a.m11 + this.m21 * a.m12;
		this.m12 = b;
		this.m21 = c;
		this.m22 = d;
		this.dx = e;
		this.dy = f;
		return this
	};
	t.ev = function(a) {
		var b = 1 / (a.m11 * a.m22 - a.m12 * a.m21),
			c = a.m22 * b,
			d = -a.m12 * b,
			e = -a.m21 * b,
			f = a.m11 * b,
			g = b * (a.m21 * a.dy - a.m22 * a.dx);
		a = b * (a.m12 * a.dx - a.m11 * a.dy);
		b = this.m11 * c + this.m21 * d;
		c = this.m12 * c + this.m22 * d;
		d = this.m11 * e + this.m21 * f;
		e = this.m12 * e + this.m22 * f;
		this.dx = this.m11 * g + this.m21 * a + this.dx;
		this.dy = this.m12 * g + this.m22 * a + this.dy;
		this.m11 = b;
		this.m12 = c;
		this.m21 = d;
		this.m22 = e;
		return this
	};
	t.Zs = function() {
		var a = 1 / (this.m11 * this.m22 - this.m12 * this.m21),
			b = -this.m12 * a,
			c = -this.m21 * a,
			d = this.m11 * a,
			e = a * (this.m21 * this.dy - this.m22 * this.dx),
			f = a * (this.m12 * this.dx - this.m11 * this.dy);
		this.m11 = this.m22 * a;
		this.m12 = b;
		this.m21 = c;
		this.m22 = d;
		this.dx = e;
		this.dy = f;
		return this
	};
	Yc.prototype.rotate = function(a, b, c) {
		360 <= a ? a -= 360 : 0 > a && (a += 360);
		if(0 === a) return this;
		this.translate(b, c);
		if(90 === a) {
			a = 0;
			var d = 1
		} else 180 === a ? (a = -1, d = 0) : 270 === a ? (a = 0, d = -1) : (d = a * Math.PI / 180, a = Math.cos(d), d = Math.sin(d));
		var e = this.m12 * a + this.m22 * d,
			f = this.m11 * -d + this.m21 * a,
			g = this.m12 * -d + this.m22 * a;
		this.m11 = this.m11 * a + this.m21 * d;
		this.m12 = e;
		this.m21 = f;
		this.m22 = g;
		this.translate(-b, -c);
		return this
	};
	t = Yc.prototype;
	t.translate = function(a, b) {
		this.dx += this.m11 * a + this.m21 * b;
		this.dy += this.m12 * a + this.m22 * b;
		return this
	};
	t.scale = function(a, b) {
		void 0 === b && (b = a);
		this.m11 *= a;
		this.m12 *= a;
		this.m21 *= b;
		this.m22 *= b;
		return this
	};
	t.ta = function(a) {
		var b = a.C,
			c = a.D;
		a.C = b * this.m11 + c * this.m21 + this.dx;
		a.D = b * this.m12 + c * this.m22 + this.dy;
		return a
	};
	t.Wd = function(a) {
		var b = 1 / (this.m11 * this.m22 - this.m12 * this.m21),
			c = -this.m12 * b,
			d = this.m11 * b,
			e = b * (this.m12 * this.dx - this.m11 * this.dy),
			f = a.C,
			g = a.D;
		a.C = f * this.m22 * b + g * -this.m21 * b + b * (this.m21 * this.dy - this.m22 * this.dx);
		a.D = f * c + g * d + e;
		return a
	};
	t.Rv = function(a) {
		var b = a.C,
			c = a.D,
			d = b + a.$,
			e = c + a.Y,
			f = this.m11,
			g = this.m12,
			h = this.m21,
			k = this.m22,
			l = this.dx,
			m = this.dy,
			n = b * f + c * h + l,
			p = b * g + c * k + m,
			q = d * f + c * h + l,
			r = d * g + c * k + m;
		c = b * f + e * h + l;
		b = b * g + e * k + m;
		f = d * f + e * h + l;
		d = d * g + e * k + m;
		e = Math.min(n, q);
		n = Math.max(n, q);
		q = Math.min(p, r);
		p = Math.max(p, r);
		e = Math.min(e, c);
		n = Math.max(n, c);
		q = Math.min(q, b);
		p = Math.max(p, b);
		e = Math.min(e, f);
		n = Math.max(n, f);
		q = Math.min(q, d);
		p = Math.max(p, d);
		a.C = e;
		a.D = q;
		a.$ = n - e;
		a.Y = p - q;
		return a
	};
	Yc.alloc = function() {
		var a = Zc.pop();
		return void 0 === a ? new Yc : a
	};
	Yc.free = function(a) {
		Zc.push(a)
	};
	Yc.prototype.transformRect = Yc.prototype.Rv;
	Yc.prototype.invertedTransformPoint = Yc.prototype.Wd;
	Yc.prototype.transformPoint = Yc.prototype.ta;
	Yc.prototype.scale = Yc.prototype.scale;
	Yc.prototype.translate = Yc.prototype.translate;
	Yc.prototype.rotate = Yc.prototype.rotate;
	Yc.prototype.invert = Yc.prototype.Zs;
	Yc.prototype.multiplyInverted = Yc.prototype.ev;
	Yc.prototype.multiply = Yc.prototype.multiply;
	Yc.prototype.reset = Yc.prototype.reset;
	Yc.prototype.isIdentity = Yc.prototype.$s;
	Yc.prototype.equals = Yc.prototype.A;
	Yc.prototype.set = Yc.prototype.set;
	var Zc = [];
	Yc.className = "Transform";
	Yc.xF = "54a702f3e53909c447824c6706603faf4c";

	function N(a, b, c, d) {
		void 0 === a ? this.Pd = this.Od = this.D = this.C = 0 : (void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = 0), this.x = a, this.y = b, this.offsetX = c, this.offsetY = d);
		this.v = !1
	}
	var dd, ed, fd, gd, hd, id, jd, kd, nd, od, pd, qd, rd, sd, td, ud, vd, zd, Ad, Bd, Cd, Dd, Ed, Fd, Gd, Hd, Id, Jd, Qd, Rd, Sd, Td, Ud, Vd, Wd, Xd;
	N.prototype.assign = function(a) {
		this.C = a.C;
		this.D = a.D;
		this.Od = a.Od;
		this.Pd = a.Pd;
		return this
	};
	N.prototype.rg = function(a, b, c, d) {
		this.C = a;
		this.D = b;
		this.Od = c;
		this.Pd = d;
		return this
	};
	N.prototype.set = function(a) {
		this.C = a.C;
		this.D = a.D;
		this.Od = a.Od;
		this.Pd = a.Pd;
		return this
	};
	N.prototype.copy = function() {
		var a = new N;
		a.C = this.C;
		a.D = this.D;
		a.Od = this.Od;
		a.Pd = this.Pd;
		return a
	};
	t = N.prototype;
	t.ga = function() {
		this.v = !0;
		Object.freeze(this);
		return this
	};
	t.I = function() {
		return Object.isFrozen(this) ? this : this.copy().freeze()
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		Object.isFrozen(this) && A("cannot thaw constant: " + this);
		this.v = !1;
		return this
	};

	function Yd(a, b) {
		a.C = NaN;
		a.D = NaN;
		a.Od = b;
		return a
	}

	function Zd(a) {
		if("string" === typeof a) {
			a = a.trim();
			if("None" === a) return dd;
			if("TopLeft" === a) return ed;
			if("Top" === a || "TopCenter" === a || "MiddleTop" === a) return fd;
			if("TopRight" === a) return gd;
			if("Left" === a || "LeftCenter" === a || "MiddleLeft" === a) return hd;
			if("Center" === a) return id;
			if("Right" === a || "RightCenter" === a || "MiddleRight" === a) return jd;
			if("BottomLeft" === a) return kd;
			if("Bottom" === a || "BottomCenter" === a || "MiddleBottom" === a) return nd;
			if("BottomRight" === a) return od;
			if("TopSide" === a) return pd;
			if("LeftSide" ===
				a) return qd;
			if("RightSide" === a) return rd;
			if("BottomSide" === a) return sd;
			if("TopBottomSides" === a) return td;
			if("LeftRightSides" === a) return ud;
			if("TopLeftSides" === a) return vd;
			if("TopRightSides" === a) return zd;
			if("BottomLeftSides" === a) return Ad;
			if("BottomRightSides" === a) return Bd;
			if("NotTopSide" === a) return Cd;
			if("NotLeftSide" === a) return Dd;
			if("NotRightSide" === a) return Ed;
			if("NotBottomSide" === a) return Fd;
			if("AllSides" === a) return Gd;
			if("Default" === a) return Hd;
			a = a.split(" ");
			for(var b = 0, c = 0;
				"" === a[b];) b++;
			var d = a[b++];
			void 0 !== d && 0 < d.length && (c = parseFloat(d));
			for(var e = 0;
				"" === a[b];) b++;
			d = a[b++];
			void 0 !== d && 0 < d.length && (e = parseFloat(d));
			for(var f = 0;
				"" === a[b];) b++;
			d = a[b++];
			void 0 !== d && 0 < d.length && (f = parseFloat(d));
			for(var g = 0;
				"" === a[b];) b++;
			d = a[b++];
			void 0 !== d && 0 < d.length && (g = parseFloat(d));
			return new N(c, e, f, g)
		}
		return new N
	}

	function $d(a) {
		return a.pb() ? a.x.toString() + " " + a.y.toString() + " " + a.offsetX.toString() + " " + a.offsetY.toString() : a.toString()
	}
	t.toString = function() {
		return this.pb() ? 0 === this.Od && 0 === this.Pd ? "Spot(" + this.x + "," + this.y + ")" : "Spot(" + this.x + "," + this.y + "," + this.offsetX + "," + this.offsetY + ")" : this.A(dd) ? "None" : this.A(ed) ? "TopLeft" : this.A(fd) ? "Top" : this.A(gd) ? "TopRight" : this.A(hd) ? "Left" : this.A(id) ? "Center" : this.A(jd) ? "Right" : this.A(kd) ? "BottomLeft" : this.A(nd) ? "Bottom" : this.A(od) ? "BottomRight" : this.A(pd) ? "TopSide" : this.A(qd) ? "LeftSide" : this.A(rd) ? "RightSide" : this.A(sd) ? "BottomSide" : this.A(td) ? "TopBottomSides" : this.A(ud) ? "LeftRightSides" :
			this.A(vd) ? "TopLeftSides" : this.A(zd) ? "TopRightSides" : this.A(Ad) ? "BottomLeftSides" : this.A(Bd) ? "BottomRightSides" : this.A(Cd) ? "NotTopSide" : this.A(Dd) ? "NotLeftSide" : this.A(Ed) ? "NotRightSide" : this.A(Fd) ? "NotBottomSide" : this.A(Gd) ? "AllSides" : this.A(Hd) ? "Default" : "None"
	};
	t.A = function(a) {
		return a instanceof N ? (this.C === a.x || isNaN(this.C) && isNaN(a.x)) && (this.D === a.y || isNaN(this.D) && isNaN(a.y)) && this.Od === a.offsetX && this.Pd === a.offsetY : !1
	};
	t.iv = function() {
		return new N(.5 - (this.C - .5), .5 - (this.D - .5), -this.Od, -this.Pd)
	};
	t.pf = function(a) {
		if(!this.qf()) return !1;
		if(!a.qf())
			if(a.A(Id)) a = qd;
			else if(a.A(Jd)) a = rd;
		else if(a.A(Qd)) a = pd;
		else if(a.A(Rd)) a = sd;
		else return !1;
		a = a.offsetY;
		return(this.Pd & a) === a
	};
	t.pb = function() {
		return !isNaN(this.x) && !isNaN(this.y)
	};
	t.mc = function() {
		return isNaN(this.x) || isNaN(this.y)
	};
	t.qf = function() {
		return isNaN(this.x) && isNaN(this.y) && 1 === this.offsetX && 0 !== this.offsetY
	};
	t.vx = function() {
		return isNaN(this.x) && isNaN(this.y) && 0 === this.offsetX && 0 === this.offsetY
	};
	t.jb = function() {
		return isNaN(this.x) && isNaN(this.y) && -1 === this.offsetX && 0 === this.offsetY
	};
	N.alloc = function() {
		var a = de.pop();
		return void 0 === a ? new N : a
	};
	N.free = function(a) {
		de.push(a)
	};
	oa.Object.defineProperties(N.prototype, {
		x: {
			get: function() {
				return this.C
			},
			set: function(a) {
				this.C = a
			}
		},
		y: {
			get: function() {
				return this.D
			},
			set: function(a) {
				this.D = a
			}
		},
		offsetX: {
			get: function() {
				return this.Od
			},
			set: function(a) {
				this.Od = a
			}
		},
		offsetY: {
			get: function() {
				return this.Pd
			},
			set: function(a) {
				this.Pd = a
			}
		}
	});
	N.prototype.isDefault = N.prototype.jb;
	N.prototype.isNone = N.prototype.vx;
	N.prototype.isSide = N.prototype.qf;
	N.prototype.isNoSpot = N.prototype.mc;
	N.prototype.isSpot = N.prototype.pb;
	N.prototype.includesSide = N.prototype.pf;
	N.prototype.opposite = N.prototype.iv;
	N.prototype.equals = N.prototype.A;
	N.prototype.set = N.prototype.set;
	N.prototype.setTo = N.prototype.rg;
	var de = [];
	N.className = "Spot";
	N.parse = Zd;
	N.stringify = $d;
	N.None = dd = Yd(new N(0, 0, 0, 0), 0).ga();
	N.Default = Hd = Yd(new N(0, 0, -1, 0), -1).ga();
	N.TopLeft = ed = (new N(0, 0, 0, 0)).ga();
	N.TopCenter = fd = (new N(.5, 0, 0, 0)).ga();
	N.TopRight = gd = (new N(1, 0, 0, 0)).ga();
	N.LeftCenter = hd = (new N(0, .5, 0, 0)).ga();
	N.Center = id = (new N(.5, .5, 0, 0)).ga();
	N.RightCenter = jd = (new N(1, .5, 0, 0)).ga();
	N.BottomLeft = kd = (new N(0, 1, 0, 0)).ga();
	N.BottomCenter = nd = (new N(.5, 1, 0, 0)).ga();
	N.BottomRight = od = (new N(1, 1, 0, 0)).ga();
	N.MiddleTop = Sd = fd;
	N.MiddleLeft = Td = hd;
	N.MiddleRight = Ud = jd;
	N.MiddleBottom = Vd = nd;
	N.Top = Qd = fd;
	N.Left = Id = hd;
	N.Right = Jd = jd;
	N.Bottom = Rd = nd;
	N.TopSide = pd = Yd(new N(0, 0, 1, 1), 1).ga();
	N.LeftSide = qd = Yd(new N(0, 0, 1, 2), 1).ga();
	N.RightSide = rd = Yd(new N(0, 0, 1, 4), 1).ga();
	N.BottomSide = sd = Yd(new N(0, 0, 1, 8), 1).ga();
	N.TopBottomSides = td = Yd(new N(0, 0, 1, 9), 1).ga();
	N.LeftRightSides = ud = Yd(new N(0, 0, 1, 6), 1).ga();
	N.TopLeftSides = vd = Yd(new N(0, 0, 1, 3), 1).ga();
	N.TopRightSides = zd = Yd(new N(0, 0, 1, 5), 1).ga();
	N.BottomLeftSides = Ad = Yd(new N(0, 0, 1, 10), 1).ga();
	N.BottomRightSides = Bd = Yd(new N(0, 0, 1, 12), 1).ga();
	N.NotTopSide = Cd = Yd(new N(0, 0, 1, 14), 1).ga();
	N.NotLeftSide = Dd = Yd(new N(0, 0, 1, 13), 1).ga();
	N.NotRightSide = Ed = Yd(new N(0, 0, 1, 11), 1).ga();
	N.NotBottomSide = Fd = Yd(new N(0, 0, 1, 7), 1).ga();
	N.AllSides = Gd = Yd(new N(0, 0, 1, 15), 1).ga();
	Wd = (new N(.156, .156)).ga();
	Xd = (new N(.844, .844)).ga();
	N.parse = Zd;
	N.stringify = $d;
	var H = {
		Lz: "7da71ca0ad381e90",
		ug: (Math.sqrt(2) - 1) / 3 * 4,
		cw: null,
		sqrt: function(a) {
			if(0 >= a) return 0;
			var b = H.cw;
			if(null === b) {
				b = [];
				for(var c = 0; 2E3 >= c; c++) b[c] = Math.sqrt(c);
				H.cw = b
			}
			return 1 > a ? (c = 1 / a, 2E3 >= c ? 1 / b[c | 0] : Math.sqrt(a)) : 2E3 >= a ? b[a | 0] : Math.sqrt(a)
		},
		w: function(a, b) {
			a -= b;
			return .5 > a && -.5 < a
		},
		ba: function(a, b) {
			a -= b;
			return 5E-8 > a && -5E-8 < a
		},
		Vb: function(a, b, c, d, e, f, g) {
			0 >= e && (e = 1E-6);
			if(a < c) {
				var h = a;
				var k = c
			} else h = c, k = a;
			if(b < d) {
				var l = b;
				var m = d
			} else l = d, m = b;
			if(a === c) return l <= g && g <= m && a - e <= f && f <= a + e;
			if(b === d) return h <=
				f && f <= k && b - e <= g && g <= b + e;
			k += e;
			h -= e;
			if(h <= f && f <= k && (m += e, l -= e, l <= g && g <= m))
				if(k - h > m - l)
					if(a - c > e || c - a > e) {
						if(f = (d - b) / (c - a) * (f - a) + b, f - e <= g && g <= f + e) return !0
					} else return !0;
			else if(b - d > e || d - b > e) {
				if(g = (c - a) / (d - b) * (g - b) + a, g - e <= f && f <= g + e) return !0
			} else return !0;
			return !1
		},
		Es: function(a, b, c, d, e, f, g, h, k, l, m, n) {
			if(H.Vb(a, b, g, h, n, c, d) && H.Vb(a, b, g, h, n, e, f)) return H.Vb(a, b, g, h, n, l, m);
			var p = (a + c) / 2,
				q = (b + d) / 2,
				r = (c + e) / 2,
				u = (d + f) / 2;
			e = (e + g) / 2;
			f = (f + h) / 2;
			d = (p + r) / 2;
			c = (q + u) / 2;
			r = (r + e) / 2;
			u = (u + f) / 2;
			var v = (d + r) / 2,
				x = (c + u) / 2;
			return H.Es(a,
				b, p, q, d, c, v, x, k, l, m, n) || H.Es(v, x, r, u, e, f, g, h, k, l, m, n)
		},
		ny: function(a, b, c, d, e, f, g, h, k) {
			var l = (c + e) / 2,
				m = (d + f) / 2;
			k.h((((a + c) / 2 + l) / 2 + (l + (e + g) / 2) / 2) / 2, (((b + d) / 2 + m) / 2 + (m + (f + h) / 2) / 2) / 2);
			return k
		},
		my: function(a, b, c, d, e, f, g, h) {
			var k = (c + e) / 2,
				l = (d + f) / 2;
			return $b(((a + c) / 2 + k) / 2, ((b + d) / 2 + l) / 2, (k + (e + g) / 2) / 2, (l + (f + h) / 2) / 2)
		},
		Nl: function(a, b, c, d, e, f, g, h, k, l) {
			if(H.Vb(a, b, g, h, k, c, d) && H.Vb(a, b, g, h, k, e, f)) Ic(l, a, b, 0, 0), Ic(l, g, h, 0, 0);
			else {
				var m = (a + c) / 2,
					n = (b + d) / 2,
					p = (c + e) / 2,
					q = (d + f) / 2;
				e = (e + g) / 2;
				f = (f + h) / 2;
				d = (m + p) / 2;
				c = (n + q) /
					2;
				p = (p + e) / 2;
				q = (q + f) / 2;
				var r = (d + p) / 2,
					u = (c + q) / 2;
				H.Nl(a, b, m, n, d, c, r, u, k, l);
				H.Nl(r, u, p, q, e, f, g, h, k, l)
			}
			return l
		},
		ye: function(a, b, c, d, e, f, g, h, k, l) {
			if(H.Vb(a, b, g, h, k, c, d) && H.Vb(a, b, g, h, k, e, f)) 0 === l.length && (l.push(a), l.push(b)), l.push(g), l.push(h);
			else {
				var m = (a + c) / 2,
					n = (b + d) / 2,
					p = (c + e) / 2,
					q = (d + f) / 2;
				e = (e + g) / 2;
				f = (f + h) / 2;
				d = (m + p) / 2;
				c = (n + q) / 2;
				p = (p + e) / 2;
				q = (q + f) / 2;
				var r = (d + p) / 2,
					u = (c + q) / 2;
				H.ye(a, b, m, n, d, c, r, u, k, l);
				H.ye(r, u, p, q, e, f, g, h, k, l)
			}
			return l
		},
		Oz: function(a, b, c, d, e, f, g, h, k, l, m, n, p, q) {
			var r = 1 - k;
			a = a * r + c * k;
			b = b *
				r + d * k;
			c = c * r + e * k;
			d = d * r + f * k;
			e = e * r + g * k;
			f = f * r + h * k;
			h = a * r + c * k;
			g = b * r + d * k;
			c = c * r + e * k;
			d = d * r + f * k;
			var u = h * r + c * k;
			k = g * r + d * k;
			l.h(a, b);
			m.h(h, g);
			n.h(u, k);
			p.h(c, d);
			q.h(e, f)
		},
		lv: function(a, b, c, d, e, f, g, h, k, l) {
			if(H.Vb(a, b, e, f, l, c, d)) return H.Vb(a, b, e, f, l, h, k);
			var m = (a + c) / 2,
				n = (b + d) / 2;
			c = (c + e) / 2;
			d = (d + f) / 2;
			var p = (m + c) / 2,
				q = (n + d) / 2;
			return H.lv(a, b, m, n, p, q, g, h, k, l) || H.lv(p, q, c, d, e, f, g, h, k, l)
		},
		Vz: function(a, b, c, d, e, f, g) {
			g.h(((a + c) / 2 + (c + e) / 2) / 2, ((b + d) / 2 + (d + f) / 2) / 2);
			return g
		},
		kv: function(a, b, c, d, e, f, g, h) {
			if(H.Vb(a, b, e, f, g, c, d)) Ic(h,
				a, b, 0, 0), Ic(h, e, f, 0, 0);
			else {
				var k = (a + c) / 2,
					l = (b + d) / 2;
				c = (c + e) / 2;
				d = (d + f) / 2;
				var m = (k + c) / 2,
					n = (l + d) / 2;
				H.kv(a, b, k, l, m, n, g, h);
				H.kv(m, n, c, d, e, f, g, h)
			}
			return h
		},
		aq: function(a, b, c, d, e, f, g, h) {
			if(H.Vb(a, b, e, f, g, c, d)) 0 === h.length && (h.push(a), h.push(b)), h.push(e), h.push(f);
			else {
				var k = (a + c) / 2,
					l = (b + d) / 2;
				c = (c + e) / 2;
				d = (d + f) / 2;
				var m = (k + c) / 2,
					n = (l + d) / 2;
				H.aq(a, b, k, l, m, n, g, h);
				H.aq(m, n, c, d, e, f, g, h)
			}
			return h
		},
		Gp: function(a, b, c, d, e, f, g, h, k, l, m, n, p, q) {
			if(H.Vb(a, b, g, h, p, c, d) && H.Vb(a, b, g, h, p, e, f)) {
				var r = (a - g) * (l - n) - (b - h) * (k - m);
				if(0 === r) return !1;
				p = ((a * h - b * g) * (k - m) - (a - g) * (k * n - l * m)) / r;
				r = ((a * h - b * g) * (l - n) - (b - h) * (k * n - l * m)) / r;
				if((k > m ? k - m : m - k) < (l > n ? l - n : n - l)) {
					if(b < h ? g = b : (g = h, h = b), r < g || r > h) return !1
				} else if(a < g ? h = a : (h = g, g = a), p < h || p > g) return !1;
				q.h(p, r);
				return !0
			}
			r = (a + c) / 2;
			var u = (b + d) / 2;
			c = (c + e) / 2;
			d = (d + f) / 2;
			e = (e + g) / 2;
			f = (f + h) / 2;
			var v = (r + c) / 2,
				x = (u + d) / 2;
			c = (c + e) / 2;
			d = (d + f) / 2;
			var y = (v + c) / 2,
				z = (x + d) / 2,
				B = (m - k) * (m - k) + (n - l) * (n - l),
				C = !1;
			H.Gp(a, b, r, u, v, x, y, z, k, l, m, n, p, q) && (a = (q.x - k) * (q.x - k) + (q.y - l) * (q.y - l), a < B && (B = a, C = !0));
			a = q.x;
			b = q.y;
			H.Gp(y, z, c, d,
				e, f, g, h, k, l, m, n, p, q) && ((q.x - k) * (q.x - k) + (q.y - l) * (q.y - l) < B ? C = !0 : q.h(a, b));
			return C
		},
		Hp: function(a, b, c, d, e, f, g, h, k, l, m, n, p) {
			var q = 0;
			if(H.Vb(a, b, g, h, p, c, d) && H.Vb(a, b, g, h, p, e, f)) {
				p = (a - g) * (l - n) - (b - h) * (k - m);
				if(0 === p) return q;
				var r = ((a * h - b * g) * (k - m) - (a - g) * (k * n - l * m)) / p,
					u = ((a * h - b * g) * (l - n) - (b - h) * (k * n - l * m)) / p;
				if(r >= m) return q;
				if((k > m ? k - m : m - k) < (l > n ? l - n : n - l)) {
					if(b < h ? (a = b, b = h) : a = h, u < a || u > b) return q
				} else if(a < g ? (b = a, a = g) : b = g, r < b || r > a) return q;
				0 < p ? q++ : 0 > p && q--
			} else {
				r = (a + c) / 2;
				u = (b + d) / 2;
				var v = (c + e) / 2,
					x = (d + f) / 2;
				e = (e +
					g) / 2;
				f = (f + h) / 2;
				d = (r + v) / 2;
				c = (u + x) / 2;
				v = (v + e) / 2;
				x = (x + f) / 2;
				var y = (d + v) / 2,
					z = (c + x) / 2;
				q += H.Hp(a, b, r, u, d, c, y, z, k, l, m, n, p);
				q += H.Hp(y, z, v, x, e, f, g, h, k, l, m, n, p)
			}
			return q
		},
		Ii: function(a, b, c, d, e, f, g) {
			if(H.ba(a, c)) {
				b < d ? (c = b, b = d) : c = d;
				if(f < c) return g.h(a, c), !1;
				if(f > b) return g.h(a, b), !1;
				g.h(a, f);
				return !0
			}
			if(H.ba(b, d)) {
				a < c ? (d = a, a = c) : d = c;
				if(e < d) return g.h(d, b), !1;
				if(e > a) return g.h(a, b), !1;
				g.h(e, b);
				return !0
			}
			e = ((a - e) * (a - c) + (b - f) * (b - d)) / ((c - a) * (c - a) + (d - b) * (d - b));
			if(-5E-6 > e) return g.h(a, b), !1;
			if(1.000005 < e) return g.h(c,
				d), !1;
			g.h(a + e * (c - a), b + e * (d - b));
			return !0
		},
		Fe: function(a, b, c, d, e, f, g, h, k) {
			if(H.w(a, c) && H.w(b, d)) return k.h(a, b), !1;
			if(H.ba(e, g)) return H.ba(a, c) ? (H.Ii(a, b, c, d, e, f, k), !1) : H.Ii(a, b, c, d, e, (d - b) / (c - a) * (e - a) + b, k);
			h = (h - f) / (g - e);
			if(H.ba(a, c)) {
				c = h * (a - e) + f;
				b < d ? (e = b, b = d) : e = d;
				if(c < e) return k.h(a, e), !1;
				if(c > b) return k.h(a, b), !1;
				k.h(a, c);
				return !0
			}
			g = (d - b) / (c - a);
			if(H.ba(h, g)) return H.Ii(a, b, c, d, e, f, k), !1;
			e = (g * a - h * e + f - b) / (g - h);
			if(H.ba(g, 0)) {
				a < c ? (d = a, a = c) : d = c;
				if(e < d) return k.h(d, b), !1;
				if(e > a) return k.h(a, b), !1;
				k.h(e,
					b);
				return !0
			}
			return H.Ii(a, b, c, d, e, g * (e - a) + b, k)
		},
		Sz: function(a, b, c, d, e) {
			return H.Fe(c.x, c.y, d.x, d.y, a.x, a.y, b.x, b.y, e)
		},
		Rz: function(a, b, c, d, e, f, g, h, k, l) {
			function m(c, d) {
				var e = (c - a) * (c - a) + (d - b) * (d - b);
				e < n && (n = e, k.h(c, d))
			}
			var n = Infinity;
			m(k.x, k.y);
			var p = 0,
				q = 0,
				r = 0,
				u = 0;
			e < g ? (p = e, q = g) : (p = g, q = e);
			f < h ? (r = e, u = g) : (r = g, u = e);
			p = (q - p) / 2 + l;
			l = (u - r) / 2 + l;
			e = (e + g) / 2;
			f = (f + h) / 2;
			if(0 === p || 0 === l) return k;
			if(.5 > (c > a ? c - a : a - c)) {
				p = 1 - (c - e) * (c - e) / (p * p);
				if(0 > p) return k;
				p = Math.sqrt(p);
				d = -l * p + f;
				m(c, l * p + f);
				m(c, d)
			} else {
				c = (d - b) / (c - a);
				d = 1 / (p * p) + c * c / (l * l);
				h = 2 * c * (b - c * a) / (l * l) - 2 * c * f / (l * l) - 2 * e / (p * p);
				p = h * h - 4 * d * (2 * c * a * f / (l * l) - 2 * b * f / (l * l) + f * f / (l * l) + e * e / (p * p) - 1 + (b - c * a) * (b - c * a) / (l * l));
				if(0 > p) return k;
				p = Math.sqrt(p);
				l = (-h + p) / (2 * d);
				m(l, c * l - c * a + b);
				p = (-h - p) / (2 * d);
				m(p, c * p - c * a + b)
			}
			return k
		},
		Vc: function(a, b, c, d, e, f, g, h, k) {
			var l = 1E21,
				m = a,
				n = b;
			if(H.Fe(a, b, a, d, e, f, g, h, k)) {
				var p = (k.x - e) * (k.x - e) + (k.y - f) * (k.y - f);
				p < l && (l = p, m = k.x, n = k.y)
			}
			H.Fe(c, b, c, d, e, f, g, h, k) && (p = (k.x - e) * (k.x - e) + (k.y - f) * (k.y - f), p < l && (l = p, m = k.x, n = k.y));
			H.Fe(a, b, c, b, e, f, g, h, k) && (b = (k.x -
				e) * (k.x - e) + (k.y - f) * (k.y - f), b < l && (l = b, m = k.x, n = k.y));
			H.Fe(a, d, c, d, e, f, g, h, k) && (a = (k.x - e) * (k.x - e) + (k.y - f) * (k.y - f), a < l && (l = a, m = k.x, n = k.y));
			k.h(m, n);
			return 1E21 > l
		},
		Qz: function(a, b, c, d, e, f, g, h, k) {
			c = a - c;
			g = e - g;
			0 === c || 0 === g ? 0 === c ? (b = (f - h) / g, h = a, e = b * h + (f - b * e)) : (f = (b - d) / c, h = e, e = f * h + (b - f * a)) : (d = (b - d) / c, h = (f - h) / g, a = b - d * a, h = (f - h * e - a) / (d - h), e = d * h + a);
			k.h(h, e);
			return k
		},
		Xs: function(a, b, c) {
			var d = b.x,
				e = b.y,
				f = c.x,
				g = c.y,
				h = a.left,
				k = a.right,
				l = a.top,
				m = a.bottom;
			return d === f ? (e < g ? (f = e, e = g) : f = g, h <= d && d <= k && f <= m && e >= l) : e ===
				g ? (d < f ? (g = d, d = f) : g = f, l <= e && e <= m && g <= k && d >= h) : a.ea(b) || a.ea(c) || H.Ws(h, l, k, l, d, e, f, g) || H.Ws(k, l, k, m, d, e, f, g) || H.Ws(k, m, h, m, d, e, f, g) || H.Ws(h, m, h, l, d, e, f, g) ? !0 : !1
		},
		Ws: function(a, b, c, d, e, f, g, h) {
			return 0 >= H.Hs(a, b, c, d, e, f) * H.Hs(a, b, c, d, g, h) && 0 >= H.Hs(e, f, g, h, a, b) * H.Hs(e, f, g, h, c, d)
		},
		Hs: function(a, b, c, d, e, f) {
			c -= a;
			d -= b;
			a = e - a;
			b = f - b;
			f = a * d - b * c;
			0 === f && (f = a * c + b * d, 0 < f && (f = (a - c) * c + (b - d) * d, 0 > f && (f = 0)));
			return 0 > f ? -1 : 0 < f ? 1 : 0
		},
		Yp: function(a) {
			0 > a && (a += 360);
			360 <= a && (a -= 360);
			return a
		},
		$w: function(a, b, c, d, e, f) {
			var g = Math.PI;
			f || (d *= g / 180, e *= g / 180);
			var h = d > e ? -1 : 1;
			f = [];
			var k = g / 2,
				l = d;
			d = Math.min(2 * g, Math.abs(e - d));
			if(1E-5 > d) return k = l + h * Math.min(d, k), h = a + c * Math.cos(l), l = b + c * Math.sin(l), a += c * Math.cos(k), b += c * Math.sin(k), c = (h + a) / 2, k = (l + b) / 2, f.push([h, l, c, k, c, k, a, b]), f;
			for(; 1E-5 < d;) e = l + h * Math.min(d, k), f.push(H.ty(c, l, e, a, b)), d -= Math.abs(e - l), l = e;
			return f
		},
		ty: function(a, b, c, d, e) {
			var f = (c - b) / 2,
				g = a * Math.cos(f),
				h = a * Math.sin(f),
				k = -h,
				l = g * g + k * k,
				m = l + g * g + k * h;
			l = 4 / 3 * (Math.sqrt(2 * l * m) - m) / (g * h - k * g);
			h = g - l * k;
			g = k + l * g;
			k = -g;
			l = f + b;
			f = Math.cos(l);
			l = Math.sin(l);
			return [d + a * Math.cos(b), e + a * Math.sin(b), d + h * f - g * l, e + h * l + g * f, d + h * f - k * l, e + h * l + k * f, d + a * Math.cos(c), e + a * Math.sin(c)]
		},
		Np: function(a, b, c, d, e, f, g) {
			c = Math.floor((a - c) / e) * e + c;
			d = Math.floor((b - d) / f) * f + d;
			var h = c;
			c + e - a < e / 2 && (h = c + e);
			a = d;
			d + f - b < f / 2 && (a = d + f);
			g.h(h, a);
			return g
		},
		kx: function(a, b) {
			var c = Math.max(a, b);
			a = Math.min(a, b);
			var d;
			do b = c % a, c = d = a, a = b; while (0 < b);
			return d
		},
		yy: function(a, b, c, d) {
			var e = 0 > c,
				f = 0 > d;
			if(a < b) {
				var g = 1;
				var h = 0
			} else g = 0, h = 1;
			var k = 0 === g ? a : b;
			var l = 0 === g ? c : d;
			if(0 === g ? e : f) l = -l;
			g = h;
			c = 0 === g ? c : d;
			if(0 === g ? e : f) c = -c;
			return H.zy(k, 0 === g ? a : b, l, c, 0, 0)
		},
		zy: function(a, b, c, d, e, f) {
			if(0 < d)
				if(0 < c) {
					e = a * a;
					f = b * b;
					a *= c;
					var g = b * d,
						h = -f + g,
						k = -f + Math.sqrt(a * a + g * g);
					b = h;
					for(var l = 0; 9999999999 > l; ++l) {
						b = .5 * (h + k);
						if(b === h || b === k) break;
						var m = a / (b + e),
							n = g / (b + f);
						m = m * m + n * n - 1;
						if(0 < m) h = b;
						else if(0 > m) k = b;
						else break
					}
					c = e * c / (b + e) - c;
					d = f * d / (b + f) - d;
					c = Math.sqrt(c * c + d * d)
				} else c = Math.abs(d - b);
			else d = a * a - b * b, f = a * c, f < d ? (d = f / d, f = b * Math.sqrt(Math.abs(1 - d * d)), c = a * d - c, c = Math.sqrt(c * c + f * f)) : c = Math.abs(c - a);
			return c
		},
		Ke: new vb,
		tm: new vb
	};
	H.za = H.Lz;

	function ee(a) {
		rb(this);
		this.v = !1;
		void 0 === a && (a = fe);
		this.va = a;
		this.Dc = this.pc = this.dd = this.cd = 0;
		this.$i = new E;
		this.dr = this.$i.Ba;
		this.Nq = (new M).freeze();
		this.qa = !0;
		this.Gm = this.tk = null;
		this.Hm = NaN;
		this.bf = ed;
		this.cf = od;
		this.Vk = this.Xk = NaN;
		this.Df = ge
	}
	ee.prototype.copy = function() {
		var a = new ee;
		a.va = this.va;
		a.cd = this.cd;
		a.dd = this.dd;
		a.pc = this.pc;
		a.Dc = this.Dc;
		for(var b = this.$i.j, c = b.length, d = a.$i, e = 0; e < c; e++) {
			var f = b[e].copy();
			d.add(f)
		}
		a.dr = this.dr;
		a.Nq.assign(this.Nq);
		a.qa = this.qa;
		a.tk = this.tk;
		a.Gm = this.Gm;
		a.Hm = this.Hm;
		a.bf = this.bf.I();
		a.cf = this.cf.I();
		a.Xk = this.Xk;
		a.Vk = this.Vk;
		a.Df = this.Df;
		return a
	};
	t = ee.prototype;
	t.ga = function() {
		this.freeze();
		Object.freeze(this);
		return this
	};
	t.freeze = function() {
		this.v = !0;
		var a = this.figures;
		a.freeze();
		a = a.j;
		for(var b = a.length, c = 0; c < b; c++) a[c].freeze();
		return this
	};
	t.ha = function() {
		Object.isFrozen(this) && A("cannot thaw constant: " + this);
		this.v = !1;
		var a = this.figures;
		a.ha();
		a = a.j;
		for(var b = a.length, c = 0; c < b; c++) a[c].ha();
		return this
	};
	t.Oa = function(a) {
		if(!(a instanceof ee)) return !1;
		if(this.type !== a.type) return this.type === he && a.type === fe ? ie(this, a) : a.type === he && this.type === fe ? ie(a, this) : !1;
		if(this.type === fe) {
			var b = this.figures.j;
			a = a.figures.j;
			var c = b.length;
			if(c !== a.length) return !1;
			for(var d = 0; d < c; d++)
				if(!b[d].Oa(a[d])) return !1;
			return !0
		}
		return H.w(this.startX, a.startX) && H.w(this.startY, a.startY) && H.w(this.endX, a.endX) && H.w(this.endY, a.endY)
	};

	function ie(a, b) {
		return a.type !== he || b.type !== fe ? !1 : 1 === b.figures.count && (b = b.figures.N(0), 1 === b.segments.count && H.w(a.startX, b.startX) && H.w(a.startY, b.startY) && (b = b.segments.N(0), b.type === je && H.w(a.endX, b.endX) && H.w(a.endY, b.endY))) ? !0 : !1
	}

	function ke(a) {
		return a.toString()
	}
	t.ib = function(a) {
		a.classType === ee && (this.type = a)
	};
	t.toString = function(a) {
		void 0 === a && (a = -1);
		switch(this.type) {
			case he:
				return 0 > a ? "M" + this.startX.toString() + " " + this.startY.toString() + "L" + this.endX.toString() + " " + this.endY.toString() : "M" + this.startX.toFixed(a) + " " + this.startY.toFixed(a) + "L" + this.endX.toFixed(a) + " " + this.endY.toFixed(a);
			case le:
				var b = new M(this.startX, this.startY, 0, 0);
				b.Sv(this.endX, this.endY, 0, 0);
				return 0 > a ? "M" + b.x.toString() + " " + b.y.toString() + "H" + b.right.toString() + "V" + b.bottom.toString() + "H" + b.left.toString() + "z" : "M" + b.x.toFixed(a) +
					" " + b.y.toFixed(a) + "H" + b.right.toFixed(a) + "V" + b.bottom.toFixed(a) + "H" + b.left.toFixed(a) + "z";
			case me:
				b = new M(this.startX, this.startY, 0, 0);
				b.Sv(this.endX, this.endY, 0, 0);
				if(0 > a) return a = b.left.toString() + " " + (b.y + b.height / 2).toString(), "M" + a + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + (b.right.toString() + " " + (b.y + b.height / 2).toString()) + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + a;
				var c = b.left.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
				return "M" + c + "A" + (b.width /
					2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + (b.right.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a)) + "A" + (b.width / 2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + c;
			case fe:
				b = "";
				c = this.figures.j;
				for(var d = c.length, e = 0; e < d; e++) {
					var f = c[e];
					0 < e && (b += " x ");
					f.isFilled && (b += "F ");
					b += f.toString(a)
				}
				return b;
			default:
				return this.type.toString()
		}
	};

	function re(a, b) {
		function c() {
			return u >= B - 1 ? !0 : null !== k[u + 1].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)
		}

		function d() {
			u++;
			return k[u]
		}

		function e() {
			var a = new G(parseFloat(d()), parseFloat(d()));
			v === v.toLowerCase() && (a.x = z.x + a.x, a.y = z.y + a.y);
			return a
		}

		function f() {
			return z = e()
		}

		function g() {
			return y = e()
		}

		function h() {
			return "c" !== x.toLowerCase() && "s" !== x.toLowerCase() ? z : new G(2 * z.x - y.x, 2 * z.y - y.y)
		}
		void 0 === b && (b = !1);
		a = a.replace(/,/gm, " ");
		a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,
			"$1 $2");
		a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm, "$1 $2");
		a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^\s])/gm, "$1 $2");
		a = a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm, "$1 $2");
		a = a.replace(/([0-9])([+\-])/gm, "$1 $2");
		a = a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm, "$1 $3 $4 ");
		a = a.replace(/[\s\r\t\n]+/gm, " ");
		a = a.replace(/^\s+|\s+$/g, "");
		var k = a.split(" ");
		for(a = 0; a < k.length; a++) {
			var l = k[a];
			if(null !== l.match(/(\.[0-9]*)(\.)/gm)) {
				for(var m =
						La(), n = "", p = !1, q = 0; q < l.length; q++) {
					var r = l[q];
					"." !== r || p ? "." === r ? (m.push(n), n = ".") : n += r : (p = !0, n += r)
				}
				m.push(n);
				k.splice(a, 1);
				for(l = 0; l < m.length; l++) k.splice(a + l, 0, m[l]);
				a += m.length - 1;
				Na(m)
			}
		}
		var u = -1,
			v = "",
			x = "";
		m = new G(0, 0);
		var y = new G(0, 0),
			z = new G(0, 0),
			B = k.length;
		a = se(null);
		n = l = !1;
		p = !0;
		for(q = null; !(u >= B - 1);)
			if(x = v, v = d(), "" !== v) switch(v.toUpperCase()) {
				case "X":
					p = !0;
					n = l = !1;
					break;
				case "M":
					q = f();
					null === a.ec || !0 === p ? (te(a, q.x, q.y, l, !n), p = !1) : a.moveTo(q.x, q.y);
					for(m = z; !c();) q = f(), a.lineTo(q.x, q.y);
					break;
				case "L":
					for(; !c();) q = f(), a.lineTo(q.x, q.y);
					break;
				case "H":
					for(; !c();) z = new G((v === v.toLowerCase() ? z.x : 0) + parseFloat(d()), z.y), a.lineTo(z.x, z.y);
					break;
				case "V":
					for(; !c();) z = new G(z.x, (v === v.toLowerCase() ? z.y : 0) + parseFloat(d())), a.lineTo(z.x, z.y);
					break;
				case "C":
					for(; !c();) {
						q = e();
						r = g();
						var C = f();
						ue(a, q.x, q.y, r.x, r.y, C.x, C.y)
					}
					break;
				case "S":
					for(; !c();) q = h(), r = g(), C = f(), ue(a, q.x, q.y, r.x, r.y, C.x, C.y);
					break;
				case "Q":
					for(; !c();) q = g(), r = f(), ve(a, q.x, q.y, r.x, r.y);
					break;
				case "T":
					for(; !c();) y = q = h(), r = f(), ve(a,
						q.x, q.y, r.x, r.y);
					break;
				case "B":
					for(; !c();) {
						q = parseFloat(d());
						r = parseFloat(d());
						C = parseFloat(d());
						var I = parseFloat(d()),
							J = parseFloat(d()),
							K = J,
							X = !1;
						c() || (K = parseFloat(d()), c() || (X = 0 !== parseFloat(d())));
						v === v.toLowerCase() && (C += z.x, I += z.y);
						a.arcTo(q, r, C, I, J, K, X)
					}
					break;
				case "A":
					for(; !c();) q = Math.abs(parseFloat(d())), r = Math.abs(parseFloat(d())), C = parseFloat(d()), I = !!parseFloat(d()), J = !!parseFloat(d()), K = f(), we(a, q, r, C, I, J, K.x, K.y);
					break;
				case "Z":
					xe(a);
					z = m;
					break;
				case "F":
					q = "";
					for(r = 1; k[u + r];)
						if(null !==
							k[u + r].match(/[Uu]/)) r++;
						else if(null === k[u + r].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)) r++;
					else {
						q = k[u + r];
						break
					}
					q.match(/[Mm]/) ? l = !0 : 0 < a.ec.segments.length && (a.ec.isFilled = !0);
					break;
				case "U":
					q = "";
					for(r = 1; k[u + r];)
						if(null !== k[u + r].match(/[Ff]/)) r++;
						else if(null === k[u + r].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)) r++;
					else {
						q = k[u + r];
						break
					}
					q.match(/[Mm]/) ? n = !0 : a.mq(!1)
			}
		m = a.Rs;
		ye = a;
		if(b)
			for(b = m.figures.iterator; b.next();) b.value.isFilled = !0;
		return m
	}

	function ze(a, b) {
		for(var c = a.length, d = G.alloc(), e = 0; e < c; e++) {
			var f = a[e];
			d.x = f[0];
			d.y = f[1];
			b.ta(d);
			f[0] = d.x;
			f[1] = d.y;
			d.x = f[2];
			d.y = f[3];
			b.ta(d);
			f[2] = d.x;
			f[3] = d.y;
			d.x = f[4];
			d.y = f[5];
			b.ta(d);
			f[4] = d.x;
			f[5] = d.y;
			d.x = f[6];
			d.y = f[7];
			b.ta(d);
			f[6] = d.x;
			f[7] = d.y
		}
		G.free(d)
	}
	t.cv = function() {
		if(this.qa || this.dr !== this.figures.Ba) return !0;
		for(var a = this.figures.j, b = a.length, c = 0; c < b; c++)
			if(a[c].cv()) return !0;
		return !1
	};
	ee.prototype.computeBounds = function() {
		this.qa = !1;
		this.Gm = this.tk = null;
		this.Hm = NaN;
		this.dr = this.figures.Ba;
		for(var a = this.figures.j, b = a.length, c = 0; c < b; c++) {
			var d = a[c];
			d.qa = !1;
			var e = d.segments;
			d.ns = e.Ba;
			d = e.j;
			e = d.length;
			for(var f = 0; f < e; f++) {
				var g = d[f];
				g.qa = !1;
				g.Le = null
			}
		}
		a = this.Nq;
		a.ha();
		isNaN(this.Xk) || isNaN(this.Vk) ? a.h(0, 0, 0, 0) : a.h(0, 0, this.Xk, this.Vk);
		Ae(this, a, !1);
		Ic(a, 0, 0, 0, 0);
		a.freeze()
	};
	ee.prototype.Yw = function() {
		var a = new M;
		Ae(this, a, !0);
		return a
	};

	function Ae(a, b, c) {
		switch(a.type) {
			case he:
			case le:
			case me:
				c ? b.h(a.cd, a.dd, 0, 0) : Ic(b, a.cd, a.dd, 0, 0);
				Ic(b, a.pc, a.Dc, 0, 0);
				break;
			case fe:
				var d = a.figures;
				a = d.j;
				d = d.length;
				for(var e = 0; e < d; e++) {
					var f = a[e];
					c && 0 === e ? b.h(f.startX, f.startY, 0, 0) : Ic(b, f.startX, f.startY, 0, 0);
					for(var g = f.segments.j, h = g.length, k = f.startX, l = f.startY, m = 0; m < h; m++) {
						var n = g[m];
						switch(n.type) {
							case je:
							case Be:
								k = n.endX;
								l = n.endY;
								Ic(b, k, l, 0, 0);
								break;
							case Ce:
								H.Nl(k, l, n.point1X, n.point1Y, n.point2X, n.point2Y, n.endX, n.endY, .5, b);
								k = n.endX;
								l = n.endY;
								break;
							case De:
								H.kv(k, l, n.point1X, n.point1Y, n.endX, n.endY, .5, b);
								k = n.endX;
								l = n.endY;
								break;
							case Ee:
							case Fe:
								var p = n.type === Ee ? Ge(n, f) : Oe(n, f, k, l),
									q = p.length;
								if(0 === q) {
									k = n.centerX;
									l = n.centerY;
									Ic(b, k, l, 0, 0);
									break
								}
								n = null;
								for(var r = 0; r < q; r++) n = p[r], H.Nl(n[0], n[1], n[2], n[3], n[4], n[5], n[6], n[7], .5, b);
								null !== n && (k = n[6], l = n[7]);
								break;
							default:
								A("Unknown Segment type: " + n.type)
						}
					}
				}
				break;
			default:
				A("Unknown Geometry type: " + a.type)
		}
	}
	ee.prototype.normalize = function() {
		this.v && za(this);
		var a = this.Yw();
		this.offset(-a.x, -a.y);
		return new G(-a.x, -a.y)
	};
	ee.prototype.offset = function(a, b) {
		this.v && za(this);
		this.transform(1, 0, 0, 1, a, b);
		return this
	};
	ee.prototype.scale = function(a, b) {
		this.v && za(this);
		this.transform(a, 0, 0, b, 0, 0);
		return this
	};
	ee.prototype.rotate = function(a, b, c) {
		this.v && za(this);
		void 0 === b && (b = 0);
		void 0 === c && (c = 0);
		var d = Yc.alloc();
		d.reset();
		d.rotate(a, b, c);
		this.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
		Yc.free(d);
		return this
	};
	t = ee.prototype;
	t.transform = function(a, b, c, d, e, f) {
		switch(this.type) {
			case he:
			case le:
			case me:
				var g = this.cd;
				var h = this.dd;
				this.cd = g * a + h * c + e;
				this.dd = g * b + h * d + f;
				g = this.pc;
				h = this.Dc;
				this.pc = g * a + h * c + e;
				this.Dc = g * b + h * d + f;
				break;
			case fe:
				for(var k = this.figures.j, l = k.length, m = 0; m < l; m++) {
					var n = k[m];
					g = n.startX;
					h = n.startY;
					n.startX = g * a + h * c + e;
					n.startY = g * b + h * d + f;
					n = n.segments.j;
					for(var p = n.length, q = 0; q < p; q++) {
						var r = n[q];
						switch(r.type) {
							case je:
							case Be:
								g = r.endX;
								h = r.endY;
								r.endX = g * a + h * c + e;
								r.endY = g * b + h * d + f;
								break;
							case Ce:
								g = r.point1X;
								h = r.point1Y;
								r.point1X = g * a + h * c + e;
								r.point1Y = g * b + h * d + f;
								g = r.point2X;
								h = r.point2Y;
								r.point2X = g * a + h * c + e;
								r.point2Y = g * b + h * d + f;
								g = r.endX;
								h = r.endY;
								r.endX = g * a + h * c + e;
								r.endY = g * b + h * d + f;
								break;
							case De:
								g = r.point1X;
								h = r.point1Y;
								r.point1X = g * a + h * c + e;
								r.point1Y = g * b + h * d + f;
								g = r.endX;
								h = r.endY;
								r.endX = g * a + h * c + e;
								r.endY = g * b + h * d + f;
								break;
							case Ee:
								g = r.centerX;
								h = r.centerY;
								r.centerX = g * a + h * c + e;
								r.centerY = g * b + h * d + f;
								0 !== b && (g = 180 * Math.atan2(b, a) / Math.PI, 0 > g && (g += 360), r.startAngle += g);
								0 > a && (r.startAngle = 180 - r.startAngle, r.sweepAngle = -r.sweepAngle);
								0 > d &&
									(r.startAngle = -r.startAngle, r.sweepAngle = -r.sweepAngle);
								r.radiusX *= Math.sqrt(a * a + c * c);
								void 0 !== r.radiusY && (r.radiusY *= Math.sqrt(b * b + d * d));
								break;
							case Fe:
								g = r.endX;
								h = r.endY;
								r.endX = g * a + h * c + e;
								r.endY = g * b + h * d + f;
								0 !== b && (g = 180 * Math.atan2(b, a) / Math.PI, 0 > g && (g += 360), r.xAxisRotation += g);
								0 > a && (r.xAxisRotation = 180 - r.xAxisRotation, r.isClockwiseArc = !r.isClockwiseArc);
								0 > d && (r.xAxisRotation = -r.xAxisRotation, r.isClockwiseArc = !r.isClockwiseArc);
								r.radiusX *= Math.sqrt(a * a + c * c);
								r.radiusY *= Math.sqrt(b * b + d * d);
								break;
							default:
								A("Unknown Segment type: " +
									r.type)
						}
					}
				}
		}
		this.qa = !0;
		return this
	};
	t.ea = function(a, b, c, d) {
		var e = a.x;
		a = a.y;
		for(var f = this.bounds.x - 20, g = 0, h, k, l, m, n, p = this.figures.j, q = p.length, r = 0; r < q; r++) {
			var u = p[r];
			if(u.isFilled) {
				if(c && u.ea(e, a, b)) return !0;
				var v = u.segments;
				h = u.startX;
				k = u.startY;
				for(var x = h, y = k, z = v.j, B = 0; B <= v.length; B++) {
					var C = void 0;
					if(B !== v.length) {
						C = z[B];
						var I = C.type;
						m = C.endX;
						n = C.endY
					} else I = je, m = x, n = y;
					switch(I) {
						case Be:
							x = Pe(e, a, f, a, h, k, x, y);
							if(isNaN(x)) return !0;
							g += x;
							x = m;
							y = n;
							break;
						case je:
							h = Pe(e, a, f, a, h, k, m, n);
							if(isNaN(h)) return !0;
							g += h;
							break;
						case Ce:
							l = H.Hp(h,
								k, C.point1X, C.point1Y, C.point2X, C.point2Y, m, n, f, a, e, a, .5);
							g += l;
							break;
						case De:
							l = H.Hp(h, k, (h + 2 * C.point1X) / 3, (k + 2 * C.point1Y) / 3, (2 * C.point1X + m) / 3, (2 * C.point1Y + n) / 3, m, n, f, a, e, a, .5);
							g += l;
							break;
						case Ee:
						case Fe:
							I = C.type === Ee ? Ge(C, u) : Oe(C, u, h, k);
							var J = I.length;
							if(0 === J) {
								h = Pe(e, a, f, a, h, k, C.centerX, C.centerY);
								if(isNaN(h)) return !0;
								g += h;
								break
							}
							C = null;
							for(var K = 0; K < J; K++) {
								C = I[K];
								if(0 === K) {
									l = Pe(e, a, f, a, h, k, C[0], C[1]);
									if(isNaN(l)) return !0;
									g += l
								}
								l = H.Hp(C[0], C[1], C[2], C[3], C[4], C[5], C[6], C[7], f, a, e, a, .5);
								g += l
							}
							null !==
								C && (m = C[6], n = C[7]);
							break;
						default:
							A("Unknown Segment type: " + C.type)
					}
					h = m;
					k = n
				}
				if(0 !== g) return !0;
				g = 0
			} else if(u.ea(e, a, d ? b : b + 2)) return !0
		}
		return 0 !== g
	};

	function Pe(a, b, c, d, e, f, g, h) {
		if(H.Vb(e, f, g, h, .05, a, b)) return NaN;
		var k = (a - c) * (f - h);
		if(0 === k) return 0;
		var l = ((a * d - b * c) * (e - g) - (a - c) * (e * h - f * g)) / k;
		b = (a * d - b * c) * (f - h) / k;
		if(l >= a) return 0;
		if((e > g ? e - g : g - e) < (f > h ? f - h : h - f))
			if(f < h) {
				if(b < f || b > h) return 0
			} else {
				if(b < h || b > f) return 0
			}
		else if(e < g) {
			if(l < e || l > g) return 0
		} else if(l < g || l > e) return 0;
		return 0 < k ? 1 : -1
	}

	function Qe(a, b, c, d) {
		a = a.figures.j;
		for(var e = a.length, f = 0; f < e; f++)
			if(a[f].ea(b, c, d)) return !0;
		return !1
	}
	t.Tu = function(a, b) {
		0 > a ? a = 0 : 1 < a && (a = 1);
		void 0 === b && (b = new G);
		if(this.type === he) return b.h(this.startX + a * (this.endX - this.startX), this.startY + a * (this.endY - this.startY)), b;
		for(var c = this.flattenedSegments, d = this.flattenedLengths, e = c.length, f = this.flattenedTotalLength * a, g = 0, h = 0; h < e; h++) {
			var k = d[h],
				l = k.length;
			for(a = 0; a < l; a++) {
				var m = k[a];
				if(g + m >= f) return d = (f - g) / m, c = c[h], e = c[2 * a], h = c[2 * a + 1], b.h(e + (c[2 * a + 2] - e) * d, h + (c[2 * a + 3] - h) * d), b;
				g += m
			}
		}
		b.h(NaN, NaN);
		return b
	};
	t.lx = function(a) {
		if(this.type === he) {
			var b = this.startX,
				c = this.startY,
				d = this.endX,
				e = this.endY;
			if(b !== d || c !== e) {
				var f = a.x;
				a = a.y;
				if(b === d) {
					if(c < e) {
						var g = c;
						d = e
					} else g = e, d = c;
					return a <= g ? g === c ? 0 : 1 : a >= d ? d === c ? 0 : 1 : Math.abs(a - c) / (d - g)
				}
				return c === e ? (b < d ? g = b : (g = d, d = b), f <= g ? g === b ? 0 : 1 : f >= d ? d === b ? 0 : 1 : Math.abs(f - b) / (d - g)) : ((f - b) * (f - b) + (a - c) * (a - c)) / ((d - b) * (d - b) + (e - c) * (e - c))
			}
		} else if(this.type === le) {
			g = this.startX;
			var h = this.startY,
				k = this.endX;
			e = this.endY;
			if(g !== k || h !== e) {
				b = k - g;
				c = e - h;
				f = 2 * b + 2 * c;
				d = a.x;
				a = a.y;
				d = Math.min(Math.max(d,
					g), k);
				a = Math.min(Math.max(a, h), e);
				g = Math.abs(d - g);
				k = Math.abs(d - k);
				h = Math.abs(a - h);
				e = Math.abs(a - e);
				var l = Math.min(g, k, h, e);
				if(l === h) return d / f;
				if(l === k) return(b + a) / f;
				if(l === e) return(2 * b + c - d) / f;
				if(l === g) return(2 * b + 2 * c - a) / f
			}
		} else {
			b = this.flattenedSegments;
			c = this.flattenedLengths;
			f = this.flattenedTotalLength;
			d = G.alloc();
			e = Infinity;
			h = g = 0;
			k = b.length;
			for(var m = l = 0, n = 0; n < k; n++)
				for(var p = b[n], q = c[n], r = p.length, u = 0; u < r; u += 2) {
					var v = p[u],
						x = p[u + 1];
					if(0 !== u) {
						H.Ii(l, m, v, x, a.x, a.y, d);
						var y = (d.x - a.x) * (d.x - a.x) + (d.y -
							a.y) * (d.y - a.y);
						y < e && (e = y, g = h, g += Math.sqrt((d.x - l) * (d.x - l) + (d.y - m) * (d.y - m)));
						h += q[(u - 2) / 2]
					}
					l = v;
					m = x
				}
			G.free(d);
			a = g / f;
			return 0 > a ? 0 : 1 < a ? 1 : a
		}
		return 0
	};

	function Re(a) {
		if(null === a.tk) {
			var b = a.tk = [],
				c = a.Gm = [],
				d = [],
				e = [];
			if(a.type === he) d.push(a.startX), d.push(a.startY), d.push(a.endX), d.push(a.endY), b.push(d), e.push(Math.sqrt((a.startX - a.endX) * (a.startX - a.endX) + (a.startY - a.endY) * (a.startY - a.endY))), c.push(e);
			else if(a.type === le) d.push(a.startX), d.push(a.startY), d.push(a.endX), d.push(a.startY), d.push(a.endX), d.push(a.endY), d.push(a.startX), d.push(a.endY), d.push(a.startX), d.push(a.startY), b.push(d), e.push(Math.abs(a.startX - a.endX)), e.push(Math.abs(a.startY -
				a.endY)), e.push(Math.abs(a.startX - a.endX)), e.push(Math.abs(a.startY - a.endY)), c.push(e);
			else if(a.type === me) {
				var f = new Se;
				f.startX = a.endX;
				f.startY = (a.startY + a.endY) / 2;
				var g = new Te(Ee);
				g.startAngle = 0;
				g.sweepAngle = 360;
				g.centerX = (a.startX + a.endX) / 2;
				g.centerY = (a.startY + a.endY) / 2;
				g.radiusX = Math.abs(a.startX - a.endX) / 2;
				g.radiusY = Math.abs(a.startY - a.endY) / 2;
				f.add(g);
				a = Ge(g, f);
				e = a.length;
				if(0 === e) d.push(g.centerX), d.push(g.centerY);
				else {
					g = f.startX;
					f = f.startY;
					for(var h = 0; h < e; h++) {
						var k = a[h];
						H.ye(g, f, k[2], k[3],
							k[4], k[5], k[6], k[7], .5, d);
						g = k[6];
						f = k[7]
					}
				}
				b.push(d);
				c.push(Ue(d))
			} else
				for(a = a.figures.iterator; a.next();) {
					e = a.value;
					d = [];
					d.push(e.startX);
					d.push(e.startY);
					g = e.startX;
					f = e.startY;
					h = g;
					k = f;
					for(var l = e.segments.j, m = l.length, n = 0; n < m; n++) {
						var p = l[n];
						switch(p.type) {
							case Be:
								4 <= d.length && (b.push(d), c.push(Ue(d)));
								d = [];
								d.push(p.endX);
								d.push(p.endY);
								g = p.endX;
								f = p.endY;
								h = g;
								k = f;
								break;
							case je:
								d.push(p.endX);
								d.push(p.endY);
								g = p.endX;
								f = p.endY;
								break;
							case Ce:
								H.ye(g, f, p.point1X, p.point1Y, p.point2X, p.point2Y, p.endX, p.endY,
									.5, d);
								g = p.endX;
								f = p.endY;
								break;
							case De:
								H.aq(g, f, p.point1X, p.point1Y, p.endX, p.endY, .5, d);
								g = p.endX;
								f = p.endY;
								break;
							case Ee:
								var q = Ge(p, e),
									r = q.length;
								if(0 === r) {
									d.push(p.centerX);
									d.push(p.centerY);
									g = p.centerX;
									f = p.centerY;
									break
								}
								for(var u = 0; u < r; u++) {
									var v = q[u];
									H.ye(g, f, v[2], v[3], v[4], v[5], v[6], v[7], .5, d);
									g = v[6];
									f = v[7]
								}
								break;
							case Fe:
								q = Oe(p, e, g, f);
								r = q.length;
								if(0 === r) {
									d.push(p.centerX);
									d.push(p.centerY);
									g = p.centerX;
									f = p.centerY;
									break
								}
								for(u = 0; u < r; u++) v = q[u], H.ye(g, f, v[2], v[3], v[4], v[5], v[6], v[7], .5, d), g = v[6],
									f = v[7];
								break;
							default:
								A("Segment not of valid type: " + p.type)
						}
						p.isClosed && (d.push(h), d.push(k))
					}
					4 <= d.length && (b.push(d), c.push(Ue(d)))
				}
		}
	}

	function Ue(a) {
		for(var b = [], c = 0, d = 0, e = a.length, f = 0; f < e; f += 2) {
			var g = a[f],
				h = a[f + 1];
			0 !== f && b.push(Math.sqrt(Zb(c, d, g, h)));
			c = g;
			d = h
		}
		return b
	}
	t.add = function(a) {
		this.$i.add(a);
		return this
	};
	t.pm = function(a, b, c, d, e, f, g, h) {
		this.v && za(this);
		this.bf = (new N(a, b, e, f)).freeze();
		this.cf = (new N(c, d, g, h)).freeze();
		return this
	};
	oa.Object.defineProperties(ee.prototype, {
		flattenedSegments: {
			get: function() {
				Re(this);
				return this.tk
			}
		},
		flattenedLengths: {
			get: function() {
				Re(this);
				return this.Gm
			}
		},
		flattenedTotalLength: {
			get: function() {
				var a = this.Hm;
				if(isNaN(a)) {
					if(this.type === he) {
						a = Math.abs(this.endX - this.startX);
						var b = Math.abs(this.endY - this.startY);
						a = Math.sqrt(a * a + b * b)
					} else if(this.type === le) a = 2 * Math.abs(this.endX - this.startX) + 2 * Math.abs(this.endY -
						this.startY);
					else {
						b = this.flattenedLengths;
						for(var c = b.length, d = a = 0; d < c; d++)
							for(var e = b[d], f = e.length, g = 0; g < f; g++) a += e[g]
					}
					this.Hm = a
				}
				return a
			}
		},
		type: {
			get: function() {
				return this.va
			},
			set: function(a) {
				this.va !== a && (this.v && za(this, a), this.va = a, this.qa = !0)
			}
		},
		startX: {
			get: function() {
				return this.cd
			},
			set: function(a) {
				this.cd !== a && (this.v && za(this, a), this.cd = a, this.qa = !0)
			}
		},
		startY: {
			get: function() {
				return this.dd
			},
			set: function(a) {
				this.dd !==
					a && (this.v && za(this, a), this.dd = a, this.qa = !0)
			}
		},
		endX: {
			get: function() {
				return this.pc
			},
			set: function(a) {
				this.pc !== a && (this.v && za(this, a), this.pc = a, this.qa = !0)
			}
		},
		endY: {
			get: function() {
				return this.Dc
			},
			set: function(a) {
				this.Dc !== a && (this.v && za(this, a), this.Dc = a, this.qa = !0)
			}
		},
		figures: {
			get: function() {
				return this.$i
			},
			set: function(a) {
				this.$i !== a && (this.v && za(this, a), this.$i = a, this.qa = !0)
			}
		},
		spot1: {
			get: function() {
				return this.bf
			},
			set: function(a) {
				this.v && za(this, a);
				this.bf = a.I()
			}
		},
		spot2: {
			get: function() {
				return this.cf
			},
			set: function(a) {
				this.v && za(this, a);
				this.cf = a.I()
			}
		},
		defaultStretch: {
			get: function() {
				return this.Df
			},
			set: function(a) {
				this.v && za(this, a);
				this.Df = a
			}
		},
		bounds: {
			get: function() {
				this.cv() && this.computeBounds();
				return this.Nq
			}
		}
	});
	ee.prototype.setSpots = ee.prototype.pm;
	ee.prototype.add = ee.prototype.add;
	ee.prototype.getFractionForPoint = ee.prototype.lx;
	ee.prototype.getPointAlongPath = ee.prototype.Tu;
	ee.prototype.transform = ee.prototype.transform;
	ee.prototype.rotate = ee.prototype.rotate;
	ee.prototype.scale = ee.prototype.scale;
	ee.prototype.offset = ee.prototype.offset;
	ee.prototype.normalize = ee.prototype.normalize;
	ee.prototype.computeBoundsWithoutOrigin = ee.prototype.Yw;
	ee.prototype.equalsApprox = ee.prototype.Oa;
	var he = new D(ee, "Line", 0),
		le = new D(ee, "Rectangle", 1),
		me = new D(ee, "Ellipse", 2),
		fe = new D(ee, "Path", 3);
	ee.className = "Geometry";
	ee.stringify = ke;
	ee.fillPath = function(a) {
		a = a.split(/[Xx]/);
		for(var b = a.length, c = "", d = 0; d < b; d++) {
			var e = a[d];
			c = null !== e.match(/[Ff]/) ? 0 === d ? c + e : c + ("X" + (" " === e[0] ? "" : " ") + e) : c + ((0 === d ? "" : "X ") + "F" + (" " === e[0] ? "" : " ") + e)
		}
		return c
	};
	ee.parse = re;
	ee.Line = he;
	ee.Rectangle = le;
	ee.Ellipse = me;
	ee.Path = fe;

	function Se(a, b, c, d) {
		rb(this);
		this.v = !1;
		void 0 === c && (c = !0);
		this.vr = c;
		void 0 === d && (d = !0);
		this.yr = d;
		void 0 !== a ? this.cd = a : this.cd = 0;
		void 0 !== b ? this.dd = b : this.dd = 0;
		this.tl = new E;
		this.ns = this.tl.Ba;
		this.qa = !0
	}
	Se.prototype.copy = function() {
		var a = new Se;
		a.vr = this.vr;
		a.yr = this.yr;
		a.cd = this.cd;
		a.dd = this.dd;
		for(var b = this.tl.j, c = b.length, d = a.tl, e = 0; e < c; e++) {
			var f = b[e].copy();
			d.add(f)
		}
		a.ns = this.ns;
		a.qa = this.qa;
		return a
	};
	t = Se.prototype;
	t.Oa = function(a) {
		if(!(a instanceof Se && H.w(this.startX, a.startX) && H.w(this.startY, a.startY))) return !1;
		var b = this.segments.j;
		a = a.segments.j;
		var c = b.length;
		if(c !== a.length) return !1;
		for(var d = 0; d < c; d++)
			if(!b[d].Oa(a[d])) return !1;
		return !0
	};
	t.toString = function(a) {
		void 0 === a && (a = -1);
		var b = 0 > a ? "M" + this.startX.toString() + " " + this.startY.toString() : "M" + this.startX.toFixed(a) + " " + this.startY.toFixed(a);
		for(var c = this.segments.j, d = c.length, e = 0; e < d; e++) b += " " + c[e].toString(a);
		return b
	};
	t.freeze = function() {
		this.v = !0;
		var a = this.segments;
		a.freeze();
		var b = a.j;
		a = a.length;
		for(var c = 0; c < a; c++) b[c].freeze();
		return this
	};
	t.ha = function() {
		this.v = !1;
		var a = this.segments;
		a.ha();
		a = a.j;
		for(var b = a.length, c = 0; c < b; c++) a[c].ha();
		return this
	};
	t.cv = function() {
		if(this.qa) return !0;
		var a = this.segments;
		if(this.ns !== a.Ba) return !0;
		a = a.j;
		for(var b = a.length, c = 0; c < b; c++)
			if(a[c].qa) return !0;
		return !1
	};
	t.add = function(a) {
		this.tl.add(a);
		return this
	};
	t.ea = function(a, b, c) {
		for(var d = this.startX, e = this.startY, f = d, g = e, h = this.segments.j, k = h.length, l = 0; l < k; l++) {
			var m = h[l];
			switch(m.type) {
				case Be:
					f = m.endX;
					g = m.endY;
					d = m.endX;
					e = m.endY;
					break;
				case je:
					if(H.Vb(d, e, m.endX, m.endY, c, a, b)) return !0;
					d = m.endX;
					e = m.endY;
					break;
				case Ce:
					if(H.Es(d, e, m.point1X, m.point1Y, m.point2X, m.point2Y, m.endX, m.endY, .5, a, b, c)) return !0;
					d = m.endX;
					e = m.endY;
					break;
				case De:
					if(H.lv(d, e, m.point1X, m.point1Y, m.endX, m.endY, .5, a, b, c)) return !0;
					d = m.endX;
					e = m.endY;
					break;
				case Ee:
				case Fe:
					var n = m.type ===
						Ee ? Ge(m, this) : Oe(m, this, d, e),
						p = n.length;
					if(0 === p) {
						if(H.Vb(d, e, m.centerX, m.centerY, c, a, b)) return !0;
						d = m.centerX;
						e = m.centerY;
						break
					}
					for(var q = null, r = 0; r < p; r++)
						if(q = n[r], 0 === r && H.Vb(d, e, q[0], q[1], c, a, b) || H.Es(q[0], q[1], q[2], q[3], q[4], q[5], q[6], q[7], .5, a, b, c)) return !0;
					null !== q && (d = q[6], e = q[7]);
					break;
				default:
					A("Unknown Segment type: " + m.type)
			}
			if(m.isClosed && (d !== f || e !== g) && H.Vb(d, e, f, g, c, a, b)) return !0
		}
		return !1
	};
	oa.Object.defineProperties(Se.prototype, {
		isFilled: {
			get: function() {
				return this.vr
			},
			set: function(a) {
				this.v && za(this, a);
				this.vr = a
			}
		},
		isShadowed: {
			get: function() {
				return this.yr
			},
			set: function(a) {
				this.v && za(this, a);
				this.yr = a
			}
		},
		startX: {
			get: function() {
				return this.cd
			},
			set: function(a) {
				this.v && za(this, a);
				this.cd = a;
				this.qa = !0
			}
		},
		startY: {
			get: function() {
				return this.dd
			},
			set: function(a) {
				this.v && za(this,
					a);
				this.dd = a;
				this.qa = !0
			}
		},
		segments: {
			get: function() {
				return this.tl
			},
			set: function(a) {
				this.v && za(this, a);
				this.tl = a;
				this.qa = !0
			}
		}
	});
	Se.prototype.add = Se.prototype.add;
	Se.prototype.equalsApprox = Se.prototype.Oa;
	Se.className = "PathFigure";

	function Te(a, b, c, d, e, f, g, h) {
		rb(this);
		this.v = !1;
		void 0 === a && (a = je);
		this.va = a;
		void 0 !== b ? this.pc = b : this.pc = 0;
		void 0 !== c ? this.Dc = c : this.Dc = 0;
		void 0 === d && (d = 0);
		void 0 === e && (e = 0);
		void 0 === f && (f = 0);
		void 0 === g && (g = 0);
		a === Fe ? (a = f % 360, 0 > a && (a += 360), this.re = a, this.ji = 0, this.ki = Math.max(d, 0), this.Wg = Math.max(e, 0), this.al = "boolean" === typeof g ? !!g : !1, this.yk = !!h) : (this.re = d, this.ji = e, a === Ee && (f = Math.max(f, 0)), this.ki = f, "number" === typeof g ? (a === Ee && (g = Math.max(g, 0)), this.Wg = g) : this.Wg = 0, this.yk = this.al = !1);
		this.fj = !1;
		this.qa = !0;
		this.Le = null
	}
	Te.prototype.copy = function() {
		var a = new Te;
		a.va = this.va;
		a.pc = this.pc;
		a.Dc = this.Dc;
		a.re = this.re;
		a.ji = this.ji;
		a.ki = this.ki;
		a.Wg = this.Wg;
		a.al = this.al;
		a.yk = this.yk;
		a.fj = this.fj;
		a.qa = this.qa;
		return a
	};
	t = Te.prototype;
	t.Oa = function(a) {
		if(!(a instanceof Te) || this.type !== a.type || this.isClosed !== a.isClosed) return !1;
		switch(this.type) {
			case Be:
			case je:
				return H.w(this.endX, a.endX) && H.w(this.endY, a.endY);
			case Ce:
				return H.w(this.endX, a.endX) && H.w(this.endY, a.endY) && H.w(this.point1X, a.point1X) && H.w(this.point1Y, a.point1Y) && H.w(this.point2X, a.point2X) && H.w(this.point2Y, a.point2Y);
			case De:
				return H.w(this.endX, a.endX) && H.w(this.endY, a.endY) && H.w(this.point1X, a.point1X) && H.w(this.point1Y, a.point1Y);
			case Ee:
				return H.w(this.startAngle,
					a.startAngle) && H.w(this.sweepAngle, a.sweepAngle) && H.w(this.centerX, a.centerX) && H.w(this.centerY, a.centerY) && H.w(this.radiusX, a.radiusX) && H.w(this.radiusY, a.radiusY);
			case Fe:
				return this.isClockwiseArc === a.isClockwiseArc && this.isLargeArc === a.isLargeArc && H.w(this.xAxisRotation, a.xAxisRotation) && H.w(this.endX, a.endX) && H.w(this.endY, a.endY) && H.w(this.radiusX, a.radiusX) && H.w(this.radiusY, a.radiusY);
			default:
				return !1
		}
	};
	t.ib = function(a) {
		a.classType === Te && (this.type = a)
	};
	t.toString = function(a) {
		void 0 === a && (a = -1);
		switch(this.type) {
			case Be:
				a = 0 > a ? "M" + this.endX.toString() + " " + this.endY.toString() : "M" + this.endX.toFixed(a) + " " + this.endY.toFixed(a);
				break;
			case je:
				a = 0 > a ? "L" + this.endX.toString() + " " + this.endY.toString() : "L" + this.endX.toFixed(a) + " " + this.endY.toFixed(a);
				break;
			case Ce:
				a = 0 > a ? "C" + this.point1X.toString() + " " + this.point1Y.toString() + " " + this.point2X.toString() + " " + this.point2Y.toString() + " " + this.endX.toString() + " " + this.endY.toString() : "C" + this.point1X.toFixed(a) +
					" " + this.point1Y.toFixed(a) + " " + this.point2X.toFixed(a) + " " + this.point2Y.toFixed(a) + " " + this.endX.toFixed(a) + " " + this.endY.toFixed(a);
				break;
			case De:
				a = 0 > a ? "Q" + this.point1X.toString() + " " + this.point1Y.toString() + " " + this.endX.toString() + " " + this.endY.toString() : "Q" + this.point1X.toFixed(a) + " " + this.point1Y.toFixed(a) + " " + this.endX.toFixed(a) + " " + this.endY.toFixed(a);
				break;
			case Ee:
				a = 0 > a ? "B" + this.startAngle.toString() + " " + this.sweepAngle.toString() + " " + this.centerX.toString() + " " + this.centerY.toString() +
					" " + this.radiusX : "B" + this.startAngle.toFixed(a) + " " + this.sweepAngle.toFixed(a) + " " + this.centerX.toFixed(a) + " " + this.centerY.toFixed(a) + " " + this.radiusX;
				break;
			case Fe:
				a = 0 > a ? "A" + this.radiusX.toString() + " " + this.radiusY.toString() + " " + this.xAxisRotation.toString() + " " + (this.isLargeArc ? 1 : 0) + " " + (this.isClockwiseArc ? 1 : 0) + " " + this.endX.toString() + " " + this.endY.toString() : "A" + this.radiusX.toFixed(a) + " " + this.radiusY.toFixed(a) + " " + this.xAxisRotation.toFixed(a) + " " + (this.isLargeArc ? 1 : 0) + " " + (this.isClockwiseArc ?
					1 : 0) + " " + this.endX.toFixed(a) + " " + this.endY.toFixed(a);
				break;
			default:
				a = this.type.toString()
		}
		return a + (this.fj ? "z" : "")
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		this.v = !1;
		return this
	};
	t.close = function() {
		this.fj = !0;
		return this
	};

	function Ge(a, b) {
		if(null !== a.Le && !1 === b.qa) return a.Le;
		var c = a.radiusX,
			d = a.radiusY;
		void 0 === d && (d = c);
		if(0 === c || 0 === d) return a.Le = [], a.Le;
		b = a.re;
		var e = a.ji,
			f = H.$w(0, 0, c < d ? c : d, a.startAngle, a.startAngle + a.sweepAngle, !1);
		if(c !== d) {
			var g = Yc.alloc();
			g.reset();
			c < d ? g.scale(1, d / c) : g.scale(c / d, 1);
			ze(f, g);
			Yc.free(g)
		}
		c = f.length;
		for(d = 0; d < c; d++) g = f[d], g[0] += b, g[1] += e, g[2] += b, g[3] += e, g[4] += b, g[5] += e, g[6] += b, g[7] += e;
		a.Le = f;
		return a.Le
	}

	function Oe(a, b, c, d) {
		function e(a, b, c, d) {
			return(a * d < b * c ? -1 : 1) * Math.acos((a * c + b * d) / (Math.sqrt(a * a + b * b) * Math.sqrt(c * c + d * d)))
		}
		if(null !== a.Le && !1 === b.qa) return a.Le;
		b = a.ki;
		var f = a.Wg;
		0 === b && (b = 1E-4);
		0 === f && (f = 1E-4);
		var g = Math.PI / 180 * a.re,
			h = a.al,
			k = a.yk,
			l = a.pc,
			m = a.Dc,
			n = Math.cos(g),
			p = Math.sin(g),
			q = n * (c - l) / 2 + p * (d - m) / 2;
		g = -p * (c - l) / 2 + n * (d - m) / 2;
		var r = q * q / (b * b) + g * g / (f * f);
		1 < r && (b *= Math.sqrt(r), f *= Math.sqrt(r));
		r = (h === k ? -1 : 1) * Math.sqrt((b * b * f * f - b * b * g * g - f * f * q * q) / (b * b * g * g + f * f * q * q));
		isNaN(r) && (r = 0);
		h = r * b * g / f;
		r = r * -f *
			q / b;
		isNaN(h) && (h = 0);
		isNaN(r) && (r = 0);
		c = (c + l) / 2 + n * h - p * r;
		d = (d + m) / 2 + p * h + n * r;
		m = e(1, 0, (q - h) / b, (g - r) / f);
		n = (q - h) / b;
		l = (g - r) / f;
		q = (-q - h) / b;
		h = (-g - r) / f;
		g = e(n, l, q, h);
		q = (n * q + l * h) / (Math.sqrt(n * n + l * l) * Math.sqrt(q * q + h * h)); - 1 >= q ? g = Math.PI : 1 <= q && (g = 0);
		!k && 0 < g && (g -= 2 * Math.PI);
		k && 0 > g && (g += 2 * Math.PI);
		k = b > f ? 1 : b / f;
		q = b > f ? f / b : 1;
		b = H.$w(0, 0, b > f ? b : f, m, m + g, !0);
		f = Yc.alloc();
		f.reset();
		f.translate(c, d);
		f.rotate(a.re, 0, 0);
		f.scale(k, q);
		ze(b, f);
		Yc.free(f);
		a.Le = b;
		return a.Le
	}
	oa.Object.defineProperties(Te.prototype, {
		isClosed: {
			get: function() {
				return this.fj
			},
			set: function(a) {
				this.fj !== a && (this.fj = a, this.qa = !0)
			}
		},
		type: {
			get: function() {
				return this.va
			},
			set: function(a) {
				this.v && za(this, a);
				this.va = a;
				this.qa = !0
			}
		},
		endX: {
			get: function() {
				return this.pc
			},
			set: function(a) {
				this.v && za(this, a);
				this.pc = a;
				this.qa = !0
			}
		},
		endY: {
			get: function() {
				return this.Dc
			},
			set: function(a) {
				this.v &&
					za(this, a);
				this.Dc = a;
				this.qa = !0
			}
		},
		point1X: {
			get: function() {
				return this.re
			},
			set: function(a) {
				this.v && za(this, a);
				this.re = a;
				this.qa = !0
			}
		},
		point1Y: {
			get: function() {
				return this.ji
			},
			set: function(a) {
				this.v && za(this, a);
				this.ji = a;
				this.qa = !0
			}
		},
		point2X: {
			get: function() {
				return this.ki
			},
			set: function(a) {
				this.v && za(this, a);
				this.ki = a;
				this.qa = !0
			}
		},
		point2Y: {
			get: function() {
				return this.Wg
			},
			set: function(a) {
				this.v &&
					za(this, a);
				this.Wg = a;
				this.qa = !0
			}
		},
		centerX: {
			get: function() {
				return this.re
			},
			set: function(a) {
				this.v && za(this, a);
				this.re = a;
				this.qa = !0
			}
		},
		centerY: {
			get: function() {
				return this.ji
			},
			set: function(a) {
				this.v && za(this, a);
				this.ji = a;
				this.qa = !0
			}
		},
		radiusX: {
			get: function() {
				return this.ki
			},
			set: function(a) {
				0 > a && Aa(a, ">= zero", Te, "radiusX");
				this.v && za(this, a);
				this.ki = a;
				this.qa = !0
			}
		},
		radiusY: {
			get: function() {
				return this.Wg
			},
			set: function(a) {
				0 > a && Aa(a, ">= zero", Te, "radiusY");
				this.v && za(this, a);
				this.Wg = a;
				this.qa = !0
			}
		},
		startAngle: {
			get: function() {
				return this.pc
			},
			set: function(a) {
				this.pc !== a && (this.v && za(this, a), a %= 360, 0 > a && (a += 360), this.pc = a, this.qa = !0)
			}
		},
		sweepAngle: {
			get: function() {
				return this.Dc
			},
			set: function(a) {
				this.v && za(this, a);
				360 < a && (a = 360); - 360 > a && (a = -360);
				this.Dc = a;
				this.qa = !0
			}
		},
		isClockwiseArc: {
			get: function() {
				return this.yk
			},
			set: function(a) {
				this.v &&
					za(this, a);
				this.yk = a;
				this.qa = !0
			}
		},
		isLargeArc: {
			get: function() {
				return this.al
			},
			set: function(a) {
				this.v && za(this, a);
				this.al = a;
				this.qa = !0
			}
		},
		xAxisRotation: {
			get: function() {
				return this.re
			},
			set: function(a) {
				a %= 360;
				0 > a && (a += 360);
				this.v && za(this, a);
				this.re = a;
				this.qa = !0
			}
		}
	});
	Te.prototype.equalsApprox = Te.prototype.Oa;
	var Be = new D(Te, "Move", 0),
		je = new D(Te, "Line", 1),
		Ce = new D(Te, "Bezier", 2),
		De = new D(Te, "QuadraticBezier", 3),
		Ee = new D(Te, "Arc", 4),
		Fe = new D(Te, "SvgArc", 4);
	Te.className = "PathSegment";
	Te.Move = Be;
	Te.Line = je;
	Te.Bezier = Ce;
	Te.QuadraticBezier = De;
	Te.Arc = Ee;
	Te.SvgArc = Fe;

	function Ve() {
		this.F = null;
		this.uu = (new G(0, 0)).freeze();
		this.Ot = (new G(0, 0)).freeze();
		this.Gq = this.Or = 0;
		this.Hq = 1;
		this.Cr = "";
		this.ys = this.Xq = !1;
		this.Wq = this.Jq = 0;
		this.xg = this.jr = this.wr = !1;
		this.cr = null;
		this.ws = 0;
		this.Sd = this.vs = null
	}
	Ve.prototype.copy = function() {
		var a = new Ve;
		return this.clone(a)
	};
	Ve.prototype.clone = function(a) {
		a.F = this.F;
		a.uu.assign(this.viewPoint);
		a.Ot.assign(this.documentPoint);
		a.Or = this.Or;
		a.Gq = this.Gq;
		a.Hq = this.Hq;
		a.Cr = this.Cr;
		a.Xq = this.Xq;
		a.ys = this.ys;
		a.Jq = this.Jq;
		a.Wq = this.Wq;
		a.wr = this.wr;
		a.jr = this.jr;
		a.xg = this.xg;
		a.cr = this.cr;
		a.ws = this.ws;
		a.vs = this.vs;
		a.Sd = this.Sd;
		return a
	};
	Ve.prototype.toString = function() {
		var a = "^";
		0 !== this.modifiers && (a += "M:" + this.modifiers);
		0 !== this.button && (a += "B:" + this.button);
		"" !== this.key && (a += "K:" + this.key);
		0 !== this.clickCount && (a += "C:" + this.clickCount);
		0 !== this.delta && (a += "D:" + this.delta);
		this.handled && (a += "h");
		this.bubbles && (a += "b");
		null !== this.documentPoint && (a += "@" + this.documentPoint.toString());
		return a
	};
	Ve.prototype.Pp = function(a, b) {
		var c = this.diagram;
		if(null === c) return b;
		We(c, this.event, a, b);
		return b
	};
	Ve.prototype.Xy = function(a, b) {
		var c = this.diagram;
		if(null === c) return b;
		We(c, this.event, a, b);
		b.assign(c.tt(b));
		return b
	};
	oa.Object.defineProperties(Ve.prototype, {
		diagram: {
			get: function() {
				return this.F
			},
			set: function(a) {
				this.F = a
			}
		},
		viewPoint: {
			get: function() {
				return this.uu
			},
			set: function(a) {
				this.uu.assign(a)
			}
		},
		documentPoint: {
			get: function() {
				return this.Ot
			},
			set: function(a) {
				this.Ot.assign(a)
			}
		},
		modifiers: {
			get: function() {
				return this.Or
			},
			set: function(a) {
				this.Or = a
			}
		},
		button: {
			get: function() {
				return this.Gq
			},
			set: function(a) {
				this.Gq = a;
				if(null === this.event) switch(a) {
					case 0:
						this.buttons = 1;
						break;
					case 1:
						this.buttons = 4;
						break;
					case 2:
						this.buttons = 2
				}
			}
		},
		buttons: {
			get: function() {
				return this.Hq
			},
			set: function(a) {
				this.Hq = a
			}
		},
		key: {
			get: function() {
				return this.Cr
			},
			set: function(a) {
				this.Cr = a
			}
		},
		down: {
			get: function() {
				return this.Xq
			},
			set: function(a) {
				this.Xq = a
			}
		},
		up: {
			get: function() {
				return this.ys
			},
			set: function(a) {
				this.ys =
					a
			}
		},
		clickCount: {
			get: function() {
				return this.Jq
			},
			set: function(a) {
				this.Jq = a
			}
		},
		delta: {
			get: function() {
				return this.Wq
			},
			set: function(a) {
				this.Wq = a
			}
		},
		isMultiTouch: {
			get: function() {
				return this.wr
			},
			set: function(a) {
				this.wr = a
			}
		},
		handled: {
			get: function() {
				return this.jr
			},
			set: function(a) {
				this.jr = a
			}
		},
		bubbles: {
			get: function() {
				return this.xg
			},
			set: function(a) {
				this.xg = a
			}
		},
		event: {
			get: function() {
				return this.cr
			},
			set: function(a) {
				this.cr = a
			}
		},
		isTouchEvent: {
			get: function() {
				var a = w.TouchEvent,
					b = this.event;
				return a && b instanceof a ? !0 : (a = w.PointerEvent) && b instanceof a && ("touch" === b.pointerType || "pen" === b.pointerType)
			}
		},
		timestamp: {
			get: function() {
				return this.ws
			},
			set: function(a) {
				this.ws = a
			}
		},
		targetDiagram: {
			get: function() {
				return this.vs
			},
			set: function(a) {
				this.vs = a
			}
		},
		targetObject: {
			get: function() {
				return this.Sd
			},
			set: function(a) {
				this.Sd = a
			}
		},
		control: {
			get: function() {
				return 0 !== (this.modifiers & 1)
			},
			set: function(a) {
				this.modifiers = a ? this.modifiers | 1 : this.modifiers & -2
			}
		},
		shift: {
			get: function() {
				return 0 !== (this.modifiers & 4)
			},
			set: function(a) {
				this.modifiers = a ? this.modifiers | 4 : this.modifiers & -5
			}
		},
		alt: {
			get: function() {
				return 0 !== (this.modifiers & 2)
			},
			set: function(a) {
				this.modifiers = a ? this.modifiers |
					2 : this.modifiers & -3
			}
		},
		meta: {
			get: function() {
				return 0 !== (this.modifiers & 8)
			},
			set: function(a) {
				this.modifiers = a ? this.modifiers | 8 : this.modifiers & -9
			}
		},
		left: {
			get: function() {
				var a = this.event;
				return null === a || "mousedown" !== a.type && "mouseup" !== a.type && "pointerdown" !== a.type && "pointerup" !== a.type ? 0 !== (this.buttons & 1) : 0 === this.button
			},
			set: function(a) {
				this.buttons = a ? this.buttons | 1 : this.buttons & -2
			}
		},
		right: {
			get: function() {
				var a =
					this.event;
				return null === a || "mousedown" !== a.type && "mouseup" !== a.type && "pointerdown" !== a.type && "pointerup" !== a.type ? 0 !== (this.buttons & 2) : 2 === this.button
			},
			set: function(a) {
				this.buttons = a ? this.buttons | 2 : this.buttons & -3
			}
		},
		middle: {
			get: function() {
				var a = this.event;
				return null === a || "mousedown" !== a.type && "mouseup" !== a.type && "pointerdown" !== a.type && "pointerup" !== a.type ? 0 !== (this.buttons & 4) : 1 === this.button
			},
			set: function(a) {
				this.buttons = a ? this.buttons | 4 : this.buttons & -5
			}
		}
	});
	Ve.prototype.getMultiTouchDocumentPoint = Ve.prototype.Xy;
	Ve.prototype.getMultiTouchViewPoint = Ve.prototype.Pp;
	Ve.className = "InputEvent";

	function Xe() {
		this.F = null;
		this.Ta = "";
		this.Xr = this.us = null
	}
	Xe.prototype.copy = function() {
		var a = new Xe;
		a.F = this.F;
		a.Ta = this.Ta;
		a.us = this.us;
		a.Xr = this.Xr;
		return a
	};
	Xe.prototype.toString = function() {
		var a = "*" + this.name;
		null !== this.subject && (a += ":" + this.subject.toString());
		null !== this.parameter && (a += "(" + this.parameter.toString() + ")");
		return a
	};
	oa.Object.defineProperties(Xe.prototype, {
		diagram: {
			get: function() {
				return this.F
			},
			set: function(a) {
				this.F = a
			}
		},
		name: {
			get: function() {
				return this.Ta
			},
			set: function(a) {
				this.Ta = a
			}
		},
		subject: {
			get: function() {
				return this.us
			},
			set: function(a) {
				this.us = a
			}
		},
		parameter: {
			get: function() {
				return this.Xr
			},
			set: function(a) {
				this.Xr = a
			}
		}
	});
	Xe.className = "DiagramEvent";

	function Ye() {
		this.Om = Ze;
		this.xj = this.Nr = "";
		this.ro = this.so = this.xo = this.yo = this.wo = this.F = this.Zb = null
	}
	Ye.prototype.clear = function() {
		this.ro = this.so = this.xo = this.yo = this.wo = this.F = this.Zb = null
	};
	Ye.prototype.copy = function() {
		var a = new Ye;
		a.Om = this.Om;
		a.Nr = this.Nr;
		a.xj = this.xj;
		a.Zb = this.Zb;
		a.F = this.F;
		a.wo = this.wo;
		var b = this.yo;
		a.yo = Ea(b) && "function" === typeof b.I ? b.I() : b;
		b = this.xo;
		a.xo = Ea(b) && "function" === typeof b.I ? b.I() : b;
		b = this.so;
		a.so = Ea(b) && "function" === typeof b.I ? b.I() : b;
		b = this.ro;
		a.ro = Ea(b) && "function" === typeof b.I ? b.I() : b;
		return a
	};
	Ye.prototype.ib = function(a) {
		a.classType === Ye && (this.change = a)
	};
	Ye.prototype.toString = function() {
		var a = "";
		a = this.change === $e ? a + "* " : this.change === Ze ? a + (null !== this.model ? "!m" : "!d") : a + ((null !== this.model ? "!m" : "!d") + this.change);
		this.propertyName && "string" === typeof this.propertyName && (a += " " + this.propertyName);
		this.modelChange && this.modelChange !== this.propertyName && (a += " " + this.modelChange);
		a += ": ";
		this.change === $e ? null !== this.oldValue && (a += " " + this.oldValue) : (null !== this.object && (a += Qa(this.object)), null !== this.oldValue && (a += "  old: " + Qa(this.oldValue)), null !==
			this.oldParam && (a += " " + this.oldParam), null !== this.newValue && (a += "  new: " + Qa(this.newValue)), null !== this.newParam && (a += " " + this.newParam));
		return a
	};
	Ye.prototype.J = function(a) {
		return a ? this.oldValue : this.newValue
	};
	Ye.prototype.Zy = function(a) {
		return a ? this.oldParam : this.newParam
	};
	Ye.prototype.canUndo = function() {
		return null !== this.model || null !== this.diagram ? !0 : !1
	};
	Ye.prototype.undo = function() {
		this.canUndo() && (null !== this.model ? this.model.Kj(this, !0) : null !== this.diagram && this.diagram.Kj(this, !0))
	};
	Ye.prototype.canRedo = function() {
		return null !== this.model || null !== this.diagram ? !0 : !1
	};
	Ye.prototype.redo = function() {
		this.canRedo() && (null !== this.model ? this.model.Kj(this, !1) : null !== this.diagram && this.diagram.Kj(this, !1))
	};
	oa.Object.defineProperties(Ye.prototype, {
		model: {
			get: function() {
				return this.Zb
			},
			set: function(a) {
				this.Zb = a
			}
		},
		diagram: {
			get: function() {
				return this.F
			},
			set: function(a) {
				this.F = a
			}
		},
		change: {
			get: function() {
				return this.Om
			},
			set: function(a) {
				this.Om = a
			}
		},
		modelChange: {
			get: function() {
				return this.Nr
			},
			set: function(a) {
				this.Nr = a
			}
		},
		propertyName: {
			get: function() {
				return this.xj
			},
			set: function(a) {
				this.xj = a
			}
		},
		isTransactionFinished: {
			get: function() {
				return this.Om === $e && ("CommittedTransaction" === this.xj || "FinishedUndo" === this.xj || "FinishedRedo" === this.xj)
			}
		},
		object: {
			get: function() {
				return this.wo
			},
			set: function(a) {
				this.wo = a
			}
		},
		oldValue: {
			get: function() {
				return this.yo
			},
			set: function(a) {
				this.yo = a
			}
		},
		oldParam: {
			get: function() {
				return this.xo
			},
			set: function(a) {
				this.xo = a
			}
		},
		newValue: {
			get: function() {
				return this.so
			},
			set: function(a) {
				this.so = a
			}
		},
		newParam: {
			get: function() {
				return this.ro
			},
			set: function(a) {
				this.ro = a
			}
		}
	});
	Ye.prototype.redo = Ye.prototype.redo;
	Ye.prototype.canRedo = Ye.prototype.canRedo;
	Ye.prototype.undo = Ye.prototype.undo;
	Ye.prototype.canUndo = Ye.prototype.canUndo;
	Ye.prototype.getParam = Ye.prototype.Zy;
	Ye.prototype.getValue = Ye.prototype.J;
	Ye.prototype.clear = Ye.prototype.clear;
	var $e = new D(Ye, "Transaction", -1),
		Ze = new D(Ye, "Property", 0),
		af = new D(Ye, "Insert", 1),
		ff = new D(Ye, "Remove", 2);
	Ye.className = "ChangedEvent";
	Ye.Transaction = $e;
	Ye.Property = Ze;
	Ye.Insert = af;
	Ye.Remove = ff;

	function gf() {
		this.u = (new E).freeze();
		this.Ta = "";
		this.l = !1
	}
	gf.prototype.toString = function(a) {
		var b = "Transaction: " + this.name + " " + this.changes.count.toString() + (this.isComplete ? "" : ", incomplete");
		if(void 0 !== a && 0 < a) {
			a = this.changes.count;
			for(var c = 0; c < a; c++) {
				var d = this.changes.N(c);
				null !== d && (b += "\n  " + d.toString())
			}
		}
		return b
	};
	gf.prototype.clear = function() {
		var a = this.changes;
		a.ha();
		for(var b = a.count - 1; 0 <= b; b--) {
			var c = a.N(b);
			null !== c && c.clear()
		}
		a.clear();
		a.freeze()
	};
	gf.prototype.canUndo = function() {
		return this.isComplete
	};
	gf.prototype.undo = function() {
		if(this.canUndo())
			for(var a = this.changes.count - 1; 0 <= a; a--) {
				var b = this.changes.N(a);
				null !== b && b.undo()
			}
	};
	gf.prototype.canRedo = function() {
		return this.isComplete
	};
	gf.prototype.redo = function() {
		if(this.canRedo())
			for(var a = this.changes.count, b = 0; b < a; b++) {
				var c = this.changes.N(b);
				null !== c && c.redo()
			}
	};
	oa.Object.defineProperties(gf.prototype, {
		changes: {
			get: function() {
				return this.u
			}
		},
		name: {
			get: function() {
				return this.Ta
			},
			set: function(a) {
				this.Ta = a
			}
		},
		isComplete: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		}
	});
	gf.prototype.redo = gf.prototype.redo;
	gf.prototype.canRedo = gf.prototype.canRedo;
	gf.prototype.undo = gf.prototype.undo;
	gf.prototype.canUndo = gf.prototype.canUndo;
	gf.prototype.clear = gf.prototype.clear;
	gf.className = "Transaction";

	function hf() {
		this.du = new F;
		this.Pc = !1;
		this.K = (new E).freeze();
		this.fe = -1;
		this.u = 999;
		this.ie = !1;
		this.Uq = null;
		this.vi = 0;
		this.l = !1;
		this.oe = (new E).freeze();
		this.kl = new E;
		this.Vt = !0;
		this.Yt = !1
	}
	t = hf.prototype;
	t.toString = function(a) {
		var b = "UndoManager " + this.historyIndex + "<" + this.history.count + "<=" + this.maxHistoryLength;
		b += "[";
		for(var c = this.nestedTransactionNames.count, d = 0; d < c; d++) 0 < d && (b += " "), b += this.nestedTransactionNames.N(d);
		b += "]";
		if(void 0 !== a && 0 < a)
			for(c = this.history.count, d = 0; d < c; d++) b += "\n " + this.history.N(d).toString(a - 1);
		return b
	};
	t.clear = function() {
		var a = this.history;
		a.ha();
		for(var b = a.count - 1; 0 <= b; b--) {
			var c = a.N(b);
			null !== c && c.clear()
		}
		a.clear();
		this.fe = -1;
		a.freeze();
		this.ie = !1;
		this.Uq = null;
		this.vi = 0;
		this.oe.ha();
		this.oe.clear();
		this.oe.freeze();
		this.kl.clear()
	};
	t.Qw = function(a) {
		this.du.add(a)
	};
	t.Hx = function(a) {
		this.du.remove(a)
	};
	t.Aa = function(a) {
		void 0 === a && (a = "");
		null === a && (a = "");
		if(this.isUndoingRedoing) return !1;
		!0 === this.Vt && (this.Vt = !1, this.vi++, this.Cb("StartingFirstTransaction", a, this.currentTransaction), 0 < this.vi && this.vi--);
		this.isEnabled && (this.oe.ha(), this.oe.add(a), this.oe.freeze(), null === this.currentTransaction ? this.kl.add(0) : this.kl.add(this.currentTransaction.changes.count));
		this.vi++;
		var b = 1 === this.transactionLevel;
		b && this.Cb("StartedTransaction", a, this.currentTransaction);
		return b
	};
	t.bb = function(a) {
		void 0 === a && (a = "");
		return jf(this, !0, a)
	};
	t.tf = function() {
		return jf(this, !1, "")
	};

	function jf(a, b, c) {
		if(a.isUndoingRedoing) return !1;
		a.checksTransactionLevel && 1 > a.transactionLevel && Ba("Ending transaction without having started a transaction: " + c);
		var d = 1 === a.transactionLevel;
		d && b && a.Cb("CommittingTransaction", c, a.currentTransaction);
		var e = 0;
		if(0 < a.transactionLevel && (a.vi--, a.isEnabled)) {
			var f = a.oe.count;
			0 < f && ("" === c && (c = a.oe.N(0)), a.oe.ha(), a.oe.qb(f - 1), a.oe.freeze());
			f = a.kl.count;
			0 < f && (e = a.kl.N(f - 1), a.kl.qb(f - 1))
		}
		f = a.currentTransaction;
		if(d) {
			if(b) {
				a.Yt = !1;
				if(a.isEnabled && null !==
					f) {
					b = f;
					b.isComplete = !0;
					b.name = c;
					d = a.history;
					d.ha();
					for(e = d.count - 1; e > a.historyIndex; e--) f = d.N(e), null !== f && f.clear(), d.qb(e), a.Yt = !0;
					e = a.maxHistoryLength;
					0 === e && (e = 1);
					0 < e && d.count >= e && (e = d.N(0), null !== e && e.clear(), d.qb(0), a.fe--);
					d.add(b);
					a.fe++;
					d.freeze();
					f = b
				}
				a.Cb("CommittedTransaction", c, f)
			} else {
				a.ie = !0;
				try {
					a.isEnabled && null !== f && (f.isComplete = !0, f.undo())
				} finally {
					a.Cb("RolledBackTransaction", c, f), a.ie = !1
				}
				null !== f && f.clear()
			}
			a.Uq = null;
			return !0
		}
		if(a.isEnabled && !b && null !== f) {
			a = e;
			c = f.changes;
			for(b =
				c.count - 1; b >= a; b--) d = c.N(b), null !== d && d.undo(), c.ha(), c.qb(b);
			c.freeze()
		}
		return !1
	}
	hf.prototype.canUndo = function() {
		if(!this.isEnabled || 0 < this.transactionLevel) return !1;
		var a = this.transactionToUndo;
		return null !== a && a.canUndo() ? !0 : !1
	};
	hf.prototype.undo = function() {
		if(this.canUndo()) {
			var a = this.transactionToUndo;
			try {
				this.ie = !0, this.Cb("StartingUndo", "Undo", a), this.fe--, a.undo()
			} catch(b) {
				Ba("undo error: " + b.toString())
			} finally {
				this.Cb("FinishedUndo", "Undo", a), this.ie = !1
			}
		}
	};
	hf.prototype.canRedo = function() {
		if(!this.isEnabled || 0 < this.transactionLevel) return !1;
		var a = this.transactionToRedo;
		return null !== a && a.canRedo() ? !0 : !1
	};
	hf.prototype.redo = function() {
		if(this.canRedo()) {
			var a = this.transactionToRedo;
			try {
				this.ie = !0, this.Cb("StartingRedo", "Redo", a), this.fe++, a.redo()
			} catch(b) {
				Ba("redo error: " + b.toString())
			} finally {
				this.Cb("FinishedRedo", "Redo", a), this.ie = !1
			}
		}
	};
	hf.prototype.Cb = function(a, b, c) {
		void 0 === c && (c = null);
		var d = new Ye;
		d.change = $e;
		d.propertyName = a;
		d.object = c;
		d.oldValue = b;
		for(a = this.models; a.next();) b = a.value, d.model = b, b.Fs(d)
	};
	hf.prototype.Vu = function(a) {
		if(this.isEnabled && !this.isUndoingRedoing && !this.skipsEvent(a)) {
			var b = this.currentTransaction;
			null === b && (this.Uq = b = new gf);
			var c = a.copy();
			b = b.changes;
			b.ha();
			b.add(c);
			b.freeze();
			this.checksTransactionLevel && 0 >= this.transactionLevel && !this.Vt && (a = a.diagram, null !== a && !1 === a.Yj || Ba("Change not within a transaction: " + c.toString()))
		}
	};
	hf.prototype.skipsEvent = function(a) {
		if(null === a || 0 > a.change.value) return !0;
		a = a.object;
		if(a instanceof P) {
			if(a = a.layer, null !== a && a.isTemporary) return !0
		} else if(a.isTemporary) return !0;
		return !1
	};
	oa.Object.defineProperties(hf.prototype, {
		models: {
			get: function() {
				return this.du.iterator
			}
		},
		isEnabled: {
			get: function() {
				return this.Pc
			},
			set: function(a) {
				this.Pc = a
			}
		},
		transactionToUndo: {
			get: function() {
				return 0 <= this.historyIndex && this.historyIndex <= this.history.count - 1 ? this.history.N(this.historyIndex) : null
			}
		},
		transactionToRedo: {
			get: function() {
				return this.historyIndex < this.history.count -
					1 ? this.history.N(this.historyIndex + 1) : null
			}
		},
		isUndoingRedoing: {
			get: function() {
				return this.ie
			}
		},
		history: {
			get: function() {
				return this.K
			}
		},
		maxHistoryLength: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		historyIndex: {
			get: function() {
				return this.fe
			}
		},
		currentTransaction: {
			get: function() {
				return this.Uq
			}
		},
		transactionLevel: {
			get: function() {
				return this.vi
			}
		},
		isInTransaction: {
			get: function() {
				return 0 < this.vi
			}
		},
		checksTransactionLevel: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		},
		nestedTransactionNames: {
			get: function() {
				return this.oe
			}
		}
	});
	hf.prototype.handleChanged = hf.prototype.Vu;
	hf.prototype.redo = hf.prototype.redo;
	hf.prototype.undo = hf.prototype.undo;
	hf.prototype.canUndo = hf.prototype.canUndo;
	hf.prototype.rollbackTransaction = hf.prototype.tf;
	hf.prototype.commitTransaction = hf.prototype.bb;
	hf.prototype.startTransaction = hf.prototype.Aa;
	hf.prototype.removeModel = hf.prototype.Hx;
	hf.prototype.addModel = hf.prototype.Qw;
	hf.prototype.clear = hf.prototype.clear;
	hf.className = "UndoManager";

	function kf() {
		rb(this);
		this.F = lf;
		this.Ta = "";
		this.Pc = !0;
		this.nd = !1;
		this.bw = null;
		this.ey = new Ve;
		this.Bs = -1
	}
	kf.prototype.rb = function(a) {
		this.F = a
	};
	kf.prototype.toString = function() {
		return "" !== this.name ? this.name + " Tool" : Oa(this.constructor)
	};
	kf.prototype.updateAdornments = function() {};
	kf.prototype.canStart = function() {
		return this.isEnabled
	};
	kf.prototype.doStart = function() {};
	kf.prototype.doActivate = function() {
		this.isActive = !0
	};
	kf.prototype.doDeactivate = function() {
		this.isActive = !1
	};
	kf.prototype.doStop = function() {};
	kf.prototype.doCancel = function() {
		this.transactionResult = null;
		this.stopTool()
	};
	kf.prototype.stopTool = function() {
		var a = this.diagram;
		a.currentTool === this && (a.currentTool = null, a.currentCursor = "")
	};
	kf.prototype.doMouseDown = function() {
		!this.isActive && this.canStart() && this.doActivate()
	};
	kf.prototype.doMouseMove = function() {};
	kf.prototype.doMouseUp = function() {
		this.stopTool()
	};
	kf.prototype.doMouseWheel = function() {};
	kf.prototype.canStartMultiTouch = function() {
		return !0
	};
	kf.prototype.standardPinchZoomStart = function() {
		var a = this.diagram,
			b = a.lastInput,
			c = b.Pp(0, G.allocAt(NaN, NaN)),
			d = b.Pp(1, G.allocAt(NaN, NaN));
		if(c.s() && d.s() && (this.doCancel(), a.Xl("hasGestureZoom"))) {
			a.zo = a.scale;
			var e = d.x - c.x,
				f = d.y - c.y;
			a.Fw = Math.sqrt(e * e + f * f);
			b.bubbles = !1
		}
		G.free(c);
		G.free(d)
	};
	kf.prototype.standardPinchZoomMove = function() {
		var a = this.diagram,
			b = a.lastInput,
			c = b.Pp(0, G.allocAt(NaN, NaN)),
			d = b.Pp(1, G.allocAt(NaN, NaN));
		if(c.s() && d.s() && (this.doCancel(), a.Xl("hasGestureZoom"))) {
			var e = d.x - c.x,
				f = d.y - c.y;
			f = Math.sqrt(e * e + f * f) / a.Fw;
			e = new G((Math.min(d.x, c.x) + Math.max(d.x, c.x)) / 2, (Math.min(d.y, c.y) + Math.max(d.y, c.y)) / 2);
			f *= a.zo;
			var g = a.commandHandler;
			if(f !== a.scale && g.canResetZoom(f)) {
				var h = a.zoomPoint;
				a.zoomPoint = e;
				g.resetZoom(f);
				a.zoomPoint = h
			}
			b.bubbles = !1
		}
		G.free(c);
		G.free(d)
	};
	kf.prototype.doKeyDown = function() {
		"Esc" === this.diagram.lastInput.key && this.doCancel()
	};
	kf.prototype.doKeyUp = function() {};
	kf.prototype.Aa = function(a) {
		void 0 === a && (a = this.name);
		this.transactionResult = null;
		return this.diagram.Aa(a)
	};
	kf.prototype.tg = function() {
		var a = this.diagram;
		return null === this.transactionResult ? a.tf() : a.bb(this.transactionResult)
	};
	kf.prototype.standardMouseSelect = function() {
		var a = this.diagram;
		if(a.allowSelect) {
			var b = a.lastInput,
				c = a.Vl(b.documentPoint, !1);
			if(null !== c)
				if(fb ? b.meta : b.control) {
					a.aa("ChangingSelection", a.selection);
					for(b = c; null !== b && !b.canSelect();) b = b.containingGroup;
					null !== b && (b.isSelected = !b.isSelected);
					a.aa("ChangedSelection", a.selection)
				} else if(b.shift) {
				if(!c.isSelected) {
					a.aa("ChangingSelection", a.selection);
					for(b = c; null !== b && !b.canSelect();) b = b.containingGroup;
					null !== b && (b.isSelected = !0);
					a.aa("ChangedSelection",
						a.selection)
				}
			} else {
				if(!c.isSelected) {
					for(b = c; null !== b && !b.canSelect();) b = b.containingGroup;
					null !== b && a.select(b)
				}
			} else !b.left || (fb ? b.meta : b.control) || b.shift || a.Gs()
		}
	};
	kf.prototype.standardMouseClick = function(a, b) {
		void 0 === a && (a = null);
		void 0 === b && (b = function(a) {
			return !a.layer.isTemporary
		});
		var c = this.diagram,
			d = c.lastInput;
		a = c.Sb(d.documentPoint, a, b);
		d.targetObject = a;
		mf(a, d, c);
		return d.handled
	};

	function mf(a, b, c) {
		b.handled = !1;
		if(null === a || a.pg()) {
			var d = 0;
			b.left ? d = 1 === b.clickCount ? 1 : 2 === b.clickCount ? 2 : 1 : b.right && 1 === b.clickCount && (d = 3);
			var e = "";
			if(null !== a) {
				switch(d) {
					case 1:
						e = "ObjectSingleClicked";
						break;
					case 2:
						e = "ObjectDoubleClicked";
						break;
					case 3:
						e = "ObjectContextClicked"
				}
				0 !== d && c.aa(e, a)
			} else {
				switch(d) {
					case 1:
						e = "BackgroundSingleClicked";
						break;
					case 2:
						e = "BackgroundDoubleClicked";
						break;
					case 3:
						e = "BackgroundContextClicked"
				}
				0 !== d && c.aa(e)
			}
			if(null !== a)
				for(; null !== a;) {
					c = null;
					switch(d) {
						case 1:
							c = a.click;
							break;
						case 2:
							c = a.doubleClick ? a.doubleClick : a.click;
							break;
						case 3:
							c = a.contextClick
					}
					if(null !== c && (c(b, a), b.handled)) break;
					a = a.panel
				} else {
					a = null;
					switch(d) {
						case 1:
							a = c.click;
							break;
						case 2:
							a = c.doubleClick ? c.doubleClick : c.click;
							break;
						case 3:
							a = c.contextClick
					}
					null !== a && a(b)
				}
		}
	}
	kf.prototype.standardMouseOver = function() {
		var a = this.diagram,
			b = a.lastInput;
		if(!0 !== a.animationManager.ab) {
			var c = a.skipsUndoManager;
			a.skipsUndoManager = !0;
			var d = a.he ? a.Sb(b.documentPoint, null, null) : null;
			b.targetObject = d;
			var e = !1;
			if(d !== a.Dk) {
				var f = a.Dk,
					g = f;
				a.Dk = d;
				this.doCurrentObjectChanged(f, d);
				for(b.handled = !1; null !== f;) {
					var h = f.mouseLeave;
					if(null !== h) {
						if(d === f) break;
						if(null !== d && d.vh(f)) break;
						h(b, f, d);
						e = !0;
						if(b.handled) break
					}
					f = f.panel
				}
				f = g;
				for(b.handled = !1; null !== d;) {
					g = d.mouseEnter;
					if(null !== g) {
						if(f ===
							d) break;
						if(null !== f && f.vh(d)) break;
						g(b, d, f);
						e = !0;
						if(b.handled) break
					}
					d = d.panel
				}
				d = a.Dk
			}
			if(null !== d) {
				f = d;
				for(g = ""; null !== f;) {
					g = f.cursor;
					if("" !== g) break;
					f = f.panel
				}
				a.currentCursor = g;
				b.handled = !1;
				for(f = d; null !== f;) {
					d = f.mouseOver;
					if(null !== d && (d(b, f), e = !0, b.handled)) break;
					f = f.panel
				}
			} else a.currentCursor = "", d = a.mouseOver, null !== d && (d(b), e = !0);
			e && a.cc();
			a.skipsUndoManager = c
		}
	};
	kf.prototype.doCurrentObjectChanged = function() {};
	kf.prototype.standardMouseWheel = function() {
		var a = this.diagram,
			b = a.lastInput,
			c = b.delta;
		if(0 !== c && a.documentBounds.s()) {
			var d = a.commandHandler,
				e = a.toolManager.mouseWheelBehavior;
			if(null !== d && (e === nf && !b.shift || e === of && b.control) && (0 < c ? d.canIncreaseZoom() : d.canDecreaseZoom())) e = a.zoomPoint, a.zoomPoint = b.viewPoint, 0 < c ? d.increaseZoom() : d.decreaseZoom(), a.zoomPoint = e, b.bubbles = !1;
			else if(e === nf && b.shift || e === of && !b.control) {
				d = a.position.copy();
				var f = 0 < c ? c : -c,
					g = b.event.deltaMode;
				e = b.event.deltaX;
				var h = b.event.deltaY;
				if(ab || bb || eb) g = 1, 0 < e && (e = 3), 0 > e && (e = -3), 0 < h && (h = 3), 0 > h && (h = -3);
				if(void 0 === g || void 0 === e || void 0 === h || 0 === e && 0 === h || b.shift) !b.shift && a.allowVerticalScroll ? (f = 3 * f * a.scrollVerticalLineChange, 0 < c ? a.scroll("pixel", "up", f) : a.scroll("pixel", "down", f)) : b.shift && a.allowHorizontalScroll && (f = 3 * f * a.scrollHorizontalLineChange, 0 < c ? a.scroll("pixel", "left", f) : a.scroll("pixel", "right", f));
				else {
					switch(g) {
						case 0:
							c = "pixel";
							break;
						case 1:
							c = "line";
							break;
						case 2:
							c = "page";
							break;
						default:
							c = "pixel"
					}
					0 !== e && a.allowHorizontalScroll &&
						(0 < e ? a.scroll(c, "left", -e) : a.scroll(c, "right", e));
					0 !== h && a.allowVerticalScroll && (0 < h ? a.scroll(c, "up", -h) : a.scroll(c, "down", h))
				}
				a.position.A(d) || (b.bubbles = !1)
			}
		}
	};
	kf.prototype.standardWaitAfter = function(a, b) {
		void 0 === b && (b = this.diagram.lastInput);
		this.cancelWaitAfter();
		var c = this,
			d = b.clone(this.ey);
		this.Bs = va(function() {
			c.doWaitAfter(d)
		}, a)
	};
	kf.prototype.cancelWaitAfter = function() {
		-1 !== this.Bs && w.clearTimeout(this.Bs);
		this.Bs = -1
	};
	kf.prototype.doWaitAfter = function() {};
	kf.prototype.findToolHandleAt = function(a, b) {
		a = this.diagram.Sb(a, function(a) {
			for(; null !== a && !(a.panel instanceof pf);) a = a.panel;
			return a
		});
		return null === a ? null : a.part.category === b ? a : null
	};
	kf.prototype.isBeyondDragSize = function(a, b) {
		var c = this.diagram;
		void 0 === a && (a = c.firstInput.viewPoint);
		void 0 === b && (b = c.lastInput.viewPoint);
		var d = c.toolManager.dragSize,
			e = d.width;
		d = d.height;
		c.firstInput.isTouchEvent && (e += 6, d += 6);
		return Math.abs(b.x - a.x) > e || Math.abs(b.y - a.y) > d
	};
	oa.Object.defineProperties(kf.prototype, {
		diagram: {
			get: function() {
				return this.F
			},
			set: function(a) {
				a instanceof Q && (this.F = a)
			}
		},
		name: {
			get: function() {
				return this.Ta
			},
			set: function(a) {
				this.Ta = a
			}
		},
		isEnabled: {
			get: function() {
				return this.Pc
			},
			set: function(a) {
				this.Pc = a
			}
		},
		isActive: {
			get: function() {
				return this.nd
			},
			set: function(a) {
				this.nd = a
			}
		},
		transactionResult: {
			get: function() {
				return this.bw
			},
			set: function(a) {
				this.bw = a
			}
		}
	});
	kf.prototype.stopTransaction = kf.prototype.tg;
	kf.prototype.startTransaction = kf.prototype.Aa;
	kf.className = "Tool";

	function Va() {
		kf.call(this);
		this.name = "ToolManager";
		this.Lc = new E;
		this.Xc = new E;
		this.vf = new E;
		this.da = this.Va = 850;
		this.u = (new L(2, 2)).ga();
		this.eb = 5E3;
		this.Wa = of ;
		this.K = qf;
		this.Tq = this.l = null;
		this.Dj = -1
	}
	na(Va, kf);
	Va.prototype.initializeStandardTools = function() {};
	Va.prototype.updateAdornments = function(a) {
		var b = this.currentToolTip;
		if(b instanceof pf && this.Tq === a) {
			var c = b.adornedObject;
			(null !== a ? c.part === a : null === c) ? this.showToolTip(b, c): this.hideToolTip()
		}
	};
	Va.prototype.doMouseDown = function() {
		var a = this.diagram,
			b = a.lastInput;
		b.isTouchEvent && this.gestureBehavior === rf && (b.bubbles = !1);
		if(b.isMultiTouch) {
			this.cancelWaitAfter();
			if(this.gestureBehavior === sf) {
				b.bubbles = !0;
				return
			}
			if(this.gestureBehavior === rf) return;
			if(a.currentTool.canStartMultiTouch()) {
				a.currentTool.standardPinchZoomStart();
				return
			}
		}
		for(var c = this.mouseDownTools.length, d = 0; d < c; d++) {
			var e = this.mouseDownTools.N(d);
			e.rb(this.diagram);
			if(e.canStart()) {
				a.doFocus();
				a.currentTool = e;
				a.currentTool ===
					e && (e.isActive || e.doActivate(), e.doMouseDown());
				return
			}
		}
		1 === a.lastInput.button && (this.mouseWheelBehavior === of ? this.mouseWheelBehavior = nf : this.mouseWheelBehavior === nf && (this.mouseWheelBehavior = of ));
		this.doActivate();
		this.standardWaitAfter(this.holdDelay, b)
	};
	Va.prototype.doMouseMove = function() {
		var a = this.diagram,
			b = a.lastInput;
		if(b.isMultiTouch) {
			if(this.gestureBehavior === sf) {
				b.bubbles = !0;
				return
			}
			if(this.gestureBehavior === rf) return;
			if(a.currentTool.canStartMultiTouch()) {
				a.currentTool.standardPinchZoomMove();
				return
			}
		}
		if(this.isActive)
			for(var c = this.mouseMoveTools.length, d = 0; d < c; d++) {
				var e = this.mouseMoveTools.N(d);
				e.rb(this.diagram);
				if(e.canStart()) {
					a.doFocus();
					a.currentTool = e;
					a.currentTool === e && (e.isActive || e.doActivate(), e.doMouseMove());
					return
				}
			}
		tf(this,
			a);
		a = b.event;
		null === a || "mousemove" !== a.type && "pointermove" !== a.type && a.cancelable || (b.bubbles = !0)
	};

	function tf(a, b) {
		a.standardMouseOver();
		a.isBeyondDragSize() && a.standardWaitAfter(a.isActive ? a.holdDelay : a.hoverDelay, b.lastInput)
	}
	Va.prototype.doCurrentObjectChanged = function(a, b) {
		a = this.currentToolTip;
		null === a || null !== b && a instanceof pf && (b === a || b.vh(a)) || this.hideToolTip()
	};
	Va.prototype.doWaitAfter = function(a) {
		var b = this.diagram;
		b.Ea && (this.doMouseHover(), this.isActive || this.doToolTip(), a.isTouchEvent && !b.lastInput.handled && (a = a.copy(), a.button = 2, a.buttons = 2, b.lastInput = a, b.Gl = !0, b.doMouseUp()))
	};
	Va.prototype.doMouseHover = function() {
		var a = this.diagram,
			b = a.lastInput;
		null === b.targetObject && (b.targetObject = a.Sb(b.documentPoint, null, null));
		var c = b.targetObject;
		if(null !== c)
			for(b.handled = !1; null !== c;) {
				a = this.isActive ? c.mouseHold : c.mouseHover;
				if(null !== a && (a(b, c), b.handled)) break;
				c = c.panel
			} else c = this.isActive ? a.mouseHold : a.mouseHover, null !== c && c(b)
	};
	Va.prototype.doToolTip = function() {
		var a = this.diagram,
			b = a.lastInput;
		null === b.targetObject && (b.targetObject = a.Sb(b.documentPoint, null, null));
		b = b.targetObject;
		if(null !== b) {
			if(a = this.currentToolTip, !(a instanceof pf) || b !== a && !b.vh(a)) {
				for(; null !== b;) {
					a = b.toolTip;
					if(null !== a) {
						this.showToolTip(a, b);
						return
					}
					b = b.panel
				}
				this.hideToolTip()
			}
		} else b = a.toolTip, null !== b ? this.showToolTip(b, null) : this.hideToolTip()
	};
	Va.prototype.showToolTip = function(a, b) {
		var c = this.diagram;
		a !== this.currentToolTip && this.hideToolTip();
		if(a instanceof pf) {
			a.layerName = "Tool";
			a.selectable = !1;
			a.scale = 1 / c.scale;
			a.category = "ToolTip";
			null !== a.placeholder && (a.placeholder.scale = c.scale);
			var d = a.diagram;
			null !== d && d !== c && d.remove(a);
			c.add(a);
			null !== b ? (c = null, d = b.qh(), null !== d && (c = d.data), a.adornedObject = b, a.data = c) : a.data = c.model;
			a.kc();
			this.positionToolTip(a, b)
		} else a instanceof uf && a !== this.currentToolTip && a.show(b, c, this);
		this.currentToolTip =
			a; - 1 !== this.Dj && (w.clearTimeout(this.Dj), this.Dj = -1);
		a = this.toolTipDuration;
		if(0 < a && Infinity !== a) {
			var e = this;
			this.Dj = va(function() {
				e.hideToolTip()
			}, a)
		}
	};
	Va.prototype.positionToolTip = function(a) {
		if(null === a.placeholder) {
			var b = this.diagram,
				c = b.lastInput.documentPoint.copy(),
				d = a.measuredBounds,
				e = b.viewportBounds;
			b.lastInput.isTouchEvent && (c.x -= d.width);
			c.x + d.width > e.right && (c.x -= d.width + 5 / b.scale);
			c.x < e.x && (c.x = e.x);
			c.y = c.y + 20 / b.scale + d.height > e.bottom ? c.y - (d.height + 5 / b.scale) : c.y + 20 / b.scale;
			c.y < e.y && (c.y = e.y);
			a.position = c
		}
	};
	Va.prototype.hideToolTip = function() {
		-1 !== this.Dj && (w.clearTimeout(this.Dj), this.Dj = -1);
		var a = this.diagram,
			b = this.currentToolTip;
		null !== b && (b instanceof pf ? (a.remove(b), null !== this.Tq && this.Tq.sf(b.category), b.data = null, b.adornedObject = null) : b instanceof uf && null !== b.hide && b.hide(a, this), this.currentToolTip = null)
	};
	Va.prototype.doMouseUp = function() {
		this.cancelWaitAfter();
		var a = this.diagram;
		if(this.isActive)
			for(var b = this.mouseUpTools.length, c = 0; c < b; c++) {
				var d = this.mouseUpTools.N(c);
				d.rb(this.diagram);
				if(d.canStart()) {
					a.doFocus();
					a.currentTool = d;
					a.currentTool === d && (d.isActive || d.doActivate(), d.doMouseUp());
					return
				}
			}
		a.doFocus();
		this.doDeactivate()
	};
	Va.prototype.doMouseWheel = function() {
		this.standardMouseWheel()
	};
	Va.prototype.doKeyDown = function() {
		var a = this.diagram;
		null !== a.commandHandler && a.commandHandler.doKeyDown()
	};
	Va.prototype.doKeyUp = function() {
		var a = this.diagram;
		null !== a.commandHandler && a.commandHandler.doKeyUp()
	};
	Va.prototype.findTool = function(a) {
		for(var b = this.mouseDownTools.length, c = 0; c < b; c++) {
			var d = this.mouseDownTools.N(c);
			if(d.name === a) return d
		}
		b = this.mouseMoveTools.length;
		for(c = 0; c < b; c++)
			if(d = this.mouseMoveTools.N(c), d.name === a) return d;
		b = this.mouseUpTools.length;
		for(c = 0; c < b; c++)
			if(d = this.mouseUpTools.N(c), d.name === a) return d;
		return null
	};
	Va.prototype.replaceTool = function(a, b) {
		null !== b && b.rb(this.diagram);
		for(var c = this.mouseDownTools.length, d = 0; d < c; d++) {
			var e = this.mouseDownTools.N(d);
			if(e.name === a) return null !== b ? this.mouseDownTools.kd(d, b) : this.mouseDownTools.qb(d), e
		}
		c = this.mouseMoveTools.length;
		for(d = 0; d < c; d++)
			if(e = this.mouseMoveTools.N(d), e.name === a) return null !== b ? this.mouseMoveTools.kd(d, b) : this.mouseMoveTools.qb(d), e;
		c = this.mouseUpTools.length;
		for(d = 0; d < c; d++)
			if(e = this.mouseUpTools.N(d), e.name === a) return null !== b ? this.mouseUpTools.kd(d,
				b) : this.mouseUpTools.qb(d), e;
		return null
	};

	function Af(a, b, c, d) {
		null !== c && (c.name = b, c.rb(a.diagram));
		a.findTool(b) ? a.replaceTool(b, c) : null !== c && d.add(c)
	}
	oa.Object.defineProperties(Va.prototype, {
		mouseWheelBehavior: {
			get: function() {
				return this.Wa
			},
			set: function(a) {
				this.Wa = a
			}
		},
		gestureBehavior: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K = a
			}
		},
		currentToolTip: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a;
				this.Tq = null !== a && a instanceof pf ? a.adornedPart : null
			}
		},
		mouseDownTools: {
			get: function() {
				return this.Lc
			}
		},
		mouseMoveTools: {
			get: function() {
				return this.Xc
			}
		},
		mouseUpTools: {
			get: function() {
				return this.vf
			}
		},
		hoverDelay: {
			get: function() {
				return this.Va
			},
			set: function(a) {
				this.Va = a
			}
		},
		holdDelay: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da = a
			}
		},
		dragSize: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a.I()
			}
		},
		toolTipDuration: {
			get: function() {
				return this.eb
			},
			set: function(a) {
				this.eb = a
			}
		}
	});
	var of = new D(Va, "WheelScroll", 0), nf = new D(Va, "WheelZoom", 1), Bf = new D(Va, "WheelNone", 2), qf = new D(Va, "GestureZoom", 3), rf = new D(Va, "GestureCancel", 4), sf = new D(Va, "GestureNone", 5);
	Va.className = "ToolManager";
	Va.WheelScroll = of ;
	Va.WheelZoom = nf;
	Va.WheelNone = Bf;
	Va.GestureZoom = qf;
	Va.GestureCancel = rf;
	Va.GestureNone = sf;

	function Cf() {
		kf.call(this);
		this.name = "Dragging";
		this.K = this.Xc = !0;
		this.eb = !1;
		this.u = this.Wa = this.da = this.bg = null;
		this.qn = this.vf = !1;
		this.zl = new G(NaN, NaN);
		this.ss = new G;
		this.Lc = !0;
		this.Kk = 100;
		this.Eg = [];
		this.Qi = (new F).freeze();
		this.Va = new Df
	}
	na(Cf, kf);
	Cf.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		if(a.isReadOnly && !a.allowDragOut || !a.allowMove && !a.allowCopy && !a.allowDragOut || !a.allowSelect) return !1;
		var b = a.lastInput;
		return !b.left || a.currentTool !== this && (!this.isBeyondDragSize() || b.isTouchEvent && b.timestamp - a.firstInput.timestamp < this.Kk) ? !1 : null !== this.findDraggablePart()
	};
	Cf.prototype.findDraggablePart = function() {
		var a = this.diagram;
		a = a.Vl(a.firstInput.documentPoint, !1);
		if(null === a) return null;
		for(; null !== a && !a.canSelect();) a = a.containingGroup;
		return null !== a && (a.canMove() || a.canCopy()) ? a : null
	};
	Cf.prototype.standardMouseSelect = function() {
		var a = this.diagram;
		if(a.allowSelect) {
			var b = a.Vl(a.firstInput.documentPoint, !1);
			if(null !== b) {
				for(; null !== b && !b.canSelect();) b = b.containingGroup;
				this.currentPart = b;
				null === this.currentPart || this.currentPart.isSelected || (a.aa("ChangingSelection", a.selection), b = a.lastInput, (fb ? b.meta : b.control) || b.shift || Ef(a), this.currentPart.isSelected = !0, a.aa("ChangedSelection", a.selection))
			}
		}
	};
	Cf.prototype.doActivate = function() {
		var a = this.diagram;
		null === this.currentPart && this.standardMouseSelect();
		var b = this.currentPart;
		null !== b && (b.canMove() || b.canCopy()) && (Ff = null, this.isActive = !0, this.zl.set(a.position), Gf(this, a.selection), this.Eg.length = 0, this.draggedParts = this.computeEffectiveCollection(a.selection, this.dragOptions), a.lk = !0, !0 === a.Ce("temporaryPixelRatio") && 30 < a.Zt && (a.ue = 1), Hf(a, this.draggedParts), this.Aa("Drag"), this.startPoint = a.firstInput.documentPoint, a.isMouseCaptured = !0, a.allowDragOut &&
			(this.isDragOutStarted = !0, this.qn = !1, Ff = this, If = this.diagram, this.doSimulatedDragOut()))
	};

	function Gf(a, b) {
		if(a.dragsLink) {
			var c = a.diagram;
			c.allowRelink && (c.model.Xj() && 1 === b.count && b.first() instanceof S ? (a.draggedLink = b.first(), a.draggedLink.canRelinkFrom() && a.draggedLink.canRelinkTo() && a.draggedLink.Lj(), a.bg = c.toolManager.findTool("Relinking"), null === a.bg && (a.bg = new Jf, a.bg.rb(c))) : (a.draggedLink = null, a.bg = null))
		}
	}
	Cf.prototype.computeEffectiveCollection = function(a, b) {
		return this.diagram.commandHandler.computeEffectiveCollection(a, b)
	};
	Cf.prototype.td = function(a) {
		return void 0 === a ? new Kf(bc) : this.isGridSnapEnabled ? new Kf(new G(Math.round(a.x), Math.round(a.y))) : new Kf(a.copy())
	};
	Cf.prototype.doDeactivate = function() {
		this.isActive = !1;
		var a = this.diagram;
		a.uf();
		Lf(this);
		Mf(a, this.draggedParts);
		this.draggedParts = this.currentPart = null;
		this.qn = this.isDragOutStarted = !1;
		if(0 < Nf.count) {
			for(var b = Nf, c = b.length, d = 0; d < c; d++) {
				var e = b.N(d);
				Of(e);
				Pf(e);
				Lf(e);
				e.diagram.uf()
			}
			b.clear()
		}
		Of(this);
		this.zl.h(NaN, NaN);
		Ff = If = null;
		Pf(this);
		a.isMouseCaptured = !1;
		a.currentCursor = "";
		a.lk = !1;
		this.tg();
		Qf(a, !0)
	};

	function Lf(a) {
		var b = a.diagram,
			c = b.skipsUndoManager;
		b.skipsUndoManager = !0;
		Rf(a, b.lastInput, null);
		b.skipsUndoManager = c;
		a.Eg.length = 0
	}

	function Sf() {
		var a = Ff;
		Pf(a);
		Tf(a);
		var b = a.diagram;
		a.zl.s() && (b.position = a.zl);
		b.uf()
	}
	Cf.prototype.doCancel = function() {
		Pf(this);
		Tf(this);
		var a = this.diagram;
		this.zl.s() && (a.position = this.zl);
		this.stopTool()
	};
	Cf.prototype.doKeyDown = function() {
		this.isActive && ("Esc" === this.diagram.lastInput.key ? this.doCancel() : this.doMouseMove())
	};
	Cf.prototype.doKeyUp = function() {
		this.isActive && this.doMouseMove()
	};

	function Uf(a, b) {
		var c = Infinity,
			d = Infinity,
			e = -Infinity,
			f = -Infinity;
		for(a = a.iterator; a.next();) {
			var g = a.value;
			if(g.ac() && g.isVisible()) {
				var h = g.location;
				g = h.x;
				h = h.y;
				isNaN(g) || isNaN(h) || (g < c && (c = g), h < d && (d = h), g > e && (e = g), h > f && (f = h))
			}
		}
		Infinity === c ? b.h(0, 0, 0, 0) : b.h(c, d, e - c, f - d)
	}

	function Vf(a, b) {
		if(null === a.copiedParts) {
			var c = a.diagram;
			if((!b || !c.isReadOnly && !c.isModelReadOnly) && null !== a.draggedParts) {
				var d = c.undoManager;
				d.isEnabled && d.isInTransaction ? null !== d.currentTransaction && 0 < d.currentTransaction.changes.count && (c.undoManager.tf(), c.Aa("Drag")) : Tf(a);
				c.skipsUndoManager = !b;
				c.partManager.Dm = !b;
				a.startPoint = c.firstInput.documentPoint;
				b = a.copiesEffectiveCollection ? a.draggedParts.Zd() : c.selection;
				c = c.Qj(b, c, !0);
				for(b = c.iterator; b.next();) b.value.location = b.key.location;
				b = M.alloc();
				Uf(c, b);
				M.free(b);
				b = new Nb;
				for(d = a.draggedParts.iterator; d.next();) {
					var e = d.key;
					e.ac() && e.canCopy() && (e = c.J(e), null !== e && (e.kc(), b.add(e, a.td(e.location))))
				}
				for(c = c.iterator; c.next();) d = c.value, d instanceof S && d.canCopy() && b.add(d, a.td());
				a.copiedParts = b;
				Gf(a, b.Zd());
				null !== a.draggedLink && (c = a.draggedLink, b = c.routeBounds, Wf(c, a.startPoint.x - (b.x + b.width / 2), a.startPoint.y - (b.y + b.height / 2)))
			}
		}
	}

	function Pf(a) {
		var b = a.diagram;
		if(null !== a.copiedParts && (b.mt(a.copiedParts.Zd(), !1), a.copiedParts = null, null !== a.draggedParts))
			for(var c = a.draggedParts.iterator; c.next();) c.key instanceof S && (c.value.point = new G(0, 0));
		b.skipsUndoManager = !1;
		b.partManager.Dm = !1;
		a.startPoint = b.firstInput.documentPoint
	}

	function Of(a) {
		if(null !== a.draggedLink) {
			if(a.dragsLink && null !== a.bg) {
				var b = a.bg;
				b.diagram.remove(b.temporaryFromNode);
				b.diagram.remove(b.temporaryToNode)
			}
			a.draggedLink = null;
			a.bg = null
		}
	}

	function Xf(a, b, c) {
		var d = a.diagram,
			e = a.startPoint,
			f = G.alloc();
		f.assign(d.lastInput.documentPoint);
		a.moveParts(b, f.Ie(e), c);
		G.free(f);
		!0 === d.Ce("temporaryPixelRatio") && null === d.ue && 30 < d.Zt && (d.ue = 1, d.jt())
	}
	Cf.prototype.moveParts = function(a, b, c) {
		var d = this.diagram;
		null !== d && Yf(d, a, b, this.dragOptions, c)
	};

	function Tf(a) {
		if(null !== a.draggedParts) {
			for(var b = a.diagram, c = a.draggedParts.iterator; c.next();) {
				var d = c.key;
				d.ac() && (d.location = c.value.point)
			}
			for(c = a.draggedParts.iterator; c.next();)
				if(d = c.key, d instanceof S && d.suspendsRouting) {
					var e = c.value.point;
					a.draggedParts.add(d, a.td());
					Wf(d, -e.x, -e.y)
				}
			b.jd()
		}
	}

	function cg(a, b) {
		if(null === b) return !0;
		b = b.part;
		return null === b || b instanceof pf || b.layer.isTemporary || a.draggedParts && a.draggedParts.contains(b) || a.copiedParts && a.copiedParts.contains(b) ? !0 : !1
	}

	function dg(a, b) {
		var c = a.diagram;
		a.dragsLink && (null !== a.draggedLink && (a.draggedLink.fromNode = null, a.draggedLink.toNode = null), eg(a, !1));
		var d = fg(c, b, null, function(b) {
				return !cg(a, b)
			}),
			e = c.lastInput;
		e.targetObject = d;
		var f = c.skipsUndoManager,
			g = !1;
		try {
			c.skipsUndoManager = !0;
			g = Rf(a, e, d);
			if(!a.isActive && null === Ff) return;
			if(null === d || c.handlesDragDropForTopLevelParts) {
				var h = c.mouseDragOver;
				null !== h && (h(e), g = !0)
			}
			if(!a.isActive && null === Ff) return;
			a.doDragOver(b, d);
			if(!a.isActive && null === Ff) return
		} finally {
			c.skipsUndoManager =
				f, g && c.jd()
		}(c.allowHorizontalScroll || c.allowVerticalScroll) && c.Ks(e.viewPoint)
	}

	function Rf(a, b, c) {
		var d = !1,
			e = a.Eg.length,
			f = 0 < e ? a.Eg[0] : null;
		if(c === f) return !1;
		b.handled = !1;
		for(var g = 0; g < e; g++) {
			var h = a.Eg[g],
				k = h.mouseDragLeave;
			if(null !== k && (k(b, h, c), d = !0, b.handled)) break
		}
		a.Eg.length = 0;
		if(!a.isActive && null === Ff || null === c) return d;
		b.handled = !1;
		for(e = c; null !== e;) a.Eg.push(e), e = gg(e);
		e = a.Eg.length;
		for(c = 0; c < e && (g = a.Eg[c], h = g.mouseDragEnter, null === h || (h(b, g, f), d = !0, !b.handled)); c++);
		return d
	}

	function gg(a) {
		var b = a.panel;
		return null !== b ? b : a instanceof U && !(a instanceof V) && (a = a.containingGroup, null !== a && a.handlesDragDropForMembers) ? a : null
	}

	function hg(a, b, c) {
		var d = a.bg;
		if(null === d) return null;
		var e = a.diagram.ng(b, d.portGravity, function(a) {
			return d.findValidLinkablePort(a, c)
		});
		a = G.alloc();
		var f = Infinity,
			g = null;
		for(e = e.iterator; e.next();) {
			var h = e.value;
			if(null !== h.part) {
				var k = h.ka(id, a);
				k = b.Be(k);
				k < f && (g = h, f = k)
			}
		}
		G.free(a);
		return g
	}

	function eg(a, b) {
		var c = a.draggedLink;
		if(null !== c && !(2 > c.pointsCount)) {
			var d = a.diagram;
			if(!d.isReadOnly) {
				var e = a.bg;
				if(null !== e) {
					var f = null,
						g = null;
					null === c.fromNode && (f = hg(a, c.i(0), !1), null !== f && (g = f.part));
					var h = null,
						k = null;
					null === c.toNode && (h = hg(a, c.i(c.pointsCount - 1), !0), null !== h && (k = h.part));
					e.isValidLink(g, f, k, h) ? b ? (c.defaultFromPoint = c.i(0), c.defaultToPoint = c.i(c.pointsCount - 1), c.suspendsRouting = !1, c.fromNode = g, null !== f && (c.fromPortId = f.portId), c.toNode = k, null !== h && (c.toPortId = h.portId), c.fromPort !==
						d.Bx && d.aa("LinkRelinked", c, d.Bx), c.toPort !== d.Cx && d.aa("LinkRelinked", c, d.Cx)) : ig(e, g, f, k, h) : ig(e, null, null, null, null)
				}
			}
		}
	}
	Cf.prototype.doDragOver = function() {};

	function jg(a, b) {
		var c = a.diagram;
		a.dragsLink && eg(a, !0);
		Lf(a);
		var d = fg(c, b, null, function(b) {
				return !cg(a, b)
			}),
			e = c.lastInput;
		e.targetObject = d;
		if(null !== d)
			for(e.handled = !1, c = d; null !== c;) {
				b = c.mouseDrop;
				if(null !== b && (b(e, c), e.handled)) break;
				kg(a, e, c);
				c = gg(c)
			} else {
				var f = c.mouseDrop;
				null !== f && f(e);
				if(a.isActive || null !== Ff) {
					for(e = (a.copiedParts || a.draggedParts).iterator; e.next();) f = e.key, f instanceof W && f.linksConnected.each(function(a) {
						a.suspendsRouting = !1
					});
					a.doDropOnto(b, d);
					if(a.isActive || null !== Ff) {
						b =
							M.alloc();
						for(d = c.selection.iterator; d.next();) e = d.value, e instanceof W && lg(c, e.getAvoidableRect(b));
						M.free(b)
					}
				}
			}
	}

	function kg(a, b, c) {
		a = a.diagram;
		c instanceof U && null === c.containingGroup && !(c instanceof V) && a.handlesDragDropForTopLevelParts && (c = a.mouseDrop, null !== c && c(b))
	}

	function lg(a, b) {
		var c = !1;
		a.viewportBounds.kf(b) && (c = !0);
		for(a = a.links; a.next();) {
			var d = a.value;
			(!c || mg(d)) && d.isAvoiding && Hc(d.actualBounds, b, 0) && d.Pa()
		}
	}
	Cf.prototype.doDropOnto = function() {};
	Cf.prototype.doMouseMove = function() {
		if(this.isActive) {
			var a = this.diagram,
				b = a.lastInput;
			this.simulatedMouseMove(b.event, null, b.targetDiagram || null) || null === this.currentPart || null === this.draggedParts || (this.mayCopy() ? (a.currentCursor = "copy", Vf(this, !1), Hf(a, this.copiedParts), Xf(this, this.copiedParts, !1), Mf(a, this.copiedParts)) : this.mayMove() ? (Pf(this), Xf(this, this.draggedParts, !0)) : this.mayDragOut() ? (a.currentCursor = "no-drop", Vf(this, !1), Xf(this, this.copiedParts, !1)) : Pf(this), dg(this, a.lastInput.documentPoint))
		}
	};
	Cf.prototype.doMouseUp = function() {
		if(this.isActive) {
			var a = this.diagram,
				b = a.lastInput;
			if(!this.simulatedMouseUp(b.event, null, b.documentPoint, b.targetDiagram)) {
				var c = !1;
				(b = this.mayCopy()) && null !== this.copiedParts ? (Pf(this), Vf(this, !0), Hf(a, this.copiedParts), Xf(this, this.copiedParts, !1), Mf(a, this.copiedParts), null !== this.copiedParts && a.yv(this.copiedParts.Zd())) : (c = !0, Pf(this), this.mayMove() && (Xf(this, this.draggedParts, !0), dg(this, a.lastInput.documentPoint)));
				this.qn = !0;
				jg(this, a.lastInput.documentPoint);
				if(this.isActive) {
					var d = b ? this.copiedParts.Zd() : this.draggedParts.Zd();
					this.copiedParts = null;
					if(c && null !== this.draggedParts)
						for(c = this.draggedParts.iterator; c.next();) {
							var e = c.key;
							e instanceof W && (e = e.containingGroup, null === e || null === e.placeholder || this.draggedParts.contains(e) || e.placeholder.o())
						}
					a.Xa();
					Mf(a, this.draggedParts);
					this.transactionResult = b ? "Copy" : "Move";
					a.aa(b ? "SelectionCopied" : "SelectionMoved", d)
				}
				this.stopTool()
			}
		}
	};
	Cf.prototype.simulatedMouseMove = function(a, b, c) {
		if(null === Ff) return !1;
		var d = Ff.diagram;
		c instanceof Q || (c = null);
		var e = If;
		c !== e && (null !== e && e !== d && (e.uf(), Ff.isDragOutStarted = !1, e = e.toolManager.findTool("Dragging"), null !== e && e.doSimulatedDragLeave()), If = c, null !== c && c !== d && (Sf(), e = c.toolManager.findTool("Dragging"), null !== e && (Nf.contains(e) || Nf.add(e), e.doSimulatedDragEnter())));
		if(null === c || c === d || !c.allowDrop || c.isReadOnly || !c.allowInsert) return !1;
		d = c.toolManager.findTool("Dragging");
		null !== d && (null !==
			a ? b = c.getMouse(a) : null === b && (b = new G), c.lastInput.documentPoint = b, c.lastInput.viewPoint = c.st(b), c.lastInput.down = !1, c.lastInput.up = !1, d.doSimulatedDragOver());
		return !0
	};
	Cf.prototype.simulatedMouseUp = function(a, b, c, d) {
		if(null === Ff) return !1;
		null === d && (d = b);
		b = If;
		var e = Ff.diagram;
		if(d !== b) {
			var f = b.toolManager.findTool("Dragging");
			if(null !== b && b !== e && null !== f) return b.uf(), Ff.isDragOutStarted = !1, f.doSimulatedDragLeave(), !1;
			If = d;
			b = d.toolManager.findTool("Dragging");
			null !== d && null !== b && (Sf(), Nf.contains(b) || Nf.add(b), b.doSimulatedDragEnter())
		}
		return null === d ? (Ff.doCancel(), !0) : d !== this.diagram ? (a = null !== a ? d.getMouse(a) : c, d.lastInput.documentPoint = a, d.lastInput.viewPoint =
			d.st(a), d.lastInput.down = !1, d.lastInput.up = !0, d = d.toolManager.findTool("Dragging"), null !== d && d.doSimulatedDrop(), d = Ff, null !== d && (a = d.mayCopy(), d.transactionResult = a ? "Copy" : "Move", d.stopTool()), !0) : !1
	};
	Cf.prototype.mayCopy = function() {
		if(!this.isCopyEnabled) return !1;
		var a = this.diagram;
		if(a.isReadOnly || a.isModelReadOnly || !a.allowInsert || !a.allowCopy || (fb ? !a.lastInput.alt : !a.lastInput.control)) return !1;
		for(a = a.selection.iterator; a.next();) {
			var b = a.value;
			if(b.ac() && b.canCopy()) return !0
		}
		return null !== this.draggedLink && this.dragsLink && this.draggedLink.canCopy() ? !0 : !1
	};
	Cf.prototype.mayDragOut = function() {
		if(!this.isCopyEnabled) return !1;
		var a = this.diagram;
		if(!a.allowDragOut || !a.allowCopy || a.allowMove) return !1;
		for(a = a.selection.iterator; a.next();) {
			var b = a.value;
			if(b.ac() && b.canCopy()) return !0
		}
		return null !== this.draggedLink && this.dragsLink && this.draggedLink.canCopy() ? !0 : !1
	};
	Cf.prototype.mayMove = function() {
		var a = this.diagram;
		if(a.isReadOnly || !a.allowMove) return !1;
		for(a = a.selection.iterator; a.next();) {
			var b = a.value;
			if(b.ac() && b.canMove()) return !0
		}
		return null !== this.draggedLink && this.dragsLink && this.draggedLink.canMove() ? !0 : !1
	};
	Cf.prototype.computeBorder = function(a, b, c) {
		return this.qn || null === this.draggedParts || this.draggedParts.contains(a) ? null : c.assign(b)
	};
	Cf.prototype.Vy = function() {
		return Ff
	};
	Cf.prototype.mayDragIn = function() {
		var a = this.diagram;
		if(!a.allowDrop || a.isReadOnly || a.isModelReadOnly || !a.allowInsert) return !1;
		var b = Ff;
		return null === b || b.diagram.model.dataFormat !== a.model.dataFormat ? !1 : !0
	};
	Cf.prototype.doSimulatedDragEnter = function() {
		if(this.mayDragIn()) {
			var a = this.diagram;
			a.animationManager.Yd();
			ng(a);
			a.animationManager.Yd();
			a = Ff;
			null !== a && (a.diagram.currentCursor = "copy", a.diagram.lk = !1)
		}
	};
	Cf.prototype.doSimulatedDragLeave = function() {
		var a = Ff;
		null !== a && a.doSimulatedDragOut();
		this.doCancel()
	};
	Cf.prototype.doSimulatedDragOver = function() {
		var a = this.diagram,
			b = Ff;
		null !== b && null !== b.draggedParts && this.mayDragIn() && (a.currentCursor = "copy", og(this, b.draggedParts.Zd(), !1), Xf(this, this.copiedParts, !1), dg(this, a.lastInput.documentPoint))
	};
	Cf.prototype.doSimulatedDrop = function() {
		var a = this.diagram,
			b = Ff;
		if(null !== b) {
			var c = b.diagram;
			b.qn = !0;
			Pf(this);
			this.mayDragIn() && (this.Aa("Drop"), og(this, b.draggedParts.Zd(), !0), Xf(this, this.copiedParts, !1), null !== this.copiedParts && a.yv(this.copiedParts.Zd()), jg(this, a.lastInput.documentPoint), a.Xa(), b = a.selection, null !== this.copiedParts ? this.transactionResult = "ExternalCopy" : b = new F, this.copiedParts = null, a.doFocus(), a.aa("ExternalObjectsDropped", b, c), this.tg())
		}
	};

	function og(a, b, c) {
		if(null === a.copiedParts) {
			var d = a.diagram;
			if(!d.isReadOnly && !d.isModelReadOnly) {
				d.skipsUndoManager = !c;
				d.partManager.Dm = !c;
				a.startPoint = d.firstInput.documentPoint;
				c = d.Qj(b, d, !0);
				var e = M.alloc();
				Uf(b, e);
				d = e.x + e.width / 2;
				var f = e.y + e.height / 2;
				M.free(e);
				e = a.ss;
				var g = new Nb,
					h = G.alloc();
				for(b = b.iterator; b.next();) {
					var k = b.value,
						l = c.J(k);
					k.ac() && k.canCopy() ? (k = k.location, h.h(e.x - (d - k.x), e.y - (f - k.y)), l.location = h, l.kc(), g.add(l, a.td(h))) : l instanceof S && k.canCopy() && (Wf(l, e.x - d, e.y - f), g.add(l,
						a.td()))
				}
				G.free(h);
				a.copiedParts = g;
				Gf(a, g.Zd());
				null !== a.draggedLink && (c = a.draggedLink, d = c.routeBounds, Wf(c, a.startPoint.x - (d.x + d.width / 2), a.startPoint.y - (d.y + d.height / 2)))
			}
		}
	}
	Cf.prototype.doSimulatedDragOut = function() {
		var a = this.diagram;
		a.lk = !1;
		this.mayCopy() || this.mayMove() ? a.currentCursor = "" : a.currentCursor = "no-drop"
	};
	Cf.prototype.computeMove = function(a, b, c, d) {
		var e = this.diagram;
		return null !== e ? e.computeMove(a, b, this.dragOptions, c, d) : new G
	};
	oa.Object.defineProperties(Cf.prototype, {
		isCopyEnabled: {
			get: function() {
				return this.Xc
			},
			set: function(a) {
				this.Xc = a
			}
		},
		copiesEffectiveCollection: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K = a
			}
		},
		dragsTree: {
			get: function() {
				return this.eb
			},
			set: function(a) {
				this.eb = a
			}
		},
		dragOptions: {
			get: function() {
				return this.Va
			},
			set: function(a) {
				this.Va = a
			}
		},
		isGridSnapEnabled: {
			get: function() {
				return this.dragOptions.isGridSnapEnabled
			},
			set: function(a) {
				this.dragOptions.isGridSnapEnabled = a
			}
		},
		isComplexRoutingRealtime: {
			get: function() {
				return this.Lc
			},
			set: function(a) {
				this.Lc = a
			}
		},
		isGridSnapRealtime: {
			get: function() {
				return this.dragOptions.isGridSnapRealtime
			},
			set: function(a) {
				this.dragOptions.isGridSnapRealtime = a
			}
		},
		gridSnapCellSize: {
			get: function() {
				return this.dragOptions.gridSnapCellSize
			},
			set: function(a) {
				null ===
					this.diagram || this.dragOptions.gridSnapCellSize.A(a) || (a = a.I(), this.dragOptions.gridSnapCellSize = a)
			}
		},
		gridSnapCellSpot: {
			get: function() {
				return this.dragOptions.gridSnapCellSpot
			},
			set: function(a) {
				this.dragOptions.gridSnapCellSpot.A(a) || (a = a.I(), this.dragOptions.gridSnapCellSpot = a)
			}
		},
		gridSnapOrigin: {
			get: function() {
				return this.dragOptions.gridSnapOrigin
			},
			set: function(a) {
				this.dragOptions.gridSnapOrigin.A(a) || (a = a.I(), this.dragOptions.gridSnapOrigin =
					a)
			}
		},
		dragsLink: {
			get: function() {
				return this.dragOptions.dragsLink
			},
			set: function(a) {
				this.dragOptions.dragsLink = a
			}
		},
		currentPart: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da = a
			}
		},
		copiedParts: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		draggedParts: {
			get: function() {
				return this.Wa
			},
			set: function(a) {
				this.Wa = a
			}
		},
		draggingParts: {
			get: function() {
				return null !==
					this.copiedParts ? this.copiedParts.Zd() : null !== this.draggedParts ? this.draggedParts.Zd() : this.Qi
			}
		},
		draggedLink: {
			get: function() {
				return this.diagram.draggedLink
			},
			set: function(a) {
				this.diagram.draggedLink = a
			}
		},
		isDragOutStarted: {
			get: function() {
				return this.vf
			},
			set: function(a) {
				this.vf = a
			}
		},
		startPoint: {
			get: function() {
				return this.ss
			},
			set: function(a) {
				this.ss.A(a) || this.ss.assign(a)
			}
		},
		delay: {
			get: function() {
				return this.Kk
			},
			set: function(a) {
				this.Kk = a
			}
		}
	});
	Cf.prototype.getDraggingSource = Cf.prototype.Vy;
	var Nf = null,
		Ff = null,
		If = null;
	Cf.className = "DraggingTool";
	Nf = new E;
	Ta("draggingTool", function() {
		return this.findTool("Dragging")
	}, function(a) {
		Af(this, "Dragging", a, this.mouseMoveTools)
	});
	Va.prototype.doCancel = function() {
		null !== Ff && Ff.doCancel();
		kf.prototype.doCancel.call(this)
	};

	function pg() {
		kf.call(this);
		this.vf = 100;
		this.da = !1;
		var a = new S,
			b = new qg;
		b.isPanelMain = !0;
		b.stroke = "blue";
		a.add(b);
		b = new qg;
		b.toArrow = "Standard";
		b.fill = "blue";
		b.stroke = "blue";
		a.add(b);
		a.layerName = "Tool";
		this.ym = a;
		a = new W;
		b = new qg;
		b.portId = "";
		b.figure = "Rectangle";
		b.fill = null;
		b.stroke = "magenta";
		b.strokeWidth = 2;
		b.desiredSize = lc;
		a.add(b);
		a.selectable = !1;
		a.layerName = "Tool";
		this.wm = a;
		this.xm = b;
		a = new W;
		b = new qg;
		b.portId = "";
		b.figure = "Rectangle";
		b.fill = null;
		b.stroke = "magenta";
		b.strokeWidth = 2;
		b.desiredSize =
			lc;
		a.add(b);
		a.selectable = !1;
		a.layerName = "Tool";
		this.tq = a;
		this.aw = b;
		this.Xc = this.Lc = this.Wa = this.Va = this.eb = null;
		this.K = !0;
		this.Sx = new Nb;
		this.Qi = this.fi = this.vm = null
	}
	na(pg, kf);
	pg.prototype.doStop = function() {
		this.diagram.uf();
		this.originalToPort = this.originalToNode = this.originalFromPort = this.originalFromNode = this.originalLink = null;
		this.validPortsCache.clear();
		this.targetPort = null
	};
	pg.prototype.copyPortProperties = function(a, b, c, d, e) {
		if(null !== a && null !== b && null !== c && null !== d) {
			d.desiredSize = b.actualBounds.size;
			e ? (d.toSpot = b.toSpot, d.toEndSegmentLength = b.toEndSegmentLength) : (d.fromSpot = b.fromSpot, d.fromEndSegmentLength = b.fromEndSegmentLength);
			c.locationSpot = id;
			var f = G.alloc();
			c.location = b.ka(id, f);
			G.free(f);
			d.angle = b.Di();
			null !== this.portTargeted && this.portTargeted(a, b, c, d, e)
		}
	};
	pg.prototype.setNoTargetPortProperties = function(a, b, c) {
		null !== b && (b.desiredSize = lc, b.fromSpot = dd, b.toSpot = dd);
		null !== a && (a.location = this.diagram.lastInput.documentPoint);
		null !== this.portTargeted && this.portTargeted(null, null, a, b, c)
	};
	pg.prototype.doMouseDown = function() {
		this.isActive && this.doMouseMove()
	};
	pg.prototype.doMouseMove = function() {
		if(this.isActive) {
			var a = this.diagram;
			this.targetPort = this.findTargetPort(this.isForwards);
			if(null !== this.targetPort && this.targetPort.part instanceof W) {
				var b = this.targetPort.part;
				this.isForwards ? this.copyPortProperties(b, this.targetPort, this.temporaryToNode, this.temporaryToPort, !0) : this.copyPortProperties(b, this.targetPort, this.temporaryFromNode, this.temporaryFromPort, !1)
			} else this.isForwards ? this.setNoTargetPortProperties(this.temporaryToNode, this.temporaryToPort, !0) : this.setNoTargetPortProperties(this.temporaryFromNode, this.temporaryFromPort, !1);
			(a.allowHorizontalScroll || a.allowVerticalScroll) && a.Ks(a.lastInput.viewPoint)
		}
	};
	pg.prototype.findValidLinkablePort = function(a, b) {
		if(null === a) return null;
		var c = a.part;
		if(!(c instanceof W)) return null;
		for(; null !== a;) {
			var d = b ? a.toLinkable : a.fromLinkable;
			if(!0 === d && (null !== a.portId || a instanceof W) && (b ? this.isValidTo(c, a) : this.isValidFrom(c, a))) return a;
			if(!1 === d) break;
			a = a.panel
		}
		return null
	};
	pg.prototype.findTargetPort = function(a) {
		var b = this.diagram,
			c = b.lastInput.documentPoint,
			d = this.portGravity;
		0 >= d && (d = .1);
		var e = this,
			f = b.ng(c, d, function(b) {
				return e.findValidLinkablePort(b, a)
			}, null, !0);
		d = Infinity;
		b = null;
		for(f = f.iterator; f.next();) {
			var g = f.value,
				h = g.part;
			if(h instanceof W) {
				var k = g.ka(id, G.alloc()),
					l = c.x - k.x,
					m = c.y - k.y;
				G.free(k);
				k = l * l + m * m;
				k < d && (l = this.validPortsCache.J(g), null !== l ? l && (b = g, d = k) : a && this.isValidLink(this.originalFromNode, this.originalFromPort, h, g) || !a && this.isValidLink(h,
					g, this.originalToNode, this.originalToPort) ? (this.validPortsCache.add(g, !0), b = g, d = k) : this.validPortsCache.add(g, !1))
			}
		}
		return null !== b && (c = b.part, c instanceof W && (null === c.layer || c.layer.allowLink)) ? b : null
	};
	pg.prototype.isValidFrom = function(a, b) {
		if(null === a || null === b) return this.isUnconnectedLinkValid;
		if(this.diagram.currentTool === this && (null !== a.layer && !a.layer.allowLink || !0 !== b.fromLinkable)) return !1;
		var c = b.fromMaxLinks;
		if(Infinity > c) {
			if(null !== this.originalLink && a === this.originalFromNode && b === this.originalFromPort) return !0;
			b = b.portId;
			null === b && (b = "");
			if(a.Mp(b).count >= c) return !1
		}
		return !0
	};
	pg.prototype.isValidTo = function(a, b) {
		if(null === a || null === b) return this.isUnconnectedLinkValid;
		if(this.diagram.currentTool === this && (null !== a.layer && !a.layer.allowLink || !0 !== b.toLinkable)) return !1;
		var c = b.toMaxLinks;
		if(Infinity > c) {
			if(null !== this.originalLink && a === this.originalToNode && b === this.originalToPort) return !0;
			b = b.portId;
			null === b && (b = "");
			if(a.vd(b).count >= c) return !1
		}
		return !0
	};
	pg.prototype.isInSameNode = function(a, b) {
		if(null === a || null === b) return !1;
		if(a === b) return !0;
		a = a.part;
		b = b.part;
		return null !== a && a === b
	};
	pg.prototype.isLinked = function(a, b) {
		if(null === a || null === b) return !1;
		var c = a.part;
		if(!(c instanceof W)) return !1;
		a = a.portId;
		null === a && (a = "");
		var d = b.part;
		if(!(d instanceof W)) return !1;
		b = b.portId;
		null === b && (b = "");
		for(b = d.vd(b); b.next();)
			if(d = b.value, d.fromNode === c && d.fromPortId === a) return !0;
		return !1
	};
	pg.prototype.isValidLink = function(a, b, c, d) {
		if(!this.isValidFrom(a, b) || !this.isValidTo(c, d) || !(null === b || null === d || (b.fromLinkableSelfNode && d.toLinkableSelfNode || !this.isInSameNode(b, d)) && (b.fromLinkableDuplicates && d.toLinkableDuplicates || !this.isLinked(b, d))) || null !== this.originalLink && (null !== a && this.isLabelDependentOnLink(a, this.originalLink) || null !== c && this.isLabelDependentOnLink(c, this.originalLink)) || null !== a && null !== c && (null === a.data && null !== c.data || null !== a.data && null === c.data) || !this.isValidCycle(a,
				c, this.originalLink)) return !1;
		if(null !== a) {
			var e = a.linkValidation;
			if(null !== e && !e(a, b, c, d, this.originalLink)) return !1
		}
		if(null !== c && (e = c.linkValidation, null !== e && !e(a, b, c, d, this.originalLink))) return !1;
		e = this.linkValidation;
		return null !== e ? e(a, b, c, d, this.originalLink) : !0
	};
	pg.prototype.isLabelDependentOnLink = function(a, b) {
		if(null === a) return !1;
		var c = a.labeledLink;
		if(null === c) return !1;
		if(c === b) return !0;
		var d = new F;
		d.add(a);
		return rg(this, c, b, d)
	};

	function rg(a, b, c, d) {
		if(b === c) return !0;
		var e = b.fromNode;
		if(null !== e && e.isLinkLabel && (d.add(e), rg(a, e.labeledLink, c, d))) return !0;
		b = b.toNode;
		return null !== b && b.isLinkLabel && (d.add(b), rg(a, b.labeledLink, c, d)) ? !0 : !1
	}
	pg.prototype.isValidCycle = function(a, b, c) {
		void 0 === c && (c = null);
		if(null === a || null === b) return this.isUnconnectedLinkValid;
		var d = this.diagram.validCycle;
		if(d !== sg) {
			if(d === tg) {
				d = c || this.temporaryLink;
				if(null !== d && !d.isTreeLink) return !0;
				for(d = b.linksConnected; d.next();) {
					var e = d.value;
					if(e !== c && e.isTreeLink && e.toNode === b) return !1
				}
				return !ug(this, a, b, c, !0)
			}
			if(d === vg) {
				d = c || this.temporaryLink;
				if(null !== d && !d.isTreeLink) return !0;
				for(d = a.linksConnected; d.next();)
					if(e = d.value, e !== c && e.isTreeLink && e.fromNode ===
						a) return !1;
				return !ug(this, a, b, c, !0)
			}
			if(d === wg) return a === b ? a = !0 : (d = new F, d.add(b), a = xg(this, d, a, b, c)), !a;
			if(d === yg) return !ug(this, a, b, c, !1);
			if(d === zg) return a === b ? a = !0 : (d = new F, d.add(b), a = Lg(this, d, a, b, c)), !a
		}
		return !0
	};

	function ug(a, b, c, d, e) {
		if(b === c) return !0;
		if(null === b || null === c) return !1;
		for(var f = b.linksConnected; f.next();) {
			var g = f.value;
			if(g !== d && (!e || g.isTreeLink) && g.toNode === b && (g = g.fromNode, g !== b && ug(a, g, c, d, e))) return !0
		}
		return !1
	}

	function xg(a, b, c, d, e) {
		if(c === d) return !0;
		if(null === c || null === d || b.contains(c)) return !1;
		b.add(c);
		for(var f = c.linksConnected; f.next();) {
			var g = f.value;
			if(g !== e && g.toNode === c && (g = g.fromNode, g !== c && xg(a, b, g, d, e))) return !0
		}
		return !1
	}

	function Lg(a, b, c, d, e) {
		if(c === d) return !0;
		if(null === c || null === d || b.contains(c)) return !1;
		b.add(c);
		for(var f = c.linksConnected; f.next();) {
			var g = f.value;
			if(g !== e) {
				var h = g.fromNode;
				g = g.toNode;
				h = h === c ? g : h;
				if(h !== c && Lg(a, b, h, d, e)) return !0
			}
		}
		return !1
	}
	oa.Object.defineProperties(pg.prototype, {
		portGravity: {
			get: function() {
				return this.vf
			},
			set: function(a) {
				0 <= a && (this.vf = a)
			}
		},
		isUnconnectedLinkValid: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da = a
			}
		},
		temporaryLink: {
			get: function() {
				return this.ym
			},
			set: function(a) {
				this.ym = a
			}
		},
		temporaryFromNode: {
			get: function() {
				return this.wm
			},
			set: function(a) {
				this.wm = a
			}
		},
		temporaryFromPort: {
			get: function() {
				return this.xm
			},
			set: function(a) {
				this.xm = a
			}
		},
		temporaryToNode: {
			get: function() {
				return this.tq
			},
			set: function(a) {
				this.tq = a
			}
		},
		temporaryToPort: {
			get: function() {
				return this.aw
			},
			set: function(a) {
				this.aw = a
			}
		},
		originalLink: {
			get: function() {
				return this.eb
			},
			set: function(a) {
				this.eb = a
			}
		},
		originalFromNode: {
			get: function() {
				return this.Va
			},
			set: function(a) {
				this.Va = a
			}
		},
		originalFromPort: {
			get: function() {
				return this.Wa
			},
			set: function(a) {
				this.Wa = a
			}
		},
		originalToNode: {
			get: function() {
				return this.Lc
			},
			set: function(a) {
				this.Lc = a
			}
		},
		originalToPort: {
			get: function() {
				return this.Xc
			},
			set: function(a) {
				this.Xc = a
			}
		},
		isForwards: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K = a
			}
		},
		validPortsCache: {
			get: function() {
				return this.Sx
			}
		},
		targetPort: {
			get: function() {
				return this.vm
			},
			set: function(a) {
				this.vm = a
			}
		},
		linkValidation: {
			get: function() {
				return this.fi
			},
			set: function(a) {
				this.fi = a
			}
		},
		portTargeted: {
			get: function() {
				return this.Qi
			},
			set: function(a) {
				this.Qi = a
			}
		}
	});
	pg.className = "LinkingBaseTool";

	function Mg() {
		pg.call(this);
		this.name = "Linking";
		this.u = {};
		this.l = null;
		this.L = Ng;
		this.um = null
	}
	na(Mg, pg);
	Mg.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		return a.isReadOnly || a.isModelReadOnly || !a.allowLink || !Og(a.model) || !a.lastInput.left || a.currentTool !== this && !this.isBeyondDragSize() ? !1 : null !== this.findLinkablePort()
	};
	Mg.prototype.findLinkablePort = function() {
		var a = this.diagram,
			b = this.startObject;
		null === b && (b = a.Sb(a.firstInput.documentPoint, null, null));
		if(null === b || !(b.part instanceof W)) return null;
		a = this.direction;
		if(a === Ng || a === Pg) {
			var c = this.findValidLinkablePort(b, !1);
			if(null !== c) return this.isForwards = !0, c
		}
		if(a === Ng || a === Qg)
			if(b = this.findValidLinkablePort(b, !0), null !== b) return this.isForwards = !1, b;
		return null
	};
	Mg.prototype.doActivate = function() {
		var a = this.diagram,
			b = this.findLinkablePort();
		null !== b && (this.Aa(this.name), a.isMouseCaptured = !0, a.currentCursor = "pointer", this.isForwards ? (null === this.temporaryToNode || this.temporaryToNode.location.s() || (this.temporaryToNode.location = a.lastInput.documentPoint), this.originalFromPort = b, b = this.originalFromPort.part, b instanceof W && (this.originalFromNode = b), this.copyPortProperties(this.originalFromNode, this.originalFromPort, this.temporaryFromNode, this.temporaryFromPort, !1)) : (null === this.temporaryFromNode || this.temporaryFromNode.location.s() || (this.temporaryFromNode.location = a.lastInput.documentPoint), this.originalToPort = b, b = this.originalToPort.part, b instanceof W && (this.originalToNode = b), this.copyPortProperties(this.originalToNode, this.originalToPort, this.temporaryToNode, this.temporaryToPort, !0)), a.add(this.temporaryFromNode), a.add(this.temporaryToNode), null !== this.temporaryLink && (null !== this.temporaryFromNode && (this.temporaryLink.fromNode = this.temporaryFromNode),
			null !== this.temporaryToNode && (this.temporaryLink.toNode = this.temporaryToNode), this.temporaryLink.isTreeLink = this.isNewTreeLink(), this.temporaryLink.Pa(), a.add(this.temporaryLink)), this.isActive = !0)
	};
	Mg.prototype.doDeactivate = function() {
		this.isActive = !1;
		var a = this.diagram;
		a.remove(this.temporaryLink);
		a.remove(this.temporaryFromNode);
		a.remove(this.temporaryToNode);
		a.isMouseCaptured = !1;
		a.currentCursor = "";
		this.tg()
	};
	Mg.prototype.doStop = function() {
		pg.prototype.doStop.call(this);
		this.startObject = null
	};
	Mg.prototype.doMouseUp = function() {
		if(this.isActive) {
			var a = this.diagram,
				b = this.transactionResult = null,
				c = null,
				d = null,
				e = null,
				f = this.targetPort = this.findTargetPort(this.isForwards);
			if(null !== f) {
				var g = f.part;
				g instanceof W && (this.isForwards ? (null !== this.originalFromNode && (b = this.originalFromNode, c = this.originalFromPort), d = g, e = f) : (b = g, c = f, null !== this.originalToNode && (d = this.originalToNode, e = this.originalToPort)))
			} else this.isForwards ? null !== this.originalFromNode && this.isUnconnectedLinkValid && (b = this.originalFromNode,
				c = this.originalFromPort) : null !== this.originalToNode && this.isUnconnectedLinkValid && (d = this.originalToNode, e = this.originalToPort);
			null !== b || null !== d ? (g = this.insertLink(b, c, d, e), null !== g ? (null === f && (this.isForwards ? g.defaultToPoint = a.lastInput.documentPoint : g.defaultFromPoint = a.lastInput.documentPoint), a.allowSelect && a.select(g), this.transactionResult = this.name, a.aa("LinkDrawn", g)) : (a.model.Cu(), this.doNoLink(b, c, d, e))) : this.isForwards ? this.doNoLink(this.originalFromNode, this.originalFromPort, null, null) :
				this.doNoLink(null, null, this.originalToNode, this.originalToPort)
		}
		this.stopTool()
	};
	Mg.prototype.isNewTreeLink = function() {
		var a = this.archetypeLinkData;
		if(null === a) return !0;
		if(a instanceof S) return a.isTreeLink;
		var b = this.diagram;
		if(null === b) return !0;
		a = b.partManager.getLinkCategoryForData(a);
		b = b.partManager.findLinkTemplateForCategory(a);
		return null !== b ? b.isTreeLink : !0
	};
	Mg.prototype.insertLink = function(a, b, c, d) {
		return this.diagram.partManager.insertLink(a, b, c, d)
	};
	Mg.prototype.doNoLink = function() {};
	oa.Object.defineProperties(Mg.prototype, {
		archetypeLinkData: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		archetypeLabelNodeData: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		},
		direction: {
			get: function() {
				return this.L
			},
			set: function(a) {
				this.L = a
			}
		},
		startObject: {
			get: function() {
				return this.um
			},
			set: function(a) {
				this.um = a
			}
		}
	});
	var Ng = new D(Mg, "Either", 0),
		Pg = new D(Mg, "ForwardsOnly", 0),
		Qg = new D(Mg, "BackwardsOnly", 0);
	Mg.className = "LinkingTool";
	Mg.Either = Ng;
	Mg.ForwardsOnly = Pg;
	Mg.BackwardsOnly = Qg;

	function Jf() {
		pg.call(this);
		this.name = "Relinking";
		var a = new qg;
		a.figure = "Diamond";
		a.desiredSize = nc;
		a.fill = "lightblue";
		a.stroke = "dodgerblue";
		a.cursor = "pointer";
		a.segmentIndex = 0;
		this.l = a;
		a = new qg;
		a.figure = "Diamond";
		a.desiredSize = nc;
		a.fill = "lightblue";
		a.stroke = "dodgerblue";
		a.cursor = "pointer";
		a.segmentIndex = -1;
		this.u = a;
		this.Za = null;
		this.Ew = new M
	}
	na(Jf, pg);
	Jf.prototype.updateAdornments = function(a) {
		if(null !== a && a instanceof S) {
			var b = "RelinkFrom",
				c = null;
			if(a.isSelected && !this.diagram.isReadOnly) {
				var d = a.selectionObject;
				null !== d && a.canRelinkFrom() && a.actualBounds.s() && a.isVisible() && d.actualBounds.s() && d.rf() && (c = a.Tj(b), null === c ? (c = this.makeAdornment(d, !1), a.jh(b, c)) : c.o())
			}
			null === c && a.sf(b);
			b = "RelinkTo";
			c = null;
			a.isSelected && !this.diagram.isReadOnly && (d = a.selectionObject, null !== d && a.canRelinkTo() && a.actualBounds.s() && a.isVisible() && d.actualBounds.s() &&
				d.rf() && (c = a.Tj(b), null === c ? (c = this.makeAdornment(d, !0), a.jh(b, c)) : c.o()));
			null === c && a.sf(b)
		}
	};
	Jf.prototype.makeAdornment = function(a, b) {
		var c = new pf;
		c.type = Y.Link;
		b = b ? this.toHandleArchetype : this.fromHandleArchetype;
		null !== b && c.add(b.copy());
		c.adornedObject = a;
		return c
	};
	Jf.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		if(a.isReadOnly || a.isModelReadOnly || !a.allowRelink || !Og(a.model) || !a.lastInput.left) return !1;
		var b = this.findToolHandleAt(a.firstInput.documentPoint, "RelinkFrom");
		null === b && (b = this.findToolHandleAt(a.firstInput.documentPoint, "RelinkTo"));
		return null !== b
	};
	Jf.prototype.doActivate = function() {
		var a = this.diagram;
		if(null === this.originalLink) {
			var b = this.findToolHandleAt(a.firstInput.documentPoint, "RelinkFrom");
			null === b && (b = this.findToolHandleAt(a.firstInput.documentPoint, "RelinkTo"));
			if(null === b) return;
			var c = b.part;
			if(!(c instanceof pf && c.adornedPart instanceof S)) return;
			this.Za = b;
			this.isForwards = null === c || "RelinkTo" === c.category;
			this.originalLink = c.adornedPart
		}
		this.Aa(this.name);
		a.isMouseCaptured = !0;
		a.currentCursor = "pointer";
		this.originalFromPort = this.originalLink.fromPort;
		this.originalFromNode = this.originalLink.fromNode;
		this.originalToPort = this.originalLink.toPort;
		this.originalToNode = this.originalLink.toNode;
		this.Ew.set(this.originalLink.actualBounds);
		null !== this.originalLink && 0 < this.originalLink.pointsCount && (null === this.originalLink.fromNode && (null !== this.temporaryFromPort && (this.temporaryFromPort.desiredSize = gc), null !== this.temporaryFromNode && (this.temporaryFromNode.location = this.originalLink.i(0))), null === this.originalLink.toNode && (null !== this.temporaryToPort &&
			(this.temporaryToPort.desiredSize = gc), null !== this.temporaryToNode && (this.temporaryToNode.location = this.originalLink.i(this.originalLink.pointsCount - 1))));
		this.copyPortProperties(this.originalFromNode, this.originalFromPort, this.temporaryFromNode, this.temporaryFromPort, !1);
		this.copyPortProperties(this.originalToNode, this.originalToPort, this.temporaryToNode, this.temporaryToPort, !0);
		a.add(this.temporaryFromNode);
		a.add(this.temporaryToNode);
		null !== this.temporaryLink && (null !== this.temporaryFromNode && (this.temporaryLink.fromNode =
			this.temporaryFromNode), null !== this.temporaryToNode && (this.temporaryLink.toNode = this.temporaryToNode), this.copyLinkProperties(this.originalLink, this.temporaryLink), this.temporaryLink.Pa(), a.add(this.temporaryLink));
		this.isActive = !0
	};
	Jf.prototype.copyLinkProperties = function(a, b) {
		if(null !== a && null !== b) {
			b.adjusting = a.adjusting;
			b.corner = a.corner;
			var c = a.curve;
			if(c === Rg || c === Sg) c = Tg;
			b.curve = c;
			b.curviness = a.curviness;
			b.isTreeLink = a.isTreeLink;
			b.points = a.points;
			b.routing = a.routing;
			b.smoothness = a.smoothness;
			b.fromSpot = a.fromSpot;
			b.fromEndSegmentLength = a.fromEndSegmentLength;
			b.fromShortLength = a.fromShortLength;
			b.toSpot = a.toSpot;
			b.toEndSegmentLength = a.toEndSegmentLength;
			b.toShortLength = a.toShortLength
		}
	};
	Jf.prototype.doDeactivate = function() {
		this.isActive = !1;
		var a = this.diagram;
		a.remove(this.temporaryLink);
		a.remove(this.temporaryFromNode);
		a.remove(this.temporaryToNode);
		a.isMouseCaptured = !1;
		a.currentCursor = "";
		this.tg()
	};
	Jf.prototype.doStop = function() {
		pg.prototype.doStop.call(this);
		this.Za = null
	};
	Jf.prototype.doMouseUp = function() {
		if(this.isActive) {
			var a = this.diagram;
			this.transactionResult = null;
			var b = this.originalFromNode,
				c = this.originalFromPort,
				d = this.originalToNode,
				e = this.originalToPort,
				f = this.originalLink;
			this.targetPort = this.findTargetPort(this.isForwards);
			if(null !== this.targetPort) {
				var g = this.targetPort.part;
				g instanceof W && (this.isForwards ? (d = g, e = this.targetPort) : (b = g, c = this.targetPort))
			} else this.isUnconnectedLinkValid ? this.isForwards ? e = d = null : c = b = null : f = null;
			null !== f ? (this.reconnectLink(f,
				this.isForwards ? d : b, this.isForwards ? e : c, this.isForwards), null === this.targetPort && (this.isForwards ? f.defaultToPoint = a.lastInput.documentPoint : f.defaultFromPoint = a.lastInput.documentPoint, f.Pa()), a.allowSelect && (f.isSelected = !0), this.transactionResult = this.name, a.aa("LinkRelinked", f, this.isForwards ? this.originalToPort : this.originalFromPort)) : this.doNoRelink(this.originalLink, this.isForwards);
			this.originalLink.Tp(this.Ew)
		}
		this.stopTool()
	};
	Jf.prototype.reconnectLink = function(a, b, c, d) {
		c = null !== c && null !== c.portId ? c.portId : "";
		d ? (a.toNode = b, a.toPortId = c) : (a.fromNode = b, a.fromPortId = c);
		return !0
	};
	Jf.prototype.doNoRelink = function() {};

	function ig(a, b, c, d, e) {
		null !== b ? (a.copyPortProperties(b, c, a.temporaryFromNode, a.temporaryFromPort, !1), a.diagram.add(a.temporaryFromNode)) : a.diagram.remove(a.temporaryFromNode);
		null !== d ? (a.copyPortProperties(d, e, a.temporaryToNode, a.temporaryToPort, !0), a.diagram.add(a.temporaryToNode)) : a.diagram.remove(a.temporaryToNode)
	}
	oa.Object.defineProperties(Jf.prototype, {
		fromHandleArchetype: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		},
		toHandleArchetype: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		handle: {
			get: function() {
				return this.Za
			}
		}
	});
	Jf.className = "RelinkingTool";
	Ta("linkingTool", function() {
		return this.findTool("Linking")
	}, function(a) {
		Af(this, "Linking", a, this.mouseMoveTools)
	});
	Ta("relinkingTool", function() {
		return this.findTool("Relinking")
	}, function(a) {
		Af(this, "Relinking", a, this.mouseDownTools)
	});

	function Ug() {
		kf.call(this);
		this.name = "LinkReshaping";
		var a = new qg;
		a.figure = "Rectangle";
		a.desiredSize = mc;
		a.fill = "lightblue";
		a.stroke = "dodgerblue";
		this.l = a;
		a = new qg;
		a.figure = "Diamond";
		a.desiredSize = nc;
		a.fill = "lightblue";
		a.stroke = "dodgerblue";
		a.cursor = "move";
		this.u = a;
		this.K = 3;
		this.Bt = this.Za = null;
		this.ml = new G;
		this.Wr = new E
	}
	na(Ug, kf);
	Ug.prototype.Uu = function(a) {
		return a && a.bs && 0 !== a.bs.value ? a.bs : Vg
	};
	Ug.prototype.om = function(a, b) {
		a.bs = b
	};
	Ug.prototype.updateAdornments = function(a) {
		if(null !== a && a instanceof S) {
			if(a.isSelected && !this.diagram.isReadOnly) {
				var b = a.path;
				if(null !== b && a.canReshape() && a.actualBounds.s() && a.isVisible() && b.actualBounds.s() && b.rf()) {
					var c = a.Tj(this.name);
					if(null === c || c.Cw !== a.pointsCount || c.Mw !== a.resegmentable) c = this.makeAdornment(b), null !== c && (c.Cw = a.pointsCount, c.Mw = a.resegmentable, a.jh(this.name, c));
					if(null !== c) {
						c.o();
						return
					}
				}
			}
			a.sf(this.name)
		}
	};
	Ug.prototype.makeAdornment = function(a) {
		var b = a.part,
			c = b.pointsCount,
			d = b.isOrthogonal,
			e = null;
		if(null !== b.points && 1 < c) {
			e = new pf;
			e.type = Y.Link;
			c = b.firstPickIndex;
			var f = b.lastPickIndex,
				g = d ? 1 : 0;
			if(b.resegmentable && b.computeCurve() !== Wg)
				for(var h = c + g; h < f - g; h++) {
					var k = this.makeResegmentHandle(a, h);
					null !== k && (k.segmentIndex = h, k.segmentFraction = .5, k.fromMaxLinks = 999, e.add(k))
				}
			for(g = c + 1; g < f; g++)
				if(h = this.makeHandle(a, g), null !== h) {
					h.segmentIndex = g;
					if(g !== c)
						if(g === c + 1 && d) {
							k = b.i(c);
							var l = b.i(c + 1);
							H.w(k.x, l.x) &&
								H.w(k.y, l.y) && (l = b.i(c - 1));
							H.w(k.x, l.x) ? (this.om(h, Xg), h.cursor = "n-resize") : H.w(k.y, l.y) && (this.om(h, Yg), h.cursor = "w-resize")
						} else g === f - 1 && d ? (k = b.i(f - 1), l = b.i(f), H.w(k.x, l.x) && H.w(k.y, l.y) && (k = b.i(f + 1)), H.w(k.x, l.x) ? (this.om(h, Xg), h.cursor = "n-resize") : H.w(k.y, l.y) && (this.om(h, Yg), h.cursor = "w-resize")) : g !== f && (this.om(h, Zg), h.cursor = "move");
					e.add(h)
				}
			e.adornedObject = a
		}
		return e
	};
	Ug.prototype.makeHandle = function() {
		var a = this.handleArchetype;
		return null === a ? null : a.copy()
	};
	Ug.prototype.makeResegmentHandle = function() {
		var a = this.midHandleArchetype;
		return null === a ? null : a.copy()
	};
	Ug.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		return !a.isReadOnly && a.allowReshape && a.lastInput.left ? null !== this.findToolHandleAt(a.firstInput.documentPoint, this.name) : !1
	};
	Ug.prototype.doActivate = function() {
		var a = this.diagram;
		this.Za = this.findToolHandleAt(a.firstInput.documentPoint, this.name);
		if(null !== this.Za) {
			var b = this.Za.part.adornedPart;
			if(b instanceof S) {
				this.Bt = b;
				a.isMouseCaptured = !0;
				this.Aa(this.name);
				if(b.resegmentable && 999 === this.Za.fromMaxLinks) {
					var c = b.points.copy(),
						d = this.getResegmentingPoint();
					c.Nb(this.Za.segmentIndex + 1, d);
					b.isOrthogonal && c.Nb(this.Za.segmentIndex + 1, d);
					b.points = c;
					b.Ob();
					this.Za = this.findToolHandleAt(a.firstInput.documentPoint, this.name);
					if(null === this.Za) {
						this.doDeactivate();
						return
					}
				}
				this.ml = b.i(this.Za.segmentIndex);
				this.Wr = b.points.copy();
				this.isActive = !0
			}
		}
	};
	Ug.prototype.doDeactivate = function() {
		this.tg();
		this.Bt = this.Za = null;
		this.isActive = this.diagram.isMouseCaptured = !1
	};
	Ug.prototype.doCancel = function() {
		var a = this.adornedLink;
		null !== a && (a.points = this.Wr);
		this.stopTool()
	};
	Ug.prototype.getResegmentingPoint = function() {
		return this.handle.ka(id)
	};
	Ug.prototype.doMouseMove = function() {
		var a = this.diagram;
		this.isActive && (a = this.computeReshape(a.lastInput.documentPoint), this.reshape(a))
	};
	Ug.prototype.doMouseUp = function() {
		var a = this.diagram;
		if(this.isActive) {
			var b = this.computeReshape(a.lastInput.documentPoint);
			this.reshape(b);
			b = this.adornedLink;
			if(null !== b && b.resegmentable) {
				var c = this.handle.segmentIndex,
					d = b.i(c - 1),
					e = b.i(c),
					f = b.i(c + 1);
				if(b.isOrthogonal) {
					if(c > b.firstPickIndex + 1 && c < b.lastPickIndex - 1) {
						var g = b.i(c - 2);
						if(Math.abs(d.x - e.x) < this.resegmentingDistance && Math.abs(d.y - e.y) < this.resegmentingDistance && ($g(this, g, d, e, f, !0) || $g(this, g, d, e, f, !1))) {
							var h = b.points.copy();
							$g(this, g, d,
								e, f, !0) ? (h.kd(c - 2, new G(g.x, (f.y + g.y) / 2)), h.kd(c + 1, new G(f.x, (f.y + g.y) / 2))) : (h.kd(c - 2, new G((f.x + g.x) / 2, g.y)), h.kd(c + 1, new G((f.x + g.x) / 2, f.y)));
							h.qb(c);
							h.qb(c - 1);
							b.points = h;
							b.Ob()
						} else g = b.i(c + 2), Math.abs(e.x - f.x) < this.resegmentingDistance && Math.abs(e.y - f.y) < this.resegmentingDistance && ($g(this, d, e, f, g, !0) || $g(this, d, e, f, g, !1)) && (h = b.points.copy(), $g(this, d, e, f, g, !0) ? (h.kd(c - 1, new G(d.x, (d.y + g.y) / 2)), h.kd(c + 2, new G(g.x, (d.y + g.y) / 2))) : (h.kd(c - 1, new G((d.x + g.x) / 2, d.y)), h.kd(c + 2, new G((d.x + g.x) / 2, g.y))),
							h.qb(c + 1), h.qb(c), b.points = h, b.Ob())
					}
				} else g = G.alloc(), H.Ii(d.x, d.y, f.x, f.y, e.x, e.y, g) && g.Be(e) < this.resegmentingDistance * this.resegmentingDistance && (d = b.points.copy(), d.qb(c), b.points = d, b.Ob()), G.free(g)
			}
			a.Xa();
			this.transactionResult = this.name;
			a.aa("LinkReshaped", this.adornedLink, this.Wr)
		}
		this.stopTool()
	};

	function $g(a, b, c, d, e, f) {
		return f ? Math.abs(b.y - c.y) < a.resegmentingDistance && Math.abs(c.y - d.y) < a.resegmentingDistance && Math.abs(d.y - e.y) < a.resegmentingDistance : Math.abs(b.x - c.x) < a.resegmentingDistance && Math.abs(c.x - d.x) < a.resegmentingDistance && Math.abs(d.x - e.x) < a.resegmentingDistance
	}
	Ug.prototype.reshape = function(a) {
		var b = this.adornedLink;
		b.yh();
		var c = this.handle.segmentIndex,
			d = this.Uu(this.handle);
		if(b.isOrthogonal)
			if(c === b.firstPickIndex + 1) c = b.firstPickIndex + 1, d === Xg ? (b.M(c, b.i(c - 1).x, a.y), b.M(c + 1, b.i(c + 2).x, a.y)) : d === Yg && (b.M(c, a.x, b.i(c - 1).y), b.M(c + 1, a.x, b.i(c + 2).y));
			else if(c === b.lastPickIndex - 1) c = b.lastPickIndex - 1, d === Xg ? (b.M(c - 1, b.i(c - 2).x, a.y), b.M(c, b.i(c + 1).x, a.y)) : d === Yg && (b.M(c - 1, a.x, b.i(c - 2).y), b.M(c, a.x, b.i(c + 1).y));
		else {
			d = c;
			var e = b.i(d),
				f = b.i(d - 1),
				g = b.i(d + 1);
			H.w(f.x,
				e.x) && H.w(e.y, g.y) ? (H.w(f.x, b.i(d - 2).x) && !H.w(f.y, b.i(d - 2).y) ? (b.m(d, a.x, f.y), c++, d++) : b.M(d - 1, a.x, f.y), H.w(g.y, b.i(d + 2).y) && !H.w(g.x, b.i(d + 2).x) ? b.m(d + 1, g.x, a.y) : b.M(d + 1, g.x, a.y)) : H.w(f.y, e.y) && H.w(e.x, g.x) ? (H.w(f.y, b.i(d - 2).y) && !H.w(f.x, b.i(d - 2).x) ? (b.m(d, f.x, a.y), c++, d++) : b.M(d - 1, f.x, a.y), H.w(g.x, b.i(d + 2).x) && !H.w(g.y, b.i(d + 2).y) ? b.m(d + 1, a.x, g.y) : b.M(d + 1, a.x, g.y)) : H.w(f.x, e.x) && H.w(e.x, g.x) ? (H.w(f.x, b.i(d - 2).x) && !H.w(f.y, b.i(d - 2).y) ? (b.m(d, a.x, f.y), c++, d++) : b.M(d - 1, a.x, f.y), H.w(g.x, b.i(d + 2).x) &&
				!H.w(g.y, b.i(d + 2).y) ? b.m(d + 1, a.x, g.y) : b.M(d + 1, a.x, g.y)) : H.w(f.y, e.y) && H.w(e.y, g.y) && (H.w(f.y, b.i(d - 2).y) && !H.w(f.x, b.i(d - 2).x) ? (b.m(d, f.x, a.y), c++, d++) : b.M(d - 1, f.x, a.y), H.w(g.y, b.i(d + 2).y) && !H.w(g.x, b.i(d + 2).x) ? b.m(d + 1, g.x, a.y) : b.M(d + 1, g.x, a.y));
			b.M(c, a.x, a.y)
		} else b.M(c, a.x, a.y), d = b.fromNode, e = b.fromPort, null !== d && (f = d.findVisibleNode(), null !== f && f !== d && (d = f, e = d.port)), 1 === c && b.computeSpot(!0, e).mc() && (f = e.ka(id, G.alloc()), d = b.getLinkPointFromPoint(d, e, f, a, !0, G.alloc()), b.M(0, d.x, d.y), G.free(f),
			G.free(d)), d = b.toNode, e = b.toPort, null !== d && (f = d.findVisibleNode(), null !== f && f !== d && (d = f, e = d.port)), c === b.pointsCount - 2 && b.computeSpot(!1, e).mc() && (c = e.ka(id, G.alloc()), a = b.getLinkPointFromPoint(d, e, c, a, !1, G.alloc()), b.M(b.pointsCount - 1, a.x, a.y), G.free(c), G.free(a));
		b.jf()
	};
	Ug.prototype.computeReshape = function(a) {
		var b = this.adornedLink,
			c = this.handle.segmentIndex;
		switch(this.Uu(this.handle)) {
			case Zg:
				return a;
			case Xg:
				return new G(b.i(c).x, a.y);
			case Yg:
				return new G(a.x, b.i(c).y);
			default:
			case Vg:
				return b.i(c)
		}
	};
	oa.Object.defineProperties(Ug.prototype, {
		handleArchetype: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		},
		midHandleArchetype: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		handle: {
			get: function() {
				return this.Za
			}
		},
		adornedLink: {
			get: function() {
				return this.Bt
			}
		},
		resegmentingDistance: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K =
					a
			}
		},
		originalPoint: {
			get: function() {
				return this.ml
			}
		},
		originalPoints: {
			get: function() {
				return this.Wr
			}
		}
	});
	Ug.prototype.setReshapingBehavior = Ug.prototype.om;
	Ug.prototype.getReshapingBehavior = Ug.prototype.Uu;
	var Vg = new D(Ug, "None", 0),
		Yg = new D(Ug, "Horizontal", 1),
		Xg = new D(Ug, "Vertical", 2),
		Zg = new D(Ug, "All", 3);
	Ug.className = "LinkReshapingTool";
	Ug.None = Vg;
	Ug.Horizontal = Yg;
	Ug.Vertical = Xg;
	Ug.All = Zg;
	Ta("linkReshapingTool", function() {
		return this.findTool("LinkReshaping")
	}, function(a) {
		Af(this, "LinkReshaping", a, this.mouseDownTools)
	});

	function ah() {
		kf.call(this);
		this.name = "Resizing";
		this.Qf = (new L(1, 1)).freeze();
		this.Pf = (new L(9999, 9999)).freeze();
		this.yg = (new L(NaN, NaN)).freeze();
		this.u = !1;
		this.fb = null;
		var a = new qg;
		a.alignmentFocus = id;
		a.figure = "Rectangle";
		a.desiredSize = mc;
		a.fill = "lightblue";
		a.stroke = "dodgerblue";
		a.strokeWidth = 1;
		a.cursor = "pointer";
		this.l = a;
		this.Za = null;
		this.ml = new G;
		this.Dw = new L;
		this.Bo = new G;
		this.Tt = new L(0, 0);
		this.St = new L(Infinity, Infinity);
		this.Rt = new L(1, 1);
		this.Bw = !0
	}
	na(ah, kf);
	ah.prototype.updateAdornments = function(a) {
		if(!(null === a || a instanceof S)) {
			if(a.isSelected && !this.diagram.isReadOnly) {
				var b = a.resizeObject,
					c = a.Tj(this.name);
				if(null !== c || null !== b && a.canResize() && a.actualBounds.s() && a.isVisible() && b.actualBounds.s() && b.rf()) {
					if(null === c || c.adornedObject !== b) c = this.makeAdornment(b);
					if(null !== c) {
						var d = b.Di();
						c.angle = d;
						var e = b.ka(c.locationSpot, G.alloc());
						c.location = e;
						G.free(e);
						e = c.placeholder;
						if(null !== e) {
							var f = b.naturalBounds,
								g = L.alloc();
							b = b.mf();
							g.h(f.width * b, f.height *
								b);
							e.desiredSize = g;
							L.free(g)
						}
						mg(a) && this.updateResizeHandles(c, d);
						a.jh(this.name, c);
						return
					}
				}
			}
			a.sf(this.name)
		}
	};
	ah.prototype.makeAdornment = function(a) {
		var b = a.part.resizeAdornmentTemplate;
		if(null === b) {
			b = new pf;
			b.type = Y.Spot;
			b.locationSpot = id;
			var c = new bh;
			c.isPanelMain = !0;
			b.add(c);
			b.add(this.makeHandle(a, ed));
			b.add(this.makeHandle(a, gd));
			b.add(this.makeHandle(a, od));
			b.add(this.makeHandle(a, kd));
			b.add(this.makeHandle(a, Sd));
			b.add(this.makeHandle(a, Ud));
			b.add(this.makeHandle(a, Vd));
			b.add(this.makeHandle(a, Td))
		} else if(ch(b), b = b.copy(), null === b) return null;
		b.adornedObject = a;
		return b
	};
	ah.prototype.makeHandle = function(a, b) {
		a = this.handleArchetype;
		if(null === a) return null;
		a = a.copy();
		a.alignment = b;
		return a
	};
	ah.prototype.updateResizeHandles = function(a, b) {
		if(null !== a)
			if(!a.alignment.jb() && ("pointer" === a.cursor || 0 < a.cursor.indexOf("resize"))) a: {
				var c = a.alignment;c.mc() && (c = id);
				if(0 >= c.x) b = 0 >= c.y ? b + 225 : 1 <= c.y ? b + 135 : b + 180;
				else if(1 <= c.x) 0 >= c.y ? b += 315 : 1 <= c.y && (b += 45);
				else if(0 >= c.y) b += 270;
				else if(1 <= c.y) b += 90;
				else break a;0 > b ? b += 360 : 360 <= b && (b -= 360);a.cursor = 22.5 > b ? "e-resize" : 67.5 > b ? "se-resize" : 112.5 > b ? "s-resize" : 157.5 > b ? "sw-resize" : 202.5 > b ? "w-resize" : 247.5 > b ? "nw-resize" : 292.5 > b ? "n-resize" : 337.5 > b ? "ne-resize" : "e-resize"
			}
		else if(a instanceof Y)
			for(a = a.elements; a.next();) this.updateResizeHandles(a.value, b)
	};
	ah.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		return !a.isReadOnly && a.allowResize && a.lastInput.left ? null !== this.findToolHandleAt(a.firstInput.documentPoint, this.name) : !1
	};
	ah.prototype.doActivate = function() {
		var a = this.diagram;
		this.Za = this.findToolHandleAt(a.firstInput.documentPoint, this.name);
		null !== this.Za && (this.fb = this.Za.part.adornedObject, this.ml.set(this.adornedObject.ka(this.handle.alignment.iv())), this.Bo.set(this.fb.part.location), this.Dw.set(this.fb.desiredSize), this.Rt = this.computeCellSize(), this.Tt = this.computeMinSize(), this.St = this.computeMaxSize(), a.isMouseCaptured = !0, this.Bw = a.animationManager.isEnabled, a.animationManager.isEnabled = !1, this.Aa(this.name),
			this.isActive = !0)
	};
	ah.prototype.doDeactivate = function() {
		var a = this.diagram;
		this.tg();
		this.fb = this.Za = null;
		this.isActive = a.isMouseCaptured = !1;
		a.animationManager.isEnabled = this.Bw
	};
	ah.prototype.doCancel = function() {
		null !== this.adornedObject && (this.adornedObject.desiredSize = this.originalDesiredSize, this.adornedObject.part.location = this.originalLocation);
		this.stopTool()
	};
	ah.prototype.doMouseMove = function() {
		var a = this.diagram;
		if(this.isActive) {
			var b = this.Tt,
				c = this.St,
				d = this.Rt,
				e = this.adornedObject.Ru(a.lastInput.documentPoint, G.alloc()),
				f = this.computeReshape();
			b = this.computeResize(e, this.handle.alignment, b, c, d, f);
			this.resize(b);
			a.jd();
			G.free(e)
		}
	};
	ah.prototype.doMouseUp = function() {
		var a = this.diagram;
		if(this.isActive) {
			var b = this.Tt,
				c = this.St,
				d = this.Rt,
				e = this.adornedObject.Ru(a.lastInput.documentPoint, G.alloc()),
				f = this.computeReshape();
			b = this.computeResize(e, this.handle.alignment, b, c, d, f);
			this.resize(b);
			G.free(e);
			a.Xa();
			this.transactionResult = this.name;
			a.aa("PartResized", this.adornedObject, this.originalDesiredSize)
		}
		this.stopTool()
	};
	ah.prototype.resize = function(a) {
		var b = this.diagram,
			c = this.adornedObject,
			d = c.part;
		c.desiredSize = a.size;
		d.kc();
		a = this.adornedObject.ka(this.handle.alignment.iv());
		d instanceof V ? (c = new E, c.add(d), b.moveParts(c, this.ml.copy().Ie(a), !0)) : d.location = d.location.copy().Ie(a).add(this.ml)
	};
	ah.prototype.computeResize = function(a, b, c, d, e, f) {
		b.mc() && (b = id);
		var g = this.adornedObject.naturalBounds,
			h = g.x,
			k = g.y,
			l = g.x + g.width,
			m = g.y + g.height,
			n = 1;
		if(!f) {
			n = g.width;
			var p = g.height;
			0 >= n && (n = 1);
			0 >= p && (p = 1);
			n = p / n
		}
		p = G.alloc();
		H.Np(a.x, a.y, h, k, e.width, e.height, p);
		a = g.copy();
		0 >= b.x ? 0 >= b.y ? (a.x = Math.max(p.x, l - d.width), a.x = Math.min(a.x, l - c.width), a.width = Math.max(l - a.x, c.width), a.y = Math.max(p.y, m - d.height), a.y = Math.min(a.y, m - c.height), a.height = Math.max(m - a.y, c.height), f || (1 <= a.height / a.width ? (a.height = Math.max(Math.min(n *
			a.width, d.height), c.height), a.width = a.height / n) : (a.width = Math.max(Math.min(a.height / n, d.width), c.width), a.height = n * a.width), a.x = l - a.width, a.y = m - a.height)) : 1 <= b.y ? (a.x = Math.max(p.x, l - d.width), a.x = Math.min(a.x, l - c.width), a.width = Math.max(l - a.x, c.width), a.height = Math.max(Math.min(p.y - k, d.height), c.height), f || (1 <= a.height / a.width ? (a.height = Math.max(Math.min(n * a.width, d.height), c.height), a.width = a.height / n) : (a.width = Math.max(Math.min(a.height / n, d.width), c.width), a.height = n * a.width), a.x = l - a.width)) : (a.x =
			Math.max(p.x, l - d.width), a.x = Math.min(a.x, l - c.width), a.width = l - a.x, f || (a.height = Math.max(Math.min(n * a.width, d.height), c.height), a.width = a.height / n, a.y = k + .5 * (m - k - a.height))) : 1 <= b.x ? 0 >= b.y ? (a.width = Math.max(Math.min(p.x - h, d.width), c.width), a.y = Math.max(p.y, m - d.height), a.y = Math.min(a.y, m - c.height), a.height = Math.max(m - a.y, c.height), f || (1 <= a.height / a.width ? (a.height = Math.max(Math.min(n * a.width, d.height), c.height), a.width = a.height / n) : (a.width = Math.max(Math.min(a.height / n, d.width), c.width), a.height = n * a.width),
			a.y = m - a.height)) : 1 <= b.y ? (a.width = Math.max(Math.min(p.x - h, d.width), c.width), a.height = Math.max(Math.min(p.y - k, d.height), c.height), f || (1 <= a.height / a.width ? (a.height = Math.max(Math.min(n * a.width, d.height), c.height), a.width = a.height / n) : (a.width = Math.max(Math.min(a.height / n, d.width), c.width), a.height = n * a.width))) : (a.width = Math.max(Math.min(p.x - h, d.width), c.width), f || (a.height = Math.max(Math.min(n * a.width, d.height), c.height), a.width = a.height / n, a.y = k + .5 * (m - k - a.height))) : 0 >= b.y ? (a.y = Math.max(p.y, m - d.height),
			a.y = Math.min(a.y, m - c.height), a.height = m - a.y, f || (a.width = Math.max(Math.min(a.height / n, d.width), c.width), a.height = n * a.width, a.x = h + .5 * (l - h - a.width))) : 1 <= b.y && (a.height = Math.max(Math.min(p.y - k, d.height), c.height), f || (a.width = Math.max(Math.min(a.height / n, d.width), c.width), a.height = n * a.width, a.x = h + .5 * (l - h - a.width)));
		G.free(p);
		return a
	};
	ah.prototype.computeReshape = function() {
		var a = dh;
		this.adornedObject instanceof qg && (a = eh(this.adornedObject));
		return !(a === fh || this.diagram.lastInput.shift)
	};
	ah.prototype.computeMinSize = function() {
		var a = this.adornedObject.minSize.copy(),
			b = this.minSize;
		!isNaN(b.width) && b.width > a.width && (a.width = b.width);
		!isNaN(b.height) && b.height > a.height && (a.height = b.height);
		return a
	};
	ah.prototype.computeMaxSize = function() {
		var a = this.adornedObject.maxSize.copy(),
			b = this.maxSize;
		!isNaN(b.width) && b.width < a.width && (a.width = b.width);
		!isNaN(b.height) && b.height < a.height && (a.height = b.height);
		return a
	};
	ah.prototype.computeCellSize = function() {
		var a = new L(NaN, NaN),
			b = this.adornedObject.part;
		null !== b && (b = b.resizeCellSize, !isNaN(b.width) && 0 < b.width && (a.width = b.width), !isNaN(b.height) && 0 < b.height && (a.height = b.height));
		b = this.cellSize;
		isNaN(a.width) && !isNaN(b.width) && 0 < b.width && (a.width = b.width);
		isNaN(a.height) && !isNaN(b.height) && 0 < b.height && (a.height = b.height);
		b = this.diagram;
		(isNaN(a.width) || isNaN(a.height)) && b && (b = b.grid, null !== b && b.visible && this.isGridSnapEnabled && (b = b.gridCellSize, isNaN(a.width) &&
			!isNaN(b.width) && 0 < b.width && (a.width = b.width), isNaN(a.height) && !isNaN(b.height) && 0 < b.height && (a.height = b.height)));
		if(isNaN(a.width) || 0 === a.width || Infinity === a.width) a.width = 1;
		if(isNaN(a.height) || 0 === a.height || Infinity === a.height) a.height = 1;
		return a
	};
	oa.Object.defineProperties(ah.prototype, {
		handleArchetype: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		},
		handle: {
			get: function() {
				return this.Za
			}
		},
		adornedObject: {
			get: function() {
				return this.fb
			},
			set: function(a) {
				this.fb = a
			}
		},
		minSize: {
			get: function() {
				return this.Qf
			},
			set: function(a) {
				if(!this.Qf.A(a)) {
					var b = a.width;
					isNaN(b) && (b = 0);
					a = a.height;
					isNaN(a) && (a = 0);
					this.Qf.h(b, a)
				}
			}
		},
		maxSize: {
			get: function() {
				return this.Pf
			},
			set: function(a) {
				if(!this.Pf.A(a)) {
					var b = a.width;
					isNaN(b) && (b = Infinity);
					a = a.height;
					isNaN(a) && (a = Infinity);
					this.Pf.h(b, a)
				}
			}
		},
		cellSize: {
			get: function() {
				return this.yg
			},
			set: function(a) {
				this.yg.A(a) || this.yg.assign(a)
			}
		},
		isGridSnapEnabled: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		originalDesiredSize: {
			get: function() {
				return this.Dw
			}
		},
		originalLocation: {
			get: function() {
				return this.Bo
			}
		}
	});
	ah.className = "ResizingTool";
	Ta("resizingTool", function() {
		return this.findTool("Resizing")
	}, function(a) {
		Af(this, "Resizing", a, this.mouseDownTools)
	});

	function gh() {
		kf.call(this);
		this.name = "Rotating";
		this.K = 45;
		this.u = 2;
		this.Bo = new G;
		this.fb = null;
		var a = new qg;
		a.figure = "Ellipse";
		a.desiredSize = nc;
		a.fill = "lightblue";
		a.stroke = "dodgerblue";
		a.strokeWidth = 1;
		a.cursor = "pointer";
		this.l = a;
		this.Za = null;
		this.Ao = 0;
		this.cs = new G;
		this.Vh = new G(50, 0)
	}
	na(gh, kf);
	gh.prototype.updateAdornments = function(a) {
		if(null !== a) {
			if(a.wh()) {
				var b = a.rotateObject;
				if(b === a || b === a.path || b.isPanelMain) return
			}
			if(a.isSelected && !this.diagram.isReadOnly) {
				var c = a.rotateObject;
				if(null !== c && a.canRotate() && a.actualBounds.s() && a.isVisible() && c.actualBounds.s() && c.rf()) {
					b = a.Tj(this.name);
					if(null === b || b.adornedObject !== c) b = this.makeAdornment(c);
					if(null !== b) {
						b.angle = c.Di();
						c = G.alloc();
						b.location = hh(this, a, c);
						G.free(c);
						a.jh(this.name, b);
						return
					}
				}
			}
			a.sf(this.name)
		}
	};
	gh.prototype.makeAdornment = function(a) {
		var b = a.part.rotateAdornmentTemplate;
		if(null === b) {
			b = new pf;
			b.type = Y.Position;
			b.locationSpot = id;
			var c = this.handleArchetype;
			null !== c && b.add(c.copy())
		} else if(ch(b), b = b.copy(), null === b) return null;
		b.adornedObject = a;
		return b
	};
	gh.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		return !a.isReadOnly && a.allowRotate && a.lastInput.left ? null !== this.findToolHandleAt(a.firstInput.documentPoint, this.name) : !1
	};
	gh.prototype.doActivate = function() {
		var a = this.diagram;
		this.Za = this.findToolHandleAt(a.firstInput.documentPoint, this.name);
		if(null !== this.Za) {
			this.fb = this.Za.part.adornedObject;
			var b = this.fb.part,
				c = b.locationObject;
			b.rotationSpot !== Hd && (this.cs = this.fb.ka(b.rotationSpot));
			this.cs = this.fb === b || this.fb === c ? c.ka(b.locationSpot) : this.fb.ka(id);
			this.Ao = this.fb.angle;
			hh(this, b, this.Bo);
			a.isMouseCaptured = !0;
			a.delaysLayout = !0;
			this.Aa(this.name);
			this.isActive = !0
		}
	};

	function hh(a, b, c) {
		var d = b.rotateObject,
			e = d;
		b.rotationSpot !== Hd ? b = b.rotationSpot : d === b || d === b.locationObject ? (e = b.locationObject, b = b.locationSpot) : b = id;
		var f = e.naturalBounds;
		for(b = G.allocAt(f.width * b.x + b.offsetX, f.height * b.y + b.offsetY); null !== e && e !== d;) e.transform.ta(b), e = e.panel;
		f = d.naturalBounds;
		e = f.width;
		var g = f.height;
		f = b.y;
		0 < a.Vh.y ? f = Math.max(b.y - g, 0) : 0 > a.Vh.y && (f = Math.min(b.y - g, 0));
		g = b.x;
		0 < a.Vh.x ? g = Math.max(b.x - e, 0) : 0 > a.Vh.x && (g = Math.min(b.x - e, 0));
		G.free(b);
		return d.ka(new N(1, 0, a.Vh.x + g, a.Vh.y +
			f), c)
	}
	gh.prototype.doDeactivate = function() {
		var a = this.diagram;
		this.tg();
		this.fb = this.Za = null;
		this.isActive = a.isMouseCaptured = !1
	};
	gh.prototype.doCancel = function() {
		this.diagram.delaysLayout = !1;
		this.rotate(this.Ao);
		this.stopTool()
	};
	gh.prototype.doMouseMove = function() {
		var a = this.diagram;
		this.isActive && (a = this.computeRotate(a.lastInput.documentPoint), this.rotate(a))
	};
	gh.prototype.doMouseUp = function() {
		var a = this.diagram;
		if(this.isActive) {
			a.delaysLayout = !1;
			var b = this.computeRotate(a.lastInput.documentPoint);
			this.rotate(b);
			a.Xa();
			this.transactionResult = this.name;
			a.aa("PartRotated", this.fb, this.Ao)
		}
		this.stopTool()
	};
	gh.prototype.rotate = function(a) {
		null !== this.fb && (this.fb.angle = a)
	};
	gh.prototype.computeRotate = function(a) {
		a = this.cs.Na(a);
		var b = this.fb.panel;
		null !== b && (a -= b.Di(), 360 <= a ? a -= 360 : 0 > a && (a += 360));
		b = Math.min(Math.abs(this.snapAngleMultiple), 180);
		var c = Math.min(Math.abs(this.snapAngleEpsilon), b / 2);
		a = a - this.cs.Na(this.Bo) + this.Ao;
		!this.diagram.lastInput.shift && 0 < b && 0 < c && (a % b < c ? a = Math.floor(a / b) * b : a % b > b - c && (a = (Math.floor(a / b) + 1) * b));
		360 <= a ? a -= 360 : 0 > a && (a += 360);
		return a
	};
	oa.Object.defineProperties(gh.prototype, {
		handleArchetype: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		},
		handle: {
			get: function() {
				return this.Za
			}
		},
		adornedObject: {
			get: function() {
				return this.fb
			},
			set: function(a) {
				this.fb = a
			}
		},
		snapAngleMultiple: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K = a
			}
		},
		snapAngleEpsilon: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		originalAngle: {
			get: function() {
				return this.Ao
			}
		},
		handleOffset: {
			get: function() {
				return this.Vh
			},
			set: function(a) {
				this.Vh = a
			}
		}
	});
	gh.className = "RotatingTool";
	Ta("rotatingTool", function() {
		return this.findTool("Rotating")
	}, function(a) {
		Af(this, "Rotating", a, this.mouseDownTools)
	});

	function ih() {
		kf.call(this);
		this.name = "ClickSelecting"
	}
	na(ih, kf);
	ih.prototype.canStart = function() {
		return !this.isEnabled || this.isBeyondDragSize() ? !1 : !0
	};
	ih.prototype.doMouseUp = function() {
		this.isActive && (this.standardMouseSelect(), !this.standardMouseClick() && this.diagram.lastInput.isTouchEvent && this.diagram.toolManager.doToolTip());
		this.stopTool()
	};
	ih.className = "ClickSelectingTool";

	function jh() {
		kf.call(this);
		this.name = "Action";
		this.qk = null
	}
	na(jh, kf);
	jh.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram,
			b = a.lastInput,
			c = a.Sb(b.documentPoint, function(a) {
				for(; null !== a.panel && !a.isActionable;) a = a.panel;
				return a
			});
		if(null !== c) {
			if(!c.isActionable) return !1;
			this.qk = c;
			a.Dk = a.Sb(b.documentPoint, null, null);
			return !0
		}
		return !1
	};
	jh.prototype.doMouseDown = function() {
		if(this.isActive) {
			var a = this.diagram.lastInput,
				b = this.qk;
			null !== b && (a.targetObject = b, null !== b.actionDown && b.actionDown(a, b))
		} else this.canStart() && this.doActivate()
	};
	jh.prototype.doMouseMove = function() {
		if(this.isActive) {
			var a = this.diagram.lastInput,
				b = this.qk;
			null !== b && (a.targetObject = b, null !== b.actionMove && b.actionMove(a, b))
		}
	};
	jh.prototype.doMouseUp = function() {
		if(this.isActive) {
			var a = this.diagram.lastInput,
				b = this.qk;
			if(null === b) return;
			a.targetObject = b;
			null !== b.actionUp && b.actionUp(a, b);
			this.standardMouseClick(function(a) {
				for(; null !== a.panel && (!a.isActionable || a !== b);) a = a.panel;
				return a
			}, function(a) {
				return a === b
			})
		}
		this.stopTool()
	};
	jh.prototype.doCancel = function() {
		var a = this.diagram.lastInput,
			b = this.qk;
		null !== b && (a.targetObject = b, null !== b.actionCancel && b.actionCancel(a, b), this.stopTool())
	};
	jh.prototype.doStop = function() {
		this.qk = null
	};
	jh.className = "ActionTool";

	function kh() {
		kf.call(this);
		this.name = "ClickCreating";
		this.Si = null;
		this.u = !0;
		this.l = !1;
		this.vw = new G(0, 0)
	}
	na(kh, kf);
	kh.prototype.canStart = function() {
		if(!this.isEnabled || null === this.archetypeNodeData) return !1;
		var a = this.diagram;
		if(a.isReadOnly || a.isModelReadOnly || !a.allowInsert || !a.lastInput.left || this.isBeyondDragSize()) return !1;
		if(this.isDoubleClick) {
			if(1 === a.lastInput.clickCount && (this.vw = a.lastInput.viewPoint.copy()), 2 !== a.lastInput.clickCount || this.isBeyondDragSize(this.vw)) return !1
		} else if(1 !== a.lastInput.clickCount) return !1;
		return a.currentTool !== this && null !== a.Vl(a.lastInput.documentPoint, !0) ? !1 : !0
	};
	kh.prototype.doMouseUp = function() {
		var a = this.diagram;
		this.isActive && this.insertPart(a.lastInput.documentPoint);
		this.stopTool()
	};
	kh.prototype.insertPart = function(a) {
		var b = this.diagram,
			c = this.archetypeNodeData;
		if(null === c) return null;
		this.Aa(this.name);
		var d = null;
		c instanceof U ? c.ac() && (ch(c), d = c.copy(), null !== d && b.add(d)) : null !== c && (c = b.model.copyNodeData(c), Ea(c) && (b.model.lh(c), d = b.wc(c)));
		null !== d && (c = G.allocAt(a.x, a.y), this.isGridSnapEnabled && lh(this.diagram, d, a, c), d.location = c, b.allowSelect && b.select(d), G.free(c));
		b.Xa();
		this.transactionResult = this.name;
		b.aa("PartCreated", d);
		this.tg();
		return d
	};
	oa.Object.defineProperties(kh.prototype, {
		archetypeNodeData: {
			get: function() {
				return this.Si
			},
			set: function(a) {
				this.Si = a
			}
		},
		isDoubleClick: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		isGridSnapEnabled: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		}
	});
	kh.className = "ClickCreatingTool";

	function mh() {
		kf.call(this);
		this.name = "DragSelecting";
		this.Kk = 175;
		this.u = !1;
		var a = new U;
		a.layerName = "Tool";
		a.selectable = !1;
		var b = new qg;
		b.name = "SHAPE";
		b.figure = "Rectangle";
		b.fill = null;
		b.stroke = "magenta";
		a.add(b);
		this.l = a
	}
	na(mh, kf);
	mh.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		if(!a.allowSelect) return !1;
		var b = a.lastInput;
		return !b.left || a.currentTool !== this && (!this.isBeyondDragSize() || b.timestamp - a.firstInput.timestamp < this.delay || null !== a.Vl(b.documentPoint, !0)) ? !1 : !0
	};
	mh.prototype.doActivate = function() {
		var a = this.diagram;
		this.isActive = !0;
		a.isMouseCaptured = !0;
		a.skipsUndoManager = !0;
		a.add(this.box);
		this.doMouseMove()
	};
	mh.prototype.doDeactivate = function() {
		var a = this.diagram;
		a.uf();
		a.remove(this.box);
		a.skipsUndoManager = !1;
		this.isActive = a.isMouseCaptured = !1
	};
	mh.prototype.doMouseMove = function() {
		var a = this.diagram;
		if(this.isActive && null !== this.box) {
			var b = this.computeBoxBounds(),
				c = this.box.Ya("SHAPE");
			null === c && (c = this.box.Db());
			var d = L.alloc().h(b.width, b.height);
			b = G.alloc().h(b.x, b.y);
			c.desiredSize = d;
			this.box.position = b;
			L.free(d);
			G.free(b);
			(a.allowHorizontalScroll || a.allowVerticalScroll) && a.Ks(a.lastInput.viewPoint)
		}
	};
	mh.prototype.doMouseUp = function() {
		if(this.isActive) {
			var a = this.diagram;
			a.remove(this.box);
			try {
				a.currentCursor = "wait", this.selectInRect(this.computeBoxBounds())
			} finally {
				a.currentCursor = ""
			}
		}
		this.stopTool()
	};
	mh.prototype.computeBoxBounds = function() {
		var a = this.diagram;
		return new M(a.firstInput.documentPoint, a.lastInput.documentPoint)
	};
	mh.prototype.selectInRect = function(a) {
		var b = this.diagram,
			c = b.lastInput;
		b.aa("ChangingSelection", b.selection);
		a = b.jx(a, this.isPartialInclusion);
		if(fb ? c.meta : c.control)
			if(c.shift)
				for(a = a.iterator; a.next();) c = a.value, c.isSelected && (c.isSelected = !1);
			else
				for(a = a.iterator; a.next();) c = a.value, c.isSelected = !c.isSelected;
		else if(c.shift)
			for(a = a.iterator; a.next();) c = a.value, c.isSelected || (c.isSelected = !0);
		else {
			c = new E;
			for(var d = b.selection.iterator; d.next();) {
				var e = d.value;
				a.contains(e) || c.add(e)
			}
			for(c = c.iterator; c.next();) c.value.isSelected = !1;
			for(a = a.iterator; a.next();) c = a.value, c.isSelected || (c.isSelected = !0)
		}
		b.aa("ChangedSelection", b.selection)
	};
	oa.Object.defineProperties(mh.prototype, {
		delay: {
			get: function() {
				return this.Kk
			},
			set: function(a) {
				this.Kk = a
			}
		},
		isPartialInclusion: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		box: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		}
	});
	mh.className = "DragSelectingTool";

	function nh() {
		kf.call(this);
		this.name = "Panning";
		this.fu = new G;
		this.by = new G;
		this.xg = !1;
		var a = this;
		this.Gw = function() {
			w.document.removeEventListener("scroll", a.Gw, !1);
			a.stopTool()
		}
	}
	na(nh, kf);
	nh.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		return !a.allowHorizontalScroll && !a.allowVerticalScroll || !a.lastInput.left || a.currentTool !== this && !this.isBeyondDragSize() ? !1 : !0
	};
	nh.prototype.doActivate = function() {
		var a = this.diagram;
		this.xg ? (a.lastInput.bubbles = !0, w.document.addEventListener("scroll", this.Gw, !1)) : (a.currentCursor = "move", a.isMouseCaptured = !0, this.fu.assign(a.position));
		this.isActive = !0
	};
	nh.prototype.doDeactivate = function() {
		var a = this.diagram;
		a.currentCursor = "";
		this.isActive = a.isMouseCaptured = !1
	};
	nh.prototype.doCancel = function() {
		var a = this.diagram;
		a.position = this.fu;
		a.isMouseCaptured = !1;
		this.stopTool()
	};
	nh.prototype.doMouseMove = function() {
		this.move()
	};
	nh.prototype.doMouseUp = function() {
		this.move();
		this.stopTool()
	};
	nh.prototype.move = function() {
		var a = this.diagram;
		if(this.isActive && a)
			if(this.xg) a.lastInput.bubbles = !0;
			else {
				var b = a.position,
					c = a.firstInput.documentPoint,
					d = a.lastInput.documentPoint,
					e = b.x + c.x - d.x;
				c = b.y + c.y - d.y;
				a.allowHorizontalScroll || (e = b.x);
				a.allowVerticalScroll || (c = b.y);
				a.position = this.by.h(e, c)
			}
	};
	oa.Object.defineProperties(nh.prototype, {
		bubbles: {
			get: function() {
				return this.xg
			},
			set: function(a) {
				this.xg = a
			}
		},
		originalPosition: {
			get: function() {
				return this.fu
			}
		}
	});
	nh.className = "PanningTool";
	Ta("clickCreatingTool", function() {
		return this.findTool("ClickCreating")
	}, function(a) {
		Af(this, "ClickCreating", a, this.mouseUpTools)
	});
	Ta("clickSelectingTool", function() {
		return this.findTool("ClickSelecting")
	}, function(a) {
		Af(this, "ClickSelecting", a, this.mouseUpTools)
	});
	Ta("panningTool", function() {
		return this.findTool("Panning")
	}, function(a) {
		Af(this, "Panning", a, this.mouseMoveTools)
	});
	Ta("dragSelectingTool", function() {
		return this.findTool("DragSelecting")
	}, function(a) {
		Af(this, "DragSelecting", a, this.mouseMoveTools)
	});
	Ta("actionTool", function() {
		return this.findTool("Action")
	}, function(a) {
		Af(this, "Action", a, this.mouseDownTools)
	});

	function uf() {
		this.da = this.K = this.l = this.u = null
	}
	oa.Object.defineProperties(uf.prototype, {
		mainElement: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K = a
			}
		},
		show: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u !== a && (this.u = a)
			}
		},
		hide: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l !== a && (this.l = a)
			}
		},
		valueFunction: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da = a
			}
		}
	});
	uf.className = "HTMLInfo";

	function oh(a, b, c) {
		this.text = a;
		this.Xw = b;
		this.visible = c
	}
	oh.className = "ContextMenuButtonInfo";

	function ph() {
		kf.call(this);
		this.name = "ContextMenu";
		this.u = this.It = this.l = null;
		this.Aw = new G;
		this.Jt = this.Xi = null;
		var a = this;
		this.su = function() {
			a.stopTool()
		}
	}
	na(ph, kf);

	function qh(a) {
		var b = new uf;
		b.show = function(a, b, c) {
			c.showDefaultContextMenu()
		};
		b.hide = function(a, b) {
			b.hideDefaultContextMenu()
		};
		a.Xi = b;
		a.su = function() {
			a.stopTool()
		};
		if(Ya && !1 === jb) {
			b = wa("div");
			var c = wa("div");
			b.style.cssText = "top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";
			c.style.cssText = "z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";
			var d = wa("style");
			w.document.getElementsByTagName("head")[0].appendChild(d);
			d.sheet.insertRule(".goCXul { list-style: none; }", 0);
			d.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }", 0);
			d.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }", 0);
			b.addEventListener("contextmenu", rh, !1);
			b.addEventListener("selectstart", rh, !1);
			c.addEventListener("contextmenu",
				rh, !1);
			w.document.body && (w.document.body.appendChild(b), w.document.body.appendChild(c));
			pb = b;
			lb = c;
			jb = !0
		}
	}

	function rh(a) {
		a.preventDefault();
		return !1
	}
	ph.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		return this.isBeyondDragSize() || !a.lastInput.right ? !1 : null !== this.Xi && a.lastInput.isTouchEvent || null !== this.findObjectWithContextMenu() ? !0 : !1
	};
	ph.prototype.doStart = function() {
		this.Aw.set(this.diagram.firstInput.documentPoint)
	};
	ph.prototype.doStop = function() {
		this.hideContextMenu();
		this.currentObject = null
	};
	ph.prototype.findObjectWithContextMenu = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram,
			c = b.lastInput,
			d = null;
		a instanceof Q || (a instanceof P ? d = a : d = b.Sb(c.documentPoint, null, function(a) {
			return !a.layer.isTemporary
		}));
		if(null !== d) {
			for(a = d; null !== a;) {
				if(null !== a.contextMenu) return a;
				a = a.panel
			}
			if(null !== this.Xi && b.lastInput.isTouchEvent) return d.part
		} else if(null !== b.contextMenu) return b;
		return null
	};
	ph.prototype.doActivate = function() {};
	ph.prototype.doMouseDown = function() {
		kf.prototype.doMouseDown.call(this);
		if(this.isActive && this.currentContextMenu instanceof pf) {
			var a = this.diagram.toolManager.findTool("Action");
			null !== a && a.canStart() && (a.doActivate(), a.doMouseDown(), a.doDeactivate())
		}
		this.diagram.toolManager.mouseDownTools.contains(this) && sh(this)
	};
	ph.prototype.doMouseUp = function() {
		if(this.isActive && this.currentContextMenu instanceof pf) {
			var a = this.diagram.toolManager.findTool("Action");
			null !== a && a.canStart() && (a.doActivate(), a.doCancel(), a.doDeactivate())
		}
		sh(this)
	};

	function sh(a) {
		var b = a.diagram;
		if(a.isActive) {
			var c = a.currentContextMenu;
			if(null !== c) {
				if(!(c instanceof uf)) {
					var d = b.Sb(b.lastInput.documentPoint, null, null);
					null !== d && d.vh(c) && a.standardMouseClick(null, null)
				}
				a.stopTool();
				a.canStart() && (b.currentTool = a, a.doMouseUp())
			}
		} else a.canStart() && (th(a, !0), a.isActive || a.stopTool())
	}

	function th(a, b, c) {
		void 0 === c && (c = null);
		b && a.standardMouseSelect();
		if(!a.standardMouseClick())
			if(a.isActive = !0, b = a.Xi, null === c && (c = a.findObjectWithContextMenu()), null !== c) {
				var d = c.contextMenu;
				null !== d ? (a.currentObject = c instanceof P ? c : null, a.showContextMenu(d, a.currentObject)) : null !== b && a.showContextMenu(b, a.currentObject)
			} else null !== b && a.showContextMenu(b, null)
	}
	ph.prototype.doMouseMove = function() {
		var a = this.diagram.toolManager.findTool("Action");
		null !== a && a.doMouseMove();
		this.isActive && this.diagram.toolManager.doMouseMove()
	};
	ph.prototype.showContextMenu = function(a, b) {
		var c = this.diagram;
		a !== this.currentContextMenu && this.hideContextMenu();
		if(a instanceof pf) {
			a.layerName = "Tool";
			a.selectable = !1;
			a.scale = 1 / c.scale;
			a.category = this.name;
			null !== a.placeholder && (a.placeholder.scale = c.scale);
			var d = a.diagram;
			null !== d && d !== c && d.remove(a);
			c.add(a);
			null !== b ? (c = null, d = b.qh(), null !== d && (c = d.data), a.adornedObject = b, a.data = c) : a.data = c.model;
			a.kc();
			this.positionContextMenu(a, b)
		} else a instanceof uf && a.show(b, c, this);
		this.currentContextMenu =
			a
	};
	ph.prototype.positionContextMenu = function(a) {
		if(null === a.placeholder) {
			var b = this.diagram,
				c = b.lastInput.documentPoint.copy(),
				d = a.measuredBounds,
				e = b.viewportBounds;
			b.lastInput.isTouchEvent && (c.x -= d.width);
			c.x + d.width > e.right && (c.x -= d.width + 5 / b.scale);
			c.x < e.x && (c.x = e.x);
			c.y + d.height > e.bottom && (c.y -= d.height + 5 / b.scale);
			c.y < e.y && (c.y = e.y);
			a.position = c
		}
	};
	ph.prototype.hideContextMenu = function() {
		var a = this.diagram,
			b = this.currentContextMenu;
		null !== b && (b instanceof pf ? (a.remove(b), null !== this.It && this.It.sf(b.category), b.data = null, b.adornedObject = null) : b instanceof uf && (null !== b.hide ? b.hide(a, this) : null !== b.mainElement && (b.mainElement.style.display = "none")), this.currentContextMenu = null, this.standardMouseOver())
	};

	function uh() {
		var a = new E;
		a.add(new oh("Copy", function(a) {
			a.commandHandler.copySelection()
		}, function(a) {
			return a.commandHandler.canCopySelection()
		}));
		a.add(new oh("Cut", function(a) {
			a.commandHandler.cutSelection()
		}, function(a) {
			return a.commandHandler.canCutSelection()
		}));
		a.add(new oh("Delete", function(a) {
			a.commandHandler.deleteSelection()
		}, function(a) {
			return a.commandHandler.canDeleteSelection()
		}));
		a.add(new oh("Paste", function(a) {
			a.commandHandler.pasteSelection(a.lastInput.documentPoint)
		}, function(a) {
			return a.commandHandler.canPasteSelection()
		}));
		a.add(new oh("Select All", function(a) {
			a.commandHandler.selectAll()
		}, function(a) {
			return a.commandHandler.canSelectAll()
		}));
		a.add(new oh("Undo", function(a) {
			a.commandHandler.undo()
		}, function(a) {
			return a.commandHandler.canUndo()
		}));
		a.add(new oh("Redo", function(a) {
			a.commandHandler.redo()
		}, function(a) {
			return a.commandHandler.canRedo()
		}));
		a.add(new oh("Scroll To Part", function(a) {
			a.commandHandler.scrollToPart()
		}, function(a) {
			return a.commandHandler.canScrollToPart()
		}));
		a.add(new oh("Zoom To Fit", function(a) {
				a.commandHandler.zoomToFit()
			},
			function(a) {
				return a.commandHandler.canZoomToFit()
			}));
		a.add(new oh("Reset Zoom", function(a) {
			a.commandHandler.resetZoom()
		}, function(a) {
			return a.commandHandler.canResetZoom()
		}));
		a.add(new oh("Group Selection", function(a) {
			a.commandHandler.groupSelection()
		}, function(a) {
			return a.commandHandler.canGroupSelection()
		}));
		a.add(new oh("Ungroup Selection", function(a) {
			a.commandHandler.ungroupSelection()
		}, function(a) {
			return a.commandHandler.canUngroupSelection()
		}));
		a.add(new oh("Edit Text", function(a) {
				a.commandHandler.editTextBlock()
			},
			function(a) {
				return a.commandHandler.canEditTextBlock()
			}));
		return a
	}
	ph.prototype.showDefaultContextMenu = function() {
		var a = this.diagram;
		null === this.Jt && (this.Jt = uh());
		Ya && !1 === jb && qh(this);
		pb.innerHTML = "";
		lb.addEventListener("click", this.su, !1);
		var b = this,
			c = wa("ul");
		c.className = "goCXul";
		pb.appendChild(c);
		c.innerHTML = "";
		for(var d = this.Jt.iterator; d.next();) {
			var e = d.value,
				f = e.visible;
			if("function" === typeof e.Xw && ("function" !== typeof f || f(a))) {
				f = wa("li");
				f.className = "goCXli";
				var g = wa("a");
				g.className = "goCXa";
				g.href = "#";
				g.Ux = e.Xw;
				g.addEventListener("click", function(c) {
					this.Ux(a);
					b.stopTool();
					c.preventDefault();
					return !1
				}, !1);
				g.textContent = e.text;
				f.appendChild(g);
				c.appendChild(f)
			}
		}
		pb.style.display = "block";
		lb.style.display = "block"
	};
	ph.prototype.hideDefaultContextMenu = function() {
		null !== this.currentContextMenu && this.currentContextMenu === this.Xi && (pb.style.display = "none", lb.style.display = "none", lb.removeEventListener("click", this.su, !1), this.currentContextMenu = null)
	};
	oa.Object.defineProperties(ph.prototype, {
		currentContextMenu: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a;
				this.It = a instanceof pf ? a.adornedPart : null
			}
		},
		defaultTouchContextMenu: {
			get: function() {
				return this.Xi
			},
			set: function(a) {
				this.Xi = a
			}
		},
		currentObject: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		mouseDownPoint: {
			get: function() {
				return this.Aw
			}
		}
	});
	ph.className = "ContextMenuTool";
	Ta("contextMenuTool", function() {
		return this.findTool("ContextMenu")
	}, function(a) {
		Af(this, "ContextMenu", a, this.mouseUpTools)
	});

	function vh() {
		kf.call(this);
		this.name = "TextEditing";
		this.dh = new wh;
		this.Wa = null;
		this.Va = xh;
		this.si = null;
		this.ma = yh;
		this.K = 1;
		this.da = !0;
		this.u = null;
		this.l = new uf;
		this.Kt = null;
		zh(this, this.l)
	}
	na(vh, kf);

	function zh(a, b) {
		if(Ya) {
			var c = wa("textarea");
			a.Kt = c;
			c.addEventListener("input", function() {
				if(null !== a.textBlock) {
					var b = a.zx(this.value);
					this.style.width = 20 + b.measuredBounds.width * this.Hz + "px";
					this.rows = b.lineCount
				}
			}, !1);
			c.addEventListener("keydown", function(b) {
				if(null !== a.textBlock) {
					var c = b.which;
					13 === c ? (!1 === a.textBlock.isMultiline && b.preventDefault(), a.acceptText(Ah)) : 9 === c ? (a.acceptText(Bh), b.preventDefault()) : 27 === c && (a.doCancel(), null !== a.diagram && a.diagram.doFocus())
				}
			}, !1);
			c.addEventListener("focus",
				function() {
					if(null !== a.currentTextEditor && a.state !== yh) {
						var b = a.Kt;
						a.ma === Ch && (a.ma = Dh);
						"function" === typeof b.select && a.selectsTextOnActivate && (b.select(), b.setSelectionRange(0, 9999))
					}
				}, !1);
			c.addEventListener("blur", function() {
				if(null !== a.currentTextEditor && a.state !== yh) {
					var b = a.Kt;
					"function" === typeof b.focus && b.focus();
					"function" === typeof b.select && a.selectsTextOnActivate && (b.select(), b.setSelectionRange(0, 9999))
				}
			}, !1);
			b.valueFunction = function() {
				return c.value
			};
			b.mainElement = c;
			b.show = function(a,
				b, f) {
				if(a instanceof wh && f instanceof vh)
					if(f.state === Eh) c.style.border = "3px solid red", c.focus();
					else {
						var d = a.ka(id),
							e = b.position,
							k = b.scale,
							l = a.mf() * k;
						l < f.minimumEditorScale && (l = f.minimumEditorScale);
						var m = a.naturalBounds.width * l + 6,
							n = a.naturalBounds.height * l + 2,
							p = (d.x - e.x) * k;
						d = (d.y - e.y) * k;
						c.value = a.text;
						b.div.style.font = a.font;
						c.style.position = "absolute";
						c.style.zIndex = "100";
						c.style.font = "inherit";
						c.style.fontSize = 100 * l + "%";
						c.style.lineHeight = "normal";
						c.style.width = m + "px";
						c.style.left = (p - m / 2 | 0) - 1 +
							"px";
						c.style.top = (d - n / 2 | 0) - 1 + "px";
						c.style.textAlign = a.textAlign;
						c.style.margin = "0";
						c.style.padding = "1px";
						c.style.border = "0";
						c.style.outline = "none";
						c.style.whiteSpace = "pre-wrap";
						c.style.overflow = "hidden";
						c.rows = a.metrics.arrSize.length;
						c.Hz = l;
						b.div.appendChild(c);
						c.focus();
						f.selectsTextOnActivate && (c.select(), c.setSelectionRange(0, 9999))
					}
			};
			b.hide = function(a) {
				a.div.removeChild(c)
			}
		}
	}
	vh.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		if(null === a || a.isReadOnly || !a.lastInput.left || this.isBeyondDragSize()) return !1;
		var b = a.Sb(a.lastInput.documentPoint);
		if(!(null !== b && b instanceof wh && b.editable && b.part.canEdit())) return !1;
		b = b.part;
		return null === b || this.starting === xh && !b.isSelected || this.starting === Fh && 2 > a.lastInput.clickCount ? !1 : !0
	};
	vh.prototype.doStart = function() {
		this.isActive || null === this.textBlock || this.doActivate()
	};
	vh.prototype.doActivate = function() {
		if(!this.isActive) {
			var a = this.diagram;
			if(null !== a) {
				var b = this.textBlock;
				null === b && (b = a.Sb(a.lastInput.documentPoint));
				if(null !== b && b instanceof wh && (this.textBlock = b, null !== b.part)) {
					this.isActive = !0;
					this.ma = Ch;
					var c = this.defaultTextEditor;
					null !== b.textEditor && (c = b.textEditor);
					this.dh = this.textBlock.copy();
					var d = new M(this.textBlock.ka(ed), this.textBlock.ka(od));
					a.xv(d);
					c.show(b, a, this);
					this.currentTextEditor = c
				}
			}
		}
	};
	vh.prototype.doCancel = function() {
		this.stopTool()
	};
	vh.prototype.doMouseUp = function() {
		!this.isActive && this.canStart() && this.doActivate()
	};
	vh.prototype.doMouseDown = function() {
		this.isActive && this.acceptText(Hh)
	};
	vh.prototype.acceptText = function(a) {
		switch(a) {
			case Hh:
				if(this.ma === Ih) this.currentTextEditor instanceof HTMLElement && this.currentTextEditor.focus();
				else if(this.ma === Ch || this.ma === Eh || this.ma === Dh) this.ma = Jh, Kh(this);
				break;
			case Lh:
			case Ah:
			case Bh:
				if(Ah !== a || !0 !== this.textBlock.isMultiline)
					if(this.ma === Ch || this.ma === Eh || this.ma === Dh) this.ma = Jh, Kh(this)
		}
	};

	function Kh(a) {
		var b = a.textBlock,
			c = a.diagram,
			d = a.currentTextEditor;
		if(null !== b && null !== d) {
			var e = b.text,
				f = "";
			null !== d.valueFunction && (f = d.valueFunction());
			a.isValidText(b, e, f) ? (a.Aa(a.name), a.ma = Ih, a.transactionResult = a.name, b.text = f, null !== b.textEdited && b.textEdited(b, e, f), null !== c && c.aa("TextEdited", b, e), a.tg(), a.stopTool(), null !== c && c.doFocus()) : (a.ma = Eh, null !== b.errorFunction && b.errorFunction(a, e, f), d.show(b, c, a))
		}
	}
	vh.prototype.doDeactivate = function() {
		var a = this.diagram;
		null !== a && (this.ma = yh, this.textBlock = null, null !== this.currentTextEditor && this.currentTextEditor.hide(a, this), this.isActive = !1)
	};
	vh.prototype.isValidText = function(a, b, c) {
		var d = this.textValidation;
		if(null !== d && !d(a, b, c)) return !1;
		d = a.textValidation;
		return null === d || d(a, b, c) ? !0 : !1
	};
	vh.prototype.zx = function(a) {
		var b = this.dh;
		b.text = a;
		b.measure(this.textBlock.bl, Infinity);
		return b
	};
	oa.Object.defineProperties(vh.prototype, {
		textBlock: {
			get: function() {
				return this.Wa
			},
			set: function(a) {
				this.Wa = a
			}
		},
		currentTextEditor: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		defaultTextEditor: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		},
		starting: {
			get: function() {
				return this.Va
			},
			set: function(a) {
				this.Va = a
			}
		},
		textValidation: {
			get: function() {
				return this.si
			},
			set: function(a) {
				this.si = a
			}
		},
		minimumEditorScale: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K = a
			}
		},
		selectsTextOnActivate: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da = a
			}
		},
		state: {
			get: function() {
				return this.ma
			},
			set: function(a) {
				this.ma !== a && (this.ma = a)
			}
		}
	});
	vh.prototype.measureTemporaryTextBlock = vh.prototype.zx;
	var Lh = new D(vh, "LostFocus", 0),
		Hh = new D(vh, "MouseDown", 1),
		Bh = new D(vh, "Tab", 2),
		Ah = new D(vh, "Enter", 3),
		Mh = new D(vh, "SingleClick", 0),
		xh = new D(vh, "SingleClickSelected", 1),
		Fh = new D(vh, "DoubleClick", 2),
		yh = new D(vh, "StateNone", 0),
		Ch = new D(vh, "StateActive", 1),
		Dh = new D(vh, "StateEditing", 2),
		Jh = new D(vh, "StateValidating", 3),
		Eh = new D(vh, "StateInvalid", 4),
		Ih = new D(vh, "StateValidated", 5);
	vh.className = "TextEditingTool";
	vh.LostFocus = Lh;
	vh.MouseDown = Hh;
	vh.Tab = Bh;
	vh.Enter = Ah;
	vh.SingleClick = Mh;
	vh.SingleClickSelected = xh;
	vh.DoubleClick = Fh;
	vh.StateNone = yh;
	vh.StateActive = Ch;
	vh.StateEditing = Dh;
	vh.StateValidating = Jh;
	vh.StateInvalid = Eh;
	vh.StateValidated = Ih;
	Ta("textEditingTool", function() {
		return this.findTool("TextEditing")
	}, function(a) {
		Af(this, "TextEditing", a, this.mouseUpTools)
	});

	function Nh() {
		this.nw = Oh;
		this.F = lf;
		this.hn = this.jn = null;
		this.Ri = this.kn = this.ln = 0;
		this.uk = this.ab = this.zr = this.ej = !1;
		this.$h = this.Pc = !0;
		this.Rq = this.Qq = this.mw = null;
		this.lw = 0;
		this.Sq = new Nb;
		this.Dq = new F;
		this.Qt = 600;
		this.Wx = new G(0, 0);
		this.jw = this.iw = this.Jw = !1;
		this.rj = new Nb
	}
	Nh.prototype.rb = function(a) {
		this.F = a
	};

	function Oh(a, b, c, d) {
		a /= d / 2;
		return 1 > a ? c / 2 * a * a + b : -c / 2 * (--a * (a - 2) - 1) + b
	}
	Nh.prototype.canStart = function() {
		return !0
	};
	Nh.prototype.Ji = function(a) {
		this.Pc && (this.$h || this.F.Yj) && (this.Dq.add(a), this.canStart(a) && (this.ej && this.Yd(), this.ab = !0))
	};

	function Ph(a) {
		if(a.Pc && (a.Dq.clear(), a.ab))
			if(!a.uk) a.ab = !1;
			else if(0 === a.Ri) {
			var b = +new Date;
			a.Ri = b;
			w.requestAnimationFrame(function() {
				if(!1 !== a.ab && !a.ej && a.Ri === b) {
					var c = a.F;
					c.Ce("temporaryPixelRatio") && (c.ue = 1);
					Qh(c);
					a.ab = !1;
					c.aa("AnimationStarting");
					Rh(a, b)
				}
			})
		}
	}

	function Sh(a, b, c, d, e, f) {
		if(!(!a.ab || "position" === c && d.A(e) || b instanceof U && !b.isAnimated)) {
			var g = a.rj;
			if(g.contains(b)) {
				g = g.J(b);
				var h = g.start,
					k = g.end;
				void 0 === h[c] && (h[c] = Th(d));
				g.Is && void 0 !== k[c] ? g.Kp[c] = Th(e) : (f || (g.Kp[c] = Th(e)), k[c] = Th(e));
				f && 0 === c.indexOf("position:") && b instanceof U && (g.Kp.location = Th(b.location))
			} else h = new vb, k = new vb, h[c] = Th(d), k[c] = Th(e), d = h.position, d instanceof G && !d.s() && a.Dq.contains("Expand SubGraph") && d.assign(k.position), d = new Uh(h, k, f), f && 0 === c.indexOf("position:") &&
				b instanceof U && (d.Kp.location = Th(b.location)), g.add(b, d);
			a.uk = !0
		}
	}

	function Th(a) {
		return a instanceof G ? a.copy() : a instanceof L ? a.copy() : a
	}

	function Rh(a, b) {
		var c;

		function d() {
			if(!1 !== f.ej && f.Ri === b) {
				var a = +new Date,
					c = a > r ? l : a - q;
				Vh(f);
				Wh(f, e, p, g, c, l);
				f.Qq && f.Qq();
				ng(e);
				Xh(f);
				a > r ? Yh(f) : w.requestAnimationFrame(d)
			}
		}
		void 0 === c && (c = new vb);
		var e = a.F;
		if(null !== e) {
			var f = a,
				g = c.Pz || a.nw,
				h = c.Tz || null,
				k = c.Uz || null,
				l = c.duration || a.Qt,
				m = a.Wx;
			for(c = a.rj.iterator; c.next();) {
				var n = c.value.start.position;
				n instanceof G && (n.s() || n.assign(m))
			}
			a.mw = g;
			a.Qq = h;
			a.Rq = k;
			a.lw = l;
			a.Sq = a.rj;
			var p = a.Sq;
			for(c = p.iterator; c.next();) h = c.value.end, h["position:placeholder"] &&
				(k = c.key.findVisibleNode(), k instanceof V && null !== k.placeholder && (m = k.placeholder, k = m.ka(ed), m = m.padding, k.x += m.left, k.y += m.top, h["position:placeholder"] = k));
			a.ej = !0;
			Vh(a);
			Wh(a, e, p, g, 0, l);
			ng(a.F, !0);
			Xh(a);
			var q = +new Date,
				r = q + l;
			f.Ri === b && w.requestAnimationFrame(function() {
				d()
			})
		}
	}

	function Vh(a) {
		if(!a.zr) {
			var b = a.F;
			a.Jw = b.skipsUndoManager;
			a.iw = b.skipsModelSourceBindings;
			a.jw = b.lk;
			b.skipsUndoManager = !0;
			b.skipsModelSourceBindings = !0;
			b.lk = !0;
			a.zr = !0
		}
	}

	function Xh(a) {
		var b = a.F;
		b.skipsUndoManager = a.Jw;
		b.skipsModelSourceBindings = a.iw;
		b.lk = a.jw;
		a.zr = !1
	}

	function Wh(a, b, c, d, e, f) {
		for(c = c.iterator; c.next();) {
			var g = c.key,
				h = c.value,
				k = h.start;
			h = h.end;
			for(var l in h)
				if(("position" !== l || !h["position:placeholder"] && !h["position:node"]) && void 0 !== Zh[l]) Zh[l](g, k[l], h[l], d, e, f)
		}
		d = b.av;
		b.av = !0;
		l = a.nw;
		0 !== a.ln && 0 !== a.kn && (c = a.ln, b.Ca = l(e, c, a.kn - c, f));
		null !== a.jn && null !== a.hn && (c = a.jn, a = a.hn, b.ra = new G(l(e, c.x, a.x - c.x, f), l(e, c.y, a.y - c.y, f)));
		b.av = d
	}
	Nh.prototype.Yd = function() {
		!0 === this.ab && (this.ab = !1, this.Ri = 0, this.uk && this.F.cc());
		this.ej && this.Pc && Yh(this)
	};

	function Yh(a) {
		a.ej = !1;
		a.uk = !1;
		Vh(a);
		for(var b = a.F, c = a.mw, d = a.lw, e = a.Sq.iterator; e.next();) {
			var f = e.key,
				g = e.value,
				h = g.start,
				k = g.end,
				l = g.Kp,
				m;
			for(m in k)
				if(void 0 !== Zh[m]) {
					var n = m;
					!g.Is || "position:node" !== n && "position:placeholder" !== n || (n = "position");
					Zh[n](f, h[m], void 0 !== l[m] ? l[m] : g.Is ? h[m] : k[m], c, d, d)
				}
			g.Is && void 0 !== l.location && f instanceof U && (f.location = l.location);
			g.kt && f instanceof U && f.Pb(!1)
		}
		for(c = a.F.links; c.next();) d = c.value, null !== d.pl && (d.points = d.pl, d.pl = null);
		b.bt.clear();
		Qf(b, !1);
		b.Xa();
		b.R();
		b.jd();
		$h(b);
		Xh(a);
		a.Rq && a.Rq();
		a.Ri = 0;
		a.Sq = new Nb;
		a.Rq = null;
		a.Qq = null;
		a.jn = null;
		a.hn = null;
		a.ln = 0;
		a.kn = 0;
		a.rj = new Nb;
		b.aa("AnimationFinished");
		b.cc()
	}
	Nh.prototype.Ep = function(a, b) {
		var c = a.actualBounds,
			d = b.actualBounds,
			e = null;
		b instanceof V && (e = b.placeholder);
		null !== e ? (c = e.ka(ed), e = e.padding, c.x += e.left, c.y += e.top, Sh(this, a, "position", c, a.position, !1)) : Sh(this, a, "position", new G(d.x + d.width / 2 - c.width / 2, d.y + d.height / 2 - c.height / 2), a.position, !1);
		Sh(this, a, "scale", .01, a.scale, !1);
		if(a instanceof V)
			for(a = a.memberParts; a.next();) e = a.value, e instanceof W && this.Ep(e, b)
	};
	Nh.prototype.Dp = function(a, b) {
		if(a.isVisible()) {
			var c = null;
			b instanceof V && (c = b.placeholder);
			null !== c ? Sh(this, a, "position:placeholder", a.position, c, !0) : Sh(this, a, "position:node", a.position, b, !0);
			Sh(this, a, "scale", a.scale, .01, !0);
			this.ab && (c = this.rj, c.contains(a) && (c.J(a).kt = !0));
			if(a instanceof V)
				for(a = a.memberParts; a.next();) c = a.value, c instanceof W && this.Dp(c, b)
		}
	};

	function ai(a, b, c) {
		a.ab && !b.A(c) && (null === a.jn && b.s() && null === a.hn && (a.jn = b.copy()), a.hn = c.copy(), a.uk = !0)
	}

	function bi(a, b, c) {
		a.ab && a.F.Yj && (0 === a.ln && 0 === a.kn && (a.ln = b), a.kn = c, a.uk = !0)
	}
	oa.Object.defineProperties(Nh.prototype, {
		animationReasons: {
			get: function() {
				return this.Dq
			}
		},
		isEnabled: {
			get: function() {
				return this.Pc
			},
			set: function(a) {
				this.Pc = a
			}
		},
		duration: {
			get: function() {
				return this.Qt
			},
			set: function(a) {
				1 > a && Aa(a, ">= 1", Nh, "duration");
				this.Qt = a
			}
		},
		isAnimating: {
			get: function() {
				return this.ej
			}
		},
		isTicking: {
			get: function() {
				return this.zr
			}
		},
		isInitial: {
			get: function() {
				return this.$h
			},
			set: function(a) {
				this.$h = a
			}
		}
	});
	Nh.prototype.stopAnimation = Nh.prototype.Yd;
	Nh.prototype.prepareAutomaticAnimation = Nh.prototype.Ji;
	Nh.className = "AnimationManager";

	function Uh(a, b, c) {
		this.start = a;
		this.end = b;
		this.Kp = new vb;
		this.Is = c;
		this.kt = !1
	}
	Uh.className = "AnimationStates";
	var Zh = {
		opacity: function(a, b, c, d, e, f) {
			a.opacity = d(e, b, c - b, f)
		},
		position: function(a, b, c, d, e, f) {
			e !== f ? a.rt(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f)) : a.position = new G(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f))
		},
		"position:node": function(a, b, c, d, e, f) {
			var g = a.actualBounds,
				h = c.actualBounds;
			c = h.x + h.width / 2 - g.width / 2;
			g = h.y + h.height / 2 - g.height / 2;
			e !== f ? a.rt(d(e, b.x, c - b.x, f), d(e, b.y, g - b.y, f)) : a.position = new G(d(e, b.x, c - b.x, f), d(e, b.y, g - b.y, f))
		},
		"position:placeholder": function(a, b, c, d, e, f) {
			e !== f ? a.rt(d(e, b.x, c.x - b.x,
				f), d(e, b.y, c.y - b.y, f)) : a.position = new G(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f))
		},
		scale: function(a, b, c, d, e, f) {
			a.scale = d(e, b, c - b, f)
		},
		visible: function(a, b, c, d, e, f) {
			a.visible = e !== f ? b : c
		}
	};

	function ci() {
		rb(this);
		this.F = null;
		this.Fa = new E;
		this.Ta = "";
		this.ob = 1;
		this.u = !1;
		this.vj = this.K = this.Jh = this.Ih = this.Hh = this.Gh = this.Eh = this.Fh = this.Dh = this.Lh = this.Ch = this.Kh = this.Bh = this.Ah = !0;
		this.l = !1;
		this.Co = []
	}
	t = ci.prototype;
	t.rb = function(a) {
		this.F = a
	};
	t.toString = function(a) {
		void 0 === a && (a = 0);
		var b = 'Layer "' + this.name + '"';
		if(0 >= a) return b;
		for(var c = 0, d = 0, e = 0, f = 0, g = 0, h = this.Fa.iterator; h.next();) {
			var k = h.value;
			k instanceof V ? e++ : k instanceof W ? d++ : k instanceof S ? f++ : k instanceof pf ? g++ : c++
		}
		h = "";
		0 < c && (h += c + " Parts ");
		0 < d && (h += d + " Nodes ");
		0 < e && (h += e + " Groups ");
		0 < f && (h += f + " Links ");
		0 < g && (h += g + " Adornments ");
		if(1 < a)
			for(a = this.Fa.iterator; a.next();) c = a.value, h += "\n    " + c.toString(), d = c.data, null !== d && Bb(d) && (h += " #" + Bb(d)), c instanceof W ? h += " " +
				Qa(d) : c instanceof S && (h += " " + Qa(c.fromNode) + " " + Qa(c.toNode));
		return b + " " + this.Fa.count + ": " + h
	};
	t.Sb = function(a, b, c) {
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		if(!1 === this.vj) return null;
		var d = !1;
		null !== this.diagram && this.diagram.viewportBounds.ea(a) && (d = !0);
		for(var e = G.alloc(), f = this.Fa.j, g = f.length; g--;) {
			var h = f[g];
			if((!0 !== d || !1 !== mg(h)) && h.isVisible() && (e.assign(a), Ub(e, h.Ud), h = h.Sb(e, b, c), null !== h && (null !== b && (h = b(h)), null !== h && (null === c || c(h))))) return G.free(e), h
		}
		G.free(e);
		return null
	};
	t.Uj = function(a, b, c, d) {
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		d instanceof E || d instanceof F || (d = new F);
		if(!1 === this.vj) return d;
		var e = !1;
		null !== this.diagram && this.diagram.viewportBounds.ea(a) && (e = !0);
		for(var f = G.alloc(), g = this.Fa.j, h = g.length; h--;) {
			var k = g[h];
			if((!0 !== e || !1 !== mg(k)) && k.isVisible()) {
				f.assign(a);
				Ub(f, k.Ud);
				var l = k;
				k.Uj(f, b, c, d) && (null !== b && (l = b(l)), null === l || null !== c && !c(l) || d.add(l))
			}
		}
		G.free(f);
		return d
	};
	t.mg = function(a, b, c, d, e) {
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		void 0 === d && (d = !1);
		e instanceof E || e instanceof F || (e = new F);
		if(!1 === this.vj) return e;
		var f = !1;
		null !== this.diagram && this.diagram.viewportBounds.kf(a) && (f = !0);
		for(var g = this.Fa.j, h = g.length; h--;) {
			var k = g[h];
			if((!0 !== f || !1 !== mg(k)) && k.isVisible()) {
				var l = k;
				k.mg(a, b, c, d, e) && (null !== b && (l = b(l)), null === l || null !== c && !c(l) || e.add(l))
			}
		}
		return e
	};
	t.ng = function(a, b, c, d, e, f) {
		void 0 === c && (c = null);
		void 0 === d && (d = null);
		void 0 === e && (e = !0);
		if(!1 !== e && !0 !== e) {
			if(e instanceof E || e instanceof F) f = e;
			e = !0
		}
		f instanceof E || f instanceof F || (f = new F);
		if(!1 === this.vj) return f;
		var g = !1;
		null !== this.diagram && this.diagram.viewportBounds.ea(a) && (g = !0);
		for(var h = G.alloc(), k = G.alloc(), l = this.Fa.j, m = l.length; m--;) {
			var n = l[m];
			if((!0 !== g || !1 !== mg(n)) && n.isVisible()) {
				h.assign(a);
				Ub(h, n.Ud);
				k.h(a.x + b, a.y);
				Ub(k, n.Ud);
				var p = n;
				n.ng(h, k, c, d, e, f) && (null !== c && (p = c(p)), null ===
					p || null !== d && !d(p) || f.add(p))
			}
		}
		G.free(h);
		G.free(k);
		return f
	};
	t.ld = function(a, b) {
		if(this.visible) {
			var c = void 0 === b ? a.viewportBounds : b;
			var d = this.Fa.j,
				e = d.length;
			a = La();
			b = La();
			for(var f = 0; f < e; f++) {
				var g = d[f];
				g.zw = f;
				g instanceof S && !1 === g.Mc || g instanceof pf && null !== g.adornedPart || (Hc(g.actualBounds, c, 10) ? (g.ld(!0), a.push(g)) : (g.ld(!1), null !== g.adornments && 0 < g.adornments.count && b.push(g)))
			}
			for(c = 0; c < a.length; c++)
				for(d = a[c], di(d), d = d.adornments; d.next();) e = d.value, e.measure(Infinity, Infinity), e.arrange(), e.ld(!0);
			for(c = 0; c < b.length; c++) d = b[c], d.updateAdornments(),
				ei(d, !0);
			Na(a);
			Na(b)
		}
	};
	t.jc = function(a, b, c) {
		if(this.visible && 0 !== this.ob && (void 0 === c && (c = !0), c || !this.isTemporary)) {
			c = this.Fa.j;
			var d = c.length;
			if(0 !== d) {
				1 !== this.ob && (a.globalAlpha = this.ob);
				var e = this.Co;
				e.length = 0;
				for(var f = b.scale, g = 0; g < d; g++) {
					var h = c[g];
					if(mg(h)) {
						if(h instanceof S && (h.isOrthogonal && e.push(h), !1 === h.Mc)) continue;
						var k = h.actualBounds;
						1 < k.width * f || 1 < k.height * f ? h.jc(a, b) : fi(a, h)
					}
				}
				a.globalAlpha = 1
			}
		}
	};

	function gi(a, b, c, d) {
		if(a.visible && 0 !== a.ob) {
			1 !== a.ob && (b.globalAlpha = a.ob);
			var e = a.Co;
			e.length = 0;
			var f = c.scale;
			a = a.Fa.j;
			for(var g = a.length, h = d.length, k = 0; k < g; k++) {
				var l = a[k];
				if(mg(l)) {
					if(l instanceof S && (l.isOrthogonal && e.push(l), !1 === l.Mc)) continue;
					var m = hi(l, l.actualBounds);
					a: {
						var n = 2 / f;
						for(var p = 4 / f, q = 0; q < h; q++) {
							var r = d[q];
							if(0 !== r.width && 0 !== r.height && m.Zu(r.x - n, r.y - n, r.width + p, r.height + p)) {
								n = !0;
								break a
							}
						}
						n = !1
					}
					n && (1 < m.width * f || 1 < m.height * f ? l.jc(b, c) : fi(b, l))
				}
			}
			b.globalAlpha = 1
		}
	}

	function fi(a, b) {
		var c = b.actualBounds,
			d = b.naturalBounds;
		if(0 !== c.width && 0 !== c.height && !isNaN(c.x) && !isNaN(c.y) && b.isVisible()) {
			var e = b.transform;
			null !== b.areaBackground && (ii(b, a, b.areaBackground, !0, !0, d, c), a.fillRect(c.x, c.y, c.width, c.height));
			null === b.areaBackground && null === b.background && (ii(b, a, "rgba(0,0,0,0.4)", !0, !1, d, c), a.fillRect(c.x, c.y, c.width, c.height));
			null !== b.background && (a.transform(e.m11, e.m12, e.m21, e.m22, e.dx, e.dy), ii(b, a, b.background, !0, !1, d, c), a.fillRect(0, 0, d.width, d.height), e.$s() ||
				(b = 1 / (e.m11 * e.m22 - e.m12 * e.m21), a.transform(e.m22 * b, -e.m12 * b, -e.m21 * b, e.m11 * b, b * (e.m21 * e.dy - e.m22 * e.dx), b * (e.m12 * e.dx - e.m11 * e.dy))))
		}
	}
	t.g = function(a, b, c, d, e) {
		var f = this.diagram;
		null !== f && f.cb(Ze, a, this, b, c, d, e)
	};
	t.Gi = function(a, b, c) {
		var d = this.Fa;
		b.ci = this;
		if(a >= d.count) a = d.count;
		else if(d.N(a) === b) return -1;
		d.Nb(a, b);
		b.Rp(c);
		d = this.diagram;
		null !== d && (c ? d.R() : d.Gi(b));
		ji(this, a, b);
		return a
	};
	t.zc = function(a, b, c) {
		if(!c && b.layer !== this && null !== b.layer) return b.layer.zc(a, b, c);
		var d = this.Fa;
		if(0 > a || a >= d.length) {
			if(a = d.indexOf(b), 0 > a) return -1
		} else if(d.N(a) !== b && (a = d.indexOf(b), 0 > a)) return -1;
		b.Sp(c);
		d.qb(a);
		d = this.diagram;
		null !== d && (c ? d.R() : d.zc(b));
		b.ci = null;
		return a
	};

	function ji(a, b, c) {
		b = ki(a, b, c);
		if(c instanceof V && null !== c && isNaN(c.zOrder)) {
			if(0 !== c.memberParts.count) {
				for(var d = -1, e = a.Fa.j, f = e.length, g = 0; g < f; g++) {
					var h = e[g];
					if(h === c && (b = g, 0 <= d)) break;
					if(0 > d && h.containingGroup === c && (d = g, 0 <= b)) break
				}!(0 > d) && d < b && (e = a.Fa, e.qb(b), e.Nb(d, c))
			}
			c = c.containingGroup;
			null !== c && ji(a, -1, c)
		}
	}

	function ki(a, b, c) {
		var d = c.zOrder;
		if(isNaN(d)) return b;
		a = a.Fa;
		var e = a.count;
		if(1 >= e) return b;
		0 > b && (b = a.indexOf(c));
		if(0 > b) return -1;
		for(var f = b - 1, g = NaN; 0 <= f;) {
			g = a.N(f).zOrder;
			if(!isNaN(g)) break;
			f--
		}
		for(var h = b + 1, k = NaN; h < e;) {
			k = a.N(h).zOrder;
			if(!isNaN(k)) break;
			h++
		}
		if(!isNaN(g) && g > d)
			for(;;) {
				if(-1 === f || g <= d) {
					f++;
					if(f === b) break;
					a.qb(b);
					a.Nb(f, c);
					return f
				}
				for(g = NaN; 0 <= --f && (g = a.N(f).zOrder, isNaN(g)););
			} else if(!isNaN(k) && k < d)
				for(;;) {
					if(h === e || k >= d) {
						h--;
						if(h === b) break;
						a.qb(b);
						a.Nb(h, c);
						return h
					}
					for(k = NaN; ++h <
						e && (k = a.N(h).zOrder, isNaN(k)););
				}
		return b
	}
	t.clear = function() {
		for(var a = this.Fa.La(), b = a.length, c = 0; c < b; c++) a[c].ld(!1), this.zc(-1, a[c], !1);
		this.Co.length = 0
	};
	oa.Object.defineProperties(ci.prototype, {
		parts: {
			get: function() {
				return this.Fa.iterator
			}
		},
		partsBackwards: {
			get: function() {
				return this.Fa.iteratorBackwards
			}
		},
		diagram: {
			get: function() {
				return this.F
			}
		},
		name: {
			get: function() {
				return this.Ta
			},
			set: function(a) {
				var b = this.Ta;
				if(b !== a) {
					var c = this.diagram;
					if(null !== c)
						for("" === b && A("Cannot rename default Layer to: " + a), c = c.layers; c.next();) c.value.name ===
							a && A("Layer.name is already present in this diagram: " + a);
					this.Ta = a;
					this.g("name", b, a);
					for(a = this.Fa.iterator; a.next();) a.value.layerName = this.Ta
				}
			}
		},
		opacity: {
			get: function() {
				return this.ob
			},
			set: function(a) {
				var b = this.ob;
				b !== a && ((0 > a || 1 < a) && Aa(a, "0 <= value <= 1", ci, "opacity"), this.ob = a, this.g("opacity", b, a), a = this.diagram, null !== a && a.R())
			}
		},
		isTemporary: {
			get: function() {
				return this.u
			},
			set: function(a) {
				var b = this.u;
				b !== a && (this.u = a, this.g("isTemporary",
					b, a))
			}
		},
		visible: {
			get: function() {
				return this.K
			},
			set: function(a) {
				var b = this.K;
				if(b !== a) {
					this.K = a;
					this.g("visible", b, a);
					for(b = this.Fa.iterator; b.next();) b.value.Pb(a);
					a = this.diagram;
					null !== a && a.R()
				}
			}
		},
		pickable: {
			get: function() {
				return this.vj
			},
			set: function(a) {
				var b = this.vj;
				b !== a && (this.vj = a, this.g("pickable", b, a))
			}
		},
		isBoundsIncluded: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l !== a && (this.l = a, null !== this.diagram &&
					this.diagram.Xa())
			}
		},
		allowCopy: {
			get: function() {
				return this.Ah
			},
			set: function(a) {
				var b = this.Ah;
				b !== a && (this.Ah = a, this.g("allowCopy", b, a))
			}
		},
		allowDelete: {
			get: function() {
				return this.Bh
			},
			set: function(a) {
				var b = this.Bh;
				b !== a && (this.Bh = a, this.g("allowDelete", b, a))
			}
		},
		allowTextEdit: {
			get: function() {
				return this.Kh
			},
			set: function(a) {
				var b = this.Kh;
				b !== a && (this.Kh = a, this.g("allowTextEdit", b, a))
			}
		},
		allowGroup: {
			get: function() {
				return this.Ch
			},
			set: function(a) {
				var b = this.Ch;
				b !== a && (this.Ch = a, this.g("allowGroup", b, a))
			}
		},
		allowUngroup: {
			get: function() {
				return this.Lh
			},
			set: function(a) {
				var b = this.Lh;
				b !== a && (this.Lh = a, this.g("allowUngroup", b, a))
			}
		},
		allowLink: {
			get: function() {
				return this.Dh
			},
			set: function(a) {
				var b = this.Dh;
				b !== a && (this.Dh = a, this.g("allowLink", b, a))
			}
		},
		allowRelink: {
			get: function() {
				return this.Fh
			},
			set: function(a) {
				var b =
					this.Fh;
				b !== a && (this.Fh = a, this.g("allowRelink", b, a))
			}
		},
		allowMove: {
			get: function() {
				return this.Eh
			},
			set: function(a) {
				var b = this.Eh;
				b !== a && (this.Eh = a, this.g("allowMove", b, a))
			}
		},
		allowReshape: {
			get: function() {
				return this.Gh
			},
			set: function(a) {
				var b = this.Gh;
				b !== a && (this.Gh = a, this.g("allowReshape", b, a))
			}
		},
		allowResize: {
			get: function() {
				return this.Hh
			},
			set: function(a) {
				var b = this.Hh;
				b !== a && (this.Hh = a, this.g("allowResize", b, a))
			}
		},
		allowRotate: {
			get: function() {
				return this.Ih
			},
			set: function(a) {
				var b = this.Ih;
				b !== a && (this.Ih = a, this.g("allowRotate", b, a))
			}
		},
		allowSelect: {
			get: function() {
				return this.Jh
			},
			set: function(a) {
				var b = this.Jh;
				b !== a && (this.Jh = a, this.g("allowSelect", b, a))
			}
		}
	});
	ci.prototype.findObjectsNear = ci.prototype.ng;
	ci.prototype.findObjectsIn = ci.prototype.mg;
	ci.prototype.findObjectsAt = ci.prototype.Uj;
	ci.prototype.findObjectAt = ci.prototype.Sb;
	ci.className = "Layer";

	function Q(a) {
		function b() {
			w.document.removeEventListener("DOMContentLoaded", b, !1);
			c.setRTL()
		}
		1 < arguments.length && A("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");
		rb(this);
		lf = this;
		li = [];
		this.tb = !0;
		this.Cq = new Nh;
		this.Cq.rb(this);
		this.Lb = 17;
		this.Ln = !1;
		this.ju = "default";
		this.Ia = null;
		var c = this;
		Ya && (null !== w.document.body ? this.setRTL() : w.document.addEventListener("DOMContentLoaded", b, !1));
		this.Ra = new E;
		this.wa = this.xa = 0;
		this.Ea = null;
		this.No = new Nb;
		this.Xu();
		this.Xg = this.$c = null;
		this.vv();
		this.Wk = null;
		this.uv();
		this.ra = (new G(NaN, NaN)).freeze();
		this.Vq = this.Ca = 1;
		this.qr = (new G(NaN, NaN)).freeze();
		this.rr = NaN;
		this.Mr = 1E-4;
		this.Kr = 100;
		this.wb = new Yc;
		this.Cs = (new G(NaN, NaN)).freeze();
		this.fr = (new M(NaN, NaN, NaN, NaN)).freeze();
		this.ni = (new Pc(0, 0, 0, 0)).freeze();
		this.js = mi;
		this.ms = !1;
		this.fs = this.$r = null;
		this.Ti = ni;
		this.Vi = Hd;
		this.Yh = ni;
		this.Gn = Hd;
		this.sr = this.pr = ed;
		this.qc = !0;
		this.Hn = !1;
		this.Fd = new F;
		this.Sh = new Nb;
		this.pn = !0;
		this.Lm = 250;
		this.vk = -1;
		this.Mm =
			(new Pc(16, 16, 16, 16)).freeze();
		this.mn = this.ud = !1;
		this.Pk = !0;
		this.Th = new Ve;
		this.Th.diagram = this;
		this.Xe = new Ve;
		this.Xe.diagram = this;
		this.kj = new Ve;
		this.kj.diagram = this;
		this.me = this.zf = null;
		this.Gl = !1;
		this.Mt = this.Nt = null;
		this.Ct = w.PointerEvent && (ab || bb || eb) && w.navigator && !1 !== w.navigator.msPointerEnabled;
		oi(this);
		this.ui = new F;
		this.Ar = !0;
		this.xs = pi;
		this.nd = !1;
		this.zs = sg;
		this.Wa = null;
		qi.add("Model", ri);
		this.da = this.Va = this.eb = null;
		this.Pq = "";
		this.gn = "auto";
		this.Rf = this.Pr = this.Tf = this.Uf = this.Wf =
			this.Bf = this.Ff = this.Af = null;
		this.kr = !1;
		this.Cf = this.gg = this.Vf = this.Sf = this.Hr = null;
		this.eu = !1;
		this.hu = {};
		this.nl = [null, null];
		this.K = null;
		this.Lt = this.ou = this.um = this.$g = !1;
		this.Xc = !0;
		this.gj = this.Yb = !1;
		this.Zb = null;
		var d = this;
		this.vf = function(a) {
			var b = d.partManager;
			if(a.model === b.diagram.model && b.diagram.ca) {
				b.diagram.ca = !1;
				try {
					var c = a.change;
					"" === a.modelChange && c === Ze && b.updateDataBindings(a.object, a.propertyName)
				} finally {
					b.diagram.ca = !0
				}
			}
		};
		this.Qi = function(a) {
			d.partManager.doModelChanged(a)
		};
		this.Lw = !0;
		this.fe = -2;
		this.wj = new Nb;
		this.gu = new E;
		this.Lf = !1;
		this.Bh = this.Ah = this.uq = this.Pc = !0;
		this.vq = !1;
		this.Bq = this.zq = this.Jh = this.Ih = this.Hh = this.Gh = this.Eh = this.Fh = this.Dh = this.yq = this.Lh = this.Ch = this.Kh = this.wq = !0;
		this.he = this.Lc = !1;
		this.Aq = this.xq = this.mr = this.lr = !0;
		this.ls = this.hs = 16;
		this.lu = this.gs = !1;
		this.Zo = this.ks = null;
		this.mu = this.nu = 0;
		this.hb = (new Pc(5)).freeze();
		this.os = (new F).freeze();
		this.Lr = 999999999;
		this.nr = (new F).freeze();
		this.Zh = this.dj = this.Lg = !0;
		this.Wh = this.Kg = !1;
		this.gc =
			null;
		this.wg = !0;
		this.ge = !1;
		this.tq = new F;
		this.xw = new F;
		this.Qb = null;
		this.zo = 1;
		this.Fw = 0;
		this.we = {
			scale: 1,
			position: new G,
			bounds: new M,
			wx: !1
		};
		this.Kw = (new M(NaN, NaN, NaN, NaN)).freeze();
		this.yp = (new L(NaN, NaN)).freeze();
		this.nn = (new M(NaN, NaN, NaN, NaN)).freeze();
		this.Br = !1;
		this.Zq = null;
		si(this);
		this.Gr = this.ir = this.Sr = this.pw = this.ow = this.qw = this.Qg = this.Uh = this.Xf = null;
		ti(this);
		this.Ib = null;
		this.hr = !1;
		this.Dk = null;
		this.partManager = new ri;
		this.toolManager = new Va;
		this.toolManager.initializeStandardTools();
		this.currentTool = this.defaultTool = this.toolManager;
		this.Yq = null;
		this.Fk = new Df;
		this.Vr = this.Ur = null;
		this.op = !1;
		this.commandHandler = ui();
		this.model = Z.initDiagramModel();
		this.$g = !0;
		this.layout = new vi;
		this.$g = !1;
		this.sw = this.Pt = null;
		this.Jb = 1;
		this.ue = null;
		this.Zt = 9999;
		this.Se = 1;
		this.cl = 0;
		this.Dr = new G;
		this.tu = 500;
		this.Eq = new G;
		this.Mg = !1;
		this.preventDefault = this.jt = this.fm = this.gm = this.em = this.dm = this.dk = this.fk = this.ek = this.bk = this.ck = this.Wv = this.Ov = this.Pv = this.Qv = this.mi = this.Uo = this.li = this.To =
			null;
		this.u = !1;
		this.Xh = new wi;
		void 0 !== a && xi(this, a);
		this.tb = !1
	}
	Q.prototype.clear = function() {
		this.model.clear();
		yi = null;
		zi = "";
		Ai(this, !1);
		this.nn = (new M(NaN, NaN, NaN, NaN)).freeze();
		this.R()
	};

	function Ai(a, b) {
		var c = null;
		null !== a.Ib && (c = a.Ib.part);
		a.animationManager.Yd();
		for(var d = [], e = a.Ra.length, f = 0; f < e; f++) {
			var g = a.Ra.j[f];
			if(b)
				for(var h = g.parts; h.next();) {
					var k = h.value;
					k !== c && null === k.data && d.push(k)
				}
			g.clear()
		}
		a.partManager.clear();
		a.Fd.clear();
		a.Sh.clear();
		a.ui.clear();
		a.os.ha();
		a.os.clear();
		a.os.freeze();
		a.nr.ha();
		a.nr.clear();
		a.nr.freeze();
		a.Dk = null;
		Ma = [];
		null !== c && (a.add(c), a.partManager.parts.remove(c));
		if(b)
			for(b = 0; b < d.length; b++) a.add(d[b])
	}

	function ui() {
		return null
	}
	Q.prototype.reset = function() {
		this.tb = !0;
		this.clear();
		this.Ra = new E;
		this.vv();
		this.uv();
		this.ra = (new G(NaN, NaN)).freeze();
		this.Ca = 1;
		this.qr = (new G(NaN, NaN)).freeze();
		this.rr = NaN;
		this.Mr = 1E-4;
		this.Kr = 100;
		this.Cs = (new G(NaN, NaN)).freeze();
		this.fr = (new M(NaN, NaN, NaN, NaN)).freeze();
		this.ni = (new Pc(0, 0, 0, 0)).freeze();
		this.js = mi;
		this.ms = !1;
		this.fs = this.$r = null;
		this.Ti = ni;
		this.Vi = Hd;
		this.Yh = ni;
		this.Gn = Hd;
		this.sr = this.pr = ed;
		this.Lm = 250;
		this.Mm = (new Pc(16, 16, 16, 16)).freeze();
		this.Ar = !0;
		this.xs = pi;
		this.zs = sg;
		this.gn = "auto";
		this.Rf = this.Pr = this.Tf = this.Uf = this.Wf = this.Bf = this.Ff = this.Af = null;
		this.kr = !1;
		this.Cf = this.gg = this.Vf = this.Sf = this.Hr = null;
		this.Lf = !1;
		this.Bh = this.Ah = this.uq = this.Pc = !0;
		this.vq = !1;
		this.Aq = this.xq = this.mr = this.lr = this.Bq = this.zq = this.Jh = this.Ih = this.Hh = this.Gh = this.Eh = this.Fh = this.Dh = this.yq = this.Lh = this.Ch = this.Kh = this.wq = !0;
		this.ls = this.hs = 16;
		this.hb = (new Pc(5)).freeze();
		this.Lr = 999999999;
		this.gc = null;
		this.Br = !1;
		ti(this);
		this.Ib = null;
		this.partManager = new ri;
		this.toolManager = new Va;
		this.toolManager.initializeStandardTools();
		this.Vr = this.Ur = this.Yq = null;
		this.op = !1;
		this.Fk.reset();
		this.No = new Nb;
		this.Xu();
		this.currentTool = this.defaultTool = this.toolManager;
		this.commandHandler = ui();
		this.$g = !0;
		si(this);
		this.layout = new vi;
		this.$g = !1;
		this.model = Z.initDiagramModel();
		this.ge = !1;
		this.Pk = !0;
		this.tb = this.ud = !1;
		this.R();
		this.me = this.zf = null;
		oi(this);
		this.Pq = ""
	};

	function ti(a) {
		a.Xf = new Nb;
		var b = new W,
			c = new wh;
		c.bind(new Bi("text", "", Qa));
		b.add(c);
		a.qw = b;
		a.Xf.add("", b);
		b = new W;
		c = new wh;
		c.stroke = "brown";
		c.bind(new Bi("text", "", Qa));
		b.add(c);
		a.Xf.add("Comment", b);
		b = new W;
		b.selectable = !1;
		b.avoidable = !1;
		c = new qg;
		c.figure = "Ellipse";
		c.fill = "black";
		c.stroke = null;
		c.desiredSize = (new L(3, 3)).ga();
		b.add(c);
		a.Xf.add("LinkLabel", b);
		a.Uh = new Nb;
		b = new V;
		b.selectionObjectName = "GROUPPANEL";
		b.type = Y.Vertical;
		c = new wh;
		c.font = "bold 12pt sans-serif";
		c.bind(new Bi("text", "", Qa));
		b.add(c);
		c = new Y(Y.Auto);
		c.name = "GROUPPANEL";
		var d = new qg;
		d.figure = "Rectangle";
		d.fill = "rgba(128,128,128,0.2)";
		d.stroke = "black";
		c.add(d);
		d = new bh;
		d.padding = (new Pc(5, 5, 5, 5)).ga();
		c.add(d);
		b.add(c);
		a.ow = b;
		a.Uh.add("", b);
		a.Qg = new Nb;
		b = new S;
		c = new qg;
		c.isPanelMain = !0;
		b.add(c);
		c = new qg;
		c.toArrow = "Standard";
		c.fill = "black";
		c.stroke = null;
		c.strokeWidth = 0;
		b.add(c);
		a.pw = b;
		a.Qg.add("", b);
		b = new S;
		c = new qg;
		c.isPanelMain = !0;
		c.stroke = "brown";
		b.add(c);
		a.Qg.add("Comment", b);
		b = new pf;
		b.type = Y.Auto;
		c = new qg;
		c.fill = null;
		c.stroke = "dodgerblue";
		c.strokeWidth = 3;
		b.add(c);
		c = new bh;
		c.margin = (new Pc(1.5, 1.5, 1.5, 1.5)).ga();
		b.add(c);
		a.Sr = b;
		a.ir = b;
		b = new pf;
		b.type = Y.Link;
		c = new qg;
		c.isPanelMain = !0;
		c.fill = null;
		c.stroke = "dodgerblue";
		c.strokeWidth = 3;
		b.add(c);
		a.Gr = b
	}
	Q.prototype.setRTL = function(a) {
		a = void 0 === a ? this.div : a;
		null === a && (a = w.document.body);
		var b = wa("div");
		b.dir = "rtl";
		b.style.cssText = "font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;";
		b.textContent = "A";
		a.appendChild(b);
		var c = "reverse";
		0 < b.scrollLeft ? c = "default" : (b.scrollLeft = 1, 0 === b.scrollLeft && (c = "negative"));
		a.removeChild(b);
		this.ju = c
	};
	Q.prototype.setScrollWidth = function(a) {
		a = void 0 === a ? this.div : a;
		null === a && (a = w.document.body);
		var b = 0;
		if(Ya) {
			var c = Ci;
			b = Di;
			null === c && (c = Ci = wa("p"), c.style.width = "100%", c.style.height = "200px", c.style.boxSizing = "content-box", b = Di = wa("div"), b.style.position = "absolute", b.style.visibility = "hidden", b.style.width = "200px", b.style.height = "150px", b.style.boxSizing = "content-box", b.appendChild(c));
			b.style.overflow = "hidden";
			a.appendChild(b);
			var d = c.offsetWidth;
			b.style.overflow = "scroll";
			c = c.offsetWidth;
			d === c && (c =
				b.clientWidth);
			a.removeChild(b);
			b = d - c;
			0 !== b || ib || (b = 11)
		}
		this.Lb = b
	};
	Q.prototype.ib = function(a) {
		a.classType === Q && (this.autoScale = a)
	};
	Q.prototype.toString = function(a) {
		void 0 === a && (a = 0);
		var b = "";
		this.div && this.div.id && (b = this.div.id);
		b = 'Diagram "' + b + '"';
		if(0 >= a) return b;
		for(var c = this.Ra.iterator; c.next();) b += "\n  " + c.value.toString(a - 1);
		return b
	};

	function Ei(a) {
		var b = a.Ea.Ha;
		a.Ct ? (b.addEventListener("pointerdown", a.dm, !1), b.addEventListener("pointermove", a.em, !1), b.addEventListener("pointerup", a.gm, !1), b.addEventListener("pointerout", a.fm, !1)) : (b.addEventListener("touchstart", a.Qv, !1), b.addEventListener("touchmove", a.Pv, !1), b.addEventListener("touchend", a.Ov, !1), b.addEventListener("mousemove", a.ck, !1), b.addEventListener("mousedown", a.bk, !1), b.addEventListener("mouseup", a.ek, !1), b.addEventListener("mouseout", a.dk, !1));
		b.addEventListener("mouseenter",
			a.Ay, !1);
		b.addEventListener("mouseleave", a.By, !1);
		b.addEventListener("wheel", a.fk, !1);
		b.addEventListener("keydown", a.nz, !1);
		b.addEventListener("keyup", a.oz, !1);
		b.addEventListener("selectstart", function(a) {
			a.preventDefault();
			return !1
		}, !1);
		b.addEventListener("contextmenu", function(a) {
			a.preventDefault();
			return !1
		}, !1);
		b.addEventListener("gesturestart", function(b) {
			a.toolManager.gestureBehavior !== sf && (a.toolManager.gestureBehavior === rf ? b.preventDefault() : (b.preventDefault(), a.zo = a.scale, a.currentTool.doCancel()))
		}, !1);
		b.addEventListener("gesturechange", function(b) {
			if(a.toolManager.gestureBehavior !== sf)
				if(a.toolManager.gestureBehavior === rf) b.preventDefault();
				else {
					b.preventDefault();
					var c = b.scale;
					if(null !== a.zo) {
						var e = a.Ea.getBoundingClientRect();
						b = new G(b.pageX - window.scrollX - a.xa / e.width * e.left, b.pageY - window.scrollY - a.wa / e.height * e.top);
						c = a.zo * c;
						e = a.commandHandler;
						if(c !== a.scale && e.canResetZoom(c)) {
							var f = a.zoomPoint;
							a.zoomPoint = b;
							e.resetZoom(c);
							a.zoomPoint = f
						}
					}
				}
		}, !1);
		w.addEventListener("resize", a.Wv, !1)
	}

	function Qf(a, b) {
		null !== a.ue && (a.ue = null, b && a.jt())
	}
	Q.prototype.computePixelRatio = function() {
		return null !== this.ue ? this.ue : w.devicePixelRatio || 1
	};
	Q.prototype.doMouseMove = function() {
		this.currentTool.doMouseMove()
	};
	Q.prototype.doMouseDown = function() {
		this.currentTool.doMouseDown()
	};
	Q.prototype.doMouseUp = function() {
		this.currentTool.doMouseUp()
	};
	Q.prototype.doMouseWheel = function() {
		this.currentTool.doMouseWheel()
	};
	Q.prototype.doKeyDown = function() {
		this.currentTool.doKeyDown()
	};
	Q.prototype.doKeyUp = function() {
		this.currentTool.doKeyUp()
	};
	Q.prototype.doFocus = function() {
		this.focus()
	};
	Q.prototype.focus = function() {
		if(this.Ea)
			if(this.scrollsPageOnFocus) this.Ea.focus();
			else {
				var a = w.scrollX || w.pageXOffset,
					b = w.scrollY || w.pageYOffset;
				this.Ea.focus();
				w.scrollTo(a, b)
			}
	};

	function Qh(a) {
		if(null !== a.Ea) {
			var b = a.Ia;
			if(0 !== b.clientWidth && 0 !== b.clientHeight) {
				a.setScrollWidth();
				var c = a.Wh ? a.Lb : 0,
					d = a.Kg ? a.Lb : 0,
					e = a.Jb;
				a.Jb = a.computePixelRatio();
				a.Jb !== e && (a.Hn = !0, a.cc());
				if(b.clientWidth !== a.xa + c || b.clientHeight !== a.wa + d) a.dj = !0, a.qc = !0, b = a.layout, null !== b && b.isViewportSized && a.autoScale === ni && (a.mn = !0, b.B()), a.Yb || a.cc()
			}
		}
	}

	function si(a) {
		var b = new ci;
		b.name = "Background";
		a.Kl(b);
		b = new ci;
		b.name = "";
		a.Kl(b);
		b = new ci;
		b.name = "Foreground";
		a.Kl(b);
		b = new ci;
		b.name = "Adornment";
		b.isTemporary = !0;
		a.Kl(b);
		b = new ci;
		b.name = "Tool";
		b.isTemporary = !0;
		b.isBoundsIncluded = !0;
		a.Kl(b);
		b = new ci;
		b.name = "Grid";
		b.allowSelect = !1;
		b.pickable = !1;
		b.isTemporary = !0;
		a.Ow(b, a.Ul("Background"))
	}

	function Hi(a) {
		a.Ib = new Y(Y.Grid);
		a.Ib.name = "GRID";
		var b = new qg;
		b.figure = "LineH";
		b.stroke = "lightgray";
		b.strokeWidth = .5;
		b.interval = 1;
		a.Ib.add(b);
		b = new qg;
		b.figure = "LineH";
		b.stroke = "gray";
		b.strokeWidth = .5;
		b.interval = 5;
		a.Ib.add(b);
		b = new qg;
		b.figure = "LineH";
		b.stroke = "gray";
		b.strokeWidth = 1;
		b.interval = 10;
		a.Ib.add(b);
		b = new qg;
		b.figure = "LineV";
		b.stroke = "lightgray";
		b.strokeWidth = .5;
		b.interval = 1;
		a.Ib.add(b);
		b = new qg;
		b.figure = "LineV";
		b.stroke = "gray";
		b.strokeWidth = .5;
		b.interval = 5;
		a.Ib.add(b);
		b = new qg;
		b.figure =
			"LineV";
		b.stroke = "gray";
		b.strokeWidth = 1;
		b.interval = 10;
		a.Ib.add(b);
		b = new U;
		b.add(a.Ib);
		b.layerName = "Grid";
		b.zOrder = 0;
		b.isInDocumentBounds = !1;
		b.isAnimated = !1;
		b.pickable = !1;
		b.locationObjectName = "GRID";
		a.add(b);
		a.partManager.parts.remove(b);
		a.Ib.visible = !1
	}

	function Ii() {
		this.F.lu ? this.F.lu = !1 : this.F.isEnabled ? this.F.ax(this) : Ji(this.F)
	}

	function Ki(a) {
		this.F.isEnabled ? (this.F.nu = a.target.scrollTop, this.F.mu = a.target.scrollLeft) : Ji(this.F)
	}
	Q.prototype.ax = function(a) {
		if(null !== this.Ea) {
			this.gs = !0;
			var b = this.documentBounds,
				c = this.viewportBounds,
				d = this.ni,
				e = b.x - d.left,
				f = b.y - d.top,
				g = b.width + d.left + d.right,
				h = b.height + d.top + d.bottom,
				k = b.right + d.right;
			d = b.bottom + d.bottom;
			var l = c.x;
			b = c.y;
			var m = c.width,
				n = c.height,
				p = c.right,
				q = c.bottom;
			c = this.scale;
			var r = a.scrollLeft;
			if(this.Ln) switch(this.ju) {
				case "negative":
					r = r + a.scrollWidth - a.clientWidth;
					break;
				case "reverse":
					r = a.scrollWidth - r - a.clientWidth
			}
			var u = r;
			m < g || n < h ? (r = G.allocAt(this.position.x, this.position.y),
				this.allowHorizontalScroll && this.mu !== u && (r.x = u / c + e, this.mu = u), this.allowVerticalScroll && this.nu !== a.scrollTop && (r.y = a.scrollTop / c + f, this.nu = a.scrollTop), this.position = r, G.free(r), this.dj = this.gs = !1) : (r = G.alloc(), a.Yx && this.allowHorizontalScroll && (e < l && (this.position = r.h(u + e, this.position.y)), k > p && (this.position = r.h(-(this.ks.scrollWidth - this.xa) + u - this.xa / c + k, this.position.y))), a.Zx && this.allowVerticalScroll && (f < b && (this.position = r.h(this.position.x, a.scrollTop + f)), d > q && (this.position = r.h(this.position.x, -(this.ks.scrollHeight - this.wa) + a.scrollTop - this.wa / c + d))), G.free(r), Li(this), this.dj = this.gs = !1, b = this.documentBounds, c = this.viewportBounds, k = b.right, p = c.right, d = b.bottom, q = c.bottom, e = b.x, l = c.x, f = b.y, b = c.y, m >= g && e >= l && k <= p && (this.Zo.style.width = "1px"), n >= h && f >= b && d <= q && (this.Zo.style.height = "1px"))
		}
	};
	Q.prototype.computeBounds = function() {
		0 < this.Fd.count && Mi(this);
		return Ni(this)
	};

	function Ni(a) {
		if(a.fixedBounds.s()) {
			var b = a.fixedBounds.copy();
			b.Fp(a.hb);
			return b
		}
		for(var c = !0, d = a.Ra.j, e = d.length, f = 0; f < e; f++) {
			var g = d[f];
			if(g.visible && (!g.isTemporary || g.isBoundsIncluded)) {
				g = g.Fa.j;
				for(var h = g.length, k = 0; k < h; k++) {
					var l = g[k];
					l.isInDocumentBounds && l.isVisible() && (l = l.actualBounds, l.s() && (c ? (c = !1, b = l.copy()) : b.Wc(l)))
				}
			}
		}
		c && (b = new M(0, 0, 0, 0));
		b.Fp(a.hb);
		return b
	}
	Q.prototype.computePartsBounds = function(a, b) {
		void 0 === b && (b = !1);
		var c = null;
		if(Ga(a))
			for(var d = 0; d < a.length; d++) {
				var e = a[d];
				!b && e instanceof S || (e.kc(), null === c ? c = e.actualBounds.copy() : c.Wc(e.actualBounds))
			} else
				for(a = a.iterator; a.next();) d = a.value, !b && d instanceof S || (d.kc(), null === c ? c = d.actualBounds.copy() : c.Wc(d.actualBounds));
		return null === c ? new M(NaN, NaN, 0, 0) : c
	};

	function Oi(a, b) {
		if((b || a.ge) && !a.tb && null !== a.Ea && !a.animationManager.isAnimating && a.documentBounds.s()) {
			a.tb = !0;
			var c = a.Ti;
			b && a.Yh !== ni && (c = a.Yh);
			var d = c !== ni ? Pi(a, c) : a.scale;
			c = a.viewportBounds.copy();
			var e = a.xa / d,
				f = a.wa / d,
				g = null,
				h = a.animationManager;
			h.ab && (g = a.ra.copy());
			var k = a.Vi,
				l = a.Gn;
			b && !k.pb() && (l.pb() || l.jb()) && (k = l.jb() ? id : l);
			Qi(a, a.documentBounds, e, f, k, b);
			null !== g && ai(h, g, a.ra);
			b = a.scale;
			a.scale = d;
			a.tb = !1;
			d = a.viewportBounds;
			d.Oa(c) || a.$p(c, d, b, !1)
		}
	}

	function Pi(a, b) {
		var c = a.Vq;
		if(null === a.Ea) return c;
		a.Lg && Ri(a, a.computeBounds());
		var d = a.documentBounds;
		if(!d.s()) return c;
		var e = d.width;
		d = d.height;
		var f = a.xa,
			g = a.wa,
			h = f / e,
			k = g / d;
		return b === Si ? (b = Math.min(k, h), b > c && (b = c), b < a.minScale && (b = a.minScale), b > a.maxScale && (b = a.maxScale), b) : b === Ti ? (b = k > h ? (g - a.Lb) / d : (f - a.Lb) / e, b > c && (b = c), b < a.minScale && (b = a.minScale), b > a.maxScale && (b = a.maxScale), b) : a.scale
	}
	Q.prototype.zoomToFit = function() {
		this.scale = Pi(this, Si);
		this.scrollMode !== mi && Qi(this, this.documentBounds, this.xa / this.Ca, this.wa / this.Ca, this.Vi, !0)
	};
	t = Q.prototype;
	t.Mz = function(a, b) {
		void 0 === b && (b = Si);
		var c = a.width,
			d = a.height;
		if(!(0 === c || 0 === d || isNaN(c) && isNaN(d))) {
			var e = 1;
			if(b === Si || b === Ti)
				if(isNaN(c)) e = this.viewportBounds.height * this.scale / d;
				else if(isNaN(d)) e = this.viewportBounds.width * this.scale / c;
			else {
				e = this.xa;
				var f = this.wa;
				e = b === Ti ? f / d > e / c ? (f - (this.Kg ? this.Lb : 0)) / d : (e - (this.Wh ? this.Lb : 0)) / c : Math.min(f / d, e / c)
			}
			this.scale = e;
			this.position = new G(a.x, a.y)
		}
	};
	t.ky = function(a, b) {
		this.Lg && Ri(this, this.computeBounds());
		var c = this.documentBounds,
			d = this.viewportBounds;
		this.position = new G(c.x + (a.x * c.width + a.offsetX) - (b.x * d.width - b.offsetX), c.y + (a.y * c.height + a.offsetY) - (b.y * d.height - b.offsetY))
	};

	function Qi(a, b, c, d, e, f) {
		a.ra.ha();
		var g = a.ra,
			h = g.x,
			k = g.y;
		if(f || a.scrollMode === mi) e.pb() && (c > b.width && (h = b.x + (e.x * b.width + e.offsetX) - (e.x * c - e.offsetX)), d > b.height && (k = b.y + (e.y * b.height + e.offsetY) - (e.y * d - e.offsetY))), e = a.ni, f = c - b.width, c < b.width + e.left + e.right ? (h = Math.min(h + c / 2, b.right + Math.max(f, e.right) - c / 2), h = Math.max(h, b.left - Math.max(f, e.left) + c / 2), h -= c / 2) : h > b.left ? h = b.left : h < b.right - c && (h = b.right - c), c = d - b.height, d < b.height + e.top + e.bottom ? (k = Math.min(k + d / 2, b.bottom + Math.max(c, e.bottom) - d / 2), k =
			Math.max(k, b.top - Math.max(c, e.top) + d / 2), k -= d / 2) : k > b.top ? k = b.top : k < b.bottom - d && (k = b.bottom - d);
		g.x = isFinite(h) ? h : -a.hb.left;
		g.y = isFinite(k) ? k : -a.hb.top;
		null !== a.positionComputation && (b = a.positionComputation(a, g), g.x = b.x, g.y = b.y);
		a.ra.freeze()
	}
	t.Vl = function(a, b) {
		if(b) {
			if(a = fg(this, a, function(a) {
					return a.part
				}, function(a) {
					return a.canSelect()
				}), a instanceof U) return a
		} else if(a = fg(this, a, function(a) {
				return a.part
			}), a instanceof U) return a;
		return null
	};
	t.Sb = function(a, b, c) {
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		Mi(this);
		for(var d = this.Ra.iteratorBackwards; d.next();) {
			var e = d.value;
			if(e.visible && (e = e.Sb(a, b, c), null !== e)) return e
		}
		return null
	};

	function fg(a, b, c, d) {
		void 0 === c && (c = null);
		void 0 === d && (d = null);
		Mi(a);
		for(a = a.Ra.iteratorBackwards; a.next();) {
			var e = a.value;
			if(e.visible && !e.isTemporary && (e = e.Sb(b, c, d), null !== e)) return e
		}
		return null
	}
	t.Uj = function(a, b, c, d) {
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		d instanceof E || d instanceof F || (d = new F);
		Mi(this);
		for(var e = this.Ra.iteratorBackwards; e.next();) {
			var f = e.value;
			f.visible && f.Uj(a, b, c, d)
		}
		return d
	};
	t.jx = function(a, b, c, d) {
		void 0 === b && (b = !1);
		void 0 === c && (c = !0);
		return Ui(this, a, function(a) {
			return a instanceof U && (!c || a.canSelect())
		}, b, d)
	};
	t.mg = function(a, b, c, d, e) {
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		void 0 === d && (d = !1);
		e instanceof E || e instanceof F || (e = new F);
		Mi(this);
		for(var f = this.Ra.iteratorBackwards; f.next();) {
			var g = f.value;
			g.visible && g.mg(a, b, c, d, e)
		}
		return e
	};

	function Ui(a, b, c, d, e) {
		var f = null;
		void 0 === f && (f = null);
		void 0 === c && (c = null);
		void 0 === d && (d = !1);
		e instanceof E || e instanceof F || (e = new F);
		Mi(a);
		for(a = a.Ra.iteratorBackwards; a.next();) {
			var g = a.value;
			g.visible && !g.isTemporary && g.mg(b, f, c, d, e)
		}
		return e
	}
	t.Ky = function(a, b, c, d, e) {
		void 0 === c && (c = !0);
		void 0 === d && (d = !0);
		return Vi(this, a, b, function(a) {
			return a instanceof U && (!d || a.canSelect())
		}, c, e)
	};
	t.ng = function(a, b, c, d, e, f) {
		void 0 === c && (c = null);
		void 0 === d && (d = null);
		void 0 === e && (e = !0);
		if(!1 !== e && !0 !== e) {
			if(e instanceof E || e instanceof F) f = e;
			e = !0
		}
		f instanceof E || f instanceof F || (f = new F);
		Mi(this);
		for(var g = this.Ra.iteratorBackwards; g.next();) {
			var h = g.value;
			h.visible && h.ng(a, b, c, d, e, f)
		}
		return f
	};

	function Vi(a, b, c, d, e, f) {
		var g = null;
		void 0 === g && (g = null);
		void 0 === d && (d = null);
		void 0 === e && (e = !0);
		if(!1 !== e && !0 !== e) {
			if(e instanceof E || e instanceof F) f = e;
			e = !0
		}
		f instanceof E || f instanceof F || (f = new F);
		Mi(a);
		for(a = a.Ra.iteratorBackwards; a.next();) {
			var h = a.value;
			h.visible && !h.isTemporary && h.ng(b, c, g, d, e, f)
		}
		return f
	}
	Q.prototype.acceptEvent = function(a) {
		return Wi(this, a, a instanceof MouseEvent)
	};

	function Wi(a, b, c) {
		var d = a.Xe;
		a.Xe = a.kj;
		a.kj = d;
		d.diagram = a;
		d.event = b;
		c ? Xi(a, b, d) : (d.viewPoint = a.Xe.viewPoint, d.documentPoint = a.Xe.documentPoint);
		a = 0;
		b.ctrlKey && (a += 1);
		b.altKey && (a += 2);
		b.shiftKey && (a += 4);
		b.metaKey && (a += 8);
		d.modifiers = a;
		d.button = b.button;
		void 0 === b.buttons || $a || (d.buttons = b.buttons);
		fb && 0 === b.button && b.ctrlKey && (d.button = 2);
		d.down = !1;
		d.up = !1;
		d.clickCount = 1;
		d.delta = 0;
		d.handled = !1;
		d.bubbles = !1;
		d.timestamp = b.timeStamp;
		d.isMultiTouch = !1;
		d.targetDiagram = Yi(b);
		d.targetObject = null;
		return d
	}

	function Yi(a) {
		var b = a.target.F;
		if(!b) {
			var c = a.path;
			c || "function" !== typeof a.composedPath || (c = a.composedPath());
			c && c[0] && (b = c[0].F)
		}
		return b ? b : null
	}

	function Zi(a, b, c, d) {
		var e = $i(a, b, !0, !1, !0, d);
		Xi(a, c, e);
		e.targetDiagram = Yi(b);
		e.targetObject = null;
		d || e.clone(a.Th);
		return e
	}

	function aj(a, b, c, d) {
		var e;
		d = $i(a, b, !1, !1, !1, d);
		null !== c ? ((e = w.document.elementFromPoint(c.clientX, c.clientY)) && e.F ? (b = c, c = e.F) : (b = b instanceof TouchEvent && void 0 !== b.targetTouches ? b.targetTouches[0] : b, c = a), d.targetDiagram = c, Xi(a, b, d)) : null !== a.Xe ? (d.documentPoint = a.Xe.documentPoint, d.viewPoint = a.Xe.viewPoint, d.targetDiagram = a.Xe.targetDiagram) : null !== a.Th && (d.documentPoint = a.Th.documentPoint, d.viewPoint = a.Th.viewPoint, d.targetDiagram = a.Th.targetDiagram);
		d.targetObject = null;
		return d
	}

	function $i(a, b, c, d, e, f) {
		var g = a.Xe;
		a.Xe = a.kj;
		a.kj = g;
		g.diagram = a;
		g.clickCount = 1;
		a = g.delta = 0;
		b.ctrlKey && (a += 1);
		b.altKey && (a += 2);
		b.shiftKey && (a += 4);
		b.metaKey && (a += 8);
		g.modifiers = a;
		g.button = 0;
		g.buttons = 1;
		g.event = b;
		g.timestamp = b.timeStamp;
		b instanceof PointerEvent && "touch" !== b.pointerType && (g.button = b.button, void 0 === b.buttons || $a || (g.buttons = b.buttons), fb && 0 === b.button && b.ctrlKey && (g.button = 2));
		g.down = c;
		g.up = d;
		g.handled = !1;
		g.bubbles = e;
		g.isMultiTouch = f;
		return g
	}

	function bj(a, b) {
		if(a.bubbles) return !0;
		void 0 !== b.stopPropagation && b.stopPropagation();
		b.preventDefault();
		b.cancelBubble = !0;
		return !1
	}
	Q.prototype.nz = function(a) {
		var b = this.F;
		if(!this.F.isEnabled) return !1;
		var c = Wi(b, a, !1);
		c.key = String.fromCharCode(a.which);
		c.down = !0;
		switch(a.which) {
			case 8:
				c.key = "Backspace";
				break;
			case 33:
				c.key = "PageUp";
				break;
			case 34:
				c.key = "PageDown";
				break;
			case 35:
				c.key = "End";
				break;
			case 36:
				c.key = "Home";
				break;
			case 37:
				c.key = "Left";
				break;
			case 38:
				c.key = "Up";
				break;
			case 39:
				c.key = "Right";
				break;
			case 40:
				c.key = "Down";
				break;
			case 45:
				c.key = "Insert";
				break;
			case 46:
				c.key = "Del";
				break;
			case 48:
				c.key = "0";
				break;
			case 187:
			case 61:
			case 107:
				c.key =
					"Add";
				break;
			case 189:
			case 173:
			case 109:
				c.key = "Subtract";
				break;
			case 27:
				c.key = "Esc"
		}
		b.doKeyDown();
		return bj(c, a)
	};
	Q.prototype.oz = function(a) {
		var b = this.F;
		if(!b.isEnabled) return !1;
		var c = Wi(b, a, !1);
		c.key = String.fromCharCode(a.which);
		c.up = !0;
		switch(a.which) {
			case 8:
				c.key = "Backspace";
				break;
			case 33:
				c.key = "PageUp";
				break;
			case 34:
				c.key = "PageDown";
				break;
			case 35:
				c.key = "End";
				break;
			case 36:
				c.key = "Home";
				break;
			case 37:
				c.key = "Left";
				break;
			case 38:
				c.key = "Up";
				break;
			case 39:
				c.key = "Right";
				break;
			case 40:
				c.key = "Down";
				break;
			case 45:
				c.key = "Insert";
				break;
			case 46:
				c.key = "Del"
		}
		b.doKeyUp();
		return bj(c, a)
	};
	Q.prototype.Ay = function(a) {
		var b = this.F;
		if(!b.isEnabled) return !1;
		var c = Wi(b, a, !0);
		null !== b.mouseEnter && b.mouseEnter(c);
		return bj(c, a)
	};
	Q.prototype.By = function(a) {
		var b = this.F;
		if(!b.isEnabled) return !1;
		var c = Wi(b, a, !0);
		null !== b.mouseLeave && b.mouseLeave(c);
		return bj(c, a)
	};
	Q.prototype.getMouse = function(a) {
		var b = this.Ea;
		if(null === b) return new G(0, 0);
		var c = b.getBoundingClientRect();
		b = a.clientX - this.xa / c.width * c.left;
		a = a.clientY - this.wa / c.height * c.top;
		return null !== this.wb ? Ub(new G(b, a), this.wb) : new G(b, a)
	};

	function Xi(a, b, c) {
		var d = a.Ea,
			e = a.xa,
			f = a.wa,
			g = 0,
			h = 0;
		null !== d && (d = d.getBoundingClientRect(), g = b.clientX - e / d.width * d.left, h = b.clientY - f / d.height * d.top);
		c.viewPoint.h(g, h);
		null !== a.wb ? (b = G.allocAt(g, h), a.wb.Wd(b), c.documentPoint.assign(b), G.free(b)) : c.documentPoint.h(g, h)
	}

	function We(a, b, c, d) {
		if(void 0 !== b.targetTouches) {
			if(2 > b.targetTouches.length) return;
			b = b.targetTouches[c]
		} else if(null !== a.nl[0]) b = a.nl[c];
		else return;
		c = a.Ea;
		null !== c && (c = c.getBoundingClientRect(), d.h(b.clientX - a.xa / c.width * c.left, b.clientY - a.wa / c.height * c.top))
	}
	t = Q.prototype;
	t.Xa = function() {
		this.Lg || (this.Lg = !0, this.cc(!0))
	};

	function $h(a) {
		a.Yb || Mi(a);
		a.Lg && Ri(a, a.computeBounds())
	}
	t.ik = function() {
		this.tb || this.Yb || (this.R(), cj(this), Li(this), this.Xa(), this.jd())
	};
	t.mz = function() {
		return this.ud
	};
	t.vy = function(a) {
		void 0 === a && (a = null);
		var b = this.animationManager,
			c = b.isEnabled;
		b.Yd();
		b.isEnabled = !1;
		ng(this);
		this.ge = !1;
		b.isEnabled = c;
		null !== a && va(a, 1)
	};
	t.cc = function(a) {
		void 0 === a && (a = !1);
		if(!0 !== this.ud && !(this.tb || !1 === a && this.Yb)) {
			this.ud = !0;
			var b = this;
			w.requestAnimationFrame(function() {
				b.ud && b.jd()
			})
		}
	};
	t.jd = function() {
		if(!this.Pk || this.ud) this.Pk && (this.Pk = !1), ng(this)
	};

	function dj(a, b) {
		a.animationManager.isAnimating || a.tb || !a.dj || Ji(a) || (b && Mi(a), Oi(a, !1))
	}

	function ng(a, b) {
		if(!a.Yb && (a.ud = !1, null !== a.Ia || a.yp.s())) {
			a.Yb = !0;
			var c = a.animationManager,
				d = a.gu;
			if(!c.isTicking && 0 !== d.length) {
				for(var e = d.j, f = e.length, g = 0; g < f; g++) {
					var h = e[g];
					ej(h, !1);
					h.o()
				}
				d.clear()
			}
			d = a.xw;
			0 < d.count && (d.each(function(a) {
				a.Vv()
			}), d.clear());
			e = d = !1;
			c.isAnimating && (e = !0, d = a.skipsUndoManager, a.skipsUndoManager = !0);
			c.ab || Qh(a);
			dj(a, !1);
			null !== a.Ib && (a.Ib.visible && !a.hr && (fj(a), a.hr = !0), !a.Ib.visible && a.hr && (a.hr = !1));
			Mi(a);
			f = !1;
			if(!a.ge || a.wg) a.ge ? gj(a, !a.mn) : (a.Aa("Initial Layout"), !1 === c.isEnabled && c.Yd(), gj(a, !1)), f = !0;
			a.mn = !1;
			Mi(a);
			a.ou || c.isAnimating || $h(a);
			dj(a, !0);
			f && (a.ge || hj(a), a.aa("LayoutCompleted"));
			Mi(a);
			f && !a.ge && (a.ge = !0, a.bb("Initial Layout"), a.skipsUndoManager || a.undoManager.clear(), va(function() {
				a.isModified = !1
			}, 1));
			a.Bu();
			Ph(c);
			b || a.jc(a.$c);
			e && (a.skipsUndoManager = d);
			a.Yb = !1
		}
	}

	function hj(a) {
		var b = a.Ra.j;
		a.ld(b, b.length, a);
		a.Yh !== ni ? a.scale = Pi(a, a.Yh) : a.Ti !== ni ? a.scale = Pi(a, a.Ti) : (b = a.initialScale, isFinite(b) && 0 < b && (a.scale = b));
		b = a.initialPosition;
		if(b.s()) a.position = b;
		else {
			b = G.alloc();
			b.Li(a.documentBounds, a.initialDocumentSpot);
			var c = a.viewportBounds;
			c = M.allocAt(0, 0, c.width, c.height);
			var d = G.alloc();
			d.Li(c, a.initialViewportSpot);
			d.h(b.x - d.x, b.y - d.y);
			a.position = d;
			M.free(c);
			G.free(d);
			G.free(b);
			cj(a);
			dj(a, !0);
			Oi(a, !0)
		}
		a.aa("InitialLayoutCompleted");
		fj(a)
	}

	function Mi(a) {
		if((a.Yb || !a.animationManager.isAnimating) && 0 !== a.Fd.count) {
			for(var b = 0; 23 > b; b++) {
				var c = a.Fd.iterator;
				if(null === c || 0 === a.Fd.count) break;
				a.Fd = new F;
				a.Vv(c, a.Fd)
			}
			a.nodes.each(function(a) {
				a instanceof V && 0 !== (a.Z & 65536) !== !1 && (a.Z = a.Z ^ 65536)
			})
		}
	}
	t.Vv = function(a, b) {
		for(a.reset(); a.next();) {
			var c = a.value;
			!c.ac() || c instanceof V || (c.Hi() ? (c.measure(Infinity, Infinity), c.arrange()) : b.add(c))
		}
		for(a.reset(); a.next();) c = a.value, c instanceof V && c.isVisible() && ij(this, c);
		for(a.reset(); a.next();) c = a.value, c instanceof S && c.isVisible() && (c.Hi() ? (c.measure(Infinity, Infinity), c.arrange()) : b.add(c));
		for(a.reset(); a.next();) c = a.value, c instanceof pf && c.isVisible() && (c.Hi() ? (c.measure(Infinity, Infinity), c.arrange()) : b.add(c))
	};

	function ij(a, b) {
		for(var c = La(), d = La(), e = b.memberParts; e.next();) {
			var f = e.value;
			f.isVisible() && (f instanceof V ? (jj(f) || kj(f) || lj(f)) && ij(a, f) : f instanceof S ? f.fromNode === b || f.toNode === b ? d.push(f) : c.push(f) : (f.measure(Infinity, Infinity), f.arrange()))
		}
		a = c.length;
		for(e = 0; e < a; e++) f = c[e], f.measure(Infinity, Infinity), f.arrange();
		Na(c);
		b.measure(Infinity, Infinity);
		b.arrange();
		a = d.length;
		for(b = 0; b < a; b++) c = d[b], c.measure(Infinity, Infinity), c.arrange();
		Na(d)
	}
	t.ld = function(a, b, c, d) {
		var e = this.animationManager;
		if(this.Zh || e.isAnimating)
			for(e = 0; e < b; e++) a[e].ld(c, d)
	};
	t.jc = function(a, b) {
		void 0 === b && (b = null);
		if(null !== this.Ia) {
			null === this.Ea && A("No canvas specified");
			var c = this.animationManager;
			if(!c.ab) {
				var d = new Date;
				mj(this);
				if("0" !== this.Ia.style.opacity) {
					var e = a !== this.$c,
						f = this.Ra.j,
						g = f.length,
						h = this;
					this.ld(f, g, h);
					if(e) a.Tc(!0), Li(this);
					else if(!this.qc && null === b && !c.isAnimating) return;
					g = this.ra;
					var k = this.Ca,
						l = Math.round(g.x * k) / k,
						m = Math.round(g.y * k) / k;
					c = this.wb;
					c.reset();
					1 !== k && c.scale(k);
					0 === g.x && 0 === g.y || c.translate(-l, -m);
					k = this.Jb;
					a.setTransform(1, 0,
						0, 1, 0, 0);
					a.scale(k, k);
					a.clearRect(0, 0, this.xa, this.wa);
					a.setTransform(1, 0, 0, 1, 0, 0);
					a.scale(k, k);
					a.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy);
					l = null !== b ? function(c) {
						var d = b;
						if(c.visible && 0 !== c.ob) {
							var e = c.Fa.j,
								f = e.length;
							if(0 !== f) {
								1 !== c.ob && (a.globalAlpha = c.ob);
								c = c.Co;
								c.length = 0;
								for(var g = h.scale, k = 0; k < f; k++) {
									var l = e[k];
									if(mg(l) && !d.contains(l)) {
										if(l instanceof S && (l.isOrthogonal && c.push(l), !1 === l.Mc)) continue;
										var m = l.actualBounds;
										1 < m.width * g || 1 < m.height * g ? l.jc(a, h) : fi(a, l)
									}
								}
								a.globalAlpha = 1
							}
						}
					} : function(b) {
						b.jc(a,
							h)
					};
					nj(this, a);
					g = f.length;
					for(m = 0; m < g; m++) a.setTransform(1, 0, 0, 1, 0, 0), a.scale(k, k), a.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy), l(f[m]);
					this.Xh ? oj(this.Xh, this) && this.Zq() : this.getMouse = function() {
						return new G(0, 0)
					};
					e ? (this.$c.Tc(!0), Li(this)) : this.qc = this.Zh = !1;
					d = +new Date - +d;
					null === this.ue && (this.Zt = d)
				}
			}
		}
	};

	function pj(a, b, c, d, e) {
		null === a.Ia && A("No div specified");
		null === a.Ea && A("No canvas specified");
		if(!a.animationManager.ab) {
			var f = a.$c;
			if(a.qc) {
				mj(a);
				var g = a.Jb;
				f.setTransform(1, 0, 0, 1, 0, 0);
				f.clearRect(0, 0, a.xa * g, a.wa * g);
				f.ot(!1);
				f.drawImage(a.Pt.Ha, 0 < d ? 0 : Math.round(-d), 0 < e ? 0 : Math.round(-e));
				e = a.ra;
				var h = a.Ca,
					k = Math.round(e.x * h) / h,
					l = Math.round(e.y * h) / h;
				d = a.wb;
				d.reset();
				1 !== h && d.scale(h);
				0 === e.x && 0 === e.y || d.translate(-k, -l);
				f.save();
				f.beginPath();
				e = c.length;
				for(h = 0; h < e; h++) k = c[h], 0 !== k.width && 0 !== k.height &&
					f.rect(Math.floor(k.x), Math.floor(k.y), Math.ceil(k.width), Math.ceil(k.height));
				f.clip();
				f.setTransform(1, 0, 0, 1, 0, 0);
				f.scale(g, g);
				f.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
				c = a.Ra.j;
				e = c.length;
				a.ld(c, e, a);
				nj(a, f);
				for(g = 0; g < e; g++) gi(c[g], f, a, b);
				f.restore();
				f.Tc(!0);
				a.Xh ? oj(a.Xh, a) && a.Zq() : a.getMouse = function() {
					return new G(0, 0)
				};
				a.Zh = !1;
				a.qc = !1;
				a.jt()
			}
		}
	}

	function qj(a, b, c, d, e, f, g, h, k, l) {
		if(null !== a.Ia) {
			null === a.Ea && A("No canvas specified");
			void 0 === g && (g = null);
			void 0 === h && (h = null);
			void 0 === k && (k = !1);
			void 0 === l && (l = !1);
			mj(a);
			a.$c.Tc(!0);
			Li(a);
			a.gj = !0;
			var m = a.Ca;
			a.Ca = e;
			var n = a.Ra.j,
				p = n.length;
			try {
				var q = new M(f.x, f.y, d.width / e, d.height / e),
					r = q.copy();
				r.Fp(c);
				fj(a, r);
				Mi(a);
				a.ld(n, p, a, q);
				var u = a.Jb;
				b.setTransform(1, 0, 0, 1, 0, 0);
				b.scale(u, u);
				b.clearRect(0, 0, d.width, d.height);
				null !== h && "" !== h && (b.fillStyle = h, b.fillRect(0, 0, d.width, d.height));
				var v = Yc.alloc();
				v.reset();
				v.translate(c.left, c.top);
				v.scale(e);
				0 === f.x && 0 === f.y || v.translate(-f.x, -f.y);
				b.setTransform(v.m11, v.m12, v.m21, v.m22, v.dx, v.dy);
				Yc.free(v);
				nj(a, b);
				if(null !== g) {
					var x = new F,
						y = g.iterator;
					for(y.reset(); y.next();) {
						var z = y.value;
						!1 === l && "Grid" === z.layer.name || null === z || x.add(z)
					}
					var B = function(c) {
						var d = k;
						if(c.visible && 0 !== c.ob && (void 0 === d && (d = !0), d || !c.isTemporary)) {
							d = c.Fa.j;
							var e = d.length;
							if(0 !== e) {
								1 !== c.ob && (b.globalAlpha = c.ob);
								c = c.Co;
								c.length = 0;
								for(var f = a.scale, g = 0; g < e; g++) {
									var h = d[g];
									if(mg(h) &&
										x.contains(h)) {
										if(h instanceof S && (h.isOrthogonal && c.push(h), !1 === h.Mc)) continue;
										var l = h.actualBounds;
										1 < l.width * f || 1 < l.height * f ? h.jc(b, a) : fi(b, h)
									}
								}
								b.globalAlpha = 1
							}
						}
					}
				} else if(!k && l) {
					var C = a.grid.part,
						I = C.layer;
					B = function(c) {
						c === I ? C.jc(b, a) : c.jc(b, a, k)
					}
				} else B = function(c) {
					c.jc(b, a, k)
				};
				for(c = 0; c < p; c++) B(n[c]);
				a.gj = !1;
				a.Xh ? oj(a.Xh, a) && a.Zq() : a.getMouse = function() {
					return new G(0, 0)
				}
			} finally {
				a.Ca = m, a.$c.Tc(!0), Li(a), a.ld(n, p, a), fj(a)
			}
		}
	}
	t.Ce = function(a) {
		return this.Xg[a]
	};
	t.Lx = function(a, b) {
		this.Xg[a] = b;
		this.ik()
	};
	t.vv = function() {
		this.Xg = new vb;
		this.Xg.drawShadows = !0;
		this.Xg.textGreeking = !0;
		this.Xg.viewportOptimizations = ib || ab || bb ? !1 : !0;
		this.Xg.temporaryPixelRatio = !0;
		this.Xg.pictureRatioOptimization = !0
	};

	function nj(a, b) {
		a = a.Xg;
		null !== a && (void 0 !== a.imageSmoothingEnabled && b.ot(!!a.imageSmoothingEnabled), a = a.defaultFont, void 0 !== a && null !== a && (b.font = a))
	}
	t.Xl = function(a) {
		return this.Wk[a]
	};
	t.Cz = function(a, b) {
		this.Wk[a] = b
	};
	t.uv = function() {
		this.Wk = new vb;
		this.Wk.extraTouchArea = 10;
		this.Wk.extraTouchThreshold = 10;
		this.Wk.hasGestureZoom = !0
	};
	t.Hv = function(a) {
		rj(this, a)
	};

	function rj(a, b) {
		var c = a instanceof Y,
			d = a instanceof Q,
			e;
		for(e in b) {
			"" === e && A("Setting properties requires non-empty property names");
			var f = a,
				g = e;
			if(c || d) {
				var h = e.indexOf(".");
				if(0 < h) {
					var k = e.substring(0, h);
					if(c) f = a.Ya(k);
					else if(f = a[k], void 0 === f || null === f) f = a.toolManager[k];
					Ea(f) ? g = e.substr(h + 1) : A("Unable to find object named: " + k + " in " + a.toString() + " when trying to set property: " + e)
				}
			}
			if("_" !== g[0] && !Sa(f, g))
				if(d && "ModelChanged" === g) {
					a.Rw(b[g]);
					continue
				} else if(d && "Changed" === g) {
				a.kh(b[g]);
				continue
			} else if(d &&
				Sa(a.toolManager, g)) f = a.toolManager;
			else if(d && sj(a, g)) {
				a.Gj(g, b[g]);
				continue
			} else if(a instanceof Z && "Changed" === g) {
				a.kh(b[g]);
				continue
			} else A('Trying to set undefined property "' + g + '" on object: ' + f.toString());
			f[g] = b[e];
			"_" === g[0] && f instanceof P && f.Nw(g)
		}
	}
	t.Bu = function() {
		if(0 === this.undoManager.transactionLevel && 0 !== this.Sh.count) {
			for(; 0 < this.Sh.count;) {
				var a = this.Sh;
				this.Sh = new Nb;
				for(a = a.iterator; a.next();) {
					var b = a.key;
					b.Tp(a.value);
					b.$b()
				}
			}
			this.R()
		}
	};
	t.R = function(a) {
		void 0 === a && (a = null);
		if(null === a) this.qc = !0, this.cc();
		else {
			var b = this.viewportBounds;
			null !== a && a.s() && b.Kc(a) && (this.qc = !0, this.cc())
		}
		this.aa("InvalidateDraw")
	};
	t.sx = function(a, b) {
		if(!0 !== this.qc) {
			this.qc = !0;
			var c = !0 === this.Ce("temporaryPixelRatio");
			if(!0 === this.Ce("viewportOptimizations") && this.scrollMode !== tj && this.ni.yi(0, 0, 0, 0) && b.width === a.width && b.height === a.height) {
				var d = this.scale,
					e = M.alloc(),
					f = Math.max(a.x, b.x),
					g = Math.max(a.y, b.y),
					h = Math.min(a.x + a.width, b.x + b.width),
					k = Math.min(a.y + a.height, b.y + b.height);
				e.x = f;
				e.y = g;
				e.width = Math.max(0, h - f) * d;
				e.height = Math.max(0, k - g) * d;
				if(0 < e.width && 0 < e.height) {
					if(!this.Yb && (this.ud = !1, null !== this.Ia)) {
						this.Yb = !0;
						this.Bu();
						this.documentBounds.s() || Ri(this, this.computeBounds());
						var l = this.Ea;
						if(null !== l) {
							h = this.Jb;
							f = this.xa * h;
							g = this.wa * h;
							k = this.scale * h;
							d = Math.round(Math.round(b.x * k) - Math.round(a.x * k));
							a = Math.round(Math.round(b.y * k) - Math.round(a.y * k));
							b = this.Pt;
							var m = this.sw;
							b.width !== f && (b.width = f);
							b.height !== g && (b.height = g);
							m.clearRect(0, 0, f, g);
							b = 190 * this.Jb;
							k = 70 * this.Jb;
							var n = Math.max(d, 0),
								p = Math.max(a, 0),
								q = Math.floor(f - n),
								r = Math.floor(g - p);
							m.ot(!1);
							m.drawImage(l.Ha, n, p, q, r, 0, 0, q, r);
							oj(this.Xh, this) && m.clearRect(0,
								0, b, k);
							l = La();
							m = La();
							r = Math.abs(d);
							q = Math.abs(a);
							var u = 0 === n ? 0 : f - r;
							n = G.allocAt(u, 0);
							r = G.allocAt(r + u, g);
							m.push(new M(Math.min(n.x, r.x), Math.min(n.y, r.y), Math.abs(n.x - r.x), Math.abs(n.y - r.y)));
							var v = this.wb;
							v.reset();
							v.scale(h, h);
							1 !== this.Ca && v.scale(this.Ca);
							h = this.ra;
							(0 !== h.x || 0 !== h.y) && isFinite(h.x) && isFinite(h.y) && v.translate(-h.x, -h.y);
							Ub(n, v);
							Ub(r, v);
							l.push(new M(Math.min(n.x, r.x), Math.min(n.y, r.y), Math.abs(n.x - r.x), Math.abs(n.y - r.y)));
							u = 0 === p ? 0 : g - q;
							n.h(0, u);
							r.h(f, q + u);
							m.push(new M(Math.min(n.x,
								r.x), Math.min(n.y, r.y), Math.abs(n.x - r.x), Math.abs(n.y - r.y)));
							Ub(n, v);
							Ub(r, v);
							l.push(new M(Math.min(n.x, r.x), Math.min(n.y, r.y), Math.abs(n.x - r.x), Math.abs(n.y - r.y)));
							oj(this.Xh, this) && (f = 0 < d ? 0 : -d, g = 0 < a ? 0 : -a, n.h(f, g), r.h(b + f, k + g), m.push(new M(Math.min(n.x, r.x), Math.min(n.y, r.y), Math.abs(n.x - r.x), Math.abs(n.y - r.y))), Ub(n, v), Ub(r, v), l.push(new M(Math.min(n.x, r.x), Math.min(n.y, r.y), Math.abs(n.x - r.x), Math.abs(n.y - r.y))));
							G.free(n);
							G.free(r);
							dj(this, !1);
							pj(this, l, m, d, a);
							Na(l);
							Na(m);
							this.Yb = !1
						}
					}
				} else this.jd();
				M.free(e);
				c && (this.ue = 1, this.jd(), Qf(this, !0))
			} else c ? (this.ue = 1, this.jd(), Qf(this, !0)) : this.jd()
		}
	};

	function cj(a) {
		!1 === a.dj && (a.dj = !0)
	}

	function Li(a) {
		!1 === a.Zh && (a.Zh = !0)
	}

	function mj(a) {
		!1 !== a.Hn && (a.Hn = !1, uj(a, a.xa, a.wa))
	}

	function uj(a, b, c) {
		var d = a.Ea,
			e = a.Jb,
			f = b * e;
		e = c * e;
		if(d.width !== f || d.height !== e) d.width = f, d.height = e, d.style.width = b + "px", d.style.height = c + "px", a.qc = !0, a.$c.Tc(!0)
	}

	function Ji(a) {
		var b = a.Ea;
		if(null === b) return !0;
		var c = a.Ia,
			d = a.xa,
			e = a.wa,
			f = a.Kw.copy();
		if(!f.s()) return !0;
		var g = !1,
			h = a.Wh ? a.Lb : 0,
			k = a.Kg ? a.Lb : 0,
			l = c.clientWidth || d + h;
		c = c.clientHeight || e + k;
		if(l !== d + h || c !== e + k) a.Wh = !1, a.Kg = !1, k = h = 0, a.xa = l, a.wa = c, g = a.Hn = !0;
		a.dj = !1;
		var m = a.documentBounds,
			n = 0,
			p = 0,
			q = 0,
			r = 0;
		l = f.width;
		c = f.height;
		var u = a.ni;
		a.contentAlignment.pb() ? (m.width > l && (n = u.left, p = u.right), m.height > c && (q = u.top, r = u.bottom)) : (n = u.left, p = u.right, q = u.top, r = u.bottom);
		u = m.width + n + p;
		var v = m.height + q + r;
		n = m.x - n;
		var x = f.x;
		p = m.right + p;
		var y = f.right + h;
		q = m.y - q;
		var z = f.y;
		r = m.bottom + r;
		var B = f.bottom + k,
			C = "1px",
			I = "1px";
		m = a.scale;
		var J = !(u < l + h),
			K = !(v < c + k);
		a.scrollMode === mi && (J || K) && (J && a.hasHorizontalScrollbar && a.allowHorizontalScroll && (C = 1, n + 1 < x && (C = Math.max((x - n) * m + a.xa, C)), p > y + 1 && (C = Math.max((p - y) * m + a.xa, C)), l + h + 1 < u && (C = Math.max((u - l + h) * m + a.xa, C)), C = C.toString() + "px"), K && a.hasVerticalScrollbar && a.allowVerticalScroll && (I = 1, q + 1 < z && (I = Math.max((z - q) * m + a.wa, I)), r > B + 1 && (I = Math.max((r - B) * m + a.wa, I)), c + k + 1 < v && (I = Math.max((v -
			c + k) * m + a.wa, I)), I = I.toString() + "px"));
		K = "1px" !== C;
		J = "1px" !== I;
		K && J || !K && !J || (J && (y -= a.Lb), K && (B -= a.Lb), u < l + h || !a.hasHorizontalScrollbar || !a.allowHorizontalScroll || (h = 1, n + 1 < x && (h = Math.max((x - n) * m + a.xa, h)), p > y + 1 && (h = Math.max((p - y) * m + a.xa, h)), l + 1 < u && (h = Math.max((u - l) * m + a.xa, h)), C = h.toString() + "px"), K = "1px" !== C, h = a.wa, K !== a.Kg && (h = K ? a.wa - a.Lb : a.wa + a.Lb), v < c + k || !a.hasVerticalScrollbar || !a.allowVerticalScroll || (k = 1, q + 1 < z && (k = Math.max((z - q) * m + h, k)), r > B + 1 && (k = Math.max((r - B) * m + h, k)), c + 1 < v && (k = Math.max((v -
			c) * m + h, k)), I = k.toString() + "px"), J = "1px" !== I);
		if(a.gs && K === a.Kg && J === a.Wh) return d === a.xa && e === a.wa || a.jd(), !1;
		K !== a.Kg && ("1px" === C ? a.wa = a.wa + a.Lb : a.wa = Math.max(a.wa - a.Lb, 1), g = !0);
		a.Kg = K;
		a.Zo.style.width = C;
		J !== a.Wh && ("1px" === I ? a.xa = a.xa + a.Lb : a.xa = Math.max(a.xa - a.Lb, 1), g = !0, a.Ln && (k = G.alloc(), J ? (b.style.left = a.Lb + "px", a.position = k.h(a.ra.x + a.Lb / a.scale, a.ra.y)) : (b.style.left = "0px", a.position = k.h(a.ra.x - a.Lb / a.scale, a.ra.y)), G.free(k)));
		a.Wh = J;
		a.Zo.style.height = I;
		a.lu = !0;
		g && (a.Hn = !0);
		b = a.ks;
		k = b.scrollLeft;
		a.hasHorizontalScrollbar && a.allowHorizontalScroll && (l + 1 < u ? k = (a.position.x - n) * m : n + 1 < x ? k = b.scrollWidth - b.clientWidth : p > y + 1 && (k = a.position.x * m));
		if(a.Ln) switch(a.ju) {
			case "negative":
				k = -(b.scrollWidth - k - b.clientWidth);
				break;
			case "reverse":
				k = b.scrollWidth - k - b.clientWidth
		}
		b.scrollLeft = k;
		a.hasVerticalScrollbar && a.allowVerticalScroll && (c + 1 < v ? b.scrollTop = (a.position.y - q) * m : q + 1 < z ? b.scrollTop = b.scrollHeight - b.clientHeight : r > B + 1 && (b.scrollTop = a.position.y * m));
		l = a.xa;
		c = a.wa;
		b.style.width = l + (a.Wh ? a.Lb : 0) + "px";
		b.style.height = c + (a.Kg ? a.Lb : 0) + "px";
		return d !== l || e !== c || a.animationManager.ab ? (a.$p(f, a.viewportBounds, m, g), !1) : !0
	}
	t.add = function(a) {
		var b = a.diagram;
		if(b !== this && (null !== b && A("Cannot add part " + a.toString() + " to " + this.toString() + ". It is already a part of " + b.toString()), b = this.Ul(a.layerName), null === b && (b = this.Ul("")), null === b && A('Cannot add a Part when unable find a Layer named "' + a.layerName + '" and there is no default Layer'), a.layer !== b)) {
			var c = b.Gi(99999999, a, a.diagram === this);
			0 <= c && this.cb(af, "parts", b, null, a, null, c);
			b.isTemporary || this.Xa();
			a.B(1);
			c = a.layerChanged;
			null !== c && c(a, null, b)
		}
	};
	t.Gi = function(a) {
		this.partManager.Gi(a);
		var b = this;
		vj(a, function(a) {
			wj(b, a)
		});
		(a instanceof pf || a instanceof V && null !== a.placeholder) && a.o();
		null !== a.data && vj(a, function(a) {
			xj(b.partManager, a)
		});
		!0 !== kj(a) && !0 !== lj(a) || this.Fd.add(a);
		yj(a, !0, this);
		zj(a) ? (a.actualBounds.s() && this.R(hi(a, a.actualBounds)), this.Xa()) : a.isVisible() && a.actualBounds.s() && this.R(hi(a, a.actualBounds));
		this.cc()
	};
	t.zc = function(a) {
		a.Lj();
		this.partManager.zc(a);
		var b = this;
		vj(a, function(a) {
			Aj(b, a)
		});
		null !== a.data && vj(a, function(a) {
			Bj(b.partManager, a)
		});
		this.Fd.remove(a);
		zj(a) ? (a.actualBounds.s() && this.R(hi(a, a.actualBounds)), this.Xa()) : a.isVisible() && a.actualBounds.s() && this.R(hi(a, a.actualBounds));
		this.cc()
	};
	t.remove = function(a) {
		Cj(this, a, !0)
	};

	function Cj(a, b, c) {
		var d = b.layer;
		null !== d && d.diagram === a && (b.isSelected = !1, b.isHighlighted = !1, b.B(2), c && b.Rj(), c = d.zc(-1, b, !1), 0 <= c && a.cb(ff, "parts", d, b, null, c, null), a = b.layerChanged, null !== a && a(b, d, null))
	}
	t.mt = function(a, b) {
		if(Ga(a))
			for(var c = a.length, d = 0; d < c; d++) {
				var e = a[d];
				b && !e.canDelete() || this.remove(e)
			} else
				for(c = new F, c.addAll(a), a = c.iterator; a.next();) c = a.value, b && !c.canDelete() || this.remove(c)
	};
	t.Qj = function(a, b, c) {
		return this.partManager.Qj(a, b, c)
	};
	Q.prototype.moveParts = function(a, b, c, d) {
		void 0 === d && (d = Dj(this));
		if(null !== this.toolManager) {
			var e = new Nb;
			if(null !== a)
				if(Ga(a))
					for(var f = 0; f < a.length; f++) Ej(this, e, a[f], c, d);
				else
					for(a = a.iterator; a.next();) Ej(this, e, a.value, c, d);
			else {
				for(a = this.parts; a.next();) Ej(this, e, a.value, c, d);
				for(a = this.nodes; a.next();) Ej(this, e, a.value, c, d);
				for(a = this.links; a.next();) Ej(this, e, a.value, c, d)
			}
			Yf(this, e, b, d, c)
		}
	};

	function Ej(a, b, c, d, e) {
		void 0 === e && (e = Dj(a));
		if(!b.contains(c) && (!d || c.canMove() || c.canCopy())) {
			var f = a.toolManager.findTool("Dragging");
			if(c instanceof W) {
				b.add(c, a.td(e, c, c.location));
				if(c instanceof V)
					for(var g = c.memberParts; g.next();) Ej(a, b, g.value, d, e);
				for(g = c.linksConnected; g.next();) {
					var h = g.value;
					if(!b.contains(h)) {
						var k = h.fromNode,
							l = h.toNode;
						null !== k && b.contains(k) && null !== l && b.contains(l) && Ej(a, b, h, d, e)
					}
				}
				if(f.dragsTree)
					for(c = c.Pu(); c.next();) Ej(a, b, c.value, d, e)
			} else if(c instanceof S)
				for(b.add(c,
						a.td(e, c)), c = c.labelNodes; c.next();) Ej(a, b, c.value, d, e);
			else c instanceof pf || b.add(c, a.td(e, c, c.location))
		}
	}

	function Yf(a, b, c, d, e) {
		if(null !== b && 0 !== b.count) {
			var f = G.alloc(),
				g = G.alloc();
			g.assign(c);
			isNaN(g.x) && (g.x = 0);
			isNaN(g.y) && (g.y = 0);
			(c = a.op) || Hf(a, b);
			for(var h = La(), k = La(), l = b.iterator, m = G.alloc(); l.next();) {
				var n = l.key;
				if(n.ac()) {
					var p = Fj(a, n, b);
					if(null !== p) h.push(new Gj(n, l.value, p));
					else if(!e || n.canMove()) p = l.value.point, f.assign(p), a.computeMove(n, f.add(g), d, b, m), n.location = m, l.value.shifted.assign(m.Ie(p))
				} else l.key instanceof S && k.push(l.na)
			}
			G.free(m);
			e = h.length;
			for(l = 0; l < e; l++) n = h[l], f.assign(n.info.point),
				n.node.location = f.add(n.cz.shifted);
			e = G.alloc();
			l = G.alloc();
			n = k.length;
			for(p = 0; p < n; p++) {
				var q = k[p],
					r = q.key;
				if(r instanceof S)
					if(r.suspendsRouting) {
						m = r.fromNode;
						var u = r.toNode;
						if(null !== a.draggedLink && d.dragsLink)
							if(u = q.value.point, null === r.dragComputation) b.add(r, a.td(d, r, g)), Wf(r, g.x - u.x, g.y - u.y);
							else {
								q = G.allocAt(0, 0);
								(m = r.i(0)) && m.s() && q.assign(m);
								var v = m = G.alloc().assign(q).add(g);
								d.isGridSnapEnabled && (d.isGridSnapRealtime || a.lastInput.up) && (v = G.alloc(), lh(a, r, m, v, d));
								m.assign(r.dragComputation(r,
									m, v)).Ie(q);
								b.add(r, a.td(d, r, m));
								Wf(r, m.x - u.x, m.y - u.y);
								G.free(q);
								G.free(m);
								v !== m && G.free(v)
							}
						else null !== m && (e.assign(m.location), v = b.J(m), null !== v && e.Ie(v.point)), null !== u && (l.assign(u.location), v = b.J(u), null !== v && l.Ie(v.point)), null !== m && null !== u ? e.Oa(l) ? (m = q.value.point, u = f, u.assign(e), u.Ie(m), b.add(r, a.td(d, r, e)), Wf(r, u.x, u.y)) : (r.suspendsRouting = !1, r.Pa()) : (q = q.value.point, m = null !== m ? e : null !== u ? l : g, b.add(r, a.td(d, r, m)), Wf(r, m.x - q.x, m.y - q.y))
					} else if(null === r.fromNode || null === r.toNode) m = q.value.point,
					b.add(r, a.td(d, r, g)), Wf(r, g.x - m.x, g.y - m.y)
			}
			G.free(f);
			G.free(g);
			G.free(e);
			G.free(l);
			Na(h);
			Na(k);
			c || (Mi(a), Mf(a, b))
		}
	}
	Q.prototype.computeMove = function(a, b, c, d, e) {
		void 0 === e && (e = new G);
		e.assign(b);
		if(null === a) return e;
		void 0 === d && (d = null);
		var f = b,
			g = c.isGridSnapEnabled;
		g && (c.isGridSnapRealtime || null === d || this.lastInput.up) && (f = G.alloc(), lh(this, a, b, f, c));
		c = null !== a.dragComputation ? a.dragComputation(a, b, f) : f;
		var h = a.minLocation;
		d = h.x;
		isNaN(d) && (d = g ? Math.round(a.location.x) : a.location.x);
		h = h.y;
		isNaN(h) && (h = g ? Math.round(a.location.y) : a.location.y);
		var k = a.maxLocation,
			l = k.x;
		isNaN(l) && (l = g ? Math.round(a.location.x) : a.location.x);
		k = k.y;
		isNaN(k) && (k = g ? Math.round(a.location.y) : a.location.y);
		e.h(Math.max(d, Math.min(c.x, l)), Math.max(h, Math.min(c.y, k)));
		f !== b && G.free(f);
		return e
	};

	function Dj(a) {
		var b = a.toolManager.findTool("Dragging");
		return null !== b ? b.dragOptions : a.Fk
	}

	function lh(a, b, c, d, e) {
		void 0 === e && (e = Dj(a));
		d.assign(c);
		if(null !== b) {
			var f = a.grid;
			b = e.gridSnapCellSize;
			a = b.width;
			b = b.height;
			var g = e.gridSnapOrigin,
				h = g.x;
			g = g.y;
			e = e.gridSnapCellSpot;
			if(null !== f) {
				var k = f.gridCellSize;
				isNaN(a) && (a = k.width);
				isNaN(b) && (b = k.height);
				f = f.gridOrigin;
				isNaN(h) && (h = f.x);
				isNaN(g) && (g = f.y)
			}
			f = G.allocAt(0, 0);
			f.kk(0, 0, a, b, e);
			H.Np(c.x, c.y, h + f.x, g + f.y, a, b, d);
			G.free(f)
		}
	}

	function Hf(a, b) {
		if(null !== b)
			for(a.op = !0, a = b.iterator; a.next();) b = a.key, b instanceof S && (b.suspendsRouting = !0)
	}

	function Mf(a, b) {
		if(null !== b) {
			for(b = b.iterator; b.next();) {
				var c = b.key;
				c instanceof S && (c.suspendsRouting = !1, Hj(c) && c.Pa())
			}
			a.op = !1
		}
	}

	function Fj(a, b, c) {
		b = b.containingGroup;
		if(null !== b) {
			a = Fj(a, b, c);
			if(null !== a) return a;
			a = c.J(b);
			if(null !== a) return a
		}
		return null
	}
	t = Q.prototype;
	t.td = function(a, b, c) {
		if(void 0 === c) return new Kf(bc);
		var d = a.isGridSnapEnabled;
		a.dz || null === b.containingGroup || (d = !1);
		return d ? new Kf(new G(Math.round(c.x), Math.round(c.y))) : new Kf(c.copy())
	};

	function Ij(a, b, c) {
		null !== b.diagram && b.diagram !== a && A("Cannot share a Layer with another Diagram: " + b + " of " + b.diagram);
		null === c ? null !== b.diagram && A("Cannot add an existing Layer to this Diagram again: " + b) : (c.diagram !== a && A("Existing Layer must be in this Diagram: " + c + " not in " + c.diagram), b === c && A("Cannot move a Layer before or after itself: " + b));
		if(b.diagram !== a) {
			b = b.name;
			a = a.Ra;
			c = a.count;
			for(var d = 0; d < c; d++) a.N(d).name === b && A("Cannot add Layer with the name '" + b + "'; a Layer with the same name is already present in this Diagram.")
		}
	}
	t.Kl = function(a) {
		Ij(this, a, null);
		a.rb(this);
		var b = this.Ra,
			c = b.count - 1;
		if(!a.isTemporary)
			for(; 0 <= c && b.N(c).isTemporary;) c--;
		b.Nb(c + 1, a);
		null !== this.Zb && this.cb(af, "layers", this, null, a, null, c + 1);
		this.R();
		this.Xa()
	};
	t.Ow = function(a, b) {
		Ij(this, a, b);
		a.rb(this);
		var c = this.Ra,
			d = c.indexOf(a);
		0 <= d && (c.remove(a), null !== this.Zb && this.cb(ff, "layers", this, a, null, d, null));
		var e = c.count,
			f;
		for(f = 0; f < e; f++)
			if(c.N(f) === b) {
				c.Nb(f, a);
				break
			}
		null !== this.Zb && this.cb(af, "layers", this, null, a, null, f);
		this.R();
		0 > d && this.Xa()
	};
	t.hy = function(a, b) {
		Ij(this, a, b);
		a.rb(this);
		var c = this.Ra,
			d = c.indexOf(a);
		0 <= d && (c.remove(a), null !== this.Zb && this.cb(ff, "layers", this, a, null, d, null));
		var e = c.count,
			f;
		for(f = 0; f < e; f++)
			if(c.N(f) === b) {
				c.Nb(f + 1, a);
				break
			}
		null !== this.Zb && this.cb(af, "layers", this, null, a, null, f + 1);
		this.R();
		0 > d && this.Xa()
	};
	t.xz = function(a) {
		a.diagram !== this && A("Cannot remove a Layer from another Diagram: " + a + " of " + a.diagram);
		if("" !== a.name) {
			var b = this.Ra,
				c = b.indexOf(a);
			if(b.remove(a)) {
				for(b = a.Fa.copy().iterator; b.next();) {
					var d = b.value,
						e = d.layerName;
					e !== a.name ? d.layerName = e : d.layerName = ""
				}
				null !== this.Zb && this.cb(ff, "layers", this, a, null, c, null);
				this.R();
				this.Xa()
			}
		}
	};
	t.Ul = function(a) {
		for(var b = this.layers; b.next();) {
			var c = b.value;
			if(c.name === a) return c
		}
		return null
	};
	t.Rw = function(a) {
		null === this.me && (this.me = new E);
		this.me.add(a);
		this.model.kh(a)
	};
	t.yz = function(a) {
		null !== this.me && (this.me.remove(a), 0 === this.me.count && (this.me = null));
		this.model.jk(a)
	};
	t.kh = function(a) {
		null === this.zf && (this.zf = new E);
		this.zf.add(a)
	};
	t.jk = function(a) {
		null !== this.zf && (this.zf.remove(a), 0 === this.zf.count && (this.zf = null))
	};
	t.Fs = function(a) {
		this.skipsUndoManager || this.undoManager.Vu(a);
		a.change !== $e && (this.isModified = !0);
		if(null !== this.zf)
			for(var b = this.zf, c = b.length, d = 0; d < c; d++) b.N(d)(a)
	};
	t.cb = function(a, b, c, d, e, f, g) {
		void 0 === f && (f = null);
		void 0 === g && (g = null);
		var h = new Ye;
		h.diagram = this;
		h.change = a;
		h.propertyName = b;
		h.object = c;
		h.oldValue = d;
		h.oldParam = f;
		h.newValue = e;
		h.newParam = g;
		this.Fs(h)
	};
	t.g = function(a, b, c, d, e) {
		this.cb(Ze, a, this, b, c, d, e)
	};
	t.Kj = function(a, b) {
		if(null !== a && a.diagram === this) {
			var c = this.skipsModelSourceBindings;
			try {
				this.skipsModelSourceBindings = !0;
				var d = a.change;
				if(d === Ze) {
					var e = a.object;
					Jj(e, a.propertyName, a.J(b));
					if(e instanceof P) {
						var f = e.part;
						null !== f && f.Ob()
					}
					this.isModified = !0
				} else if(d === af) {
					var g = a.object,
						h = a.newParam,
						k = a.newValue;
					if(g instanceof Y)
						if("number" === typeof h && k instanceof P) {
							b ? g.zc(h) : g.Nb(h, k);
							var l = g.part;
							null !== l && l.Ob()
						} else {
							if("number" === typeof h && k instanceof Kj)
								if(b) k.isRow ? g.sv(h) : g.pv(h);
								else {
									var m =
										k.isRow ? g.Ub(k.index) : g.Tb(k.index);
									m.Ql(k)
								}
						}
					else if(g instanceof ci) {
						var n = !0 === a.oldParam;
						"number" === typeof h && k instanceof U && (b ? (k.isSelected = !1, k.isHighlighted = !1, k.Ob(), g.zc(n ? h : -1, k, n)) : g.Gi(h, k, n))
					} else g instanceof Q ? "number" === typeof h && k instanceof ci && (b ? this.Ra.qb(h) : (k.rb(this), this.Ra.Nb(h, k))) : A("unknown ChangedEvent.Insert object: " + a.toString());
					this.isModified = !0
				} else if(d === ff) {
					var p = a.object,
						q = a.oldParam,
						r = a.oldValue;
					if(p instanceof Y) "number" === typeof q && r instanceof P ? b ? p.Nb(q,
						r) : p.zc(q) : "number" === typeof q && r instanceof Kj && (b ? (m = r.isRow ? p.Ub(r.index) : p.Tb(r.index), m.Ql(r)) : r.isRow ? p.sv(q) : p.pv(q));
					else if(p instanceof ci) {
						var u = !0 === a.newParam;
						"number" === typeof q && r instanceof U && (b ? 0 > p.Fa.indexOf(r) && p.Gi(q, r, u) : (r.isSelected = !1, r.isHighlighted = !1, r.Ob(), p.zc(u ? q : -1, r, u)))
					} else p instanceof Q ? "number" === typeof q && r instanceof ci && (b ? (r.rb(this), this.Ra.Nb(q, r)) : this.Ra.qb(q)) : A("unknown ChangedEvent.Remove object: " + a.toString());
					this.isModified = !0
				} else d !== $e && A("unknown ChangedEvent: " +
					a.toString())
			} finally {
				this.skipsModelSourceBindings = c
			}
		}
	};
	t.Aa = function(a) {
		return this.undoManager.Aa(a)
	};
	t.bb = function(a) {
		return this.undoManager.bb(a)
	};
	t.tf = function() {
		return this.undoManager.tf()
	};
	Q.prototype.commit = function(a, b) {
		void 0 === b && (b = "");
		var c = this.skipsUndoManager;
		null === b && (this.skipsUndoManager = !0, b = "");
		this.undoManager.Aa(b);
		var d = !1;
		try {
			a(this), d = !0
		} finally {
			d ? this.undoManager.bb(b) : this.undoManager.tf(), this.skipsUndoManager = c
		}
	};
	Q.prototype.updateAllTargetBindings = function(a) {
		this.partManager.updateAllTargetBindings(a)
	};
	t = Q.prototype;
	t.qq = function() {
		this.partManager.qq()
	};

	function Lj(a, b, c) {
		var d = a.animationManager;
		if(a.tb || a.Yb) a.Ca = c, d.ab && bi(d, b, a.Ca);
		else if(a.tb = !0, null === a.Ea) a.Ca = c;
		else {
			var e = a.viewportBounds.copy(),
				f = a.xa,
				g = a.wa;
			e.width = a.xa / b;
			e.height = a.wa / b;
			var h = a.zoomPoint.x,
				k = a.zoomPoint.y,
				l = a.contentAlignment;
			isNaN(h) && (l.qf() ? l.pf(qd) ? h = 0 : l.pf(rd) && (h = f - 1) : h = l.pb() ? l.x * (f - 1) : f / 2);
			isNaN(k) && (l.qf() ? l.pf(pd) ? k = 0 : l.pf(sd) && (k = g - 1) : k = l.pb() ? l.y * (g - 1) : g / 2);
			null !== a.scaleComputation && (c = a.scaleComputation(a, c));
			c < a.minScale && (c = a.minScale);
			c > a.maxScale && (c =
				a.maxScale);
			f = G.allocAt(a.ra.x + h / b - h / c, a.ra.y + k / b - k / c);
			a.position = f;
			G.free(f);
			a.Ca = c;
			a.$p(e, a.viewportBounds, b, !1);
			a.tb = !1;
			Oi(a, !1);
			d.ab && bi(d, b, a.Ca);
			a.R();
			cj(a)
		}
	}
	t.$p = function(a, b, c, d) {
		if(!a.A(b)) {
			void 0 === d && (d = !1);
			d || cj(this);
			Li(this);
			var e = this.layout;
			null === e || !e.isViewportSized || this.autoScale !== ni || d || a.width === b.width && a.height === b.height || e.B();
			e = this.currentTool;
			!0 === this.he && e instanceof Va && (this.lastInput.documentPoint = this.tt(this.lastInput.viewPoint), tf(e, this));
			this.tb || this.sx(a, b);
			fj(this);
			this.we.scale = c;
			this.we.position.x = a.x;
			this.we.position.y = a.y;
			this.we.bounds.assign(a);
			this.we.wx = d;
			this.aa("ViewportBoundsChanged", this.we, a);
			this.isVirtualized &&
				this.links.each(function(a) {
					a.isAvoiding && a.actualBounds.Kc(b) && a.Pa()
				})
		}
	};

	function fj(a, b) {
		void 0 === b && (b = null);
		var c = a.Ib;
		if(null !== c && c.visible) {
			for(var d = L.alloc(), e = 1, f = 1, g = c.W.j, h = g.length, k = 0; k < h; k++) {
				var l = g[k],
					m = l.interval;
				2 > m || (Mj(l.figure) ? f = f * m / H.kx(f, m) : e = e * m / H.kx(e, m))
			}
			g = c.gridCellSize;
			d.h(f * g.width, e * g.height);
			if(null !== b) e = b.width, f = b.height, a = b.x, g = b.y;
			else {
				b = M.alloc();
				a = a.viewportBounds;
				b.h(a.x, a.y, a.width, a.height);
				if(!b.s()) {
					M.free(b);
					return
				}
				e = b.width;
				f = b.height;
				a = b.x;
				g = b.y;
				M.free(b)
			}
			c.width = e + 2 * d.width;
			c.height = f + 2 * d.height;
			b = G.alloc();
			H.Np(a, g, 0, 0,
				d.width, d.height, b);
			b.offset(-d.width, -d.height);
			L.free(d);
			c.part.location = b;
			G.free(b)
		}
	}
	t.Gs = function() {
		var a = 0 < this.selection.count;
		a && this.aa("ChangingSelection", this.selection);
		Ef(this);
		a && this.aa("ChangedSelection", this.selection)
	};

	function Ef(a) {
		a = a.selection;
		if(0 < a.count) {
			for(var b = a.La(), c = b.length, d = 0; d < c; d++) b[d].isSelected = !1;
			a.ha();
			a.clear();
			a.freeze()
		}
	}
	t.select = function(a) {
		null !== a && a.layer.diagram === this && (!a.isSelected || 1 < this.selection.count) && (this.aa("ChangingSelection", this.selection), Ef(this), a.isSelected = !0, this.aa("ChangedSelection", this.selection))
	};
	t.yv = function(a) {
		this.aa("ChangingSelection", this.selection);
		Ef(this);
		if(Ga(a))
			for(var b = a.length, c = 0; c < b; c++) {
				var d = a[c];
				d instanceof U || A("Diagram.selectCollection given something that is not a Part: " + d);
				d.isSelected = !0
			} else
				for(a = a.iterator; a.next();) b = a.value, b instanceof U || A("Diagram.selectCollection given something that is not a Part: " + b), b.isSelected = !0;
		this.aa("ChangedSelection", this.selection)
	};
	t.Uw = function() {
		var a = this.highlighteds;
		if(0 < a.count) {
			for(var b = a.La(), c = b.length, d = 0; d < c; d++) b[d].isHighlighted = !1;
			a.ha();
			a.clear();
			a.freeze()
		}
	};
	t.fz = function(a) {
		null !== a && a.layer.diagram === this && (!a.isHighlighted || 1 < this.highlighteds.count) && (this.Uw(), a.isHighlighted = !0)
	};
	t.gz = function(a) {
		a = (new F).addAll(a);
		for(var b = this.highlighteds.copy().cq(a).iterator; b.next();) b.value.isHighlighted = !1;
		for(a = a.iterator; a.next();) b = a.value, b instanceof U || A("Diagram.highlightCollection given something that is not a Part: " + b), b.isHighlighted = !0
	};
	t.scroll = function(a, b, c) {
		void 0 === c && (c = 1);
		var d = "up" === b || "down" === b,
			e = 0;
		if("pixel" === a) e = c;
		else if("line" === a) e = c * (d ? this.scrollVerticalLineChange : this.scrollHorizontalLineChange);
		else if("page" === a) a = d ? this.viewportBounds.height : this.viewportBounds.width, a *= this.scale, 0 !== a && (e = c * Math.max(a - (d ? this.scrollVerticalLineChange : this.scrollHorizontalLineChange), 0));
		else {
			if("document" === a) {
				e = this.documentBounds;
				c = this.viewportBounds;
				d = G.alloc();
				"up" === b ? this.position = d.h(c.x, e.y) : "left" === b ? this.position =
					d.h(e.x, c.y) : "down" === b ? this.position = d.h(c.x, e.bottom - c.height) : "right" === b && (this.position = d.h(e.right - c.width, c.y));
				G.free(d);
				return
			}
			A("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: " + a)
		}
		e /= this.scale;
		c = this.position.copy();
		"up" === b ? c.y = this.position.y - e : "down" === b ? c.y = this.position.y + e : "left" === b ? c.x = this.position.x - e : "right" === b ? c.x = this.position.x + e : A("scrolling direction must be 'up', 'down', 'left', or 'right', not: " + b);
		this.position = c
	};
	t.xv = function(a) {
		var b = this.viewportBounds;
		b.kf(a) || (a = a.center, a.x -= b.width / 2, a.y -= b.height / 2, this.position = a)
	};
	t.Au = function(a) {
		var b = this.viewportBounds;
		a = a.center;
		a.x -= b.width / 2;
		a.y -= b.height / 2;
		this.position = a
	};
	t.st = function(a) {
		var b = this.wb;
		b.reset();
		1 !== this.Ca && b.scale(this.Ca);
		var c = this.ra;
		(0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate(-c.x, -c.y);
		return a.copy().transform(this.wb)
	};
	t.Jz = function(a) {
		var b = this.wb,
			c = a.x,
			d = a.y,
			e = c + a.width,
			f = d + a.height,
			g = b.m11,
			h = b.m12,
			k = b.m21,
			l = b.m22,
			m = b.dx,
			n = b.dy,
			p = c * g + d * k + m;
		b = c * h + d * l + n;
		var q = e * g + d * k + m;
		a = e * h + d * l + n;
		d = c * g + f * k + m;
		c = c * h + f * l + n;
		g = e * g + f * k + m;
		e = e * h + f * l + n;
		f = Math.min(p, q);
		p = Math.max(p, q);
		q = Math.min(b, a);
		b = Math.max(b, a);
		f = Math.min(f, d);
		p = Math.max(p, d);
		q = Math.min(q, c);
		b = Math.max(b, c);
		f = Math.min(f, g);
		p = Math.max(p, g);
		q = Math.min(q, e);
		b = Math.max(b, e);
		return new M(f, q, p - f, b - q)
	};
	t.tt = function(a) {
		var b = this.wb;
		b.reset();
		1 !== this.Ca && b.scale(this.Ca);
		var c = this.ra;
		(0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate(-c.x, -c.y);
		return Ub(a.copy(), this.wb)
	};

	function Nj(a) {
		var b = a.isModified;
		a.Lw !== b && (a.Lw = b, a.aa("Modified"))
	}

	function Oj(a) {
		a = qi.get(a);
		return null !== a ? new a : new ri
	}
	Q.prototype.doModelChanged = function(a) {
		if(a.model === this.model) {
			var b = a.change,
				c = a.propertyName;
			if(b === $e && "S" === c[0])
				if("StartingFirstTransaction" === c) {
					var d = this;
					a = this.toolManager;
					a.mouseDownTools.each(function(a) {
						a.rb(d)
					});
					a.mouseMoveTools.each(function(a) {
						a.rb(d)
					});
					a.mouseUpTools.each(function(a) {
						a.rb(d)
					});
					this.Yb || this.ge || (this.mn = !0, this.Pk && (this.ud = !0))
				} else "StartingUndo" === c || "StartingRedo" === c ? (a = this.animationManager, a.isAnimating && !this.skipsUndoManager && a.Yd(), this.aa("ChangingSelection",
					this.selection)) : "StartedTransaction" === c && (a = this.animationManager, a.isAnimating && !this.skipsUndoManager && a.Yd());
			else if(this.ca) {
				this.ca = !1;
				try {
					if("" === a.modelChange && b === $e) {
						if("FinishedUndo" === c || "FinishedRedo" === c) this.aa("ChangedSelection", this.selection), Mi(this);
						var e = this.animationManager;
						"RolledBackTransaction" === c && e.Yd();
						this.mn = !0;
						this.jd();
						0 === this.undoManager.transactionLevel && Ph(e);
						"CommittedTransaction" === c && this.undoManager.Yt && (this.fe = Math.min(this.fe, this.undoManager.historyIndex -
							1));
						var f = a.isTransactionFinished;
						f && (Nj(this), this.bt.clear());
						if(!this.eu && f) {
							this.eu = !0;
							var g = this;
							va(function() {
								g.currentTool.standardMouseOver();
								g.eu = !1
							}, 10)
						}
					}
				} finally {
					this.ca = !0
				}
			}
		}
	};

	function wj(a, b) {
		b = b.W.j;
		for(var c = b.length, d = 0; d < c; d++) Pj(a, b[d])
	}

	function Pj(a, b) {
		if(b instanceof Qj) {
			var c = b.element;
			if(null !== c && c instanceof HTMLImageElement) {
				var d = b.Fg;
				null !== d && (d.Rk instanceof Event && null !== b.Ec && b.Ec(b, d.Rk), !0 === d.Jn && (null !== b.df && b.df(b, d.ku), null !== b.diagram && b.diagram.gu.add(b)));
				c = c.src;
				d = a.wj.J(c);
				if(null === d) d = [], d.push(b), a.wj.add(c, d);
				else {
					for(a = 0; a < d.length; a++)
						if(d[a] === b) return;
					d.push(b)
				}
			}
		}
	}

	function Aj(a, b) {
		b = b.W.j;
		for(var c = b.length, d = 0; d < c; d++) Rj(a, b[d])
	}

	function Rj(a, b) {
		if(b instanceof Qj) {
			var c = b.element;
			if(null !== c && c instanceof HTMLImageElement) {
				c = c.src;
				var d = a.wj.J(c);
				if(null !== d)
					for(var e = 0; e < d.length; e++)
						if(d[e] === b) {
							d.splice(e, 1);
							0 === d.length && (a.wj.remove(c), Sj(c));
							break
						}
			}
		}
	}
	Q.prototype.xd = function() {
		this.partManager.xd()
	};
	Q.prototype.Dp = function(a, b) {
		this.Cq.Dp(a, b)
	};
	Q.prototype.Ep = function(a, b) {
		this.Cq.Ep(a, b)
	};
	Q.prototype.findPartForKey = function(a) {
		return this.partManager.findPartForKey(a)
	};
	t = Q.prototype;
	t.Mb = function(a) {
		return this.partManager.Mb(a)
	};
	t.wc = function(a) {
		return this.partManager.wc(a)
	};
	t.Ai = function(a) {
		return this.partManager.Ai(a)
	};
	t.Ic = function(a) {
		return this.partManager.Ic(a)
	};
	t.Ps = function(a) {
		for(var b = [], c = 0; c < arguments.length; ++c) b[c] = arguments[c];
		return this.partManager.Ps.apply(this.partManager, b instanceof Array ? b : ca(ba(b)))
	};
	t.Os = function(a) {
		for(var b = [], c = 0; c < arguments.length; ++c) b[c] = arguments[c];
		return this.partManager.Os.apply(this.partManager, b instanceof Array ? b : ca(ba(b)))
	};

	function Ri(a, b) {
		a.Lg = !1;
		var c = a.nn;
		c.A(b) || (a.nn = b.freeze(), Oi(a, !1), a.aa("DocumentBoundsChanged", null, c.copy()), cj(a))
	}
	t.Oy = function() {
		for(var a = new F, b = this.nodes; b.next();) {
			var c = b.value;
			c.isTopLevel && a.add(c)
		}
		for(b = this.links; b.next();) c = b.value, c.isTopLevel && a.add(c);
		return a.iterator
	};
	t.Ny = function() {
		return this.ui.iterator
	};
	t.qz = function(a) {
		Mi(this);
		a && Tj(this, !0);
		gj(this, !1)
	};

	function Tj(a, b) {
		for(var c = a.ui.iterator; c.next();) Uj(a, c.value, b);
		null !== a.layout && (b ? a.layout.isValidLayout = !1 : a.layout.B())
	}

	function Uj(a, b, c) {
		if(null !== b) {
			for(var d = b.jl.iterator; d.next();) Uj(a, d.value, c);
			null !== b.layout && (c ? b.layout.isValidLayout = !1 : b.layout.B())
		}
	}

	function gj(a, b) {
		if(a.wg && !a.Lt) {
			var c = a.ca;
			a.ca = !0;
			var d = a.undoManager.transactionLevel,
				e = a.layout;
			try {
				0 === d && a.Aa("Layout");
				var f = a.animationManager;
				1 >= d && !f.isAnimating && !f.ab && (b || f.Ji("Layout"));
				a.wg = !1;
				for(var g = a.ui.iterator; g.next();) Vj(a, g.value, b, d);
				e.isValidLayout || (!b || e.isRealtime || null === e.isRealtime || 0 === d ? (e.doLayout(a), Mi(a), e.isValidLayout = !0) : a.wg = !0)
			} finally {
				0 === d && a.bb("Layout"), a.wg = !e.isValidLayout, a.ca = c
			}
		}
	}

	function Vj(a, b, c, d) {
		if(null !== b) {
			for(var e = b.jl.iterator; e.next();) Vj(a, e.value, c, d);
			e = b.layout;
			null === e || e.isValidLayout || (!c || e.isRealtime || 0 === d ? (b.gk = !b.location.s(), e.doLayout(b), b.B(32), ij(a, b), e.isValidLayout = !0) : a.wg = !0)
		}
	}
	t.Uy = function() {
		for(var a = new E, b = this.nodes; b.next();) {
			var c = b.value;
			c.isTopLevel && null === c.Bi() && a.add(c)
		}
		return a.iterator
	};

	function oi(a) {
		function b(a) {
			var b = a.toLowerCase(),
				e = new E;
			c.add(a, e);
			c.add(b, e);
			d.add(a, a);
			d.add(b, a)
		}
		var c = new Nb,
			d = new Nb;
		b("AnimationStarting");
		b("AnimationFinished");
		b("BackgroundSingleClicked");
		b("BackgroundDoubleClicked");
		b("BackgroundContextClicked");
		b("ClipboardChanged");
		b("ClipboardPasted");
		b("DocumentBoundsChanged");
		b("ExternalObjectsDropped");
		b("InitialLayoutCompleted");
		b("LayoutCompleted");
		b("LinkDrawn");
		b("LinkRelinked");
		b("LinkReshaped");
		b("Modified");
		b("ObjectSingleClicked");
		b("ObjectDoubleClicked");
		b("ObjectContextClicked");
		b("PartCreated");
		b("PartResized");
		b("PartRotated");
		b("SelectionMoved");
		b("SelectionCopied");
		b("SelectionDeleting");
		b("SelectionDeleted");
		b("SelectionGrouped");
		b("SelectionUngrouped");
		b("ChangingSelection");
		b("ChangedSelection");
		b("SubGraphCollapsed");
		b("SubGraphExpanded");
		b("TextEdited");
		b("TreeCollapsed");
		b("TreeExpanded");
		b("ViewportBoundsChanged");
		b("InvalidateDraw");
		a.Nt = c;
		a.Mt = d
	}

	function sj(a, b) {
		var c = a.Mt.J(b);
		return null !== c ? c : a.Mt.J(b.toLowerCase())
	}

	function Wj(a, b) {
		var c = a.Nt.J(b);
		if(null !== c) return c;
		c = a.Nt.J(b.toLowerCase());
		if(null !== c) return c;
		A("Unknown DiagramEvent name: " + b);
		return null
	}
	t.Gj = function(a, b) {
		a = Wj(this, a);
		null !== a && a.add(b)
	};
	t.hm = function(a, b) {
		a = Wj(this, a);
		null !== a && a.remove(b)
	};
	t.aa = function(a, b, c) {
		var d = Wj(this, a),
			e = new Xe;
		e.diagram = this;
		a = sj(this, a);
		null !== a && (e.name = a);
		void 0 !== b && (e.subject = b);
		void 0 !== c && (e.parameter = c);
		b = d.length;
		if(1 === b) d.N(0)(e);
		else if(0 !== b)
			for(d = d.La(), c = 0; c < b; c++)(0, d[c])(e)
	};

	function Xj(a) {
		if(a.animationManager.isAnimating) return !1;
		var b = a.currentTool;
		return b === a.toolManager.findTool("Dragging") ? !a.op || b.isComplexRoutingRealtime : !0
	}
	t.Zj = function(a, b) {
		void 0 === b && (b = null);
		return Yj(this, !1, null, b).Zj(a.x, a.y, a.width, a.height)
	};
	Q.prototype.computeOccupiedArea = function() {
		return this.isVirtualized ? this.viewportBounds.copy() : this.Lg ? Ni(this) : this.documentBounds.copy()
	};

	function Yj(a, b, c, d) {
		null === a.Qb && (a.Qb = new Zj);
		if(a.Qb.Ys || a.Qb.group !== c || a.Qb.Mx !== d) {
			if(null === c) {
				b = a.computeOccupiedArea();
				b.gd(100, 100);
				a.Qb.initialize(b);
				b = M.alloc();
				for(var e = a.nodes; e.next();) {
					var f = e.value,
						g = f.layer;
					null !== g && g.visible && !g.isTemporary && ek(a, f, d, b)
				}
				M.free(b)
			} else {
				0 < c.memberParts.count && (b = a.computePartsBounds(c.memberParts, !1), b.gd(20, 20), a.Qb.initialize(b));
				b = M.alloc();
				for(e = c.memberParts; e.next();) f = e.value, f instanceof W && ek(a, f, d, b);
				M.free(b)
			}
			a.Qb.group = c;
			a.Qb.Mx = d;
			a.Qb.Ys = !1
		} else b && ik(a.Qb);
		return a.Qb
	}

	function ek(a, b, c, d) {
		if(b !== c)
			if(b.isVisible() && b.avoidable && !b.isLinkLabel) {
				var e = b.getAvoidableRect(d),
					f = a.Qb.Pl;
				c = a.Qb.Ol;
				d = e.x + e.width;
				b = e.y + e.height;
				for(var g = e.x; g < d; g += f) {
					for(var h = e.y; h < b; h += c) jk(a.Qb, g, h);
					jk(a.Qb, g, b)
				}
				for(e = e.y; e < b; e += c) jk(a.Qb, d, e);
				jk(a.Qb, d, b)
			} else if(b instanceof V)
			for(b = b.memberParts; b.next();) e = b.value, e instanceof W && ek(a, e, c, d)
	}

	function kk(a, b) {
		null !== a.Qb && !a.Qb.Ys && (void 0 === b && (b = null), null === b || b.avoidable && !b.isLinkLabel) && (a.Qb.Ys = !0)
	}
	t = Q.prototype;
	t.Ks = function(a) {
		this.Eq.assign(a);
		lk(this, this.Eq).Oa(this.position) ? this.uf() : mk(this)
	};

	function mk(a) {
		-1 === a.vk && (a.vk = va(function() {
			if(-1 !== a.vk && (a.uf(), null !== a.lastInput.event)) {
				var b = lk(a, a.Eq);
				b.Oa(a.position) || (a.position = b, a.lastInput.documentPoint = a.tt(a.Eq), a.doMouseMove(), a.Lg = !0, Ri(a, a.documentBounds.copy().Wc(a.computeBounds())), a.qc = !0, a.jd(), mk(a))
			}
		}, a.Lm))
	}
	t.uf = function() {
		-1 !== this.vk && (w.clearTimeout(this.vk), this.vk = -1)
	};

	function lk(a, b) {
		var c = a.position,
			d = a.Mm;
		if(0 >= d.top && 0 >= d.left && 0 >= d.right && 0 >= d.bottom) return c;
		var e = a.viewportBounds,
			f = a.scale;
		e = M.allocAt(0, 0, e.width * f, e.height * f);
		var g = G.allocAt(0, 0);
		if(b.x >= e.x && b.x < e.x + d.left) {
			var h = Math.max(a.scrollHorizontalLineChange, 1);
			h |= 0;
			g.x -= h;
			b.x < e.x + d.left / 2 && (g.x -= h);
			b.x < e.x + d.left / 4 && (g.x -= 4 * h)
		} else b.x <= e.x + e.width && b.x > e.x + e.width - d.right && (h = Math.max(a.scrollHorizontalLineChange, 1), h |= 0, g.x += h, b.x > e.x + e.width - d.right / 2 && (g.x += h), b.x > e.x + e.width - d.right / 4 &&
			(g.x += 4 * h));
		b.y >= e.y && b.y < e.y + d.top ? (a = Math.max(a.scrollVerticalLineChange, 1), a |= 0, g.y -= a, b.y < e.y + d.top / 2 && (g.y -= a), b.y < e.y + d.top / 4 && (g.y -= 4 * a)) : b.y <= e.y + e.height && b.y > e.y + e.height - d.bottom && (a = Math.max(a.scrollVerticalLineChange, 1), a |= 0, g.y += a, b.y > e.y + e.height - d.bottom / 2 && (g.y += a), b.y > e.y + e.height - d.bottom / 4 && (g.y += 4 * a));
		g.Oa(bc) || (c = new G(c.x + g.x / f, c.y + g.y / f));
		M.free(e);
		G.free(g);
		return c
	}
	t.dt = function() {
		return null
	};
	t.dv = function() {
		return null
	};
	t.$y = function() {
		return this.No.J("SVG")
	};
	t.Sw = function(a, b) {
		this.No.add(a, b)
	};
	t.Xu = function() {};
	t.sz = function(a) {
		if(!Ya) return null;
		void 0 === a && (a = new vb);
		a.returnType = "Image";
		return this.xx(a)
	};
	t.xx = function(a) {
		function b() {
			var k = +new Date;
			d = !0;
			for(e.reset(); e.next();)
				if(!e.value[0].fl) {
					d = !1;
					break
				}
			d || k - g > f ? nk(h, a, c) : w.requestAnimationFrame(b)
		}
		void 0 === a && (a = new vb);
		for(var c = a.callback, d = !0, e = this.wj.iterator; e.next();)
			if(!e.value[0].fl) {
				d = !1;
				break
			}
		if("function" !== typeof c || d) return nk(this, a, c);
		var f = a.callbackTimeout || 300,
			g = +new Date,
			h = this;
		w.requestAnimationFrame(function() {
			b()
		});
		return null
	};

	function nk(a, b, c) {
		var d = ok(a, b);
		a = d.V.canvas;
		var e = null;
		if(null !== a) switch(e = b.returnType, void 0 === e ? e = "string" : e = e.toLowerCase(), e) {
			case "imagedata":
				e = d.getImageData(0, 0, a.width, a.height);
				break;
			case "image":
				d = (b.document || document).createElement("img");
				d.src = a.toDataURL(b.type, b.details);
				e = d;
				break;
			case "blob":
				a = a.Ha;
				"function" !== typeof c && A('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.');
				if("function" === typeof a.toBlob) return a.toBlob(c,
					b.type, b.details), "toBlob";
				if("function" === typeof a.msToBlob) return c(a.msToBlob()), "msToBlob";
				c(null);
				return null;
			default:
				e = a.toDataURL(b.type, b.details)
		}
		return "function" === typeof c ? (c(e), null) : e
	}

	function ok(a, b) {
		a.animationManager.Yd();
		a.jd();
		if(null === a.Ea) return null;
		"object" !== typeof b && A("properties argument must be an Object.");
		var c = b.size || null,
			d = b.scale || null;
		void 0 !== b.scale && isNaN(b.scale) && (d = "NaN");
		var e = b.maxSize;
		void 0 === b.maxSize && (e = "svg" === b.context ? new L(Infinity, Infinity) : new L(2E3, 2E3));
		var f = b.position || null,
			g = b.parts || null,
			h = void 0 === b.padding ? 1 : b.padding,
			k = b.background || null,
			l = b.omitTemporary;
		void 0 === l && (l = !0);
		var m = b.document || document,
			n = b.elementFinished || null,
			p =
			b.showTemporary;
		void 0 === p && (p = !l);
		l = b.showGrid;
		void 0 === l && (l = p);
		null !== c && isNaN(c.width) && isNaN(c.height) && (c = null);
		"number" === typeof h ? h = new Pc(h) : h instanceof Pc || A("MakeImage padding must be a Margin or a number.");
		h.left = Math.max(h.left, 0);
		h.right = Math.max(h.right, 0);
		h.top = Math.max(h.top, 0);
		h.bottom = Math.max(h.bottom, 0);
		a.$c.Tc(!0);
		var q = new pk(null, m),
			r = q.context;
		if(!(c || d || g || f)) {
			q.width = a.xa + Math.ceil(h.left + h.right);
			q.height = a.wa + Math.ceil(h.top + h.bottom);
			if("svg" === b.context) {
				d = a.No.J("SVG");
				if(null === d) return null;
				d.Wu(q.width, q.height);
				d.ownerDocument = m;
				d.Ls = n;
				qj(a, d.context, h, new L(q.width, q.height), a.Ca, a.ra, g, k, p, l);
				return d.context
			}
			a.pn = !1;
			qj(a, r, h, new L(q.width, q.height), a.Ca, a.ra, g, k, p, l);
			a.pn = !0;
			return q.context
		}
		var u = a.Vq,
			v = a.documentBounds.copy();
		v.Lv(a.hb);
		if(p)
			for(var x = a.Ra.j, y = x.length, z = 0; z < y; z++) {
				var B = x[z];
				if(B.visible && B.isTemporary) {
					B = B.Fa.j;
					for(var C = B.length, I = 0; I < C; I++) {
						var J = B[I];
						J.isInDocumentBounds && J.isVisible() && (J = J.actualBounds, J.s() && v.Wc(J))
					}
				}
			}
		x = new G(v.x,
			v.y);
		if(null !== g) {
			y = !0;
			z = g.iterator;
			for(z.reset(); z.next();)
				if(B = z.value, B instanceof U && (C = B.layer, (null === C || C.visible) && (null === C || p || !C.isTemporary) && B.isVisible() && (B = B.actualBounds, B.s())))
					if(y) {
						y = !1;
						var K = B.copy()
					} else K.Wc(B);
			y && (K = new M(0, 0, 0, 0));
			v.width = K.width;
			v.height = K.height;
			x.x = K.x;
			x.y = K.y
		}
		null !== f && f.s() && (x = f, d || (d = u));
		K = f = 0;
		null !== h && (f = h.left + h.right, K = h.top + h.bottom);
		y = z = 0;
		null !== c && (z = c.width, y = c.height, isFinite(z) && (z = Math.max(0, z - f)), isFinite(y) && (y = Math.max(0, y - K)));
		null !==
			c && null !== d ? ("NaN" === d && (d = u), c.s() ? (c = z, v = y) : isNaN(y) ? (c = z, v = v.height * d) : (c = v.width * d, v = y)) : null !== c ? c.s() ? (d = Math.min(z / v.width, y / v.height), c = z, v = y) : isNaN(y) ? (d = z / v.width, c = z, v = v.height * d) : (d = y / v.height, c = v.width * d, v = y) : null !== d ? "NaN" === d && e.s() ? (d = Math.min((e.width - f) / v.width, (e.height - K) / v.height), d > u ? (d = u, c = v.width, v = v.height) : (c = e.width, v = e.height)) : (c = v.width * d, v = v.height * d) : (d = u, c = v.width, v = v.height);
		null !== h ? (c += f, v += K) : h = new Pc(0);
		null !== e && (u = e.width, e = e.height, isNaN(u) && (u = 2E3), isNaN(e) &&
			(e = 2E3), isFinite(u) && (c = Math.min(c, u)), isFinite(e) && (v = Math.min(v, e)));
		q.width = Math.ceil(c);
		q.height = Math.ceil(v);
		if("svg" === b.context) {
			b = a.No.J("SVG");
			if(null === b) return null;
			b.Wu(q.width, q.height);
			b.ownerDocument = m;
			b.Ls = n;
			qj(a, b.context, h, new L(Math.ceil(c), Math.ceil(v)), d, x, g, k, p, l);
			return b.context
		}
		a.pn = !1;
		qj(a, r, h, new L(Math.ceil(c), Math.ceil(v)), d, x, g, k, p, l);
		a.pn = !0;
		return q.context
	}
	oa.Object.defineProperties(Q.prototype, {
		div: {
			get: function() {
				return this.Ia
			},
			set: function(a) {
				if(this.Ia !== a) {
					li = [];
					var b = this.Ia;
					null !== b ? (b.F = void 0, b.innerHTML = "", null !== this.Ea && (b = this.Ea.Ha, b.removeEventListener("touchstart", this.Qv, !1), b.removeEventListener("touchmove", this.Pv, !1), b.removeEventListener("touchend", this.Ov, !1), this.Ea.bx()), b = this.toolManager, null !== b && (b.mouseDownTools.each(function(a) {
							a.cancelWaitAfter()
						}), b.mouseMoveTools.each(function(a) {
							a.cancelWaitAfter()
						}),
						b.mouseUpTools.each(function(a) {
							a.cancelWaitAfter()
						})), b.cancelWaitAfter(), this.currentTool.doCancel(), this.$c = this.Ea = null, w.removeEventListener("resize", this.Wv, !1), w.removeEventListener("mousemove", this.ck, !0), w.removeEventListener("mousedown", this.bk, !0), w.removeEventListener("mouseup", this.ek, !0), w.removeEventListener("wheel", this.fk, !0), w.removeEventListener("mouseout", this.dk, !0), lf === this && (lf = null)) : this.ge = !1;
					this.Ia = null;
					if(null !== a) {
						if(b = a.F) b.div = null;
						xi(this, a);
						this.ik()
					}
				}
			}
		},
		av: {
			get: function() {
				return this.tb
			},
			set: function(a) {
				this.tb = a
			}
		},
		Yj: {
			get: function() {
				return this.ge
			}
		},
		draggedLink: {
			get: function() {
				return this.Yq
			},
			set: function(a) {
				this.Yq !== a && (this.Yq = a, null !== a && (this.Ur = a.fromPort, this.Vr = a.toPort))
			}
		},
		Bx: {
			get: function() {
				return this.Ur
			},
			set: function(a) {
				this.Ur = a
			}
		},
		Cx: {
			get: function() {
				return this.Vr
			},
			set: function(a) {
				this.Vr = a
			}
		},
		animationManager: {
			get: function() {
				return this.Cq
			}
		},
		undoManager: {
			get: function() {
				return this.Zb.undoManager
			}
		},
		skipsUndoManager: {
			get: function() {
				return this.$g
			},
			set: function(a) {
				this.$g = a;
				this.Zb.skipsUndoManager = a
			}
		},
		delaysLayout: {
			get: function() {
				return this.Lt
			},
			set: function(a) {
				this.Lt = a
			}
		},
		validCycle: {
			get: function() {
				return this.zs
			},
			set: function(a) {
				var b = this.zs;
				b !== a && (this.zs = a, this.g("validCycle",
					b, a))
			}
		},
		layers: {
			get: function() {
				return this.Ra.iterator
			}
		},
		isModelReadOnly: {
			get: function() {
				var a = this.Zb;
				return null === a ? !1 : a.isReadOnly
			},
			set: function(a) {
				var b = this.Zb;
				null !== b && (b.isReadOnly = a)
			}
		},
		isReadOnly: {
			get: function() {
				return this.Lf
			},
			set: function(a) {
				var b = this.Lf;
				b !== a && (this.Lf = a, this.g("isReadOnly", b, a))
			}
		},
		isEnabled: {
			get: function() {
				return this.Pc
			},
			set: function(a) {
				var b = this.Pc;
				b !== a && (this.Pc = a, this.g("isEnabled", b, a))
			}
		},
		allowClipboard: {
			get: function() {
				return this.uq
			},
			set: function(a) {
				var b = this.uq;
				b !== a && (this.uq = a, this.g("allowClipboard", b, a))
			}
		},
		allowCopy: {
			get: function() {
				return this.Ah
			},
			set: function(a) {
				var b = this.Ah;
				b !== a && (this.Ah = a, this.g("allowCopy", b, a))
			}
		},
		allowDelete: {
			get: function() {
				return this.Bh
			},
			set: function(a) {
				var b = this.Bh;
				b !== a && (this.Bh = a, this.g("allowDelete", b, a))
			}
		},
		allowDragOut: {
			get: function() {
				return this.vq
			},
			set: function(a) {
				var b = this.vq;
				b !== a && (this.vq = a, this.g("allowDragOut", b, a))
			}
		},
		allowDrop: {
			get: function() {
				return this.wq
			},
			set: function(a) {
				var b = this.wq;
				b !== a && (this.wq = a, this.g("allowDrop", b, a))
			}
		},
		allowTextEdit: {
			get: function() {
				return this.Kh
			},
			set: function(a) {
				var b = this.Kh;
				b !== a && (this.Kh = a, this.g("allowTextEdit", b, a))
			}
		},
		allowGroup: {
			get: function() {
				return this.Ch
			},
			set: function(a) {
				var b =
					this.Ch;
				b !== a && (this.Ch = a, this.g("allowGroup", b, a))
			}
		},
		allowUngroup: {
			get: function() {
				return this.Lh
			},
			set: function(a) {
				var b = this.Lh;
				b !== a && (this.Lh = a, this.g("allowUngroup", b, a))
			}
		},
		allowInsert: {
			get: function() {
				return this.yq
			},
			set: function(a) {
				var b = this.yq;
				b !== a && (this.yq = a, this.g("allowInsert", b, a))
			}
		},
		allowLink: {
			get: function() {
				return this.Dh
			},
			set: function(a) {
				var b = this.Dh;
				b !== a && (this.Dh = a, this.g("allowLink", b, a))
			}
		},
		allowRelink: {
			get: function() {
				return this.Fh
			},
			set: function(a) {
				var b = this.Fh;
				b !== a && (this.Fh = a, this.g("allowRelink", b, a))
			}
		},
		allowMove: {
			get: function() {
				return this.Eh
			},
			set: function(a) {
				var b = this.Eh;
				b !== a && (this.Eh = a, this.g("allowMove", b, a))
			}
		},
		allowReshape: {
			get: function() {
				return this.Gh
			},
			set: function(a) {
				var b = this.Gh;
				b !== a && (this.Gh = a, this.g("allowReshape", b, a))
			}
		},
		allowResize: {
			get: function() {
				return this.Hh
			},
			set: function(a) {
				var b = this.Hh;
				b !== a && (this.Hh = a, this.g("allowResize", b, a))
			}
		},
		allowRotate: {
			get: function() {
				return this.Ih
			},
			set: function(a) {
				var b = this.Ih;
				b !== a && (this.Ih = a, this.g("allowRotate", b, a))
			}
		},
		allowSelect: {
			get: function() {
				return this.Jh
			},
			set: function(a) {
				var b = this.Jh;
				b !== a && (this.Jh = a, this.g("allowSelect", b, a))
			}
		},
		allowUndo: {
			get: function() {
				return this.zq
			},
			set: function(a) {
				var b = this.zq;
				b !== a && (this.zq = a, this.g("allowUndo",
					b, a))
			}
		},
		allowZoom: {
			get: function() {
				return this.Bq
			},
			set: function(a) {
				var b = this.Bq;
				b !== a && (this.Bq = a, this.g("allowZoom", b, a))
			}
		},
		hasVerticalScrollbar: {
			get: function() {
				return this.mr
			},
			set: function(a) {
				var b = this.mr;
				b !== a && (this.mr = a, cj(this), this.R(), this.g("hasVerticalScrollbar", b, a), Oi(this, !1))
			}
		},
		hasHorizontalScrollbar: {
			get: function() {
				return this.lr
			},
			set: function(a) {
				var b = this.lr;
				b !== a && (this.lr = a, cj(this), this.R(),
					this.g("hasHorizontalScrollbar", b, a), Oi(this, !1))
			}
		},
		allowHorizontalScroll: {
			get: function() {
				return this.xq
			},
			set: function(a) {
				var b = this.xq;
				b !== a && (this.xq = a, this.g("allowHorizontalScroll", b, a), Oi(this, !1))
			}
		},
		allowVerticalScroll: {
			get: function() {
				return this.Aq
			},
			set: function(a) {
				var b = this.Aq;
				b !== a && (this.Aq = a, this.g("allowVerticalScroll", b, a), Oi(this, !1))
			}
		},
		scrollHorizontalLineChange: {
			get: function() {
				return this.hs
			},
			set: function(a) {
				var b = this.hs;
				b !== a && (0 > a && Aa(a, ">= 0", Q, "scrollHorizontalLineChange"), this.hs = a, this.g("scrollHorizontalLineChange", b, a))
			}
		},
		scrollVerticalLineChange: {
			get: function() {
				return this.ls
			},
			set: function(a) {
				var b = this.ls;
				b !== a && (0 > a && Aa(a, ">= 0", Q, "scrollVerticalLineChange"), this.ls = a, this.g("scrollVerticalLineChange", b, a))
			}
		},
		lastInput: {
			get: function() {
				return this.kj
			},
			set: function(a) {
				this.kj = a
			}
		},
		firstInput: {
			get: function() {
				return this.Th
			},
			set: function(a) {
				this.Th = a
			}
		},
		currentCursor: {
			get: function() {
				return this.Pq
			},
			set: function(a) {
				"" === a && (a = this.gn);
				if(this.Pq !== a) {
					var b = this.Ea,
						c = this.Ia;
					if(null !== b) {
						this.Pq = a;
						var d = b.style.cursor;
						b.style.cursor = a;
						c.style.cursor = a;
						b.style.cursor === d && (b.style.cursor = "-webkit-" + a, c.style.cursor = "-webkit-" + a, b.style.cursor === d && (b.style.cursor = "-moz-" + a, c.style.cursor = "-moz-" + a, b.style.cursor === d && (b.style.cursor = a, c.style.cursor = a)))
					}
				}
			}
		},
		defaultCursor: {
			get: function() {
				return this.gn
			},
			set: function(a) {
				"" === a && (a = "auto");
				var b = this.gn;
				b !== a && (this.gn = a, this.g("defaultCursor", b, a))
			}
		},
		click: {
			get: function() {
				return this.Af
			},
			set: function(a) {
				var b = this.Af;
				b !== a && (this.Af = a, this.g("click", b, a))
			}
		},
		doubleClick: {
			get: function() {
				return this.Ff
			},
			set: function(a) {
				var b = this.Ff;
				b !== a && (this.Ff = a, this.g("doubleClick", b, a))
			}
		},
		contextClick: {
			get: function() {
				return this.Bf
			},
			set: function(a) {
				var b = this.Bf;
				b !== a && (this.Bf = a, this.g("contextClick", b, a))
			}
		},
		mouseOver: {
			get: function() {
				return this.Wf
			},
			set: function(a) {
				var b = this.Wf;
				b !== a && (this.Wf = a, this.g("mouseOver", b, a))
			}
		},
		mouseHover: {
			get: function() {
				return this.Uf
			},
			set: function(a) {
				var b = this.Uf;
				b !== a && (this.Uf = a, this.g("mouseHover", b, a))
			}
		},
		mouseHold: {
			get: function() {
				return this.Tf
			},
			set: function(a) {
				var b = this.Tf;
				b !== a && (this.Tf = a, this.g("mouseHold",
					b, a))
			}
		},
		mouseDragOver: {
			get: function() {
				return this.Pr
			},
			set: function(a) {
				var b = this.Pr;
				b !== a && (this.Pr = a, this.g("mouseDragOver", b, a))
			}
		},
		mouseDrop: {
			get: function() {
				return this.Rf
			},
			set: function(a) {
				var b = this.Rf;
				b !== a && (this.Rf = a, this.g("mouseDrop", b, a))
			}
		},
		handlesDragDropForTopLevelParts: {
			get: function() {
				return this.kr
			},
			set: function(a) {
				var b = this.kr;
				b !== a && (this.kr = a, this.g("handlesDragDropForTopLevelParts", b, a))
			}
		},
		lostFocus: {
			get: function() {
				return this.Hr
			},
			set: function(a) {
				var b = this.Hr;
				b !== a && (this.Hr = a, this.g("lostFocus", b, a))
			}
		},
		mouseEnter: {
			get: function() {
				return this.Sf
			},
			set: function(a) {
				var b = this.Sf;
				b !== a && (this.Sf = a, this.g("mouseEnter", b, a))
			}
		},
		mouseLeave: {
			get: function() {
				return this.Vf
			},
			set: function(a) {
				var b = this.Vf;
				b !== a && (this.Vf = a, this.g("mouseLeave", b, a))
			}
		},
		toolTip: {
			get: function() {
				return this.gg
			},
			set: function(a) {
				var b = this.gg;
				b !== a && (this.gg = a, this.g("toolTip", b, a))
			}
		},
		contextMenu: {
			get: function() {
				return this.Cf
			},
			set: function(a) {
				var b = this.Cf;
				b !== a && (this.Cf = a, this.g("contextMenu", b, a))
			}
		},
		commandHandler: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K !== a && (this.K = a, a.rb(this))
			}
		},
		toolManager: {
			get: function() {
				return this.eb
			},
			set: function(a) {
				this.eb !== a && (this.eb = a, a.rb(this))
			}
		},
		defaultTool: {
			get: function() {
				return this.Va
			},
			set: function(a) {
				var b = this.Va;
				b !== a && (this.Va = a, a.rb(this), this.currentTool === b && (this.currentTool = a))
			}
		},
		currentTool: {
			get: function() {
				return this.da
			},
			set: function(a) {
				var b = this.da;
				null !== b && (b.isActive && b.doDeactivate(), b.cancelWaitAfter(), b.doStop());
				null === a && (a = this.defaultTool);
				null !== a && (this.da = a, a.rb(this), a.doStart())
			}
		},
		selection: {
			get: function() {
				return this.os
			}
		},
		maxSelectionCount: {
			get: function() {
				return this.Lr
			},
			set: function(a) {
				var b = this.Lr;
				if(b !== a)
					if(0 <= a && !isNaN(a)) {
						if(this.Lr = a, this.g("maxSelectionCount", b, a), !this.undoManager.isUndoingRedoing && (a = this.selection.count - a, 0 < a)) {
							this.aa("ChangingSelection", this.selection);
							b = this.selection.La();
							for(var c = 0; c < a; c++) b[c].isSelected = !1;
							this.aa("ChangedSelection", this.selection)
						}
					} else Aa(a, ">= 0", Q, "maxSelectionCount")
			}
		},
		nodeSelectionAdornmentTemplate: {
			get: function() {
				return this.Sr
			},
			set: function(a) {
				var b = this.Sr;
				b !== a && (this.Sr = a, this.g("nodeSelectionAdornmentTemplate", b, a))
			}
		},
		groupSelectionAdornmentTemplate: {
			get: function() {
				return this.ir
			},
			set: function(a) {
				var b = this.ir;
				b !== a && (this.ir = a, this.g("groupSelectionAdornmentTemplate", b, a))
			}
		},
		linkSelectionAdornmentTemplate: {
			get: function() {
				return this.Gr
			},
			set: function(a) {
				var b = this.Gr;
				b !== a && (this.Gr = a, this.g("linkSelectionAdornmentTemplate", b, a))
			}
		},
		highlighteds: {
			get: function() {
				return this.nr
			}
		},
		isModified: {
			get: function() {
				var a = this.undoManager;
				return a.isEnabled ? null !== a.currentTransaction ? !0 : this.u && this.fe !== a.historyIndex : this.u
			},
			set: function(a) {
				if(this.u !== a) {
					this.u = a;
					var b = this.undoManager;
					!a && b.isEnabled && (this.fe = b.historyIndex);
					a || Nj(this)
				}
			}
		},
		model: {
			get: function() {
				return this.Zb
			},
			set: function(a) {
				var b = this.Zb;
				if(b !== a) {
					this.currentTool.doCancel();
					null !== b && b.undoManager !== a.undoManager &&
						b.undoManager.isInTransaction && A("Do not replace a Diagram.model while a transaction is in progress.");
					Ai(this, !0);
					this.ge = !1;
					this.Pk = !0;
					this.fe = -2;
					this.ud = !1;
					var c = this.Yb;
					this.Yb = !0;
					this.animationManager.Ji("Model");
					null !== b && (null !== this.me && this.me.each(function(a) {
						b.jk(a)
					}), b.jk(this.Qi));
					this.Zb = a;
					this.partManager = Oj(this.Zb.constructor.type);
					a.kh(this.vf);
					this.partManager.addAllModeledParts();
					a.jk(this.vf);
					a.kh(this.Qi);
					null !== this.me && this.me.each(function(b) {
						a.kh(b)
					});
					this.Yb = c;
					this.tb ||
						this.R();
					null !== b && (a.undoManager.isEnabled = b.undoManager.isEnabled)
				}
			}
		},
		ca: {
			get: function() {
				return this.Xc
			},
			set: function(a) {
				this.Xc = a
			}
		},
		bt: {
			get: function() {
				return this.tq
			}
		},
		skipsModelSourceBindings: {
			get: function() {
				return this.um
			},
			set: function(a) {
				this.um = a
			}
		},
		lk: {
			get: function() {
				return this.ou
			},
			set: function(a) {
				this.ou = a
			}
		},
		nodeTemplate: {
			get: function() {
				return this.Xf.J("")
			},
			set: function(a) {
				var b = this.Xf.J("");
				b !== a && (this.Xf.add("", a), this.g("nodeTemplate", b, a), this.undoManager.isUndoingRedoing || this.xd())
			}
		},
		nodeTemplateMap: {
			get: function() {
				return this.Xf
			},
			set: function(a) {
				var b = this.Xf;
				b !== a && (this.Xf = a, this.g("nodeTemplateMap", b, a), this.undoManager.isUndoingRedoing || this.xd())
			}
		},
		groupTemplate: {
			get: function() {
				return this.Uh.J("")
			},
			set: function(a) {
				var b = this.Uh.J("");
				b !== a && (this.Uh.add("", a), this.g("groupTemplate",
					b, a), this.undoManager.isUndoingRedoing || this.xd())
			}
		},
		groupTemplateMap: {
			get: function() {
				return this.Uh
			},
			set: function(a) {
				var b = this.Uh;
				b !== a && (this.Uh = a, this.g("groupTemplateMap", b, a), this.undoManager.isUndoingRedoing || this.xd())
			}
		},
		linkTemplate: {
			get: function() {
				return this.Qg.J("")
			},
			set: function(a) {
				var b = this.Qg.J("");
				b !== a && (this.Qg.add("", a), this.g("linkTemplate", b, a), this.undoManager.isUndoingRedoing || this.xd())
			}
		},
		linkTemplateMap: {
			get: function() {
				return this.Qg
			},
			set: function(a) {
				var b = this.Qg;
				b !== a && (this.Qg = a, this.g("linkTemplateMap", b, a), this.undoManager.isUndoingRedoing || this.xd())
			}
		},
		isMouseOverDiagram: {
			get: function() {
				return this.he
			},
			set: function(a) {
				this.he = a
			}
		},
		isMouseCaptured: {
			get: function() {
				return this.Lc
			},
			set: function(a) {
				var b = this.Ea;
				null !== b && (b = b.Ha, a ? (this.lastInput.bubbles = !1, this.Ct ? (b.removeEventListener("pointermove", this.em, !1), b.removeEventListener("pointerdown",
					this.dm, !1), b.removeEventListener("pointerup", this.gm, !1), b.removeEventListener("pointerout", this.fm, !1), w.addEventListener("pointermove", this.em, !0), w.addEventListener("pointerdown", this.dm, !0), w.addEventListener("pointerup", this.gm, !0), w.addEventListener("pointerout", this.fm, !0)) : (b.removeEventListener("mousemove", this.ck, !1), b.removeEventListener("mousedown", this.bk, !1), b.removeEventListener("mouseup", this.ek, !1), b.removeEventListener("mouseout", this.dk, !1), w.addEventListener("mousemove", this.ck, !0), w.addEventListener("mousedown", this.bk, !0), w.addEventListener("mouseup", this.ek, !0), w.addEventListener("mouseout", this.dk, !0)), b.removeEventListener("wheel", this.fk, !1), w.addEventListener("wheel", this.fk, !0), w.addEventListener("selectstart", this.preventDefault, !1)) : (this.Ct ? (w.removeEventListener("pointermove", this.em, !0), w.removeEventListener("pointerdown", this.dm, !0), w.removeEventListener("pointerup", this.gm, !0), w.removeEventListener("pointerout", this.fm, !0), b.addEventListener("pointermove",
					this.em, !1), b.addEventListener("pointerdown", this.dm, !1), b.addEventListener("pointerup", this.gm, !1), b.addEventListener("pointerout", this.fm, !1)) : (w.removeEventListener("mousemove", this.ck, !0), w.removeEventListener("mousedown", this.bk, !0), w.removeEventListener("mouseup", this.ek, !0), w.removeEventListener("mouseout", this.dk, !0), b.addEventListener("mousemove", this.ck, !1), b.addEventListener("mousedown", this.bk, !1), b.addEventListener("mouseup", this.ek, !1), b.addEventListener("mouseout", this.dk, !1)), w.removeEventListener("wheel",
					this.fk, !0), w.removeEventListener("selectstart", this.preventDefault, !1), b.addEventListener("wheel", this.fk, !1)), this.Lc = a)
			}
		},
		position: {
			get: function() {
				return this.ra
			},
			set: function(a) {
				var b = G.alloc().assign(this.ra);
				if(!b.A(a)) {
					var c = this.viewportBounds.copy();
					this.ra.assign(a);
					this.tb || null === this.Ea && !this.yp.s() || (this.tb = !0, a = this.scale, Qi(this, this.nn, this.xa / a, this.wa / a, this.Vi, !1), this.tb = !1);
					ai(this.animationManager, b, this.ra);
					this.tb || this.$p(c, this.viewportBounds,
						this.Ca, !1)
				}
				G.free(b)
			}
		},
		initialPosition: {
			get: function() {
				return this.qr
			},
			set: function(a) {
				this.qr.A(a) || (this.qr = a.I())
			}
		},
		initialScale: {
			get: function() {
				return this.rr
			},
			set: function(a) {
				this.rr !== a && (this.rr = a)
			}
		},
		grid: {
			get: function() {
				null === this.Ib && Hi(this);
				return this.Ib
			},
			set: function(a) {
				var b = this.Ib;
				if(b !== a) {
					null === b && (Hi(this), b = this.Ib);
					a.type !== Y.Grid && A("Diagram.grid must be a Panel of type Panel.Grid");
					var c = b.panel;
					null !== c && c.remove(b);
					this.Ib = a;
					a.name = "GRID";
					null !== c && c.add(a);
					fj(this);
					this.R();
					this.g("grid", b, a)
				}
			}
		},
		viewportBounds: {
			get: function() {
				var a = this.Kw,
					b = this.ra,
					c = this.Ca;
				if(null === this.Ea) return this.yp.s() && a.h(b.x, b.y, this.xa / c, this.wa / c), a;
				a.h(b.x, b.y, Math.max(this.xa, 0) / c, Math.max(this.wa, 0) / c);
				return a
			}
		},
		viewSize: {
			get: function() {
				return this.yp
			},
			set: function(a) {
				var b = this.viewSize;
				b.A(a) || (this.yp = a = a.I(), this.xa = a.width,
					this.wa = a.height, this.Xa(), this.g("viewSize", b, a))
			}
		},
		fixedBounds: {
			get: function() {
				return this.fr
			},
			set: function(a) {
				var b = this.fr;
				b.A(a) || (-Infinity !== a.width && Infinity !== a.height && -Infinity !== a.height || A("fixedBounds width/height must not be Infinity"), this.fr = a = a.I(), this.Xa(), this.g("fixedBounds", b, a))
			}
		},
		scrollMargin: {
			get: function() {
				return this.ni
			},
			set: function(a) {
				"number" === typeof a && (a = new Pc(a));
				var b = this.ni;
				b.A(a) || (this.ni = a = a.I(),
					this.g("scrollMargin", b, a), this.ik())
			}
		},
		scrollMode: {
			get: function() {
				return this.js
			},
			set: function(a) {
				var b = this.js;
				b !== a && (this.js = a, a === mi && Oi(this, !1), this.g("scrollMode", b, a), this.ik())
			}
		},
		scrollsPageOnFocus: {
			get: function() {
				return this.ms
			},
			set: function(a) {
				var b = this.ms;
				b !== a && (this.ms = a, this.g("scrollsPageOnFocus", b, a))
			}
		},
		positionComputation: {
			get: function() {
				return this.$r
			},
			set: function(a) {
				var b = this.$r;
				b !== a &&
					(this.$r = a, Oi(this, !1), this.g("positionComputation", b, a))
			}
		},
		scaleComputation: {
			get: function() {
				return this.fs
			},
			set: function(a) {
				var b = this.fs;
				b !== a && (this.fs = a, Lj(this, this.scale, this.scale), this.g("scaleComputation", b, a))
			}
		},
		documentBounds: {
			get: function() {
				return this.nn
			}
		},
		isVirtualized: {
			get: function() {
				return this.Br
			},
			set: function(a) {
				var b = this.Br;
				b !== a && (this.Br = a, this.g("isVirtualized", b, a))
			}
		},
		scale: {
			get: function() {
				return this.Ca
			},
			set: function(a) {
				var b = this.Ca;
				b !== a && Lj(this, b, a)
			}
		},
		defaultScale: {
			get: function() {
				return this.Vq
			},
			set: function(a) {
				this.Vq = a
			}
		},
		autoScale: {
			get: function() {
				return this.Ti
			},
			set: function(a) {
				var b = this.Ti;
				b !== a && (this.Ti = a, this.g("autoScale", b, a), a !== ni && Oi(this, !1))
			}
		},
		initialAutoScale: {
			get: function() {
				return this.Yh
			},
			set: function(a) {
				var b = this.Yh;
				b !== a && (this.Yh = a, this.g("initialAutoScale",
					b, a))
			}
		},
		initialViewportSpot: {
			get: function() {
				return this.sr
			},
			set: function(a) {
				var b = this.sr;
				b !== a && (a.pb() || A("initialViewportSpot must be a specific Spot: " + a), this.sr = a, this.g("initialViewportSpot", b, a))
			}
		},
		initialDocumentSpot: {
			get: function() {
				return this.pr
			},
			set: function(a) {
				var b = this.pr;
				b !== a && (a.pb() || A("initialViewportSpot must be a specific Spot: " + a), this.pr = a, this.g("initialDocumentSpot", b, a))
			}
		},
		minScale: {
			get: function() {
				return this.Mr
			},
			set: function(a) {
				var b = this.Mr;
				b !== a && (0 < a ? (this.Mr = a, this.g("minScale", b, a), a > this.scale && (this.scale = a)) : Aa(a, "> 0", Q, "minScale"))
			}
		},
		maxScale: {
			get: function() {
				return this.Kr
			},
			set: function(a) {
				var b = this.Kr;
				b !== a && (0 < a ? (this.Kr = a, this.g("maxScale", b, a), a < this.scale && (this.scale = a)) : Aa(a, "> 0", Q, "maxScale"))
			}
		},
		zoomPoint: {
			get: function() {
				return this.Cs
			},
			set: function(a) {
				this.Cs.A(a) || (this.Cs = a = a.I())
			}
		},
		contentAlignment: {
			get: function() {
				return this.Vi
			},
			set: function(a) {
				var b = this.Vi;
				b.A(a) || (this.Vi = a = a.I(), this.g("contentAlignment", b, a), Oi(this, !1))
			}
		},
		initialContentAlignment: {
			get: function() {
				return this.Gn
			},
			set: function(a) {
				var b = this.Gn;
				b.A(a) || (this.Gn = a = a.I(), this.g("initialContentAlignment", b, a))
			}
		},
		padding: {
			get: function() {
				return this.hb
			},
			set: function(a) {
				"number" === typeof a && (a = new Pc(a));
				var b = this.hb;
				b.A(a) || (this.hb = a = a.I(), this.Xa(), this.g("padding",
					b, a))
			}
		},
		partManager: {
			get: function() {
				return this.Wa
			},
			set: function(a) {
				var b = this.Wa;
				b !== a && (null !== a.diagram && A("Cannot share PartManagers between Diagrams: " + a.toString()), null !== b && b.rb(null), this.Wa = a, a.rb(this))
			}
		},
		nodes: {
			get: function() {
				return this.partManager.nodes.iterator
			}
		},
		links: {
			get: function() {
				return this.partManager.links.iterator
			}
		},
		parts: {
			get: function() {
				return this.partManager.parts.iterator
			}
		},
		layout: {
			get: function() {
				return this.gc
			},
			set: function(a) {
				var b = this.gc;
				b !== a && (this.gc = a, a.diagram = this, a.group = null, this.wg = !0, this.g("layout", b, a), this.cc())
			}
		},
		isTreePathToChildren: {
			get: function() {
				return this.Ar
			},
			set: function(a) {
				var b = this.Ar;
				if(b !== a && (this.Ar = a, this.g("isTreePathToChildren", b, a), !this.undoManager.isUndoingRedoing))
					for(a = this.nodes; a.next();) qk(a.value)
			}
		},
		treeCollapsePolicy: {
			get: function() {
				return this.xs
			},
			set: function(a) {
				var b = this.xs;
				b !== a && (a !== pi && a !== rk && a !== sk && A("Unknown Diagram.treeCollapsePolicy: " + a), this.xs = a, this.g("treeCollapsePolicy", b, a))
			}
		},
		De: {
			get: function() {
				return this.nd
			},
			set: function(a) {
				this.nd = a
			}
		},
		autoScrollInterval: {
			get: function() {
				return this.Lm
			},
			set: function(a) {
				var b = this.Lm;
				b !== a && (this.Lm = a, this.g("autoScrollInterval", b, a))
			}
		},
		autoScrollRegion: {
			get: function() {
				return this.Mm
			},
			set: function(a) {
				"number" ===
				typeof a && (a = new Pc(a));
				var b = this.Mm;
				b.A(a) || (this.Mm = a = a.I(), this.Xa(), this.g("autoScrollRegion", b, a))
			}
		}
	});
	Q.prototype.makeImageData = Q.prototype.xx;
	Q.prototype.makeImage = Q.prototype.sz;
	Q.prototype.addRenderer = Q.prototype.Sw;
	Q.prototype.getSVG = Q.prototype.$y;
	Q.prototype.makeSVG = Q.prototype.dv;
	Q.prototype.makeSvg = Q.prototype.dt;
	Q.prototype.stopAutoScroll = Q.prototype.uf;
	Q.prototype.doAutoScroll = Q.prototype.Ks;
	Q.prototype.isUnoccupied = Q.prototype.Zj;
	Q.prototype.raiseDiagramEvent = Q.prototype.aa;
	Q.prototype.removeDiagramListener = Q.prototype.hm;
	Q.prototype.addDiagramListener = Q.prototype.Gj;
	Q.prototype.findTreeRoots = Q.prototype.Uy;
	Q.prototype.layoutDiagram = Q.prototype.qz;
	Q.prototype.findTopLevelGroups = Q.prototype.Ny;
	Q.prototype.findTopLevelNodesAndLinks = Q.prototype.Oy;
	Q.prototype.findLinksByExample = Q.prototype.Os;
	Q.prototype.findNodesByExample = Q.prototype.Ps;
	Q.prototype.findLinkForData = Q.prototype.Ic;
	Q.prototype.findNodeForData = Q.prototype.Ai;
	Q.prototype.findPartForData = Q.prototype.wc;
	Q.prototype.findNodeForKey = Q.prototype.Mb;
	Q.prototype.findPartForKey = Q.prototype.findPartForKey;
	Q.prototype.rebuildParts = Q.prototype.xd;
	Q.prototype.transformViewToDoc = Q.prototype.tt;
	Q.prototype.transformRectDocToView = Q.prototype.Jz;
	Q.prototype.transformDocToView = Q.prototype.st;
	Q.prototype.centerRect = Q.prototype.Au;
	Q.prototype.scrollToRect = Q.prototype.xv;
	Q.prototype.scroll = Q.prototype.scroll;
	Q.prototype.highlightCollection = Q.prototype.gz;
	Q.prototype.highlight = Q.prototype.fz;
	Q.prototype.clearHighlighteds = Q.prototype.Uw;
	Q.prototype.selectCollection = Q.prototype.yv;
	Q.prototype.select = Q.prototype.select;
	Q.prototype.clearSelection = Q.prototype.Gs;
	Q.prototype.updateAllRelationshipsFromData = Q.prototype.qq;
	Q.prototype.updateAllTargetBindings = Q.prototype.updateAllTargetBindings;
	Q.prototype.commit = Q.prototype.commit;
	Q.prototype.rollbackTransaction = Q.prototype.tf;
	Q.prototype.commitTransaction = Q.prototype.bb;
	Q.prototype.startTransaction = Q.prototype.Aa;
	Q.prototype.raiseChanged = Q.prototype.g;
	Q.prototype.raiseChangedEvent = Q.prototype.cb;
	Q.prototype.removeChangedListener = Q.prototype.jk;
	Q.prototype.addChangedListener = Q.prototype.kh;
	Q.prototype.removeModelChangedListener = Q.prototype.yz;
	Q.prototype.addModelChangedListener = Q.prototype.Rw;
	Q.prototype.findLayer = Q.prototype.Ul;
	Q.prototype.removeLayer = Q.prototype.xz;
	Q.prototype.addLayerAfter = Q.prototype.hy;
	Q.prototype.addLayerBefore = Q.prototype.Ow;
	Q.prototype.addLayer = Q.prototype.Kl;
	Q.prototype.moveParts = Q.prototype.moveParts;
	Q.prototype.copyParts = Q.prototype.Qj;
	Q.prototype.removeParts = Q.prototype.mt;
	Q.prototype.remove = Q.prototype.remove;
	Q.prototype.add = Q.prototype.add;
	Q.prototype.clearDelayedGeometries = Q.prototype.Bu;
	Q.prototype.setProperties = Q.prototype.Hv;
	Q.prototype.resetInputOptions = Q.prototype.uv;
	Q.prototype.setInputOption = Q.prototype.Cz;
	Q.prototype.getInputOption = Q.prototype.Xl;
	Q.prototype.resetRenderingHints = Q.prototype.vv;
	Q.prototype.setRenderingHint = Q.prototype.Lx;
	Q.prototype.getRenderingHint = Q.prototype.Ce;
	Q.prototype.maybeUpdate = Q.prototype.jd;
	Q.prototype.requestUpdate = Q.prototype.cc;
	Q.prototype.delayInitialization = Q.prototype.vy;
	Q.prototype.isUpdateRequested = Q.prototype.mz;
	Q.prototype.redraw = Q.prototype.ik;
	Q.prototype.invalidateDocumentBounds = Q.prototype.Xa;
	Q.prototype.findObjectsNear = Q.prototype.ng;
	Q.prototype.findPartsNear = Q.prototype.Ky;
	Q.prototype.findObjectsIn = Q.prototype.mg;
	Q.prototype.findPartsIn = Q.prototype.jx;
	Q.prototype.findObjectsAt = Q.prototype.Uj;
	Q.prototype.findObjectAt = Q.prototype.Sb;
	Q.prototype.findPartAt = Q.prototype.Vl;
	Q.prototype.alignDocument = Q.prototype.ky;
	Q.prototype.zoomToRect = Q.prototype.Mz;
	Q.prototype.zoomToFit = Q.prototype.zoomToFit;
	Q.prototype.diagramScroll = Q.prototype.ax;
	Q.prototype.focus = Q.prototype.focus;
	Q.prototype.reset = Q.prototype.reset;
	var lf = null,
		qi = new Nb,
		Di = null,
		Ci = null,
		yi = null,
		zi = "",
		ni = new D(Q, "None", 0),
		Si = new D(Q, "Uniform", 1),
		Ti = new D(Q, "UniformToFill", 2),
		sg = new D(Q, "CycleAll", 10),
		wg = new D(Q, "CycleNotDirected", 11),
		yg = new D(Q, "CycleNotDirectedFast", 12),
		zg = new D(Q, "CycleNotUndirected", 13),
		tg = new D(Q, "CycleDestinationTree", 14),
		vg = new D(Q, "CycleSourceTree", 15),
		mi = new D(Q, "DocumentScroll", 1),
		tj = new D(Q, "InfiniteScroll", 2),
		pi = new D(Q, "TreeParentCollapsed", 21),
		rk = new D(Q, "AllParentsCollapsed", 22),
		sk = new D(Q, "AnyParentsCollapsed",
			23),
		tk = null;
	Q.className = "Diagram";
	Q.fromDiv = function(a) {
		var b = a;
		"string" === typeof a && (b = w.document.getElementById(a));
		return b instanceof HTMLDivElement && b.F instanceof Q ? b.F : null
	};
	Q.inherit = function(a, b) {
		function c() {}
		if(Object.getPrototypeOf(a).prototype) throw Error("Used go.Diagram.inherit defining already defined class \n" + a);
		c.prototype = b.prototype;
		a.prototype = new c;
		a.prototype.constructor = a
	};
	Q.None = ni;
	Q.Uniform = Si;
	Q.UniformToFill = Ti;
	Q.CycleAll = sg;
	Q.CycleNotDirected = wg;
	Q.CycleNotDirectedFast = yg;
	Q.CycleNotUndirected = zg;
	Q.CycleDestinationTree = tg;
	Q.CycleSourceTree = vg;
	Q.DocumentScroll = mi;
	Q.InfiniteScroll = tj;
	Q.TreeParentCollapsed = pi;
	Q.AllParentsCollapsed = rk;
	Q.AnyParentsCollapsed = sk;
	if(Ya) {
		var uk = w.document.createElement("canvas"),
			vk = uk.getContext("2d"),
			wk = Wa("7ca11abfd022028846");
		vk[wk] = Wa("398c3597c01238");
		for(var xk = ["5da73c80a36455d4038e4972187c3cae51fd22", sa.Dx + "4ae6247590da4bb21c324ba3a84e385776", Yc.xF + "fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387", H.za], yk = 1; 5 > yk; yk++) vk[Wa("7ca11abfd7330390")](Wa(xk[yk - 1]), 10, 15 * yk);
		vk[wk] = Wa("39f046ebb36e4b");
		for(var zk = 1; 5 > zk; zk++) vk[Wa("7ca11abfd7330390")](Wa(xk[zk - 1]), 10, 15 * zk);
		tk = uk
	} else tk = null;

	function wi() {
		this.$x = null;
		this.l = "zz@orderNum";
		"63ad05bbe23a1786468a4c741b6d2" === this._tk ? this.Gf = this.l = !0 : this.Gf = null
	}

	function oj(a, b) {
		b.$c.setTransform(b.Jb, 0, 0, b.Jb, 0, 0);
		if(null === a.Gf) {
			b = "f";
			var c = w[Wa("76a715b2f73f148a")][Wa("72ba13b5")];
			a.Gf = !0;
			if(Ya)
				if(!w[Wa("7da7")] || !w[Wa("7da7")][Wa("76a115b6ed251eaf4692")]) {
					for(var d = c[Wa("76ad18b4f73e")], e = c[Wa("73a612b6fb191d")](Wa("35e7")) + 2; e < d; e++) b += c[e];
					d = b[Wa("73a612b6fb191d")](Wa("7da71ca0ad381e90"));
					a.Gf = !(0 <= d && d < b[Wa("73a612b6fb191d")](Wa("35")))
				} else if(w[Wa("7da7")] && w[Wa("7da7")][Wa("76a115b6ed251eaf4692")] && (e = Wa(w[Wa("7da7")][Wa("76a115b6ed251eaf4692")]).split(Wa("39e9")), !(6 > e.length))) {
				var f = Wa(e[1]).split(".");
				if("7da71ca0" === e[4]) {
					var g = Wa(sa[Wa("6cae19")]).split(".");
					if(f[0] > g[0] || f[0] === g[0] && f[1] >= g[1]) {
						f = c[Wa("76ad18b4f73e")];
						for(g = c[Wa("73a612b6fb191d")](Wa("35e7")) + 2; g < f; g++) b += c[g];
						c = b[Wa("73a612b6fb191d")](Wa(e[2]));
						0 > c && Wa(e[2]) !== Wa("7da71ca0ad381e90") && (c = b[Wa("73a612b6fb191d")](Wa("76a715b2ef3e149757")));
						0 > c && (c = b[Wa("73a612b6fb191d")](Wa("76a715b2ef3e149757")));
						a.Gf = !(0 <= c && c < b[Wa("73a612b6fb191d")](Wa("35")));
						if(a.Gf && (c = Wa(e[2]), "#" === c[0])) {
							f = w.document.createElement("div");
							for(e = e[0].replace(/[A-Za-z]/g, ""); 4 > e.length;) e += "9";
							e = e.substr(e.length - 4);
							b = "" + ["gsh", "gsf"][parseInt(e.substr(0, 1), 10) % 2];
							b += ["Header", "Background", "Display", "Feedback"][parseInt(e.substr(0, 1), 10) % 4];
							f[Wa("79a417a0f0181a8946")] = b;
							if(w.document[Wa("78a712aa")]) {
								if(w.document[Wa("78a712aa")][Wa("7bb806b6ed32388c4a875b")](f), e = w.getComputedStyle(f).getPropertyValue(Wa("78a704b7e62456904c9b12701b6532a8")), w.document[Wa("78a712aa")][Wa("68ad1bbcf533388c4a875b")](f), e)
									if(-1 !== e.indexOf(parseInt(c[1] +
											c[2], 16)) && -1 !== e.indexOf(parseInt(c[3] + c[4], 16))) a.Gf = !1;
									else if($a || ab || bb || eb)
									for(b = "." + b, e = 0; e < document.styleSheets.length; e++)
										for(d in c = document.styleSheets[e].rules || document.styleSheets[e].cssRules, c)
											if(b === c[d].selectorText) {
												a.Gf = !1;
												break
											}
							} else a.Gf = !1
						}
					}
				}
			}
		}
		return 0 < a.Gf && a !== a.$x ? !0 : !1
	}

	function xi(a, b) {
		if(Ya) {
			void 0 !== b && null !== b || A("Diagram setup requires an argument DIV.");
			null !== a.Ia && A("Diagram has already completed setup.");
			"string" === typeof b ? a.Ia = w.document.getElementById(b) : b instanceof HTMLDivElement ? a.Ia = b : A("No DIV or DIV id supplied: " + b);
			null === a.Ia && A("Invalid DIV id; could not get element with id: " + b);
			void 0 !== a.Ia.F && A("Invalid div id; div already has a Diagram associated with it.");
			"static" === w.getComputedStyle(a.Ia, null).position && (a.Ia.style.position = "relative");
			a.Ia.style["-webkit-tap-highlight-color"] = "rgba(255, 255, 255, 0)";
			a.Ia.style["-ms-touch-action"] = "none";
			a.Ia.innerHTML = "";
			a.Ia.F = a;
			var c = new pk(a);
			c.Ha.innerHTML = "This text is displayed if your browser does not support the Canvas HTML element.";
			void 0 !== c.style && (c.style.position = "absolute", c.style.top = "0px", c.style.left = "0px", "rtl" === w.getComputedStyle(a.Ia, null).getPropertyValue("direction") && (a.Ln = !0), c.style.zIndex = "2", c.style.userSelect = "none", c.style.webkitUserSelect = "none", c.style.MozUserSelect =
				"none");
			a.xa = a.Ia.clientWidth || 1;
			a.wa = a.Ia.clientHeight || 1;
			a.Ea = c;
			a.$c = c.context;
			b = a.$c;
			a.Jb = a.computePixelRatio();
			uj(a, a.xa, a.wa);
			//			a.Zq = b.V[Wa("7eba17a4ca3b1a8346")][Wa("78a118b7")](b.V, tk, 4, 4);
			a.Zq = function() {
				return true;
			}
			a.Ia.insertBefore(c.Ha, a.Ia.firstChild);
			c = new pk(null);
			c.width = 1;
			c.height = 1;
			a.Pt = c;
			a.sw = c.context;
			if(Ya) {
				c = wa("div");
				var d = wa("div");
				c.style.position = "absolute";
				c.style.overflow = "auto";
				c.style.width = a.xa + "px";
				c.style.height = a.wa + "px";
				c.style.zIndex = "1";
				d.style.position = "absolute";
				d.style.width = "1px";
				d.style.height =
					"1px";
				a.Ia.appendChild(c);
				c.appendChild(d);
				c.onscroll = Ii;
				c.onmousedown = Ki;
				c.ontouchstart = Ki;
				c.F = a;
				c.Yx = !0;
				c.Zx = !0;
				a.ks = c;
				a.Zo = d
			}
			a.jt = ta(function() {
				a.ue = null;
				a.R()
			}, 300);
			a.Wv = ta(function() {
				Qh(a)
			}, 250);
			a.preventDefault = function(a) {
				a.preventDefault();
				return !1
			};
			a.ck = function(b) {
				if(a.isEnabled) {
					a.he = !0;
					var c = Wi(a, b, !0);
					a.doMouseMove();
					a.currentTool.isBeyondDragSize() && (a.Se = 0);
					bj(c, b)
				}
			};
			a.bk = function(b) {
				if(a.isEnabled)
					if(a.he = !0, a.Mg) b.preventDefault();
					else {
						var c = Wi(a, b, !0);
						c.down = !0;
						c.clickCount = b.detail;
						if(ab || bb) b.timeStamp - a.cl < a.tu && !a.currentTool.isBeyondDragSize() ? a.Se++ : a.Se = 1, a.cl = b.timeStamp, c.clickCount = a.Se;
						c.clone(a.firstInput);
						a.doMouseDown();
						1 === b.button ? b.preventDefault() : bj(c, b)
					}
			};
			a.ek = function(b) {
				if(a.isEnabled)
					if(a.Mg && 2 === b.button) b.preventDefault();
					else if(a.Mg && 0 === b.button && (a.Mg = !1), a.Gl) b.preventDefault();
				else {
					a.he = !0;
					var c = Wi(a, b, !0);
					c.up = !0;
					c.clickCount = b.detail;
					if(ab || bb) c.clickCount = a.Se;
					c.bubbles = b.bubbles;
					c.targetDiagram = Yi(b);
					a.doMouseUp();
					a.uf();
					bj(c, b)
				}
			};
			a.fk = function(b) {
				if(a.isEnabled) {
					var c =
						Wi(a, b, !0);
					c.bubbles = !0;
					if(void 0 !== b.deltaX) {
						var d = 0 < b.deltaX ? 1 : -1;
						var e = 0 < b.deltaY ? 1 : -1;
						c.delta = Math.abs(b.deltaX) > Math.abs(b.deltaY) ? -d : -e
					} else void 0 !== b.wheelDeltaX ? (d = 0 < b.wheelDeltaX ? -1 : 1, e = 0 < b.wheelDeltaY ? -1 : 1, c.delta = Math.abs(b.wheelDeltaX) > Math.abs(b.wheelDeltaY) ? -d : -e) : c.delta = void 0 !== b.wheelDelta ? 0 < b.wheelDelta ? 1 : -1 : 0;
					a.doMouseWheel();
					bj(c, b)
				}
			};
			a.dk = function(b) {
				a.isEnabled && (a.he = !1, Wi(a, b, !0), b = a.currentTool, b.cancelWaitAfter(), b.standardMouseOver())
			};
			a.Qv = function(b) {
				if(a.isEnabled) {
					a.Gl = !1;
					a.Mg = !0;
					var c = Zi(a, b, b.targetTouches[0], 1 < b.touches.length);
					a.doMouseDown();
					bj(c, b)
				}
			};
			a.Pv = function(b) {
				if(a.isEnabled) {
					var c = null;
					0 < b.targetTouches.length ? c = b.targetTouches[0] : 0 < b.changedTouches.length && (c = b.changedTouches[0]);
					c = aj(a, b, c, 1 < b.touches.length);
					a.doMouseMove();
					bj(c, b)
				}
			};
			a.Ov = function(b) {
				if(a.isEnabled)
					if(a.Gl) b.preventDefault();
					else if(!(1 < b.touches.length)) {
					var c = null,
						d = null;
					0 < b.targetTouches.length ? d = b.targetTouches[0] : 0 < b.changedTouches.length && (d = b.changedTouches[0]);
					var e = $i(a,
						b, !1, !0, !1, !1);
					if(null !== d) {
						c = w.document.elementFromPoint(d.clientX, d.clientY);
						null !== c && c.F instanceof Q && c.F !== a && Xi(c.F, d, e);
						Xi(a, d, e);
						var k = d.screenX;
						d = d.screenY;
						var l = a.Dr;
						b.timeStamp - a.cl < a.tu && !(25 < Math.abs(l.x - k) || 25 < Math.abs(l.y - d)) ? a.Se++ : a.Se = 1;
						e.clickCount = a.Se;
						a.cl = b.timeStamp;
						a.Dr.h(k, d)
					}
					null === c ? e.targetDiagram = Yi(b) : c.F ? e.targetDiagram = c.F : e.targetDiagram = null;
					e.targetObject = null;
					a.doMouseUp();
					bj(e, b);
					a.Mg = !1
				}
			};
			a.dm = function(b) {
				if(a.isEnabled) {
					a.he = !0;
					var c = a.hu;
					void 0 === c[b.pointerId] &&
						(c[b.pointerId] = b);
					c = a.nl;
					var d = !1;
					if(null !== c[0] && c[0].pointerId === b.pointerId) c[0] = b;
					else if(null !== c[1] && c[1].pointerId === b.pointerId) c[1] = b, d = !0;
					else if(null === c[0]) c[0] = b;
					else if(null === c[1]) c[1] = b, d = !0;
					else {
						b.preventDefault();
						return
					}
					if("touch" === b.pointerType || "pen" === b.pointerType) a.Gl = !1, a.Mg = !0;
					c = Zi(a, b, b, d);
					a.doMouseDown();
					1 === b.button ? b.preventDefault() : bj(c, b)
				}
			};
			a.em = function(b) {
				if(a.isEnabled) {
					a.he = !0;
					var c = a.nl;
					if(null !== c[0] && c[0].pointerId === b.pointerId) c[0] = b;
					else {
						if(null !== c[1] &&
							c[1].pointerId === b.pointerId) {
							c[1] = b;
							return
						}
						if(null === c[0]) c[0] = b;
						else return
					}
					c[0].pointerId === b.pointerId && (c = aj(a, b, b, null !== c[1]), a.doMouseMove(), bj(c, b))
				}
			};
			a.gm = function(b) {
				if(a.isEnabled) {
					a.he = !0;
					var c = "touch" === b.pointerType || "pen" === b.pointerType,
						d = a.hu;
					if(c && a.Gl) delete d[b.pointerId], b.preventDefault();
					else if(d = a.nl, null !== d[0] && d[0].pointerId === b.pointerId) {
						d[0] = null;
						d = $i(a, b, !1, !0, !0, !1);
						var e = w.document.elementFromPoint(b.clientX, b.clientY);
						null !== e && e.F instanceof Q && e.F !== a && Xi(e.F,
							b, d);
						Xi(a, b, d);
						var k = a.Dr,
							l = c ? 25 : 10;
						b.timeStamp - a.cl < a.tu && !(Math.abs(k.x - b.screenX) > l || Math.abs(k.y - b.screenY) > l) ? a.Se++ : a.Se = 1;
						d.clickCount = a.Se;
						a.cl = b.timeStamp;
						a.Dr.rg(b.screenX, b.screenY);
						null === e ? d.targetDiagram = Yi(b) : e.F ? d.targetDiagram = e.F : d.targetDiagram = null;
						d.targetObject = null;
						a.doMouseUp();
						bj(d, b);
						c && (a.Mg = !1)
					} else null !== d[1] && d[1].pointerId === b.pointerId && (d[1] = null)
				}
			};
			a.fm = function(b) {
				if(a.isEnabled) {
					a.he = !1;
					var c = a.hu;
					c[b.pointerId] && delete c[b.pointerId];
					c = a.nl;
					null !== c[0] && c[0].pointerId ===
						b.pointerId && (c[0] = null);
					null !== c[1] && c[1].pointerId === b.pointerId && (c[1] = null);
					"touch" !== b.pointerType && "pen" !== b.pointerType && (b = a.currentTool, b.cancelWaitAfter(), b.standardMouseOver())
				}
			};
			b.Tc(!0);
			Ei(a)
		}
	}
	wi.className = "DiagramHelper";

	function Kf(a) {
		this.l = void 0 === a ? new G : a;
		this.u = new G
	}
	oa.Object.defineProperties(Kf.prototype, {
		point: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		},
		shifted: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		}
	});
	Kf.className = "DraggingInfo";

	function Gj(a, b, c) {
		this.node = a;
		this.info = b;
		this.cz = c
	}
	Gj.className = "DraggingNodeInfoPair";

	function Df() {
		this.reset()
	}
	Df.prototype.reset = function() {
		this.isGridSnapEnabled = !1;
		this.isGridSnapRealtime = !0;
		this.gridSnapCellSize = (new L(NaN, NaN)).freeze();
		this.gridSnapCellSpot = ed;
		this.gridSnapOrigin = (new G(NaN, NaN)).freeze();
		this.dz = this.dragsLink = !1
	};

	function Ak(a) {
		1 < arguments.length && A("Palette constructor can only take one optional argument, the DIV HTML element or its id.");
		Q.call(this, a);
		this.allowDragOut = !0;
		this.allowMove = !1;
		this.isReadOnly = !0;
		this.contentAlignment = fd;
		this.layout = new Bk
	}
	na(Ak, Q);
	Ak.className = "Palette";

	function Ck(a) {
		1 < arguments.length && A("Overview constructor can only take one optional argument, the DIV HTML element or its id.");
		Q.call(this, a);
		this.animationManager.isEnabled = !1;
		this.tb = !0;
		this.Yf = null;
		this.$q = !0;
		this.Lx("drawShadows", !1);
		var b = new U,
			c = new qg;
		c.stroke = "magenta";
		c.strokeWidth = 2;
		c.fill = "transparent";
		c.name = "BOXSHAPE";
		b.selectable = !0;
		b.selectionAdorned = !1;
		b.selectionObjectName = "BOXSHAPE";
		b.locationObjectName = "BOXSHAPE";
		b.resizeObjectName = "BOXSHAPE";
		b.cursor = "move";
		b.add(c);
		this.l =
			b;
		this.allowDelete = this.allowCopy = !1;
		this.allowSelect = !0;
		this.autoScrollRegion = new Pc(0, 0, 0, 0);
		this.qu = new pk(null);
		this.ay = this.qu.context;
		Af(this.toolManager, "Dragging", new Dk, this.toolManager.mouseMoveTools);
		var d = this;
		this.click = function() {
			var a = d.Yf;
			if(null !== a) {
				var b = a.viewportBounds,
					c = d.lastInput.documentPoint;
				a.position = new G(c.x - b.width / 2, c.y - b.height / 2)
			}
		};
		this.ym = function() {
			d.Xa();
			Ek(d)
		};
		this.wm = function() {
			null !== d.Yf && (d.Xa(), d.R())
		};
		this.xm = function() {
			d.R()
		};
		this.vm = function() {
			null !==
				d.Yf && Ek(d)
		};
		this.autoScale = Si;
		this.tb = !1
	}
	na(Ck, Q);

	function Fk(a) {
		a.tb || a.Yb || !1 !== a.ud || (a.ud = !0, w.requestAnimationFrame(function() {
			if(a.ud && !a.Yb && (a.ud = !1, null !== a.Ia)) {
				a.Yb = !0;
				Mi(a);
				a.documentBounds.s() || Ri(a, a.computeBounds());
				null === a.Ia && A("No div specified");
				null === a.Ea && A("No canvas specified");
				di(a.box);
				if(a.qc) {
					var b = a.Yf;
					if(null !== b && !b.animationManager.isAnimating && !b.animationManager.ab) {
						b = a.$c;
						var c = a.qu;
						b.setTransform(1, 0, 0, 1, 0, 0);
						b.clearRect(0, 0, a.Ea.width, a.Ea.height);
						b.drawImage(c.Ha, 0, 0);
						c = a.wb;
						c.reset();
						1 !== a.scale && c.scale(a.scale);
						0 === a.position.x && 0 === a.position.y || c.translate(-a.position.x, -a.position.y);
						b.scale(a.Jb, a.Jb);
						b.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy);
						c = a.Ra.j;
						for(var d = c.length, e = 0; e < d; e++) c[e].jc(b, a);
						a.Zh = !1;
						a.qc = !1
					}
				}
				a.Yb = !1
			}
		}))
	}
	Ck.prototype.computePixelRatio = function() {
		return 1
	};
	Ck.prototype.jc = function() {
		null === this.Ia && A("No div specified");
		null === this.Ea && A("No canvas specified");
		di(this.box);
		if(this.qc) {
			var a = this.Yf;
			if(null !== a && !a.animationManager.isAnimating) {
				mj(this);
				var b = a.grid;
				null === b || !b.visible || isNaN(b.width) || isNaN(b.height) || (fj(a), Mi(a));
				var c = this.Ea;
				b = this.$c;
				var d = this.qu,
					e = this.ay;
				d.width = c.width;
				d.height = c.height;
				b.Tc(!0);
				b.setTransform(1, 0, 0, 1, 0, 0);
				b.clearRect(0, 0, c.width, c.height);
				d = this.wb;
				d.reset();
				1 !== this.scale && d.scale(this.scale);
				0 === this.position.x &&
					0 === this.position.y || d.translate(-this.position.x, -this.position.y);
				b.scale(this.Jb, this.Jb);
				b.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
				d = this.$q;
				var f = this.viewportBounds;
				a = a.Ra.j;
				for(var g = a.length, h = 0; h < g; h++) {
					var k = a[h],
						l = d;
					if(k.visible && 0 !== k.ob && (void 0 === l && (l = !0), l || !k.isTemporary)) {
						1 !== k.ob && (b.globalAlpha = k.ob);
						l = this.scale;
						k = k.Fa.j;
						for(var m = k.length, n = 0; n < m; n++) {
							var p = k[n],
								q = p.actualBounds;
							q.Kc(f) && (1 < q.width * l || 1 < q.height * l ? p.jc(b, this) : fi(b, p))
						}
						b.globalAlpha = 1
					}
				}
				e.drawImage(c.Ha,
					0, 0);
				c = this.Ra.j;
				e = c.length;
				for(d = 0; d < e; d++) c[d].jc(b, this);
				this.qc = this.Zh = !1
			}
		}
	};

	function Ek(a) {
		var b = a.box;
		if(null !== b) {
			var c = a.Yf;
			if(null !== c) {
				a.qc = !0;
				c = c.viewportBounds;
				var d = b.selectionObject,
					e = L.alloc();
				e.h(c.width, c.height);
				d.desiredSize = e;
				L.free(e);
				a = 2 / a.scale;
				d instanceof qg && (d.strokeWidth = a);
				b.location = new G(c.x - a / 2, c.y - a / 2);
				b.isSelected = !0
			}
		}
	}
	Ck.prototype.computeBounds = function() {
		var a = this.Yf;
		if(null === a) return Nc;
		var b = a.documentBounds.copy();
		b.Wc(a.viewportBounds);
		return b
	};
	Ck.prototype.sx = function() {
		!0 !== this.qc && (this.qc = !0, Fk(this))
	};
	Ck.prototype.$p = function(a, b, c, d) {
		this.tb || (Li(this), this.R(), cj(this), this.Xa(), Ek(this), this.we.scale = c, this.we.position.x = a.x, this.we.position.y = a.y, this.we.bounds.assign(a), this.we.wx = d, this.aa("ViewportBoundsChanged", this.we, a))
	};
	oa.Object.defineProperties(Ck.prototype, {
		observed: {
			get: function() {
				return this.Yf
			},
			set: function(a) {
				var b = this.Yf;
				a instanceof Ck && A("Overview.observed Diagram may not be an Overview itself: " + a);
				b !== a && (null !== b && (this.remove(this.box), b.hm("ViewportBoundsChanged", this.ym), b.hm("DocumentBoundsChanged", this.wm), b.hm("InvalidateDraw", this.xm), b.hm("AnimationFinished", this.vm)), this.Yf = a, null !== a && (a.Gj("ViewportBoundsChanged", this.ym), a.Gj("DocumentBoundsChanged", this.wm),
					a.Gj("InvalidateDraw", this.xm), a.Gj("AnimationFinished", this.vm), this.add(this.box), Ek(this)), this.Xa(), this.g("observed", b, a))
			}
		},
		box: {
			get: function() {
				return this.l
			},
			set: function(a) {
				var b = this.l;
				b !== a && (this.l = a, this.remove(b), this.add(this.l), Ek(this), this.g("box", b, a))
			}
		},
		drawsTemporaryLayers: {
			get: function() {
				return this.$q
			},
			set: function(a) {
				this.$q !== a && (this.$q = a, this.ik())
			}
		}
	});
	Ck.className = "Overview";

	function Dk() {
		Cf.call(this);
		this.l = null
	}
	na(Dk, Cf);
	Dk.prototype.canStart = function() {
		if(!this.isEnabled) return !1;
		var a = this.diagram;
		if(null === a || !a.allowMove || !a.allowSelect) return !1;
		var b = a.observed;
		if(null === b) return !1;
		var c = a.lastInput;
		if(!c.left || a.currentTool !== this && (!this.isBeyondDragSize() || c.isTouchEvent && c.timestamp - a.firstInput.timestamp < this.delay)) return !1;
		null === this.findDraggablePart() && (c = b.viewportBounds, this.l = new G(c.width / 2, c.height / 2), a = a.firstInput.documentPoint, b.position = new G(a.x - this.l.x, a.y - this.l.y));
		return !0
	};
	Dk.prototype.doActivate = function() {
		this.l = null;
		Cf.prototype.doActivate.call(this)
	};
	Dk.prototype.moveParts = function() {
		var a = this.diagram,
			b = a.observed;
		if(null !== b) {
			var c = a.box;
			if(null !== c) {
				if(null === this.l) {
					var d = a.firstInput.documentPoint;
					c = c.location;
					this.l = new G(d.x - c.x, d.y - c.y)
				}
				a = a.lastInput.documentPoint;
				b.position = new G(a.x - this.l.x, a.y - this.l.y)
			}
		}
	};
	Dk.className = "OverviewDraggingTool";

	function Gk() {
		rb(this);
		this.F = lf;
		this.eb = this.K = this.u = !0;
		this.da = this.Va = this.nd = this.Wa = !1;
		this.gi = this.l = null;
		this.Xc = 1.05;
		this.$t = NaN;
		this.yw = null;
		this.wu = NaN;
		this.vu = Nc;
		this.cg = null;
		this.Lc = 200
	}
	Gk.prototype.toString = function() {
		return "CommandHandler"
	};
	Gk.prototype.rb = function(a) {
		this.F = a
	};
	Gk.prototype.doKeyDown = function() {
		var a = this.diagram,
			b = a.lastInput,
			c = fb ? b.meta : b.control,
			d = b.shift,
			e = b.alt,
			f = b.key;
		!c || "C" !== f && "Insert" !== f ? c && "X" === f || d && "Del" === f ? this.canCutSelection() && this.cutSelection() : c && "V" === f || d && "Insert" === f ? this.canPasteSelection() && this.pasteSelection() : c && "Y" === f || e && d && "Backspace" === f ? this.canRedo() && this.redo() : c && "Z" === f || e && "Backspace" === f ? this.canUndo() && this.undo() : "Del" === f || "Backspace" === f ? this.canDeleteSelection() && this.deleteSelection() : c && "A" === f ? this.canSelectAll() &&
			this.selectAll() : "Esc" === f ? this.canStopCommand() && this.stopCommand() : "Up" === f ? a.allowVerticalScroll && (c ? a.scroll("pixel", "up") : a.scroll("line", "up")) : "Down" === f ? a.allowVerticalScroll && (c ? a.scroll("pixel", "down") : a.scroll("line", "down")) : "Left" === f ? a.allowHorizontalScroll && (c ? a.scroll("pixel", "left") : a.scroll("line", "left")) : "Right" === f ? a.allowHorizontalScroll && (c ? a.scroll("pixel", "right") : a.scroll("line", "right")) : "PageUp" === f ? d && a.allowHorizontalScroll ? a.scroll("page", "left") : a.allowVerticalScroll &&
			a.scroll("page", "up") : "PageDown" === f ? d && a.allowHorizontalScroll ? a.scroll("page", "right") : a.allowVerticalScroll && a.scroll("page", "down") : "Home" === f ? c && a.allowVerticalScroll ? a.scroll("document", "up") : !c && a.allowHorizontalScroll && a.scroll("document", "left") : "End" === f ? c && a.allowVerticalScroll ? a.scroll("document", "down") : !c && a.allowHorizontalScroll && a.scroll("document", "right") : " " === f ? this.canScrollToPart() && this.scrollToPart() : "Subtract" === f ? this.canDecreaseZoom() && this.decreaseZoom() : "Add" === f ? this.canIncreaseZoom() &&
			this.increaseZoom() : c && "0" === f ? this.canResetZoom() && this.resetZoom() : d && "Z" === f ? this.canZoomToFit() && this.zoomToFit() : c && !d && "G" === f ? this.canGroupSelection() && this.groupSelection() : c && d && "G" === f ? this.canUngroupSelection() && this.ungroupSelection() : b.event && 113 === b.event.which ? this.canEditTextBlock() && this.editTextBlock() : b.event && 93 === b.event.which ? this.canShowContextMenu() && this.showContextMenu() : b.bubbles = !0 : this.canCopySelection() && this.copySelection()
	};
	Gk.prototype.doKeyUp = function() {
		this.diagram.lastInput.bubbles = !0
	};
	Gk.prototype.stopCommand = function() {
		var a = this.diagram,
			b = a.currentTool;
		b instanceof Va && a.allowSelect && a.Gs();
		null !== b && b.doCancel()
	};
	Gk.prototype.canStopCommand = function() {
		return !0
	};
	Gk.prototype.selectAll = function() {
		var a = this.diagram;
		a.R();
		try {
			a.currentCursor = "wait";
			a.aa("ChangingSelection", a.selection);
			for(var b = a.parts; b.next();) b.value.isSelected = !0;
			for(var c = a.nodes; c.next();) c.value.isSelected = !0;
			for(var d = a.links; d.next();) d.value.isSelected = !0
		} finally {
			a.aa("ChangedSelection", a.selection), a.currentCursor = ""
		}
	};
	Gk.prototype.canSelectAll = function() {
		return this.diagram.allowSelect
	};
	Gk.prototype.deleteSelection = function() {
		var a = this.diagram;
		try {
			a.currentCursor = "wait";
			a.Aa("Delete");
			a.aa("ChangingSelection", a.selection);
			a.aa("SelectionDeleting", a.selection);
			for(var b = new F, c = a.selection.iterator; c.next();) Hk(b, c.value, !0, this.deletesTree ? Infinity : 0, this.deletesConnectedLinks ? null : !1, function(a) {
				return a.canDelete()
			});
			a.mt(b, !0);
			a.aa("SelectionDeleted", b)
		} finally {
			a.aa("ChangedSelection", a.selection), a.bb("Delete"), a.currentCursor = ""
		}
	};
	Gk.prototype.canDeleteSelection = function() {
		var a = this.diagram;
		return a.isReadOnly || a.isModelReadOnly || !a.allowDelete || 0 === a.selection.count ? !1 : !0
	};
	Gk.prototype.copySelection = function() {
		var a = this.diagram,
			b = new F;
		for(a = a.selection.iterator; a.next();) Hk(b, a.value, !0, this.copiesTree ? Infinity : 0, this.copiesConnectedLinks, function(a) {
			return a.canCopy()
		});
		this.copyToClipboard(b)
	};
	Gk.prototype.canCopySelection = function() {
		var a = this.diagram;
		return a.allowCopy && a.allowClipboard && 0 !== a.selection.count ? !0 : !1
	};
	Gk.prototype.cutSelection = function() {
		this.copySelection();
		this.deleteSelection()
	};
	Gk.prototype.canCutSelection = function() {
		var a = this.diagram;
		return !a.isReadOnly && !a.isModelReadOnly && a.allowCopy && a.allowDelete && a.allowClipboard && 0 !== a.selection.count ? !0 : !1
	};
	Gk.prototype.copyToClipboard = function(a) {
		var b = this.diagram,
			c = null;
		if(null === a) yi = null, zi = "";
		else {
			c = b.model;
			var d = !1,
				e = !1,
				f = null;
			try {
				c.$l() && (d = c.Pj, c.Pj = this.copiesParentKey), c.Xj() && (e = c.Oj, c.Oj = this.copiesGroupKey), f = b.Qj(a, null, !0)
			} finally {
				c.$l() && (c.Pj = d), c.Xj() && (c.Oj = e), c = new E, c.addAll(f), yi = c, zi = b.model.dataFormat
			}
		}
		b.aa("ClipboardChanged", c)
	};
	Gk.prototype.pasteFromClipboard = function() {
		var a = new F,
			b = yi;
		if(null === b) return a;
		var c = this.diagram;
		if(zi !== c.model.dataFormat) return a;
		var d = c.model,
			e = !1,
			f = !1,
			g = null;
		try {
			d.$l() && (e = d.Pj, d.Pj = this.copiesParentKey), d.Xj() && (f = d.Oj, d.Oj = this.copiesGroupKey), g = c.Qj(b, c, !1)
		} finally {
			for(d.$l() && (d.Pj = e), d.Xj() && (d.Oj = f), b = g.iterator; b.next();) c = b.value, d = b.key, c.location.s() || (d.location.s() ? c.location = d.location : !c.position.s() && d.position.s() && (c.position = d.position)), a.add(c)
		}
		return a
	};
	Gk.prototype.pasteSelection = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		try {
			b.currentCursor = "wait";
			b.Aa("Paste");
			b.aa("ChangingSelection", b.selection);
			var c = this.pasteFromClipboard();
			0 < c.count && Ef(b);
			for(var d = c.iterator; d.next();) d.value.isSelected = !0;
			b.aa("ChangedSelection", b.selection);
			if(null !== a) {
				var e = b.computePartsBounds(b.selection);
				if(e.s()) {
					var f = this.computeEffectiveCollection(b.selection, b.Fk);
					Yf(b, f, new G(a.x - e.centerX, a.y - e.centerY), b.Fk, !1)
				}
			}
			b.aa("ClipboardPasted", c)
		} finally {
			b.bb("Paste"),
				b.currentCursor = ""
		}
	};
	Gk.prototype.canPasteSelection = function() {
		var a = this.diagram;
		return a.isReadOnly || a.isModelReadOnly || !a.allowInsert || !a.allowClipboard || null === yi || 0 === yi.count || zi !== a.model.dataFormat ? !1 : !0
	};
	Gk.prototype.undo = function() {
		this.diagram.undoManager.undo()
	};
	Gk.prototype.canUndo = function() {
		var a = this.diagram;
		return a.isReadOnly || a.isModelReadOnly ? !1 : a.allowUndo && a.undoManager.canUndo()
	};
	Gk.prototype.redo = function() {
		this.diagram.undoManager.redo()
	};
	Gk.prototype.canRedo = function() {
		var a = this.diagram;
		return a.isReadOnly || a.isModelReadOnly ? !1 : a.allowUndo && a.undoManager.canRedo()
	};
	Gk.prototype.decreaseZoom = function(a) {
		void 0 === a && (a = 1 / this.zoomFactor);
		var b = this.diagram;
		b.autoScale === ni && (a = b.scale * a, a < b.minScale || a > b.maxScale || (b.scale = a))
	};
	Gk.prototype.canDecreaseZoom = function(a) {
		void 0 === a && (a = 1 / this.zoomFactor);
		var b = this.diagram;
		if(b.autoScale !== ni) return !1;
		a = b.scale * a;
		return a < b.minScale || a > b.maxScale ? !1 : b.allowZoom
	};
	Gk.prototype.increaseZoom = function(a) {
		void 0 === a && (a = this.zoomFactor);
		var b = this.diagram;
		b.autoScale === ni && (a = b.scale * a, a < b.minScale || a > b.maxScale || (b.scale = a))
	};
	Gk.prototype.canIncreaseZoom = function(a) {
		void 0 === a && (a = this.zoomFactor);
		var b = this.diagram;
		if(b.autoScale !== ni) return !1;
		a = b.scale * a;
		return a < b.minScale || a > b.maxScale ? !1 : b.allowZoom
	};
	Gk.prototype.resetZoom = function(a) {
		void 0 === a && (a = this.defaultScale);
		var b = this.diagram;
		a < b.minScale || a > b.maxScale || (b.scale = a)
	};
	Gk.prototype.canResetZoom = function(a) {
		void 0 === a && (a = this.defaultScale);
		var b = this.diagram;
		return a < b.minScale || a > b.maxScale ? !1 : b.allowZoom
	};
	Gk.prototype.zoomToFit = function() {
		var a = this.diagram,
			b = a.scale,
			c = a.position;
		b === this.wu && !isNaN(this.$t) && a.documentBounds.A(this.vu) ? (a.scale = this.$t, a.position = this.yw, this.wu = NaN, this.vu = Nc) : (this.$t = b, this.yw = c.copy(), a.zoomToFit(), this.wu = a.scale, this.vu = a.documentBounds.copy())
	};
	Gk.prototype.canZoomToFit = function() {
		return this.diagram.allowZoom
	};
	Gk.prototype.scrollToPart = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		if(null === a) {
			try {
				null !== this.cg && (this.cg.next() ? a = this.cg.value : this.cg = null)
			} catch(k) {
				this.cg = null
			}
			null === a && (0 < b.highlighteds.count ? this.cg = b.highlighteds.iterator : 0 < b.selection.count && (this.cg = b.selection.iterator), null !== this.cg && this.cg.next() && (a = this.cg.value))
		}
		if(null !== a) {
			var c = b.animationManager;
			c.Ji("Scroll To Part");
			var d = this.scrollToPartPause;
			if(0 < d) {
				var e = Ik(this, a, [a]),
					f = function() {
						b.Aa();
						for(var a = e.pop(); 0 <
							e.length && a instanceof W && a.isTreeExpanded && (!(a instanceof V) || a.isSubGraphExpanded);) a = e.pop();
						0 < e.length ? (a instanceof U && b.xv(a.actualBounds), a instanceof W && !a.isTreeExpanded && (a.isTreeExpanded = !0), a instanceof V && !a.isSubGraphExpanded && (a.isSubGraphExpanded = !0)) : (a instanceof U && b.Au(a.actualBounds), b.hm("LayoutCompleted", g));
						b.bb("Scroll To Part")
					},
					g = function() {
						setTimeout(f, (c.isEnabled ? c.duration : 0) + d)
					};
				b.Gj("LayoutCompleted", g);
				f()
			} else {
				var h = b.position.copy();
				b.Au(a.actualBounds);
				h.Oa(b.position) &&
					c.Yd()
			}
		}
	};

	function Ik(a, b, c) {
		if(b.isVisible()) return c;
		if(b instanceof pf) Ik(a, b.adornedPart, c);
		else if(b instanceof S) {
			var d = b.fromNode;
			null !== d && Ik(a, d, c);
			b = b.toNode;
			null !== b && Ik(a, b, c)
		} else b instanceof W && (d = b.labeledLink, null !== d && Ik(a, d, c), d = b.og(), null !== d && (d.isTreeExpanded || d.wasTreeExpanded || c.push(d), Ik(a, d, c))), b = b.containingGroup, null !== b && (b.isSubGraphExpanded || b.wasSubGraphExpanded || c.push(b), Ik(a, b, c));
		return c
	}
	Gk.prototype.canScrollToPart = function(a) {
		void 0 === a && (a = null);
		if(null !== a && !(a instanceof U)) return !1;
		a = this.diagram;
		return 0 === a.selection.count && 0 === a.highlighteds.count ? !1 : a.allowHorizontalScroll && a.allowVerticalScroll
	};
	Gk.prototype.collapseTree = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		try {
			b.Aa("Collapse Tree");
			b.animationManager.Ji("Collapse Tree");
			var c = new E;
			if(null !== a && a.isTreeExpanded) a.collapseTree(), c.add(a);
			else
				for(var d = b.selection.iterator; d.next();) {
					var e = d.value;
					e instanceof W && e.isTreeExpanded && (e.collapseTree(), c.add(e))
				}
			b.aa("TreeCollapsed", c)
		} finally {
			b.bb("Collapse Tree")
		}
	};
	Gk.prototype.canCollapseTree = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		if(b.isReadOnly) return !1;
		if(null !== a) {
			if(!(a instanceof W && a.isTreeExpanded)) return !1;
			if(0 < a.Op().count) return !0
		} else
			for(a = b.selection.iterator; a.next();)
				if(b = a.value, b instanceof W && b.isTreeExpanded && 0 < b.Op().count) return !0;
		return !1
	};
	Gk.prototype.expandTree = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		try {
			b.Aa("Expand Tree");
			b.animationManager.Ji("Expand Tree");
			var c = new E;
			if(null === a || a.isTreeExpanded)
				for(var d = b.selection.iterator; d.next();) {
					var e = d.value;
					e instanceof W && !e.isTreeExpanded && (e.expandTree(), c.add(e))
				} else a.expandTree(), c.add(a);
			b.aa("TreeExpanded", c)
		} finally {
			b.bb("Expand Tree")
		}
	};
	Gk.prototype.canExpandTree = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		if(b.isReadOnly) return !1;
		if(null !== a) {
			if(!(a instanceof W) || a.isTreeExpanded) return !1;
			if(0 < a.Op().count) return !0
		} else
			for(a = b.selection.iterator; a.next();)
				if(b = a.value, b instanceof W && !b.isTreeExpanded && 0 < b.Op().count) return !0;
		return !1
	};
	Gk.prototype.groupSelection = function() {
		var a = this.diagram,
			b = a.model;
		if(Jk(b)) {
			var c = this.archetypeGroupData;
			if(null !== c) {
				var d = null;
				try {
					a.currentCursor = "wait";
					a.Aa("Group");
					a.aa("ChangingSelection", a.selection);
					for(var e = new E, f = a.selection.iterator; f.next();) {
						var g = f.value;
						g.ac() && g.canGroup() && e.add(g)
					}
					for(var h = new E, k = e.iterator; k.next();) {
						var l = k.value;
						f = !1;
						for(var m = e.iterator; m.next();)
							if(l.Ee(m.value)) {
								f = !0;
								break
							}
						f || h.add(l)
					}
					if(0 < h.count) {
						var n = h.first().containingGroup;
						if(null !== n)
							for(; null !==
								n;) {
								e = !1;
								for(var p = h.iterator; p.next();)
									if(!p.value.Ee(n)) {
										e = !0;
										break
									}
								if(e) n = n.containingGroup;
								else break
							}
						if(c instanceof V) ch(c), d = c.copy(), null !== d && a.add(d);
						else if(b.bv(c)) {
							var q = b.copyNodeData(c);
							Ea(q) && (b.lh(q), d = a.Ai(q))
						}
						if(null !== d) {
							null !== n && this.isValidMember(n, d) && (d.containingGroup = n);
							for(var r = h.iterator; r.next();) {
								var u = r.value;
								this.isValidMember(d, u) && (u.containingGroup = d)
							}
							a.select(d)
						}
					}
					a.aa("ChangedSelection", a.selection);
					a.aa("SelectionGrouped", d)
				} finally {
					a.bb("Group"), a.currentCursor =
						""
				}
			}
		}
	};
	Gk.prototype.canGroupSelection = function() {
		var a = this.diagram;
		if(a.isReadOnly || a.isModelReadOnly || !a.allowInsert || !a.allowGroup || !Jk(a.model) || null === this.archetypeGroupData) return !1;
		for(a = a.selection.iterator; a.next();) {
			var b = a.value;
			if(b.ac() && b.canGroup()) return !0
		}
		return !1
	};

	function Kk(a) {
		var b = La();
		for(a = a.iterator; a.next();) {
			var c = a.value;
			c instanceof S || b.push(c)
		}
		a = new F;
		c = b.length;
		for(var d = 0; d < c; d++) {
			for(var e = b[d], f = !0, g = 0; g < c; g++)
				if(e.Ee(b[g])) {
					f = !1;
					break
				}
			f && a.add(e)
		}
		Na(b);
		return a
	}
	Gk.prototype.isValidMember = function(a, b) {
		if(null === b || a === b || b instanceof S) return !1;
		if(null !== a) {
			if(a === b || a.Ee(b)) return !1;
			var c = a.memberValidation;
			if(null !== c && !c(a, b) || null === a.data && null !== b.data || null !== a.data && null === b.data) return !1
		}
		c = this.memberValidation;
		return null !== c ? c(a, b) : !0
	};
	Gk.prototype.ungroupSelection = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram,
			c = b.model;
		if(Jk(c)) try {
			b.currentCursor = "wait";
			b.Aa("Ungroup");
			b.aa("ChangingSelection", b.selection);
			var d = new E;
			if(null !== a) d.add(a);
			else
				for(var e = b.selection.iterator; e.next();) {
					var f = e.value;
					f instanceof V && f.canUngroup() && d.add(f)
				}
			var g = new E;
			if(0 < d.count) {
				b.Gs();
				for(var h = d.iterator; h.next();) {
					var k = h.value;
					k.expandSubGraph();
					var l = k.containingGroup,
						m = null !== l && null !== l.data ? c.sa(l.data) : void 0;
					g.addAll(k.memberParts);
					for(var n = g.iterator; n.next();) {
						var p = n.value;
						p.isSelected = !0;
						if(!(p instanceof S)) {
							var q = p.data;
							null !== q ? c.Bv(q, m) : p.containingGroup = l
						}
					}
					b.remove(k)
				}
			}
			b.aa("ChangedSelection", b.selection);
			b.aa("SelectionUngrouped", d, g)
		} finally {
			b.bb("Ungroup"), b.currentCursor = ""
		}
	};
	Gk.prototype.canUngroupSelection = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		if(b.isReadOnly || b.isModelReadOnly || !b.allowDelete || !b.allowUngroup || !Jk(b.model)) return !1;
		if(null !== a) {
			if(!(a instanceof V)) return !1;
			if(a.canUngroup()) return !0
		} else
			for(a = b.selection.iterator; a.next();)
				if(b = a.value, b instanceof V && b.canUngroup()) return !0;
		return !1
	};
	Gk.prototype.addTopLevelParts = function(a, b) {
		var c = !0;
		for(a = Kk(a).iterator; a.next();) {
			var d = a.value;
			null !== d.containingGroup && (!b || this.isValidMember(null, d) ? d.containingGroup = null : c = !1)
		}
		return c
	};
	Gk.prototype.collapseSubGraph = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		try {
			b.Aa("Collapse SubGraph");
			b.animationManager.Ji("Collapse SubGraph");
			var c = new E;
			if(null !== a && a.isSubGraphExpanded) a.collapseSubGraph(), c.add(a);
			else
				for(var d = b.selection.iterator; d.next();) {
					var e = d.value;
					e instanceof V && e.isSubGraphExpanded && (e.collapseSubGraph(), c.add(e))
				}
			b.aa("SubGraphCollapsed", c)
		} finally {
			b.bb("Collapse SubGraph")
		}
	};
	Gk.prototype.canCollapseSubGraph = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		if(b.isReadOnly) return !1;
		if(null !== a) return a instanceof V && a.isSubGraphExpanded ? !0 : !1;
		for(a = b.selection.iterator; a.next();)
			if(b = a.value, b instanceof V && b.isSubGraphExpanded) return !0;
		return !1
	};
	Gk.prototype.expandSubGraph = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		try {
			b.Aa("Expand SubGraph");
			b.animationManager.Ji("Expand SubGraph");
			var c = new E;
			if(null === a || a.isSubGraphExpanded)
				for(var d = b.selection.iterator; d.next();) {
					var e = d.value;
					e instanceof V && !e.isSubGraphExpanded && (e.expandSubGraph(), c.add(e))
				} else a.expandSubGraph(), c.add(a);
			b.aa("SubGraphExpanded", c)
		} finally {
			b.bb("Expand SubGraph")
		}
	};
	Gk.prototype.canExpandSubGraph = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		if(b.isReadOnly) return !1;
		if(null !== a) return a instanceof V && !a.isSubGraphExpanded ? !0 : !1;
		for(a = b.selection.iterator; a.next();)
			if(b = a.value, b instanceof V && !b.isSubGraphExpanded) return !0;
		return !1
	};
	Gk.prototype.editTextBlock = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram,
			c = b.toolManager.findTool("TextEditing");
		if(null !== c) {
			if(null === a) {
				a = null;
				for(var d = b.selection.iterator; d.next();) {
					var e = d.value;
					if(e.canEdit()) {
						a = e;
						break
					}
				}
				if(null === a) return;
				a = a.Tl(function(a) {
					return a instanceof wh && a.editable
				})
			}
			null !== a && (b.currentTool = null, c.textBlock = a, b.currentTool = c)
		}
	};
	Gk.prototype.canEditTextBlock = function(a) {
		void 0 === a && (a = null);
		var b = this.diagram;
		if(b.isReadOnly || b.isModelReadOnly || !b.allowTextEdit || null === b.toolManager.findTool("TextEditing")) return !1;
		if(null !== a) {
			if(!(a instanceof wh)) return !1;
			a = a.part;
			if(null !== a && a.canEdit()) return !0
		} else
			for(b = b.selection.iterator; b.next();)
				if(a = b.value, a.canEdit() && (a = a.Tl(function(a) {
						return a instanceof wh && a.editable
					}), null !== a)) return !0;
		return !1
	};
	Gk.prototype.showContextMenu = function(a) {
		var b = this.diagram,
			c = b.toolManager.findTool("ContextMenu");
		if(null !== c && (void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b), a = c.findObjectWithContextMenu(a), null !== a)) {
			var d = b.lastInput,
				e = null;
			a instanceof P ? e = a.ka(id) : b.isMouseOverDiagram || (e = b.viewportBounds, e = new G(e.x + e.width / 2, e.y + e.height / 2));
			null !== e && (d.viewPoint = b.st(e), d.documentPoint = e, d.left = !1, d.right = !0, d.up = !0);
			b.currentTool = c;
			th(c, !1, a)
		}
	};
	Gk.prototype.canShowContextMenu = function(a) {
		var b = this.diagram,
			c = b.toolManager.findTool("ContextMenu");
		if(null === c) return !1;
		void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b);
		return null === c.findObjectWithContextMenu(a) ? !1 : !0
	};
	Gk.prototype.computeEffectiveCollection = function(a, b) {
		var c = this.diagram,
			d = c.toolManager.findTool("Dragging"),
			e = c.currentTool === d;
		void 0 === b && (b = e ? d.dragOptions : c.Fk);
		d = new Nb;
		if(null === a) return d;
		for(var f = a.iterator; f.next();) Ej(c, d, f.value, e, b);
		if(null !== c.draggedLink && b.dragsLink) return d;
		for(f = a.iterator; f.next();) a = f.value, a instanceof S && (b = a.fromNode, null === b || d.contains(b) ? (b = a.toNode, null === b || d.contains(b) || d.remove(a)) : d.remove(a));
		return d
	};
	oa.Object.defineProperties(Gk.prototype, {
		diagram: {
			get: function() {
				return this.F
			}
		},
		copiesClipboardData: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u = a
			}
		},
		copiesConnectedLinks: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K = a
			}
		},
		deletesConnectedLinks: {
			get: function() {
				return this.eb
			},
			set: function(a) {
				this.eb = a
			}
		},
		copiesTree: {
			get: function() {
				return this.Wa
			},
			set: function(a) {
				this.Wa = a
			}
		},
		deletesTree: {
			get: function() {
				return this.nd
			},
			set: function(a) {
				this.nd = a
			}
		},
		copiesParentKey: {
			get: function() {
				return this.Va
			},
			set: function(a) {
				this.Va = a
			}
		},
		copiesGroupKey: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da = a
			}
		},
		archetypeGroupData: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l = a
			}
		},
		memberValidation: {
			get: function() {
				return this.gi
			},
			set: function(a) {
				this.gi = a
			}
		},
		defaultScale: {
			get: function() {
				return this.diagram.defaultScale
			},
			set: function(a) {
				this.diagram.defaultScale = a
			}
		},
		zoomFactor: {
			get: function() {
				return this.Xc
			},
			set: function(a) {
				1 < a || A("zoomFactor must be larger than 1.0, not: " + a);
				this.Xc = a
			}
		},
		scrollToPartPause: {
			get: function() {
				return this.Lc
			},
			set: function(a) {
				this.Lc = a
			}
		}
	});
	Gk.className = "CommandHandler";
	ui = function() {
		return new Gk
	};

	function P() {
		rb(this);
		this.G = 4225027;
		this.ob = 1;
		this.ag = null;
		this.Ta = "";
		this.dc = this.kb = null;
		this.ra = (new G(NaN, NaN)).freeze();
		this.Oc = qc;
		this.Qf = gc;
		this.Pf = pc;
		this.wb = new Yc;
		this.zh = new Yc;
		this.Nf = new Yc;
		this.Ca = this.Lk = 1;
		this.Bc = 0;
		this.te = Lk;
		this.Rg = Wc;
		this.sc = (new M(NaN, NaN, NaN, NaN)).freeze();
		this.yb = (new M(NaN, NaN, NaN, NaN)).freeze();
		this.hc = (new M(0, 0, NaN, NaN)).freeze();
		this.P = this.Ho = this.Io = null;
		this.sk = this.zb = Hd;
		this.Vo = 0;
		this.Wo = 1;
		this.zg = 0;
		this.Rm = 1;
		this.lp = null;
		this.$o = -Infinity;
		this.ql =
			0;
		this.rl = bc;
		this.sl = Tg;
		this.$m = "";
		this.gb = this.O = null;
		this.xk = -1;
		this.ul = this.od = this.Oh = this.xl = null;
		this.bs = dh;
		this.uj = null
	}
	var ge, dh, fh, Lk, Mk, Nk, Ok, Pk, Qk, Rk;
	P.prototype.cloneProtected = function(a) {
		a.G = this.G | 6144;
		a.ob = this.ob;
		a.Ta = this.Ta;
		a.kb = this.kb;
		a.dc = this.dc;
		a.ra.assign(this.ra);
		a.Oc = this.Oc.I();
		a.Qf = this.Qf.I();
		a.Pf = this.Pf.I();
		a.Nf = this.Nf.copy();
		a.Ca = this.Ca;
		a.Bc = this.Bc;
		a.te = this.te;
		a.Rg = this.Rg.I();
		a.sc.assign(this.sc);
		a.yb.assign(this.yb);
		a.hc.assign(this.hc);
		a.Ho = this.Ho;
		null !== this.P && (a.P = this.P.copy());
		a.zb = this.zb.I();
		a.sk = this.sk.I();
		a.Vo = this.Vo;
		a.Wo = this.Wo;
		a.zg = this.zg;
		a.Rm = this.Rm;
		a.lp = this.lp;
		a.$o = this.$o;
		a.ql = this.ql;
		a.rl = this.rl.I();
		a.sl = this.sl;
		a.$m = this.$m;
		null !== this.O && (a.O = this.O.copy());
		a.gb = this.gb;
		a.xk = this.xk;
		null !== this.Oh && (a.Oh = Ha(this.Oh));
		null !== this.od && (a.od = this.od.copy());
		a.ul = this.ul
	};
	P.prototype.Nw = function(a) {
		var b = this.Oh;
		if(Ga(b))
			for(var c = 0; c < b.length; c++) {
				if(b[c] === a) return
			} else this.Oh = b = [];
		b.push(a)
	};
	P.prototype.lf = function(a) {
		a.Io = null;
		a.uj = null;
		a.o()
	};
	P.prototype.clone = function() {
		var a = new this.constructor;
		this.cloneProtected(a);
		if(null !== this.Oh)
			for(var b = 0; b < this.Oh.length; b++) {
				var c = this.Oh[b];
				a[c] = this[c]
			}
		return a
	};
	P.prototype.copy = function() {
		return this.clone()
	};
	t = P.prototype;
	t.ib = function(a) {
		a.classType === S ? 0 === a.name.indexOf("Orient") ? this.segmentOrientation = a : A("Unknown Link enum value for GraphObject.segmentOrientation property: " + a) : a.classType === P && (this.stretch = a)
	};
	t.toString = function() {
		return Oa(this.constructor) + "#" + Bb(this)
	};

	function Sk(a) {
		null === a.O && (a.O = new Tk)
	}
	t.Jc = function() {
		if(null === this.P) {
			var a = new Uk;
			a.Ig = dd;
			a.gh = dd;
			a.Gg = 10;
			a.eh = 10;
			a.Hg = 0;
			a.fh = 0;
			this.P = a
		}
	};
	t.cb = function(a, b, c, d, e, f, g) {
		var h = this.part;
		if(null !== h && (h.hk(a, b, c, d, e, f, g), Vk(this) && c === this && a === Ze && Wk(this, h, b), this instanceof Y && c === h && 0 !== (h.G & 16777216) && null !== h.data))
			for(a = this.W.j, c = a.length, d = 0; d < c; d++) e = a[d], e instanceof Y && vj(e, function(a) {
				null !== a.data && 0 !== (a.G & 16777216) && a.Da(b)
			})
	};

	function Wk(a, b, c) {
		var d = a.qh();
		if(null !== d)
			for(var e = a.gb.iterator; e.next();) {
				var f = e.value,
					g = null;
				if(null !== f.sourceName) {
					g = Xk(f, d, a);
					if(null === g) continue;
					f.rq(a, g, c, null)
				} else if(f.isToModel) {
					var h = b.diagram;
					null === h || h.skipsModelSourceBindings || f.rq(a, h.model.modelData, c, d)
				} else {
					h = d.data;
					if(null === h) continue;
					var k = b.diagram;
					null === k || k.skipsModelSourceBindings || f.rq(a, h, c, d)
				}
				g === a && (h = d.Ns(f.Oi), null !== h && f.Uv(h, g, c))
			}
	}
	t.Ns = function(a) {
		return this.xk === a ? this : null
	};
	t.g = function(a, b, c) {
		this.cb(Ze, a, this, b, c)
	};

	function Yk(a, b, c, d, e) {
		var f = a.sc,
			g = a.Nf;
		g.reset();
		Zk(a, g, b, c, d, e);
		a.Nf = g;
		f.h(b, c, d, e);
		g.$s() || g.Rv(f)
	}

	function $k(a, b, c, d) {
		if(!1 === a.pickable) return !1;
		d.multiply(a.transform);
		return c ? a.Kc(b, d) : a.oh(b, d)
	}
	t.ix = function(a, b, c) {
		if(!1 === this.pickable) return !1;
		var d = this.naturalBounds;
		b = a.Be(b);
		return c ? Yb(a.x, a.y, 0, 0, 0, d.height) <= b || Yb(a.x, a.y, 0, d.height, d.width, d.height) <= b || Yb(a.x, a.y, d.width, d.height, d.width, 0) <= b || Yb(a.x, a.y, d.width, 0, 0, 0) <= b : a.ed(0, 0) <= b && a.ed(0, d.height) <= b && a.ed(d.width, 0) <= b && a.ed(d.width, d.height) <= b
	};
	t.$d = function() {
		return !0
	};
	t.ea = function(a) {
		var b = G.alloc();
		b.assign(a);
		this.transform.ta(b);
		var c = this.actualBounds;
		if(!c.s()) return G.free(b), !1;
		var d = this.diagram;
		if(null !== d && d.Mg) {
			var e = d.Xl("extraTouchThreshold"),
				f = d.Xl("extraTouchArea"),
				g = f / 2,
				h = this.naturalBounds;
			d = this.mf() * d.scale;
			var k = 1 / d;
			if(h.width * d < e && h.height * d < e) return a = Jc(c.x - g * k, c.y - g * k, c.width + f * k, c.height + f * k, b.x, b.y), G.free(b), a
		}
		e = !1;
		if(this instanceof pf || this instanceof qg ? Jc(c.x - 5, c.y - 5, c.width + 10, c.height + 10, b.x, b.y) : c.ea(b)) this.od && !this.od.ea(b) ?
			e = !1 : null !== this.dc && c.ea(b) ? e = !0 : null !== this.kb && this.hc.ea(a) ? e = !0 : e = this.ph(a);
		G.free(b);
		return e
	};
	t.ph = function(a) {
		var b = this.naturalBounds;
		return Jc(0, 0, b.width, b.height, a.x, a.y)
	};
	t.kf = function(a) {
		if(0 === this.angle) return this.actualBounds.kf(a);
		var b = this.naturalBounds;
		b = M.allocAt(0, 0, b.width, b.height);
		var c = this.transform,
			d = !1,
			e = G.allocAt(a.x, a.y);
		b.ea(c.Wd(e)) && (e.h(a.x, a.bottom), b.ea(c.Wd(e)) && (e.h(a.right, a.bottom), b.ea(c.Wd(e)) && (e.h(a.right, a.y), b.ea(c.Wd(e)) && (d = !0))));
		G.free(e);
		M.free(b);
		return d
	};
	t.oh = function(a, b) {
		if(void 0 === b) return a.kf(this.actualBounds);
		var c = this.naturalBounds,
			d = !1,
			e = G.allocAt(0, 0);
		a.ea(b.ta(e)) && (e.h(0, c.height), a.ea(b.ta(e)) && (e.h(c.width, c.height), a.ea(b.ta(e)) && (e.h(c.width, 0), a.ea(b.ta(e)) && (d = !0))));
		G.free(e);
		return d
	};
	t.Kc = function(a, b) {
		if(void 0 === b && (b = this.transform, 0 === this.angle)) return a.Kc(this.actualBounds);
		var c = this.naturalBounds,
			d = G.allocAt(0, 0),
			e = G.allocAt(0, c.height),
			f = G.allocAt(c.width, c.height),
			g = G.allocAt(c.width, 0),
			h = !1;
		if(a.ea(b.ta(d)) || a.ea(b.ta(e)) || a.ea(b.ta(f)) || a.ea(b.ta(g))) h = !0;
		else {
			c = M.allocAt(0, 0, c.width, c.height);
			var k = G.allocAt(a.x, a.y);
			c.ea(b.Wd(k)) ? h = !0 : (k.h(a.x, a.bottom), c.ea(b.Wd(k)) ? h = !0 : (k.h(a.right, a.bottom), c.ea(b.Wd(k)) ? h = !0 : (k.h(a.right, a.y), c.ea(b.Wd(k)) && (h = !0))));
			G.free(k);
			M.free(c);
			!h && (H.Xs(a, d, e) || H.Xs(a, e, f) || H.Xs(a, f, g) || H.Xs(a, g, d)) && (h = !0)
		}
		G.free(d);
		G.free(e);
		G.free(f);
		G.free(g);
		return h
	};
	t.ka = function(a, b) {
		void 0 === b && (b = new G);
		if(a instanceof N) {
			var c = this.naturalBounds;
			b.h(a.x * c.width + a.offsetX, a.y * c.height + a.offsetY)
		} else b.set(a);
		this.Ud.ta(b);
		return b
	};
	t.Qu = function(a) {
		void 0 === a && (a = new M);
		var b = this.naturalBounds,
			c = this.Ud,
			d = G.allocAt(0, 0).transform(c);
		a.h(d.x, d.y, 0, 0);
		d.h(b.width, 0).transform(c);
		Ic(a, d.x, d.y, 0, 0);
		d.h(b.width, b.height).transform(c);
		Ic(a, d.x, d.y, 0, 0);
		d.h(0, b.height).transform(c);
		Ic(a, d.x, d.y, 0, 0);
		G.free(d);
		return a
	};
	t.Di = function() {
		var a = this.Ud;
		1 === a.m11 && 0 === a.m12 ? a = 0 : (a = 180 * Math.atan2(a.m12, a.m11) / Math.PI, 0 > a && (a += 360));
		return a
	};
	t.mf = function() {
		if(0 !== (this.G & 4096) === !1) return this.Lk;
		var a = this.Ca;
		return null !== this.panel ? a * this.panel.mf() : a
	};
	t.Ru = function(a, b) {
		void 0 === b && (b = new G);
		b.assign(a);
		this.Ud.Wd(b);
		return b
	};
	t.Vc = function(a, b, c) {
		return this.Wj(a.x, a.y, b.x, b.y, c)
	};
	t.Wj = function(a, b, c, d, e) {
		var f = this.transform,
			g = 1 / (f.m11 * f.m22 - f.m12 * f.m21),
			h = f.m22 * g,
			k = -f.m12 * g,
			l = -f.m21 * g,
			m = f.m11 * g,
			n = g * (f.m21 * f.dy - f.m22 * f.dx),
			p = g * (f.m12 * f.dx - f.m11 * f.dy);
		if(null !== this.areaBackground) return f = this.actualBounds, H.Vc(f.left, f.top, f.right, f.bottom, a, b, c, d, e);
		g = a * h + b * l + n;
		a = a * k + b * m + p;
		b = c * h + d * l + n;
		c = c * k + d * m + p;
		e.h(0, 0);
		d = this.naturalBounds;
		c = H.Vc(0, 0, d.width, d.height, g, a, b, c, e);
		e.transform(f);
		return c
	};
	P.prototype.measure = function(a, b, c, d) {
		if(!1 !== jj(this)) {
			var e = this.Rg,
				f = e.right + e.left;
			e = e.top + e.bottom;
			a = Math.max(a - f, 0);
			b = Math.max(b - e, 0);
			c = Math.max((c || 0) - f, 0);
			d = Math.max((d || 0) - e, 0);
			f = this.angle;
			e = this.desiredSize;
			var g = 0;
			this instanceof qg && (g = this.strokeWidth);
			90 === f || 270 === f ? (a = isFinite(e.height) ? e.height + g : a, b = isFinite(e.width) ? e.width + g : b) : (a = isFinite(e.width) ? e.width + g : a, b = isFinite(e.height) ? e.height + g : b);
			e = c || 0;
			g = d || 0;
			var h = this instanceof Y;
			switch(al(this, !0)) {
				case dh:
					g = e = 0;
					h && (b = a = Infinity);
					break;
				case ge:
					isFinite(a) && a > c && (e = a);
					isFinite(b) && b > d && (g = b);
					break;
				case Mk:
					isFinite(a) && a > c && (e = a);
					g = 0;
					h && (b = Infinity);
					break;
				case Nk:
					isFinite(b) && b > d && (g = b), e = 0, h && (a = Infinity)
			}
			h = this.maxSize;
			var k = this.minSize;
			e > h.width && k.width < h.width && (e = h.width);
			g > h.height && k.height < h.height && (g = h.height);
			c = Math.max(e / this.scale, k.width);
			d = Math.max(g / this.scale, k.height);
			h.width < c && (c = Math.min(k.width, c));
			h.height < d && (d = Math.min(k.height, d));
			a = Math.min(h.width, a);
			b = Math.min(h.height, b);
			a = Math.max(c, a);
			b = Math.max(d,
				b);
			if(90 === f || 270 === f) f = a, a = b, b = f, f = c, c = d, d = f;
			this.sc.ha();
			this.cm(a, b, c, d);
			this.sc.freeze();
			this.sc.s() || A("Non-real measuredBounds has been set. Object " + this + ", measuredBounds: " + this.sc.toString());
			ej(this, !1)
		}
	};
	P.prototype.cm = function() {};
	P.prototype.qg = function() {
		return !1
	};
	P.prototype.arrange = function(a, b, c, d, e) {
		this.Yk();
		var f = M.alloc();
		f.assign(this.yb);
		this.yb.ha();
		!1 === kj(this) ? this.yb.h(a, b, c, d) : this.nh(a, b, c, d);
		this.yb.freeze();
		void 0 === e ? this.od = null : this.od = e;
		c = !1;
		if(void 0 !== e) c = !0;
		else if(e = this.panel, null === e || e.type !== Y.TableRow && e.type !== Y.TableColumn || (e = e.panel), null !== e && (e = e.hc, d = this.measuredBounds, null !== this.areaBackground && (d = this.yb), c = b + d.height, d = a + d.width, c = !(0 <= a + .05 && d <= e.width + .05 && 0 <= b + .05 && c <= e.height + .05), this instanceof wh && (a = this.naturalBounds,
				this.Jr > a.height || this.metrics.maxLineWidth > a.width))) c = !0;
		this.G = c ? this.G | 256 : this.G & -257;
		this.yb.s() || A("Non-real actualBounds has been set. Object " + this + ", actualBounds: " + this.yb.toString());
		this.gt(f, this.yb);
		bl(this, !1);
		M.free(f)
	};
	t = P.prototype;
	t.nh = function() {};

	function cl(a, b, c, d, e) {
		a.yb.h(b, c, d, e);
		if(!a.desiredSize.s()) {
			var f = a.sc;
			c = a.Rg;
			b = c.right + c.left;
			var g = c.top + c.bottom;
			c = f.width + b;
			f = f.height + g;
			d += b;
			e += g;
			b = al(a, !0);
			c === d && f === e && (b = dh);
			switch(b) {
				case dh:
					if(c > d || f > e) ej(a, !0), a.measure(c > d ? d : c, f > e ? e : f, 0, 0);
					break;
				case ge:
					ej(a, !0);
					a.measure(d, e, 0, 0);
					break;
				case Mk:
					ej(a, !0);
					a.measure(d, f, 0, 0);
					break;
				case Nk:
					ej(a, !0), a.measure(c, e, 0, 0)
			}
		}
	}
	t.gt = function(a, b) {
		var c = this.part;
		null !== c && null !== c.diagram && (c.selectionObject !== this && c.resizeObject !== this && c.rotateObject !== this || dl(c, !0), this.R(), Ec(a, b) || (c.uh(), this.vo(c)))
	};
	t.vo = function(a) {
		null !== this.portId && (dl(a, !0), a instanceof W && el(a, this))
	};
	t.jc = function(a, b) {
		if(this.visible) {
			var c = this instanceof Y && (this.type === Y.TableRow || this.type === Y.TableColumn),
				d = this.yb;
			if(c || 0 !== d.width && 0 !== d.height && !isNaN(d.x) && !isNaN(d.y)) {
				var e = this.opacity;
				if(0 !== e) {
					var f = 1;
					1 !== e && (f = a.globalAlpha, a.globalAlpha = f * e);
					if(!this.ex(a, b))
						if(c) fl(this, a, b);
						else {
							this instanceof S && this.ak(!1);
							c = this.transform;
							var g = this.panel;
							0 !== (this.G & 4096) === !0 && gl(this);
							var h = this.part,
								k = !1,
								l = 0;
							if(h && b.Ce("drawShadows") && (k = h.isShadowed)) {
								var m = h.oi;
								l = Math.max(m.y, m.x) *
									b.scale * b.Jb
							}
							if(!(m = b.gj)) {
								var n = this.hc;
								m = this.zh;
								var p = m.m11,
									q = m.m21,
									r = m.dx,
									u = m.m12,
									v = m.m22,
									x = m.dy,
									y, z = y = 0;
								m = y * p + z * q + r;
								var B = y * u + z * v + x;
								y = n.width + l;
								z = 0;
								var C = y * p + z * q + r;
								y = y * u + z * v + x;
								m = Math.min(m, C);
								B = Math.min(B, y);
								var I = Math.max(m, C) - m;
								var J = Math.max(B, y) - B;
								y = n.width + l;
								z = n.height + l;
								C = y * p + z * q + r;
								y = y * u + z * v + x;
								m = Math.min(m, C);
								B = Math.min(B, y);
								I = Math.max(m + I, C) - m;
								J = Math.max(B + J, y) - B;
								y = 0;
								z = n.height + l;
								C = y * p + z * q + r;
								y = y * u + z * v + x;
								m = Math.min(m, C);
								B = Math.min(B, y);
								I = Math.max(m + I, C) - m;
								J = Math.max(B + J, y) - B;
								l = b.viewportBounds;
								n = l.C;
								p = l.D;
								m = !(m > l.$ + n || n > I + m || B > l.Y + p || p > J + B)
							}
							if(m) {
								m = 0 !== (this.G & 256);
								a.clipInsteadOfFill && (m = !1);
								this instanceof wh && (a.font = this.font);
								if(m) {
									B = g.$d() ? g.naturalBounds : g.actualBounds;
									null !== this.od ? (n = this.od, I = n.x, J = n.y, l = n.width, n = n.height) : (I = Math.max(d.x, B.x), J = Math.max(d.y, B.y), l = Math.min(d.right, B.right) - I, n = Math.min(d.bottom, B.bottom) - J);
									if(I > d.width + d.x || d.x > B.width + B.x) {
										1 !== e && (a.globalAlpha = f);
										return
									}
									a.save();
									a.beginPath();
									a.rect(I, J, l, n);
									a.clip()
								}
								if(this.qg()) {
									if(!h.isVisible()) {
										1 !==
											e && (a.globalAlpha = f);
										return
									}
									k && (B = h.oi, a.Kv(B.x * b.scale * b.Jb, B.y * b.scale * b.Jb, h.Qd), hl(a), a.shadowColor = h.Bj)
								}!0 === this.shadowVisible ? hl(a) : !1 === this.shadowVisible && il(a);
								h = this.naturalBounds;
								null !== this.dc && (ii(this, a, this.dc, !0, !0, h, d), this.dc instanceof jl && this.dc.type === kl ? (a.beginPath(), a.rect(d.x, d.y, d.width, d.height), a.Vd(this.dc)) : a.fillRect(d.x, d.y, d.width, d.height));
								a.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy);
								k && (null !== g && 0 !== (g.G & 512) || null !== g && (g.type === Y.Auto || g.type === Y.Spot) &&
									g.Db() !== this) && null === this.shadowVisible && il(a);
								null !== this.kb && (l = this.naturalBounds, I = B = 0, J = l.width, l = l.height, n = 0, this instanceof qg && (l = this.pa.bounds, B = l.x, I = l.y, J = l.width, l = l.height, n = this.strokeWidth), ii(this, a, this.kb, !0, !1, h, d), this.kb instanceof jl && this.kb.type === kl ? (a.beginPath(), a.rect(B - n / 2, I - n / 2, J + n, l + n), a.Vd(this.kb)) : a.fillRect(B - n / 2, I - n / 2, J + n, l + n));
								k && (null !== this.kb || null !== this.dc || null !== g && 0 !== (g.G & 512) || null !== g && (g.type === Y.Auto || g.type === Y.Spot) && g.Db() !== this) ? (ll(this, !0), null === this.shadowVisible && il(a)) : ll(this, !1);
								this.xi(a, b);
								k && 0 !== (this.G & 512) === !0 && hl(a);
								this.qg() && k && il(a);
								m ? (a.restore(), this instanceof Y ? a.Tc(!0) : a.Tc(!1)) : c.$s() || (b = 1 / (c.m11 * c.m22 - c.m12 * c.m21), a.transform(c.m22 * b, -c.m12 * b, -c.m21 * b, c.m11 * b, b * (c.m21 * c.dy - c.m22 * c.dx), b * (c.m12 * c.dx - c.m11 * c.dy)))
							}
						}
					1 !== e && (a.globalAlpha = f)
				}
			}
		}
	};
	t.ex = function() {
		return !1
	};

	function fl(a, b, c) {
		var d = a.yb,
			e = a.hc;
		null !== a.dc && (ii(a, b, a.dc, !0, !0, e, d), a.dc instanceof jl && a.dc.type === kl ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Vd(a.dc)) : b.fillRect(d.x, d.y, d.width, d.height));
		null !== a.kb && (ii(a, b, a.kb, !0, !1, e, d), a.kb instanceof jl && a.kb.type === kl ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Vd(a.kb)) : b.fillRect(d.x, d.y, d.width, d.height));
		a.xi(b, c)
	}
	t.xi = function() {};

	function ii(a, b, c, d, e, f, g) {
		if(null !== c) {
			var h = 1,
				k = 1;
			if("string" === typeof c) d ? b.fillStyle = c : b.strokeStyle = c;
			else if(c.type === ml) d ? b.fillStyle = c.color : b.strokeStyle = c.color;
			else {
				h = f.width;
				k = f.height;
				e && (h = g.width, k = g.height);
				if((f = b instanceof nl) && c.ce && (c.type === ol || c.Ak === h && c.Gt === k)) var l = c.ce;
				else {
					var m = 0,
						n = 0,
						p = 0,
						q = 0,
						r = 0,
						u = 0;
					u = r = 0;
					e && (r = g.x, u = g.y);
					m = c.start.x * h + c.start.offsetX;
					n = c.start.y * k + c.start.offsetY;
					p = c.end.x * h + c.end.offsetX;
					q = c.end.y * k + c.end.offsetY;
					m += r;
					p += r;
					n += u;
					q += u;
					if(c.type === pl) l =
						b.createLinearGradient(m, n, p, q);
					else if(c.type === kl) u = isNaN(c.endRadius) ? Math.max(h, k) / 2 : c.endRadius, isNaN(c.startRadius) ? (r = 0, u = Math.max(h, k) / 2) : r = c.startRadius, l = b.createRadialGradient(m, n, r, p, q, u);
					else if(c.type === ol) try {
						l = b.createPattern(c.pattern, "repeat")
					} catch(x) {
						l = null
					}
					if(c.type !== ol && (e = c.colorStops, null !== e))
						for(e = e.iterator; e.next();) l.addColorStop(e.key, e.value);
					if(f && (c.ce = l, null !== l && (c.Ak = h, c.Gt = k), null === l && c.type === ol && -1 !== c.Ak)) {
						c.Ak = -1;
						var v = a.diagram;
						null !== v && -1 === c.Ak && va(function() {
								v.ik()
							},
							600)
					}
				}
				d ? b.fillStyle = l : b.strokeStyle = l
			}
		}
	}
	t.vh = function(a) {
		if(a instanceof Y) a: {
			if(this !== a && null !== a)
				for(var b = this.panel; null !== b;) {
					if(b === a) {
						a = !0;
						break a
					}
					b = b.panel
				}
			a = !1
		}
		else a = !1;
		return a
	};
	t.rf = function() {
		if(!this.visible) return !1;
		var a = this.panel;
		return null !== a ? a.rf() : !0
	};
	t.pg = function() {
		for(var a = this instanceof Y ? this : this.panel; null !== a && a.isEnabled;) a = a.panel;
		return null === a
	};

	function gl(a) {
		if(0 !== (a.G & 2048) === !0) {
			var b = a.wb;
			b.reset();
			if(!a.yb.s() || !a.sc.s()) {
				ql(a, !1);
				return
			}
			b.translate(a.yb.x - a.sc.x, a.yb.y - a.sc.y);
			if(1 !== a.scale || 0 !== a.angle) {
				var c = a.naturalBounds;
				Zk(a, b, c.x, c.y, c.width, c.height)
			}
			ql(a, !1);
			rl(a, !0)
		}
		0 !== (a.G & 4096) === !0 && (b = a.panel, null === b ? (a.zh.set(a.wb), a.Lk = a.scale, rl(a, !1)) : null !== b.Ud && (c = a.zh, c.reset(), b.$d() ? c.multiply(b.zh) : null !== b.panel && c.multiply(b.panel.zh), c.multiply(a.wb), a.Lk = a.scale * b.Lk, rl(a, !1)))
	}

	function Zk(a, b, c, d, e, f) {
		1 !== a.scale && b.scale(a.scale);
		if(0 !== a.angle) {
			var g = id;
			a.qg() && a.locationSpot.pb() && (g = a.locationSpot);
			var h = G.alloc();
			if(a instanceof U && a.locationObject !== a)
				for(c = a.locationObject, d = c.naturalBounds, h.kk(d.x, d.y, d.width, d.height, g), c.Nf.ta(h), h.offset(-c.measuredBounds.x, -c.measuredBounds.y), g = c.panel; null !== g && g !== a;) g.Nf.ta(h), h.offset(-g.measuredBounds.x, -g.measuredBounds.y), g = g.panel;
			else h.kk(c, d, e, f, g);
			b.rotate(a.angle, h.x, h.y);
			G.free(h)
		}
	}
	t.o = function(a) {
		void 0 === a && (a = !1);
		if(!0 !== jj(this)) {
			ej(this, !0);
			bl(this, !0);
			var b = this.panel;
			null === b || a || b.o()
		}
	};
	t.Zl = function() {
		!0 !== jj(this) && (ej(this, !0), bl(this, !0))
	};

	function sl(a) {
		if(!1 === kj(a)) {
			var b = a.panel;
			null !== b ? b.o() : a.qg() && (b = a.diagram, null !== b && (b.Fd.add(a), a instanceof W && a.hd(), b.cc()));
			bl(a, !0)
		}
	}
	t.Yk = function() {
		0 !== (this.G & 2048) === !1 && (ql(this, !0), rl(this, !0))
	};
	t.$u = function() {
		rl(this, !0)
	};
	t.R = function() {
		var a = this.part;
		null !== a && a.R()
	};

	function al(a, b) {
		var c = a.stretch,
			d = a.panel;
		if(null !== d && d.type === Y.Table) return tl(a, d.Ub(a.row), d.Tb(a.column), b);
		if(null !== d && d.type === Y.Auto && d.Db() === a) return ul(a, ge, b);
		if(c === Lk) {
			if(null !== d) {
				if(d.type === Y.Spot && d.Db() === a) return ul(a, ge, b);
				c = d.defaultStretch;
				return c === Lk ? ul(a, dh, b) : ul(a, c, b)
			}
			return ul(a, dh, b)
		}
		return ul(a, c, b)
	}

	function tl(a, b, c, d) {
		var e = a.stretch;
		if(e !== Lk) return ul(a, e, d);
		var f = e = null;
		switch(b.stretch) {
			case Nk:
				f = !0;
				break;
			case ge:
				f = !0
		}
		switch(c.stretch) {
			case Mk:
				e = !0;
				break;
			case ge:
				e = !0
		}
		b = a.panel.defaultStretch;
		null === e && (e = b === Mk || b === ge);
		null === f && (f = b === Nk || b === ge);
		return !0 === e && !0 === f ? ul(a, ge, d) : !0 === e ? ul(a, Mk, d) : !0 === f ? ul(a, Nk, d) : ul(a, dh, d)
	}

	function ul(a, b, c) {
		if(c) return b;
		if(b === dh) return dh;
		c = a.desiredSize;
		if(c.s()) return dh;
		a = a.angle;
		if(!isNaN(c.width))
			if(90 !== a && 270 !== a) {
				if(b === Mk) return dh;
				if(b === ge) return Nk
			} else {
				if(b === Nk) return dh;
				if(b === ge) return Mk
			}
		if(!isNaN(c.height))
			if(90 !== a && 270 !== a) {
				if(b === Nk) return dh;
				if(b === ge) return Mk
			} else {
				if(b === Mk) return dh;
				if(b === ge) return Nk
			}
		return b
	}

	function ll(a, b) {
		a.G = b ? a.G | 512 : a.G & -513
	}

	function Vk(a) {
		return 0 !== (a.G & 1024)
	}

	function vl(a, b) {
		a.G = b ? a.G | 1024 : a.G & -1025
	}

	function ql(a, b) {
		a.G = b ? a.G | 2048 : a.G & -2049
	}

	function rl(a, b) {
		a.G = b ? a.G | 4096 : a.G & -4097
	}

	function jj(a) {
		return 0 !== (a.G & 8192)
	}

	function ej(a, b) {
		a.G = b ? a.G | 8192 : a.G & -8193
	}

	function kj(a) {
		return 0 !== (a.G & 16384)
	}

	function bl(a, b) {
		a.G = b ? a.G | 16384 : a.G & -16385
	}
	t.Ki = function(a) {
		this.ag = a
	};
	t.Gv = function() {};
	t.Fv = function(a) {
		this.ra = a;
		sl(this);
		return !0
	};
	t.rt = function(a, b) {
		this.ra.h(a, b);
		this.Yk()
	};

	function wl(a) {
		var b = a.part;
		if(b instanceof W && (null !== a.portId || a === b.port)) {
			var c = b.diagram;
			null === c || c.undoManager.isUndoingRedoing || el(b, a)
		}
	}

	function xl(a) {
		var b = a.diagram;
		null === b || b.undoManager.isUndoingRedoing || (a instanceof Y ? a instanceof W ? a.hd() : a.qm(a, function(a) {
			wl(a)
		}) : wl(a))
	}
	t.bind = function(a) {
		a.Sd = this;
		var b = this.qh();
		null !== b && yl(b) && A("Cannot add a Binding to a template that has already been copied: " + a);
		null === this.gb && (this.gb = new E);
		this.gb.add(a)
	};
	t.qh = function() {
		for(var a = this instanceof Y ? this : this.panel; null !== a;) {
			if(null !== a.Mh) return a;
			a = a.panel
		}
		return null
	};
	t.Hv = function(a) {
		rj(this, a)
	};

	function zl(a, b) {
		for(var c = 1; c < arguments.length; ++c);
		c = arguments;
		var d = null,
			e = null;
		if("function" === typeof a) e = a;
		else if("string" === typeof a) {
			var f = Al.J(a);
			"function" === typeof f ? (c = Ha(arguments), d = f(c), Ea(d) || A('GraphObject.make invoked object builder "' + a + '", but it did not return an Object')) : e = w.go[a]
		}
		null === d && (void 0 !== e && null !== e && e.constructor || A("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: " + a), d = new e);
		e = 1;
		if(d instanceof Q && 1 < c.length) {
			f =
				d;
			var g = c[1];
			if("string" === typeof g || g instanceof HTMLDivElement) xi(f, g), e++
		}
		for(; e < c.length; e++) f = c[e], void 0 === f ? A("Undefined value at argument " + e + " for object being constructed by GraphObject.make: " + d) : Bl(d, f);
		return d
	}

	function Bl(a, b) {
		if("string" === typeof b)
			if(a instanceof wh) a.text = b;
			else if(a instanceof qg) a.figure = b;
		else if(a instanceof Qj) a.source = b;
		else if(a instanceof Y) b = Cl.J(b), null !== b && (a.type = b);
		else if(a instanceof jl) {
			var c = sb(jl, b);
			null !== c ? a.type = c : A("Unknown Brush type as an argument to GraphObject.make: " + b)
		} else a instanceof ee ? (b = sb(ee, b), null !== b && (a.type = b)) : a instanceof Te && (b = sb(Te, b), null !== b && (a.type = b));
		else if(b instanceof P) a instanceof Y || A("A GraphObject can only be added to a Panel, not to: " +
			a), a.add(b);
		else if(b instanceof Kj) {
			var d;
			b.isRow && a.getRowDefinition ? d = a.getRowDefinition(b.index) : !b.isRow && a.getColumnDefinition ? d = a.getColumnDefinition(b.index) : A("A RowColumnDefinition can only be added to a Panel, not to: " + a);
			d.Ql(b)
		} else if(b instanceof D) "function" === typeof a.ib && a.ib(b);
		else if(b instanceof Dl) a.type = b;
		else if(b instanceof Bi) a instanceof P ? a.bind(b) : a instanceof Kj ? a.bind(b) : A("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: " + a);
		else if(b instanceof Se) a instanceof ee ? a.figures.add(b) : A("A PathFigure can only be added to a Geometry, not to: " + a);
		else if(b instanceof Te) a instanceof Se ? a.segments.add(b) : A("A PathSegment can only be added to a PathFigure, not to: " + a);
		else if(b instanceof vi) a instanceof Q ? a.layout = b : a instanceof V ? a.layout = b : A("A Layout can only be assigned to a Diagram or a Group, not to: " + a);
		else if(Array.isArray(b))
			for(c = 0; c < b.length; c++) Bl(a, b[c]);
		else if("object" === typeof b && null !== b)
			if(a instanceof jl) {
				c = new vb;
				for(var e in b) d =
					parseFloat(e), isNaN(d) ? c[e] = b[e] : a.addColorStop(d, b[e]);
				rj(a, c)
			} else if(a instanceof Kj) {
			void 0 !== b.row ? (e = b.row, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && A("Must specify non-negative integer row for RowColumnDefinition " + b + ", not: " + e), a.isRow = !0, a.index = e) : void 0 !== b.column && (e = b.column, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && A("Must specify non-negative integer column for RowColumnDefinition " + b + ", not: " + e), a.isRow = !1, a.index = e);
			e = new vb;
			for(c in b) "row" !== c && "column" !==
				c && (e[c] = b[c]);
			rj(a, e)
		} else rj(a, b);
		else A('Unknown initializer "' + b + '" for object being constructed by GraphObject.make: ' + a)
	}

	function El(a, b) {
		Al.add(a, b)
	}

	function Fl(a, b, c) {
		void 0 === c && (c = null);
		var d = a[1];
		if("function" === typeof c ? c(d) : "string" === typeof d) return a.splice(1, 1), d;
		if(void 0 === b) throw Error("no " + ("function" === typeof c ? "satisfactory" : "string") + " argument for GraphObject builder " + a[0]);
		return b
	}
	oa.Object.defineProperties(P.prototype, {
		shadowVisible: {
			get: function() {
				return this.ul
			},
			set: function(a) {
				var b = this.ul;
				b !== a && (this.ul = a, this.R(), this.g("shadowVisible", b, a))
			}
		},
		enabledChanged: {
			get: function() {
				return null !== this.O ? this.O.tn : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.tn;
				b !== a && (this.O.tn = a, this.g("enabledChanged", b, a))
			}
		},
		segmentOrientation: {
			get: function() {
				return this.sl
			},
			set: function(a) {
				var b = this.sl;
				b !== a && (this.sl = a, this.o(), this.g("segmentOrientation", b, a), a === Tg && (this.angle = 0))
			}
		},
		segmentIndex: {
			get: function() {
				return this.$o
			},
			set: function(a) {
				a = Math.round(a);
				var b = this.$o;
				b !== a && (this.$o = a, this.o(), this.g("segmentIndex", b, a))
			}
		},
		segmentFraction: {
			get: function() {
				return this.ql
			},
			set: function(a) {
				isNaN(a) ? a = 0 : 0 > a ? a = 0 : 1 < a && (a = 1);
				var b = this.ql;
				b !== a && (this.ql = a, this.o(), this.g("segmentFraction", b, a))
			}
		},
		segmentOffset: {
			get: function() {
				return this.rl
			},
			set: function(a) {
				var b = this.rl;
				b.A(a) || (this.rl = a = a.I(), this.o(), this.g("segmentOffset", b, a))
			}
		},
		stretch: {
			get: function() {
				return this.te
			},
			set: function(a) {
				var b = this.te;
				b !== a && (this.te = a, this.o(), this.g("stretch", b, a))
			}
		},
		name: {
			get: function() {
				return this.Ta
			},
			set: function(a) {
				var b = this.Ta;
				b !== a && (this.Ta = a, null !== this.part && (this.part.pj = null), this.g("name", b, a))
			}
		},
		opacity: {
			get: function() {
				return this.ob
			},
			set: function(a) {
				var b = this.ob;
				b !== a && ((0 > a || 1 < a) && Aa(a, "0 <= value <= 1", P, "opacity"), this.ob = a, this.g("opacity", b, a), a = this.diagram, b = this.part, null !== a && null !== b && a.R(hi(b, b.actualBounds)))
			}
		},
		visible: {
			get: function() {
				return 0 !== (this.G & 1)
			},
			set: function(a) {
				var b = 0 !== (this.G & 1);
				b !== a && (this.G ^= 1, this.g("visible", b, a), b = this.panel, null !== b ? b.o() : this.qg() && this.Pb(a), this.R(), xl(this))
			}
		},
		pickable: {
			get: function() {
				return 0 !== (this.G & 2)
			},
			set: function(a) {
				var b =
					0 !== (this.G & 2);
				b !== a && (this.G ^= 2, this.g("pickable", b, a))
			}
		},
		fromLinkableDuplicates: {
			get: function() {
				return 0 !== (this.G & 4)
			},
			set: function(a) {
				var b = 0 !== (this.G & 4);
				b !== a && (this.G ^= 4, this.g("fromLinkableDuplicates", b, a))
			}
		},
		fromLinkableSelfNode: {
			get: function() {
				return 0 !== (this.G & 8)
			},
			set: function(a) {
				var b = 0 !== (this.G & 8);
				b !== a && (this.G ^= 8, this.g("fromLinkableSelfNode", b, a))
			}
		},
		toLinkableDuplicates: {
			get: function() {
				return 0 !==
					(this.G & 16)
			},
			set: function(a) {
				var b = 0 !== (this.G & 16);
				b !== a && (this.G ^= 16, this.g("toLinkableDuplicates", b, a))
			}
		},
		toLinkableSelfNode: {
			get: function() {
				return 0 !== (this.G & 32)
			},
			set: function(a) {
				var b = 0 !== (this.G & 32);
				b !== a && (this.G ^= 32, this.g("toLinkableSelfNode", b, a))
			}
		},
		isPanelMain: {
			get: function() {
				return 0 !== (this.G & 64)
			},
			set: function(a) {
				var b = 0 !== (this.G & 64);
				b !== a && (this.G ^= 64, this.o(), this.g("isPanelMain", b, a))
			}
		},
		isActionable: {
			get: function() {
				return 0 !== (this.G & 128)
			},
			set: function(a) {
				var b = 0 !== (this.G & 128);
				b !== a && (this.G ^= 128, this.g("isActionable", b, a))
			}
		},
		areaBackground: {
			get: function() {
				return this.dc
			},
			set: function(a) {
				var b = this.dc;
				b !== a && (a instanceof jl && a.freeze(), this.dc = a, this.R(), this.g("areaBackground", b, a))
			}
		},
		background: {
			get: function() {
				return this.kb
			},
			set: function(a) {
				var b = this.kb;
				b !== a && (a instanceof jl && a.freeze(), this.kb = a, this.R(), this.g("background",
					b, a))
			}
		},
		part: {
			get: function() {
				if(this.qg()) return this;
				if(null !== this.uj) return this.uj;
				var a;
				for(a = this.panel; a;) {
					if(a instanceof U) return this.uj = a;
					a = a.panel
				}
				return null
			}
		},
		panel: {
			get: function() {
				return this.ag
			}
		},
		layer: {
			get: function() {
				var a = this.part;
				return null !== a ? a.layer : null
			}
		},
		diagram: {
			get: function() {
				var a = this.part;
				return null !== a ? a.diagram : null
			}
		},
		position: {
			get: function() {
				return this.ra
			},
			set: function(a) {
				var b = a.x,
					c = a.y,
					d = this.ra,
					e = d.x,
					f = d.y;
				(e === b || isNaN(e) && isNaN(b)) && (f === c || isNaN(f) && isNaN(c)) ? this.Gv(): (a = a.I(), this.Fv(a, d) && this.g("position", d, a))
			}
		},
		actualBounds: {
			get: function() {
				return this.yb
			}
		},
		scale: {
			get: function() {
				return this.Ca
			},
			set: function(a) {
				var b = this.Ca;
				b !== a && (0 >= a && A("GraphObject.scale for " + this + " must be greater than zero, not: " + a), this.Ca = a, this.o(), this.g("scale", b, a))
			}
		},
		angle: {
			get: function() {
				return this.Bc
			},
			set: function(a) {
				var b = this.Bc;
				b !== a && (a %= 360, 0 > a && (a += 360), b !== a && (this.Bc = a, xl(this), this.o(), this.g("angle", b, a)))
			}
		},
		desiredSize: {
			get: function() {
				return this.Oc
			},
			set: function(a) {
				var b = a.width,
					c = a.height,
					d = this.Oc,
					e = d.width,
					f = d.height;
				(e === b || isNaN(e) && isNaN(b)) && (f === c || isNaN(f) && isNaN(c)) || (this.Oc = a = a.I(), this.o(), this instanceof qg && this.$b(), this.g("desiredSize", d, a), Vk(this) && (a = this.part, null !==
					a && (Wk(this, a, "width"), Wk(this, a, "height"))))
			}
		},
		width: {
			get: function() {
				return this.Oc.width
			},
			set: function(a) {
				var b = this.Oc.width;
				b === a || isNaN(b) && isNaN(a) || (b = this.Oc, this.Oc = a = (new L(a, this.Oc.height)).freeze(), this.o(), this instanceof qg && this.$b(), this.g("desiredSize", b, a), Vk(this) && (a = this.part, null !== a && Wk(this, a, "width")))
			}
		},
		height: {
			get: function() {
				return this.Oc.height
			},
			set: function(a) {
				var b = this.Oc.height;
				b === a || isNaN(b) && isNaN(a) ||
					(b = this.Oc, this.Oc = a = (new L(this.Oc.width, a)).freeze(), this.o(), this instanceof qg && this.$b(), this.g("desiredSize", b, a), Vk(this) && (a = this.part, null !== a && Wk(this, a, "height")))
			}
		},
		minSize: {
			get: function() {
				return this.Qf
			},
			set: function(a) {
				var b = this.Qf;
				b.A(a) || (a = a.copy(), isNaN(a.width) && (a.width = 0), isNaN(a.height) && (a.height = 0), a.freeze(), this.Qf = a, this.o(), this.g("minSize", b, a))
			}
		},
		maxSize: {
			get: function() {
				return this.Pf
			},
			set: function(a) {
				var b =
					this.Pf;
				b.A(a) || (a = a.copy(), isNaN(a.width) && (a.width = Infinity), isNaN(a.height) && (a.height = Infinity), a.freeze(), this.Pf = a, this.o(), this.g("maxSize", b, a))
			}
		},
		measuredBounds: {
			get: function() {
				return this.sc
			}
		},
		naturalBounds: {
			get: function() {
				return this.hc
			}
		},
		margin: {
			get: function() {
				return this.Rg
			},
			set: function(a) {
				"number" === typeof a && (a = new Pc(a));
				var b = this.Rg;
				b.A(a) || (this.Rg = a = a.I(), this.o(), this.g("margin", b, a))
			}
		},
		transform: {
			get: function() {
				0 !== (this.G & 2048) === !0 && gl(this);
				return this.wb
			}
		},
		Ud: {
			get: function() {
				0 !== (this.G & 4096) === !0 && gl(this);
				return this.zh
			}
		},
		alignment: {
			get: function() {
				return this.zb
			},
			set: function(a) {
				var b = this.zb;
				b.A(a) || (a.mc() && !a.jb() && A("GraphObject.alignment for " + this + " must be a real Spot or Spot.Default, not: " + a), this.zb = a = a.I(), sl(this), this.g("alignment", b, a))
			}
		},
		column: {
			get: function() {
				return this.zg
			},
			set: function(a) {
				a = Math.round(a);
				var b = this.zg;
				b !== a && (0 > a && Aa(a, ">= 0", P, "column"), this.zg = a, this.o(), this.g("column", b, a))
			}
		},
		columnSpan: {
			get: function() {
				return this.Rm
			},
			set: function(a) {
				a = Math.round(a);
				var b = this.Rm;
				b !== a && (1 > a && Aa(a, ">= 1", P, "columnSpan"), this.Rm = a, this.o(), this.g("columnSpan", b, a))
			}
		},
		row: {
			get: function() {
				return this.Vo
			},
			set: function(a) {
				a = Math.round(a);
				var b = this.Vo;
				b !== a && (0 > a && Aa(a, ">= 0",
					P, "row"), this.Vo = a, this.o(), this.g("row", b, a))
			}
		},
		rowSpan: {
			get: function() {
				return this.Wo
			},
			set: function(a) {
				a = Math.round(a);
				var b = this.Wo;
				b !== a && (1 > a && Aa(a, ">= 1", P, "rowSpan"), this.Wo = a, this.o(), this.g("rowSpan", b, a))
			}
		},
		spanAllocation: {
			get: function() {
				return this.lp
			},
			set: function(a) {
				var b = this.lp;
				b !== a && (this.lp = a, this.o(), this.g("spanAllocation", b, a))
			}
		},
		alignmentFocus: {
			get: function() {
				return this.sk
			},
			set: function(a) {
				var b =
					this.sk;
				b.A(a) || (this.sk = a = a.I(), this.o(), this.g("alignmentFocus", b, a))
			}
		},
		portId: {
			get: function() {
				return this.Ho
			},
			set: function(a) {
				var b = this.Ho;
				if(b !== a) {
					var c = this.part;
					null === c || c instanceof W || (A("Cannot set portID on a Link: " + a), c = null);
					null !== b && null !== c && Gl(c, this);
					this.Ho = a;
					null !== a && null !== c && (c.th = !0, Hl(c, this));
					this.g("portId", b, a)
				}
			}
		},
		toSpot: {
			get: function() {
				return null !== this.P ? this.P.gh : dd
			},
			set: function(a) {
				this.Jc();
				var b = this.P.gh;
				b.A(a) || (a = a.I(), this.P.gh = a, this.g("toSpot", b, a), wl(this))
			}
		},
		toEndSegmentLength: {
			get: function() {
				return null !== this.P ? this.P.eh : 10
			},
			set: function(a) {
				this.Jc();
				var b = this.P.eh;
				b !== a && (0 > a && Aa(a, ">= 0", P, "toEndSegmentLength"), this.P.eh = a, this.g("toEndSegmentLength", b, a), wl(this))
			}
		},
		toShortLength: {
			get: function() {
				return null !== this.P ? this.P.fh : 0
			},
			set: function(a) {
				this.Jc();
				var b = this.P.fh;
				b !== a && (this.P.fh = a, this.g("toShortLength", b, a), wl(this))
			}
		},
		toLinkable: {
			get: function() {
				return null !== this.P ? this.P.sp : null
			},
			set: function(a) {
				this.Jc();
				var b = this.P.sp;
				b !== a && (this.P.sp = a, this.g("toLinkable", b, a))
			}
		},
		toMaxLinks: {
			get: function() {
				return null !== this.P ? this.P.tp : Infinity
			},
			set: function(a) {
				this.Jc();
				var b = this.P.tp;
				b !== a && (0 > a && Aa(a, ">= 0", P, "toMaxLinks"), this.P.tp = a, this.g("toMaxLinks", b, a))
			}
		},
		fromSpot: {
			get: function() {
				return null !== this.P ? this.P.Ig : dd
			},
			set: function(a) {
				this.Jc();
				var b = this.P.Ig;
				b.A(a) || (a = a.I(), this.P.Ig = a, this.g("fromSpot", b, a), wl(this))
			}
		},
		fromEndSegmentLength: {
			get: function() {
				return null !== this.P ? this.P.Gg : 10
			},
			set: function(a) {
				this.Jc();
				var b = this.P.Gg;
				b !== a && (0 > a && Aa(a, ">= 0", P, "fromEndSegmentLength"), this.P.Gg = a, this.g("fromEndSegmentLength", b, a), wl(this))
			}
		},
		fromShortLength: {
			get: function() {
				return null !== this.P ? this.P.Hg : 0
			},
			set: function(a) {
				this.Jc();
				var b = this.P.Hg;
				b !== a && (this.P.Hg = a, this.g("fromShortLength",
					b, a), wl(this))
			}
		},
		fromLinkable: {
			get: function() {
				return null !== this.P ? this.P.vn : null
			},
			set: function(a) {
				this.Jc();
				var b = this.P.vn;
				b !== a && (this.P.vn = a, this.g("fromLinkable", b, a))
			}
		},
		fromMaxLinks: {
			get: function() {
				return null !== this.P ? this.P.wn : Infinity
			},
			set: function(a) {
				this.Jc();
				var b = this.P.wn;
				b !== a && (0 > a && Aa(a, ">= 0", P, "fromMaxLinks"), this.P.wn = a, this.g("fromMaxLinks", b, a))
			}
		},
		cursor: {
			get: function() {
				return this.$m
			},
			set: function(a) {
				var b = this.$m;
				b !== a && (this.$m = a, this.g("cursor", b, a))
			}
		},
		click: {
			get: function() {
				return null !== this.O ? this.O.Af : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Af;
				b !== a && (this.O.Af = a, this.g("click", b, a))
			}
		},
		doubleClick: {
			get: function() {
				return null !== this.O ? this.O.Ff : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Ff;
				b !== a && (this.O.Ff = a, this.g("doubleClick", b, a))
			}
		},
		contextClick: {
			get: function() {
				return null !==
					this.O ? this.O.Bf : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Bf;
				b !== a && (this.O.Bf = a, this.g("contextClick", b, a))
			}
		},
		mouseEnter: {
			get: function() {
				return null !== this.O ? this.O.Sf : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Sf;
				b !== a && (this.O.Sf = a, this.g("mouseEnter", b, a))
			}
		},
		mouseLeave: {
			get: function() {
				return null !== this.O ? this.O.Vf : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Vf;
				b !== a && (this.O.Vf = a, this.g("mouseLeave", b, a))
			}
		},
		mouseOver: {
			get: function() {
				return null !== this.O ? this.O.Wf : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Wf;
				b !== a && (this.O.Wf = a, this.g("mouseOver", b, a))
			}
		},
		mouseHover: {
			get: function() {
				return null !== this.O ? this.O.Uf : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Uf;
				b !== a && (this.O.Uf = a, this.g("mouseHover", b, a))
			}
		},
		mouseHold: {
			get: function() {
				return null !== this.O ? this.O.Tf : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Tf;
				b !== a && (this.O.Tf = a, this.g("mouseHold",
					b, a))
			}
		},
		mouseDragEnter: {
			get: function() {
				return null !== this.O ? this.O.lo : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.lo;
				b !== a && (this.O.lo = a, this.g("mouseDragEnter", b, a))
			}
		},
		mouseDragLeave: {
			get: function() {
				return null !== this.O ? this.O.mo : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.mo;
				b !== a && (this.O.mo = a, this.g("mouseDragLeave", b, a))
			}
		},
		mouseDrop: {
			get: function() {
				return null !== this.O ? this.O.Rf : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Rf;
				b !== a && (this.O.Rf = a, this.g("mouseDrop", b, a))
			}
		},
		actionDown: {
			get: function() {
				return null !== this.O ? this.O.Am : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Am;
				b !== a && (this.O.Am = a, this.g("actionDown", b, a))
			}
		},
		actionMove: {
			get: function() {
				return null !== this.O ? this.O.Bm : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Bm;
				b !== a && (this.O.Bm = a, this.g("actionMove", b, a))
			}
		},
		actionUp: {
			get: function() {
				return null !== this.O ?
					this.O.Cm : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Cm;
				b !== a && (this.O.Cm = a, this.g("actionUp", b, a))
			}
		},
		actionCancel: {
			get: function() {
				return null !== this.O ? this.O.zm : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.zm;
				b !== a && (this.O.zm = a, this.g("actionCancel", b, a))
			}
		},
		toolTip: {
			get: function() {
				return null !== this.O ? this.O.gg : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.gg;
				b !== a && (this.O.gg = a, this.g("toolTip", b, a))
			}
		},
		contextMenu: {
			get: function() {
				return null !== this.O ? this.O.Cf : null
			},
			set: function(a) {
				Sk(this);
				var b = this.O.Cf;
				b !== a && (this.O.Cf = a, this.g("contextMenu", b, a))
			}
		}
	});
	P.prototype.setProperties = P.prototype.Hv;
	P.prototype.findTemplateBinder = P.prototype.qh;
	P.prototype.bind = P.prototype.bind;
	P.prototype.isEnabledObject = P.prototype.pg;
	P.prototype.isVisibleObject = P.prototype.rf;
	P.prototype.isContainedBy = P.prototype.vh;
	P.prototype.getNearestIntersectionPoint = P.prototype.Vc;
	P.prototype.getLocalPoint = P.prototype.Ru;
	P.prototype.getDocumentScale = P.prototype.mf;
	P.prototype.getDocumentAngle = P.prototype.Di;
	P.prototype.getDocumentBounds = P.prototype.Qu;
	P.prototype.getDocumentPoint = P.prototype.ka;
	P.prototype.intersectsRect = P.prototype.Kc;
	P.prototype.containedInRect = P.prototype.oh;
	P.prototype.containsRect = P.prototype.kf;
	P.prototype.containsPoint = P.prototype.ea;
	P.prototype.raiseChanged = P.prototype.g;
	P.prototype.raiseChangedEvent = P.prototype.cb;
	P.prototype.addCopyProperty = P.prototype.Nw;
	var Al = null;
	P.className = "GraphObject";
	Al = new Nb;
	El("Button", function() {
		function a(a, b) {
			return null !== a.diagram.Sb(a.documentPoint, function(a) {
				for(; null !== a.panel && !a.isActionable;) a = a.panel;
				return a
			}, function(a) {
				return a === b
			})
		}
		var b = zl(Y, Y.Auto, {
			isActionable: !0,
			enabledChanged: function(a, b) {
				var c = a.Ya("ButtonBorder");
				null !== c && (c.fill = b ? a._buttonFillNormal : a._buttonFillDisabled)
			},
			cursor: "pointer",
			_buttonFillNormal: "#F5F5F5",
			_buttonStrokeNormal: "#BDBDBD",
			_buttonFillOver: "#E0E0E0",
			_buttonStrokeOver: "#9E9E9E",
			_buttonFillPressed: "#BDBDBD",
			_buttonStrokePressed: "#9E9E9E",
			_buttonFillDisabled: "#E5E5E5"
		}, zl(qg, {
			name: "ButtonBorder",
			figure: "RoundedRectangle",
			spot1: new N(0, 0, 2.76142374915397, 2.761423749153969),
			spot2: new N(1, 1, -2.76142374915397, -2.761423749153969),
			parameter1: 2,
			parameter2: 2,
			fill: "#F5F5F5",
			stroke: "#BDBDBD"
		}));
		b.mouseEnter = function(a, b) {
			if(b.pg() && b instanceof Y && (a = b.Ya("ButtonBorder"), a instanceof qg)) {
				var c = b._buttonFillOver;
				b._buttonFillNormal = a.fill;
				a.fill = c;
				c = b._buttonStrokeOver;
				b._buttonStrokeNormal = a.stroke;
				a.stroke = c
			}
		};
		b.mouseLeave = function(a, b) {
			b.pg() &&
				b instanceof Y && (a = b.Ya("ButtonBorder"), a instanceof qg && (a.fill = b._buttonFillNormal, a.stroke = b._buttonStrokeNormal))
		};
		b.actionDown = function(a, b) {
			if(b.pg() && b instanceof Y && null !== b._buttonFillPressed && 0 === a.button) {
				var c = b.Ya("ButtonBorder");
				if(c instanceof qg) {
					a = a.diagram;
					var d = a.skipsUndoManager;
					a.skipsUndoManager = !0;
					var g = b._buttonFillPressed;
					b._buttonFillOver = c.fill;
					c.fill = g;
					g = b._buttonStrokePressed;
					b._buttonStrokeOver = c.stroke;
					c.stroke = g;
					a.skipsUndoManager = d
				}
			}
		};
		b.actionUp = function(b, d) {
			if(d.pg() &&
				d instanceof Y && null !== d._buttonFillPressed && 0 === b.button) {
				var c = d.Ya("ButtonBorder");
				if(c instanceof qg) {
					var f = b.diagram,
						g = f.skipsUndoManager;
					f.skipsUndoManager = !0;
					a(b, d) ? (c.fill = d._buttonFillOver, c.stroke = d._buttonStrokeOver) : (c.fill = d._buttonFillNormal, c.stroke = d._buttonStrokeNormal);
					f.skipsUndoManager = g
				}
			}
		};
		b.actionCancel = function(b, d) {
			if(d.pg() && d instanceof Y && null !== d._buttonFillPressed) {
				var c = d.Ya("ButtonBorder");
				if(c instanceof qg) {
					var f = b.diagram,
						g = f.skipsUndoManager;
					f.skipsUndoManager = !0;
					a(b, d) ? (c.fill = d._buttonFillOver, c.stroke = d._buttonStrokeOver) : (c.fill = d._buttonFillNormal, c.stroke = d._buttonStrokeNormal);
					f.skipsUndoManager = g
				}
			}
		};
		b.actionMove = function(b, d) {
			if(d.pg() && d instanceof Y && null !== d._buttonFillPressed) {
				var c = b.diagram;
				if(0 === c.firstInput.button && (c.currentTool.standardMouseOver(), a(b, d) && (b = d.Ya("ButtonBorder"), b instanceof qg))) {
					var f = c.skipsUndoManager;
					c.skipsUndoManager = !0;
					var g = d._buttonFillPressed;
					b.fill !== g && (b.fill = g);
					g = d._buttonStrokePressed;
					b.stroke !== g && (b.stroke =
						g);
					c.skipsUndoManager = f
				}
			}
		};
		return b
	});
	El("TreeExpanderButton", function() {
		var a = zl("Button", {
			_treeExpandedFigure: "MinusLine",
			_treeCollapsedFigure: "PlusLine"
		}, zl(qg, {
			name: "ButtonIcon",
			figure: "MinusLine",
			stroke: "#424242",
			strokeWidth: 2,
			desiredSize: nc
		}, (new Bi("figure", "isTreeExpanded", function(a, c) {
			c = c.panel;
			return a ? c._treeExpandedFigure : c._treeCollapsedFigure
		})).Zp()), {
			visible: !1
		}, (new Bi("visible", "isTreeLeaf", function(a) {
			return !a
		})).Zp());
		a.click = function(a, c) {
			c = c.part;
			c instanceof pf && (c = c.adornedPart);
			if(c instanceof W) {
				var b = c.diagram;
				if(null !== b) {
					b = b.commandHandler;
					if(c.isTreeExpanded) {
						if(!b.canCollapseTree(c)) return
					} else if(!b.canExpandTree(c)) return;
					a.handled = !0;
					c.isTreeExpanded ? b.collapseTree(c) : b.expandTree(c)
				}
			}
		};
		return a
	});
	El("SubGraphExpanderButton", function() {
		var a = zl("Button", {
			_subGraphExpandedFigure: "MinusLine",
			_subGraphCollapsedFigure: "PlusLine"
		}, zl(qg, {
			name: "ButtonIcon",
			figure: "MinusLine",
			stroke: "#424242",
			strokeWidth: 2,
			desiredSize: nc
		}, (new Bi("figure", "isSubGraphExpanded", function(a, c) {
			c = c.panel;
			return a ? c._subGraphExpandedFigure : c._subGraphCollapsedFigure
		})).Zp()));
		a.click = function(a, c) {
			c = c.part;
			c instanceof pf && (c = c.adornedPart);
			if(c instanceof V) {
				var b = c.diagram;
				if(null !== b) {
					b = b.commandHandler;
					if(c.isSubGraphExpanded) {
						if(!b.canCollapseSubGraph(c)) return
					} else if(!b.canExpandSubGraph(c)) return;
					a.handled = !0;
					c.isSubGraphExpanded ? b.collapseSubGraph(c) : b.expandSubGraph(c)
				}
			}
		};
		return a
	});
	El("ToolTip", function() {
		return zl(pf, Y.Auto, {
			isShadowed: !0,
			shadowColor: "rgba(0, 0, 0, .4)",
			shadowOffset: new G(0, 3),
			shadowBlur: 5
		}, zl(qg, {
			name: "Border",
			figure: "RoundedRectangle",
			parameter1: 1,
			parameter2: 1,
			fill: "#F5F5F5",
			stroke: "#F0F0F0",
			spot1: new N(0, 0, 4, 6),
			spot2: new N(1, 1, -4, -4)
		}))
	});
	El("ContextMenu", function() {
		return zl(pf, Y.Vertical, {
			background: "#F5F5F5",
			isShadowed: !0,
			shadowColor: "rgba(0, 0, 0, .4)",
			shadowOffset: new G(0, 3),
			shadowBlur: 5
		}, new Bi("background", "", function(a) {
			return null !== a.adornedPart && null !== a.placeholder ? null : "#F5F5F5"
		}))
	});
	El("ContextMenuButton", function() {
		var a = zl("Button");
		a.stretch = Mk;
		var b = a.Ya("ButtonBorder");
		b instanceof qg && (b.figure = "Rectangle", b.strokeWidth = 0, b.spot1 = new N(0, 0, 2, 3), b.spot2 = new N(1, 1, -2, -2));
		return a
	});
	El("PanelExpanderButton", function(a) {
		var b = Fl(a, "COLLAPSIBLE"),
			c = zl("Button", {
				_buttonExpandedFigure: "M0 0 M0 6 L4 2 8 6 M8 8",
				_buttonCollapsedFigure: "M0 0 M0 2 L4 6 8 2 M8 8",
				_buttonFillNormal: "rgba(0, 0, 0, 0)",
				_buttonStrokeNormal: null,
				_buttonFillOver: "rgba(0, 0, 0, .2)",
				_buttonStrokeOver: null,
				_buttonFillPressed: "rgba(0, 0, 0, .4)",
				_buttonStrokePressed: null
			}, zl(qg, {
				name: "ButtonIcon",
				strokeWidth: 2
			}, (new Bi("geometryString", "visible", function(a) {
				return a ? c._buttonExpandedFigure : c._buttonCollapsedFigure
			})).Zp(b)));
		a = c.Ya("ButtonBorder");
		a instanceof qg && (a.stroke = null, a.fill = "rgba(0, 0, 0, 0)");
		c.click = function(a, c) {
			a = c.diagram;
			if(null !== a && !a.isReadOnly) {
				var d = c.qh();
				null === d && (d = c.part);
				null !== d && (c = d.Ya(b), null !== c && (a.Aa("Collapse/Expand Panel"), c.visible = !c.visible, a.bb("Collapse/Expand Panel")))
			}
		};
		return c
	});
	El("CheckBoxButton", function(a) {
		var b = Fl(a);
		a = zl("Button", {
			desiredSize: new L(14, 14)
		}, zl(qg, {
			name: "ButtonIcon",
			geometryString: "M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",
			strokeWidth: 2,
			stretch: ge,
			geometryStretch: fh,
			visible: !1
		}, "" !== b ? (new Bi("visible", b)).yx() : []));
		a.click = function(a, d) {
			if(d instanceof Y) {
				var c = a.diagram;
				if(!(null === c || c.isReadOnly || "" !== b && c.model.isReadOnly)) {
					a.handled = !0;
					var f = d.Ya("ButtonIcon");
					c.Aa("checkbox");
					f.visible = !f.visible;
					"function" === typeof d._doClick && d._doClick(a,
						d);
					c.bb("checkbox")
				}
			}
		};
		return a
	});
	El("CheckBox", function(a) {
		a = Fl(a);
		a = zl("CheckBoxButton", a, {
			name: "Button",
			isActionable: !1,
			margin: new Pc(0, 1, 0, 0)
		});
		var b = zl(Y, "Horizontal", a, {
			isActionable: !0,
			cursor: a.cursor,
			margin: 1,
			_buttonFillNormal: a._buttonFillNormal,
			_buttonStrokeNormal: a._buttonStrokeNormal,
			_buttonFillOver: a._buttonFillOver,
			_buttonStrokeOver: a._buttonStrokeOver,
			_buttonFillPressed: a._buttonFillPressed,
			_buttonStrokePressed: a._buttonStrokePressed,
			_buttonFillDisabled: a._buttonFillDisabled,
			mouseEnter: a.mouseEnter,
			mouseLeave: a.mouseLeave,
			actionDown: a.actionDown,
			actionUp: a.actionUp,
			actionCancel: a.actionCancel,
			actionMove: a.actionMove,
			click: a.click,
			_buttonClick: a.click
		});
		a.mouseEnter = null;
		a.mouseLeave = null;
		a.actionDown = null;
		a.actionUp = null;
		a.actionCancel = null;
		a.actionMove = null;
		a.click = null;
		return b
	});
	P.None = dh = new D(P, "None", 0);
	P.Default = Lk = new D(P, "Default", 0);
	P.Vertical = Nk = new D(P, "Vertical", 4);
	P.Horizontal = Mk = new D(P, "Horizontal", 5);
	P.Fill = ge = new D(P, "Fill", 3);
	P.Uniform = fh = new D(P, "Uniform", 1);
	P.UniformToFill = Ok = new D(P, "UniformToFill", 2);
	P.FlipVertical = Pk = new D(P, "FlipVertical", 1);
	P.FlipHorizontal = Qk = new D(P, "FlipHorizontal", 2);
	P.FlipBoth = Rk = new D(P, "FlipBoth", 3);
	P.make = zl;
	P.getBuilders = function() {
		var a = new Nb,
			b;
		for(b in Al)
			if(b !== b.toLowerCase()) {
				var c = Al.J(b);
				"function" === typeof c && a.add(b, c)
			}
		a.freeze();
		return a
	};
	P.defineBuilder = El;
	P.takeBuilderArgument = Fl;

	function Tk() {
		this.tn = this.Cf = this.gg = this.zm = this.Cm = this.Bm = this.Am = this.Rf = this.mo = this.lo = this.Tf = this.Uf = this.Wf = this.Vf = this.Sf = this.Bf = this.Ff = this.Af = null
	}
	Tk.prototype.copy = function() {
		var a = new Tk;
		a.Af = this.Af;
		a.Ff = this.Ff;
		a.Bf = this.Bf;
		a.Sf = this.Sf;
		a.Vf = this.Vf;
		a.Wf = this.Wf;
		a.Uf = this.Uf;
		a.Tf = this.Tf;
		a.lo = this.lo;
		a.mo = this.mo;
		a.Rf = this.Rf;
		a.Am = this.Am;
		a.Bm = this.Bm;
		a.Cm = this.Cm;
		a.zm = this.zm;
		a.gg = this.gg;
		a.Cf = this.Cf;
		a.tn = this.tn;
		return a
	};
	Tk.className = "GraphObjectEventHandlers";

	function Il() {
		this.Ma = [1, 0, 0, 1, 0, 0]
	}
	Il.prototype.copy = function() {
		var a = new Il;
		a.Ma[0] = this.Ma[0];
		a.Ma[1] = this.Ma[1];
		a.Ma[2] = this.Ma[2];
		a.Ma[3] = this.Ma[3];
		a.Ma[4] = this.Ma[4];
		a.Ma[5] = this.Ma[5];
		return a
	};
	Il.prototype.translate = function(a, b) {
		this.Ma[4] += this.Ma[0] * a + this.Ma[2] * b;
		this.Ma[5] += this.Ma[1] * a + this.Ma[3] * b
	};
	Il.prototype.scale = function(a, b) {
		this.Ma[0] *= a;
		this.Ma[1] *= a;
		this.Ma[2] *= b;
		this.Ma[3] *= b
	};
	Il.className = "STransform";

	function Jl(a) {
		this.type = a;
		this.r2 = this.y2 = this.x2 = this.r1 = this.y1 = this.x1 = 0;
		this.Ww = [];
		this.pattern = null
	}
	Jl.prototype.addColorStop = function(a, b) {
		this.Ww.push({
			offset: a,
			color: b
		})
	};
	Jl.className = "SGradient";

	function Kl(a, b) {
		this.ownerDocument = void 0 === b ? w.document : b;
		this.Ax = "http://www.w3.org/2000/svg";
		this.Ha = null
	}
	t = Kl.prototype;
	t.Wu = function(a, b) {
		this.Ha = this.xb("svg", {
			width: a + "px",
			height: b + "px",
			viewBox: "0 0 " + a + " " + b
		});
		this.Ha.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns", this.Ax);
		this.Ha.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
		this.context = new Ll(this)
	};
	t.xb = function(a, b, c) {
		a = this.ownerDocument.createElementNS(this.Ax, a);
		if(Ea(b))
			for(var d in b) a.setAttributeNS("href" === d ? "http://www.w3.org/1999/xlink" : "", d, b[d]);
		void 0 !== c && (a.textContent = c);
		return a
	};
	t.getBoundingClientRect = function() {
		return this.Ha.getBoundingClientRect()
	};
	t.focus = function() {
		this.Ha.focus()
	};
	t.bx = function() {
		this.ownerDocument = null
	};
	oa.Object.defineProperties(Kl.prototype, {
		width: {
			get: function() {
				return this.Ha.width.baseVal.value
			},
			set: function(a) {
				this.Ha.width = a
			}
		},
		height: {
			get: function() {
				return this.Ha.height.baseVal.value
			},
			set: function(a) {
				this.Ha.height = a
			}
		},
		style: {
			get: function() {
				return this.Ha.style
			}
		}
	});
	Kl.className = "SVGSurface";

	function Ll(a) {
		this.mk = a;
		this.nq = a.Ha;
		this.stack = [];
		this.yc = [];
		this.fillStyle = "#000000";
		this.font = "10px sans-serif";
		this.globalAlpha = 1;
		this.lineCap = "butt";
		this.lineDashOffset = 0;
		this.lineJoin = "miter";
		this.lineWidth = 1;
		this.miterLimit = 10;
		this.shadowBlur = 0;
		this.shadowColor = "rgba(0, 0, 0, 0)";
		this.shadowOffsetY = this.shadowOffsetX = 0;
		this.strokeStyle = "#000000";
		this.textAlign = "start";
		this.clipInsteadOfFill = !1;
		this.Qd = this.hp = this.gp = 0;
		this.Up = null;
		this.path = [];
		this.Ae = new Il;
		Ml(this, 1, 0, 0, 1, 0, 0);
		var b = Ib++,
			c = this.xb("clipPath", {
				id: "mainClip" + b
			});
		c.appendChild(this.xb("rect", {
			x: 0,
			y: 0,
			width: a.width,
			height: a.height
		}));
		this.mk.Ha.appendChild(c);
		this.yc[0].setAttributeNS(null, "clip-path", "url(#mainClip" + b + ")")
	}
	t = Ll.prototype;
	t.reset = function() {
		this.stack = [];
		this.yc = [];
		this.fillStyle = "#000000";
		this.font = "10px sans-serif";
		this.globalAlpha = 1;
		this.lineCap = "butt";
		this.lineDashOffset = 0;
		this.lineJoin = "miter";
		this.lineWidth = 1;
		this.miterLimit = 10;
		this.shadowBlur = 0;
		this.shadowColor = "rgba(0, 0, 0, 0)";
		this.shadowOffsetY = this.shadowOffsetX = 0;
		this.strokeStyle = "#000000";
		this.textAlign = "start";
		this.clipInsteadOfFill = !1;
		this.Qd = this.hp = this.gp = 0;
		this.Up = null;
		this.path = [];
		this.Ae = new Il;
		Ml(this, 1, 0, 0, 1, 0, 0);
		var a = Ib++,
			b = this.xb("clipPath", {
				id: "mainClip" + a
			});
		b.appendChild(this.xb("rect", {
			x: 0,
			y: 0,
			width: this.mk.width,
			height: this.mk.height
		}));
		this.mk.Ha.appendChild(b);
		this.yc[0].setAttributeNS(null, "clip-path", "url(#mainClip" + a + ")")
	};
	t.arc = function(a, b, c, d, e, f, g, h) {
		var k = 2 * Math.PI,
			l = k - 1E-6,
			m = c * Math.cos(d),
			n = c * Math.sin(d),
			p = a + m,
			q = b + n,
			r = f ? 0 : 1;
		d = f ? d - e : e - d;
		(1E-6 < Math.abs(g - p) || 1E-6 < Math.abs(h - q)) && this.path.push(["L", p, +q]);
		0 > d && (d = d % k + k);
		d > l ? (this.path.push(["A", c, c, 0, 1, r, a - m, b - n]), this.path.push(["A", c, c, 0, 1, r, p, q])) : 1E-6 < d && this.path.push(["A", c, c, 0, +(d >= Math.PI), r, a + c * Math.cos(e), b + c * Math.sin(e)])
	};
	t.beginPath = function() {
		this.path = []
	};
	t.bezierCurveTo = function(a, b, c, d, e, f) {
		this.path.push(["C", a, b, c, d, e, f])
	};
	t.clearRect = function() {};
	t.clip = function() {
		this.addPath("clipPath", this.path, new Il)
	};
	t.closePath = function() {
		this.path.push(["z"])
	};
	t.createLinearGradient = function(a, b, c, d) {
		var e = new Jl("linear");
		e.x1 = a;
		e.y1 = b;
		e.x2 = c;
		e.y2 = d;
		return e
	};
	t.createPattern = function() {
		return null
	};
	t.createRadialGradient = function(a, b, c, d, e, f) {
		var g = new Jl("radial");
		g.x1 = a;
		g.y1 = b;
		g.r1 = c;
		g.x2 = d;
		g.y2 = e;
		g.r2 = f;
		return g
	};
	t.drawImage = function(a, b, c, d, e, f, g, h, k) {
		var l = "";
		a instanceof HTMLCanvasElement && (l = a.toDataURL());
		a instanceof HTMLImageElement && (l = a.src);
		var m = a instanceof HTMLImageElement ? a.naturalWidth : a.width,
			n = a instanceof HTMLImageElement ? a.naturalHeight : a.height;
		void 0 === d && (f = b, g = c, h = d = m, k = e = n);
		d = d || 0;
		e = e || 0;
		f = f || 0;
		g = g || 0;
		h = h || 0;
		k = k || 0;
		l = {
			x: 0,
			y: 0,
			width: m,
			height: n,
			href: l,
			preserveAspectRatio: "xMidYMid slice"
		};
		H.ba(d, h) && H.ba(e, k) || (l.preserveAspectRatio = "none");
		a = "";
		h /= d;
		k /= e;
		if(0 !== f || 0 !== g) a += " translate(" +
			f + ", " + g + ")";
		if(1 !== h || 1 !== k) a += " scale(" + h + ", " + k + ")";
		if(0 !== b || 0 !== c) a += " translate(" + -b + ", " + -c + ")";
		if(0 !== b || 0 !== c || d !== m || e !== n) f = "CLIP" + Ib++, g = this.xb("clipPath", {
			id: f
		}), g.appendChild(this.xb("rect", {
			x: b,
			y: c,
			width: d,
			height: e
		})), this.nq.appendChild(g), l["clip-path"] = "url(#" + f + ")";
		Nl(this, "image", l, this.Ae, a);
		this.addElement("image", l)
	};
	t.fill = function() {
		this.addPath("fill", this.path, this.Ae)
	};
	t.Vd = function() {
		this.clipInsteadOfFill ? this.clip() : this.fill()
	};
	t.fillRect = function(a, b, c, d) {
		a = [a, b, c, d];
		a = {
			x: a[0],
			y: a[1],
			width: a[2],
			height: a[3]
		};
		Nl(this, "fill", a, this.Ae);
		this.addElement("rect", a)
	};
	t.fillText = function(a, b, c) {
		a = [a, b, c];
		b = this.textAlign;
		"left" === b ? b = "start" : "right" === b ? b = "end" : "center" === b && (b = "middle");
		b = {
			x: a[1],
			y: a[2],
			style: "font: " + this.font,
			"text-anchor": b
		};
		Nl(this, "fill", b, this.Ae);
		this.addElement("text", b, a[0])
	};
	t.lineTo = function(a, b) {
		this.path.push(["L", a, b])
	};
	t.moveTo = function(a, b) {
		this.path.push(["M", a, b])
	};
	t.quadraticCurveTo = function(a, b, c, d) {
		this.path.push(["Q", a, b, c, d])
	};
	t.rect = function(a, b, c, d) {
		this.path.push(["M", a, b], ["L", a + c, b], ["L", a + c, b + d], ["L", a, b + d], ["z"])
	};
	t.restore = function() {
		this.Ae = this.stack.pop();
		this.path = this.stack.pop();
		var a = this.stack.pop();
		this.fillStyle = a.fillStyle;
		this.font = a.font;
		this.globalAlpha = a.globalAlpha;
		this.lineCap = a.lineCap;
		this.lineDashOffset = a.lineDashOffset;
		this.lineJoin = a.lineJoin;
		this.lineWidth = a.lineWidth;
		this.miterLimit = a.miterLimit;
		this.shadowBlur = a.shadowBlur;
		this.shadowColor = a.shadowColor;
		this.shadowOffsetX = a.shadowOffsetX;
		this.shadowOffsetY = a.shadowOffsetY;
		this.strokeStyle = a.strokeStyle;
		this.textAlign = a.textAlign
	};
	t.save = function() {
		this.stack.push({
			fillStyle: this.fillStyle,
			font: this.font,
			globalAlpha: this.globalAlpha,
			lineCap: this.lineCap,
			lineDashOffset: this.lineDashOffset,
			lineJoin: this.lineJoin,
			lineWidth: this.lineWidth,
			miterLimit: this.miterLimit,
			shadowBlur: this.shadowBlur,
			shadowColor: this.shadowColor,
			shadowOffsetX: this.shadowOffsetX,
			shadowOffsetY: this.shadowOffsetY,
			strokeStyle: this.strokeStyle,
			textAlign: this.textAlign
		});
		for(var a = [], b = 0; b < this.path.length; b++) a.push(this.path[b]);
		this.stack.push(a);
		this.stack.push(this.Ae.copy())
	};
	t.setTransform = function(a, b, c, d, e, f) {
		1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === f || Ml(this, a, b, c, d, e, f)
	};
	t.scale = function(a, b) {
		this.Ae.scale(a, b)
	};
	t.translate = function(a, b) {
		this.Ae.translate(a, b)
	};
	t.transform = function() {};
	t.stroke = function() {
		this.addPath("stroke", this.path, this.Ae)
	};
	t.Ni = function() {
		this.clipInsteadOfFill || this.stroke()
	};
	t.xb = function(a, b, c) {
		return this.mk.xb(a, b, c)
	};
	t.addElement = function(a, b, c) {
		a = this.xb(a, b, c);
		0 < this.yc.length ? this.yc[this.yc.length - 1].appendChild(a) : this.nq.appendChild(a);
		return this.Up = a
	};

	function Nl(a, b, c, d, e) {
		1 !== a.globalAlpha && (c.opacity = a.globalAlpha);
		"fill" === b ? (a.fillStyle instanceof Jl ? c.fill = Ol(a, a.fillStyle) : (/^rgba\(/.test(a.fillStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle), c.fill = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["fill-opacity"] = b[4]), c.fill = a.fillStyle), c.stroke = "none") : "stroke" === b && (c.fill = "none", a.strokeStyle instanceof Jl ? c.stroke = Ol(a, a.strokeStyle) : (/^rgba\(/.test(a.strokeStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
			c.stroke = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["stroke-opacity"] = b[4]), c.stroke = a.strokeStyle), c["stroke-width"] = a.lineWidth, c["stroke-linecap"] = a.lineCap, c["stroke-linejoin"] = a.lineJoin, c["stroke-miterlimit"] = a.miterLimit);
		a = d.Ma;
		a = "matrix(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ")";
		void 0 !== e && (a += e);
		c.transform = a
	}

	function Ol(a, b) {
		var c = "GRAD" + Ib++;
		if("linear" === b.type) var d = a.xb("linearGradient", {
			x1: b.x1,
			x2: b.x2,
			y1: b.y1,
			y2: b.y2,
			id: c,
			gradientUnits: "userSpaceOnUse"
		});
		else if("radial" === b.type) d = a.xb("radialGradient", {
			x1: b.x1,
			x2: b.x2,
			y1: b.y1,
			y2: b.y2,
			r1: b.r1,
			r2: b.r2,
			id: c
		});
		else if("pattern" === b.type) {
			var e = b.pattern;
			d = {
				width: e.width,
				height: e.height,
				id: c,
				patternUnits: "userSpaceOnUse"
			};
			var f = "";
			e instanceof HTMLCanvasElement && (f = e.toDataURL());
			e instanceof HTMLImageElement && (f = e.src);
			e = {
				x: 0,
				y: 0,
				width: e.width,
				height: e.height,
				href: f
			};
			d = a.xb("pattern", d);
			d.appendChild(a.xb("image", e))
		} else throw Error("invalid gradient");
		f = b.Ww;
		b = f.length;
		e = [];
		for(var g = 0; g < b; g++) {
			var h = f[g],
				k = h.color;
			h = {
				offset: h.offset,
				"stop-color": k
			};
			/^rgba\(/.test(k) && (k = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(k), h["stop-color"] = "rgb(" + k[1] + "," + k[2] + "," + k[3] + ")", h["stop-opacity"] = k[4]);
			e.push(h)
		}
		e.sort(function(a, b) {
			return a.offset > b.offset ? 1 : -1
		});
		for(f = 0; f < b; f++) d.appendChild(a.xb("stop", e[f]));
		a.nq.appendChild(d);
		return "url(#" + c + ")"
	}
	t.addPath = function(a, b, c) {
		for(var d = [], e = 0; e < b.length; e++) {
			var f = Ha(b[e]),
				g = [f.shift()];
			if("A" === g[0]) g.push(f.shift() + "," + f.shift(), f.shift(), f.shift() + "," + f.shift(), f.shift() + "," + f.shift());
			else
				for(; f.length;) g.push(f.shift() + "," + f.shift());
			d.push(g.join(" "))
		}
		b = {
			d: d.join(" ")
		};
		Nl(this, a, b, c);
		"clipPath" === a ? (a = "CLIP" + Ib++, c = this.xb("clipPath", {
				id: a
			}), c.appendChild(this.xb("path", b)), this.nq.appendChild(c), 0 < this.yc.length && this.yc[this.yc.length - 1].setAttributeNS(null, "clip-path", "url(#" + a + ")")) :
			this.addElement("path", b)
	};

	function Ml(a, b, c, d, e, f, g) {
		var h = new Il;
		h.Ma = [b, c, d, e, f, g];
		b = {};
		Nl(a, "g", b, h);
		h = a.addElement("g", b);
		a.yc.push(h)
	}
	t.mq = function() {
		if(0 !== this.shadowOffsetX || 0 !== this.shadowOffsetY || 0 !== this.shadowBlur) {
			var a = "SHADOW" + Ib++,
				b = this.addElement("filter", {
					id: a,
					x: "-100%",
					y: "-100%",
					width: "300%",
					height: "300%"
				}, null);
			var c = this.xb("feGaussianBlur", {
				"in": "SourceAlpha",
				result: "blur",
				Wz: this.shadowBlur / 2
			});
			var d = this.xb("feFlood", {
				"in": "blur",
				result: "flood",
				"flood-color": this.shadowColor
			});
			var e = this.xb("feComposite", {
				"in": "flood",
				in2: "blur",
				operator: "in",
				result: "comp"
			});
			var f = this.xb("feOffset", {
				"in": "comp",
				result: "offsetBlur",
				dx: this.shadowOffsetX,
				dy: this.shadowOffsetY
			});
			var g = this.xb("feMerge", {});
			g.appendChild(this.xb("feMergeNode", {
				"in": "offsetBlur"
			}));
			g.appendChild(this.xb("feMergeNode", {
				"in": "SourceGraphic"
			}));
			b.appendChild(c);
			b.appendChild(d);
			b.appendChild(e);
			b.appendChild(f);
			b.appendChild(g);
			0 < this.yc.length && this.yc[this.yc.length - 1].setAttributeNS(null, "filter", "url(#" + a + ")")
		}
	};
	t.Kv = function(a, b, c) {
		this.gp = a;
		this.hp = b;
		this.Qd = c
	};

	function il(a) {
		a.shadowOffsetX = 0;
		a.shadowOffsetY = 0;
		a.shadowBlur = 0
	}

	function hl(a) {
		a.shadowOffsetX = a.gp;
		a.shadowOffsetY = a.hp;
		a.shadowBlur = a.Qd
	}
	t.Ms = function() {};
	t.Js = function() {};
	t.Tc = function() {};
	t.ot = function() {};
	Ll.prototype.rotate = function() {};
	Ll.prototype.getImageData = function() {
		return null
	};
	Ll.prototype.measureText = function() {
		return null
	};
	Ll.className = "SVGContext";
	Q.prototype.dt = function(a) {
		void 0 === a && (a = new vb);
		a.context = "svg";
		a = ok(this, a);
		return null !== a ? a.nq : null
	};
	Q.prototype.makeSvg = Q.prototype.dt;
	Q.prototype.dv = function(a) {
		return this.dt(a)
	};
	Q.prototype.makeSVG = Q.prototype.dv;
	P.prototype.ex = function(a, b) {
		if(!(a instanceof Ll)) return !1;
		if(!this.visible) return !0;
		var c = null,
			d = a.Up;
		if(this instanceof Y && (this.type === Y.TableRow || this.type === Y.TableColumn)) return fl(this, a, b), !0;
		var e = this.yb;
		if(0 === e.width || 0 === e.height || isNaN(e.x) || isNaN(e.y)) return !0;
		var f = this.transform,
			g = this.panel;
		0 !== (this.G & 4096) === !0 && gl(this);
		var h = 0 !== (this.G & 256),
			k = !1;
		this instanceof wh && (a.font = this.font);
		if(h) {
			k = g.$d() ? g.naturalBounds : g.actualBounds;
			if(null !== this.od) {
				var l = this.od;
				var m = l.x;
				var n =
					l.y;
				var p = l.width;
				l = l.height
			} else m = Math.max(e.x, k.x), n = Math.max(e.y, k.y), p = Math.min(e.right, k.right) - m, l = Math.min(e.bottom, k.bottom) - n;
			if(m > e.width + e.x || e.x > k.width + k.x || n > e.height + e.y || e.y > k.height + k.y) return !0;
			k = !0;
			Ml(a, 1, 0, 0, 1, 0, 0);
			a.save();
			a.beginPath();
			a.rect(m, n, p, l);
			a.clip()
		}
		if(this.qg() && !this.isVisible()) return !0;
		a.Ae.Ma = [1, 0, 0, 1, 0, 0];
		this instanceof wh && 1 < this.lineCount && Ml(a, 1, 0, 0, 1, 0, 0);
		m = !1;
		this.qg() && this.isShadowed && b.Ce("drawShadows") && (n = this.oi, a.Kv(n.x * b.scale * b.Jb, n.y * b.scale *
			b.Jb, this.Qd), hl(a), a.shadowColor = this.Bj);
		n = !1;
		this.part && b.Ce("drawShadows") && (n = this.part.isShadowed);
		!0 === this.shadowVisible ? (hl(a), !1 === m && n && (Ml(a, 1, 0, 0, 1, 0, 0), a.mq(), m = !0)) : !1 === this.shadowVisible && il(a);
		p = this.naturalBounds;
		null !== this.areaBackground && (ii(this, a, this.areaBackground, !0, !0, p, e), !1 === m && n && (Ml(a, 1, 0, 0, 1, 0, 0), a.mq(), m = !0), this.areaBackground instanceof jl && this.areaBackground.type === kl ? (a.beginPath(), a.rect(e.x, e.y, e.width, e.height), a.Vd(this.areaBackground)) : a.fillRect(e.x, e.y,
			e.width, e.height));
		this instanceof Y ? Ml(a, f.m11, f.m12, f.m21, f.m22, f.dx, f.dy) : a.Ae.Ma = [f.m11, f.m12, f.m21, f.m22, f.dx, f.dy];
		if(null !== this.background) {
			!1 === m && n && (Ml(a, 1, 0, 0, 1, 0, 0), a.mq(), m = !0);
			var q = this.naturalBounds;
			l = f = 0;
			var r = q.width;
			q = q.height;
			var u = 0;
			this instanceof qg && (q = this.geometry.bounds, f = q.x, l = q.y, r = q.width, q = q.height, u = this.strokeWidth);
			ii(this, a, this.background, !0, !1, p, e);
			this.background instanceof jl && this.background.type === kl ? (a.beginPath(), a.rect(f - u / 2, l - u / 2, r + u, q + u), a.Vd(this.background)) :
				a.fillRect(f - u / 2, l - u / 2, r + u, q + u)
		}
		n && (null !== this.background || null !== this.areaBackground || null !== g && 0 !== (g.G & 512) || null !== g && (g.type === Y.Auto || g.type === Y.Spot) && g.Db() !== this) ? (ll(this, !0), null === this.shadowVisible && il(a)) : ll(this, !1);
		this.xi(a, b);
		n && 0 !== (this.G & 512) === !0 && hl(a);
		this.qg() && n && il(a);
		h && (a.restore(), k && a.yc.pop());
		this instanceof Y && (c = a.yc.pop());
		!0 === m && a.yc.pop();
		this instanceof wh && 1 < this.lineCount && (c = a.yc.pop());
		null !== a.mk.Ls && (null === c && (d === a.Up ? (Ml(a, 1, 0, 0, 1, 0, 0), c = a.yc.pop()) :
			c = a.Up), a.mk.Ls(this, c));
		return !0
	};

	function pk(a, b) {
		this.ownerDocument = b = void 0 === b ? w.document : b;
		this.Ls = null;
		b = b.createElement("canvas");
		b.tabIndex = 0;
		this.Ha = b;
		this.context = new nl(b);
		b.F = a
	}
	t = pk.prototype;
	t.Wu = function() {};
	t.toDataURL = function(a, b) {
		return this.Ha.toDataURL(a, b)
	};
	t.getBoundingClientRect = function() {
		return this.Ha.getBoundingClientRect()
	};
	t.focus = function() {
		this.Ha.focus()
	};
	t.bx = function() {
		this.ownerDocument = this.Ha.F = null
	};
	oa.Object.defineProperties(pk.prototype, {
		width: {
			get: function() {
				return this.Ha.width
			},
			set: function(a) {
				this.Ha.width = a
			}
		},
		height: {
			get: function() {
				return this.Ha.height
			},
			set: function(a) {
				this.Ha.height = a
			}
		},
		style: {
			get: function() {
				return this.Ha.style
			}
		}
	});
	pk.className = "CanvasSurface";

	function nl(a) {
		a.getContext && a.getContext("2d") || A("Browser does not support HTML Canvas Element");
		this.V = a.getContext("2d");
		this.Dt = this.Ft = this.Et = "";
		this.Qm = !1;
		this.Qd = this.hp = this.gp = 0
	}
	t = nl.prototype;
	t.ot = function(a) {
		this.V.imageSmoothingEnabled = a
	};
	t.arc = function(a, b, c, d, e, f) {
		this.V.arc(a, b, c, d, e, f)
	};
	t.beginPath = function() {
		this.V.beginPath()
	};
	t.bezierCurveTo = function(a, b, c, d, e, f) {
		this.V.bezierCurveTo(a, b, c, d, e, f)
	};
	t.clearRect = function(a, b, c, d) {
		this.V.clearRect(a, b, c, d)
	};
	t.clip = function() {
		this.V.clip()
	};
	t.closePath = function() {
		this.V.closePath()
	};
	t.createLinearGradient = function(a, b, c, d) {
		return this.V.createLinearGradient(a, b, c, d)
	};
	t.createPattern = function(a, b) {
		return this.V.createPattern(a, b)
	};
	t.createRadialGradient = function(a, b, c, d, e, f) {
		return this.V.createRadialGradient(a, b, c, d, e, f)
	};
	t.drawImage = function(a, b, c, d, e, f, g, h, k) {
		void 0 === d ? this.V.drawImage(a, b, c) : this.V.drawImage(a, b, c, d, e, f, g, h, k)
	};
	t.fill = function() {
		this.V.fill()
	};
	t.fillRect = function(a, b, c, d) {
		this.V.fillRect(a, b, c, d)
	};
	t.fillText = function(a, b, c) {
		this.V.fillText(a, b, c)
	};
	t.getImageData = function(a, b, c, d) {
		return this.V.getImageData(a, b, c, d)
	};
	t.lineTo = function(a, b) {
		this.V.lineTo(a, b)
	};
	t.measureText = function(a) {
		return this.V.measureText(a)
	};
	t.moveTo = function(a, b) {
		this.V.moveTo(a, b)
	};
	t.quadraticCurveTo = function(a, b, c, d) {
		this.V.quadraticCurveTo(a, b, c, d)
	};
	t.rect = function(a, b, c, d) {
		this.V.rect(a, b, c, d)
	};
	t.restore = function() {
		this.V.restore()
	};
	nl.prototype.rotate = function(a) {
		this.V.rotate(a)
	};
	t = nl.prototype;
	t.save = function() {
		this.V.save()
	};
	t.setTransform = function(a, b, c, d, e, f) {
		this.V.setTransform(a, b, c, d, e, f)
	};
	t.scale = function(a, b) {
		this.V.scale(a, b)
	};
	t.stroke = function() {
		this.V.stroke()
	};
	t.transform = function(a, b, c, d, e, f) {
		1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === f || this.V.transform(a, b, c, d, e, f)
	};
	t.translate = function(a, b) {
		this.V.translate(a, b)
	};
	t.Vd = function(a) {
		if(a instanceof jl && a.type === kl) {
			var b = a.Ak;
			a = a.Gt;
			a > b ? (this.scale(b / a, 1), this.translate((a - b) / 2, 0)) : b > a && (this.scale(1, a / b), this.translate(0, (b - a) / 2));
			this.Qm ? this.clip() : this.fill();
			a > b ? (this.translate(-(a - b) / 2, 0), this.scale(1 / (b / a), 1)) : b > a && (this.translate(0, -(b - a) / 2), this.scale(1, 1 / (a / b)))
		} else this.Qm ? this.clip() : this.fill()
	};
	t.Ni = function() {
		this.Qm || this.stroke()
	};
	t.Kv = function(a, b, c) {
		this.gp = a;
		this.hp = b;
		this.Qd = c
	};
	t.Ms = function(a, b) {
		var c = this.V;
		void 0 !== c.setLineDash && (c.setLineDash(a), c.lineDashOffset = b)
	};
	t.Js = function() {
		var a = this.V;
		void 0 !== a.setLineDash && (a.setLineDash(Pl), a.lineDashOffset = 0)
	};
	t.Tc = function(a) {
		a && (this.Et = "");
		this.Dt = this.Ft = ""
	};
	oa.Object.defineProperties(nl.prototype, {
		fillStyle: {
			get: function() {
				return this.V.fillStyle
			},
			set: function(a) {
				this.Dt !== a && (this.Dt = this.V.fillStyle = a)
			}
		},
		font: {
			get: function() {
				return this.V.font
			},
			set: function(a) {
				this.Et !== a && (this.Et = this.V.font = a)
			}
		},
		globalAlpha: {
			get: function() {
				return this.V.globalAlpha
			},
			set: function(a) {
				this.V.globalAlpha = a
			}
		},
		lineCap: {
			get: function() {
				return this.V.lineCap
			},
			set: function(a) {
				this.V.lineCap = a
			}
		},
		lineDashOffset: {
			get: function() {
				return this.V.lineDashOffset
			},
			set: function(a) {
				this.V.lineDashOffset = a
			}
		},
		lineJoin: {
			get: function() {
				return this.V.lineJoin
			},
			set: function(a) {
				this.V.lineJoin = a
			}
		},
		lineWidth: {
			get: function() {
				return this.V.lineWidth
			},
			set: function(a) {
				this.V.lineWidth = a
			}
		},
		miterLimit: {
			get: function() {
				return this.V.miterLimit
			},
			set: function(a) {
				this.V.miterLimit =
					a
			}
		},
		shadowBlur: {
			get: function() {
				return this.V.shadowBlur
			},
			set: function(a) {
				this.V.shadowBlur = a
			}
		},
		shadowColor: {
			get: function() {
				return this.V.shadowColor
			},
			set: function(a) {
				this.V.shadowColor = a
			}
		},
		shadowOffsetX: {
			get: function() {
				return this.V.shadowOffsetX
			},
			set: function(a) {
				this.V.shadowOffsetX = a
			}
		},
		shadowOffsetY: {
			get: function() {
				return this.V.shadowOffsetY
			},
			set: function(a) {
				this.V.shadowOffsetY =
					a
			}
		},
		strokeStyle: {
			get: function() {
				return this.V.strokeStyle
			},
			set: function(a) {
				this.Ft !== a && (this.Ft = this.V.strokeStyle = a)
			}
		},
		textAlign: {
			get: function() {
				return this.V.textAlign
			},
			set: function(a) {
				this.V.textAlign = a
			}
		},
		imageSmoothingEnabled: {
			get: function() {
				return this.V.imageSmoothingEnabled
			},
			set: function(a) {
				this.V.imageSmoothingEnabled = a
			}
		},
		clipInsteadOfFill: {
			get: function() {
				return this.Qm
			},
			set: function(a) {
				this.Qm = a
			}
		}
	});
	var Pl = Object.freeze([]);
	nl.className = "CanvasSurfaceContext";

	function Ql() {
		this.da = this.u = this.K = this.l = 0
	}
	Ql.className = "ColorNumbers";

	function jl(a) {
		rb(this);
		this.v = !1;
		void 0 === a ? (this.va = ml, this.zk = "black") : "string" === typeof a ? (this.va = ml, this.zk = a) : (this.va = a, this.zk = "black");
		a = this.va;
		a === pl ? (this.yl = fd, this.Mk = nd) : this.Mk = a === kl ? this.yl = id : this.yl = dd;
		this.ts = 0;
		this.br = NaN;
		this.ce = this.Yr = this.be = null;
		this.Gt = this.Ak = 0
	}
	jl.prototype.copy = function() {
		var a = new jl;
		a.va = this.va;
		a.zk = this.zk;
		a.yl = this.yl.I();
		a.Mk = this.Mk.I();
		a.ts = this.ts;
		a.br = this.br;
		null !== this.be && (a.be = this.be.copy());
		a.Yr = this.Yr;
		return a
	};
	t = jl.prototype;
	t.freeze = function() {
		this.v = !0;
		null !== this.be && this.be.freeze();
		return this
	};
	t.ha = function() {
		Object.isFrozen(this) && A("cannot thaw constant: " + this);
		this.v = !1;
		null !== this.be && this.be.ha();
		return this
	};
	t.ib = function(a) {
		a.classType === jl && (this.type = a)
	};
	t.toString = function() {
		var a = "Brush(";
		if(this.type === ml) a += this.color;
		else if(a = this.type === pl ? a + "Linear " : this.type === kl ? a + "Radial " : this.type === ol ? a + "Pattern " : a + "(unknown) ", a += this.start + " " + this.end, null !== this.colorStops)
			for(var b = this.colorStops.iterator; b.next();) a += " " + b.key + ":" + b.value;
		return a + ")"
	};
	t.addColorStop = function(a, b) {
		this.v && za(this);
		("number" !== typeof a || !isFinite(a) || 1 < a || 0 > a) && Aa(a, "0 <= loc <= 1", jl, "addColorStop:loc");
		null === this.be && (this.be = new Nb);
		this.be.add(a, b);
		this.va === ml && (this.type = pl);
		this.ce = null;
		return this
	};
	t.rz = function(a, b) {
		this.v && za(this);
		a = void 0 === a || "number" !== typeof a ? .2 : a;
		b = void 0 === b ? Rl : b;
		if(this.type === ml) Sl(this.color), this.color = Tl(a, b);
		else if((this.type === pl || this.type === kl) && null !== this.colorStops)
			for(var c = this.colorStops.iterator; c.next();) Sl(c.value), this.addColorStop(c.key, Tl(a, b));
		return this
	};

	function Ul(a, b, c) {
		b = void 0 === b || "number" !== typeof b ? .2 : b;
		c = void 0 === c ? Rl : c;
		Sl(a);
		return Tl(b, c)
	}
	t.uy = function(a, b) {
		this.v && za(this);
		a = void 0 === a || "number" !== typeof a ? .2 : a;
		b = void 0 === b ? Rl : b;
		if(this.type === ml) Sl(this.color), this.color = Tl(-a, b);
		else if((this.type === pl || this.type === kl) && null !== this.colorStops)
			for(var c = this.colorStops.iterator; c.next();) Sl(c.value), this.addColorStop(c.key, Tl(-a, b));
		return this
	};

	function Vl(a, b, c) {
		b = void 0 === b || "number" !== typeof b ? .2 : b;
		c = void 0 === c ? Rl : c;
		Sl(a);
		return Tl(-b, c)
	}

	function Wl(a, b, c) {
		Sl(a);
		a = Xl.l;
		var d = Xl.K,
			e = Xl.u,
			f = Xl.da;
		Sl(b);
		void 0 === c && (c = .5);
		return "rgba(" + Math.round((Xl.l - a) * c + a) + ", " + Math.round((Xl.K - d) * c + d) + ", " + Math.round((Xl.u - e) * c + e) + ", " + Math.round((Xl.da - f) * c + f) + ")"
	}
	t.tx = function() {
		if(this.type === ml) return Yl(this.color);
		if((this.type === pl || this.type === kl) && null !== this.colorStops) {
			var a = this.colorStops;
			if(this.type === kl) return Yl(a.first().value);
			if(null !== a.get(.5)) return Yl(a.get(.5));
			if(2 === a.count) return a = a.La(), Yl(Wl(a[0].value, a[1].value));
			for(var b = a.iterator, c = -1, d = -1, e = 1, f = 1; b.next();) {
				var g = b.key,
					h = Math.abs(.5 - b.key);
				e > f && h < e ? (c = g, e = h) : f >= e && h < f && (d = g, f = h)
			}
			c > d && (c = [d, d = c][0]);
			b = d - c;
			return Yl(Wl(a.get(c), a.get(d), 1 - e / b))
		}
		return !1
	};

	function Yl(a) {
		if(null === a) return null;
		if(a instanceof jl) return a.tx();
		Sl(a);
		return 128 > (299 * Xl.l + 587 * Xl.K + 114 * Xl.u) / 1E3
	}

	function Tl(a, b) {
		switch(b) {
			case Rl:
				var c = 100 * Zl(Xl.l);
				b = 100 * Zl(Xl.K);
				var d = 100 * Zl(Xl.u);
				$l.l = .4124564 * c + .3575761 * b + .1804375 * d;
				$l.K = .2126729 * c + .7151522 * b + .072175 * d;
				$l.u = .0193339 * c + .119192 * b + .9503041 * d;
				$l.da = Xl.da;
				c = am($l.l / bm[0]);
				b = am($l.K / bm[1]);
				d = am($l.u / bm[2]);
				cm.l = 116 * b - 16;
				cm.K = 500 * (c - b);
				cm.u = 200 * (b - d);
				cm.da = $l.da;
				cm.l = Math.min(100, Math.max(0, cm.l + 100 * a));
				a = (cm.l + 16) / 116;
				c = a - cm.u / 200;
				$l.l = bm[0] * dm(cm.K / 500 + a);
				$l.K = bm[1] * (cm.l > em * fm ? Math.pow(a, 3) : cm.l / em);
				$l.u = bm[2] * dm(c);
				$l.da = cm.da;
				a = -.969266 *
					$l.l + 1.8760108 * $l.K + .041556 * $l.u;
				c = .0556434 * $l.l + -.2040259 * $l.K + 1.0572252 * $l.u;
				Xl.l = 255 * gm((3.2404542 * $l.l + -1.5371385 * $l.K + -.4985314 * $l.u) / 100);
				Xl.K = 255 * gm(a / 100);
				Xl.u = 255 * gm(c / 100);
				Xl.da = $l.da;
				Xl.l = Math.round(Xl.l);
				255 < Xl.l ? Xl.l = 255 : 0 > Xl.l && (Xl.l = 0);
				Xl.K = Math.round(Xl.K);
				255 < Xl.K ? Xl.K = 255 : 0 > Xl.K && (Xl.K = 0);
				Xl.u = Math.round(Xl.u);
				255 < Xl.u ? Xl.u = 255 : 0 > Xl.u && (Xl.u = 0);
				return "rgba(" + Xl.l + ", " + Xl.K + ", " + Xl.u + ", " + Xl.da + ")";
			case hm:
				b = Xl.l / 255;
				d = Xl.K / 255;
				var e = Xl.u / 255,
					f = Math.max(b, d, e),
					g = Math.min(b, d, e),
					h =
					f - g;
				g = (f + g) / 2;
				if(0 === h) c = b = 0;
				else {
					switch(f) {
						case b:
							c = (d - e) / h % 6;
							break;
						case d:
							c = (e - b) / h + 2;
							break;
						case e:
							c = (b - d) / h + 4
					}
					c *= 60;
					0 > c && (c += 360);
					b = h / (1 - Math.abs(2 * g - 1))
				}
				im.l = Math.round(c);
				im.K = Math.round(100 * b);
				im.u = Math.round(100 * g);
				im.da = Xl.da;
				im.u = Math.min(100, Math.max(0, im.u + 100 * a));
				return "hsla(" + im.l + ", " + im.K + "%, " + im.u + "%, " + im.da + ")";
			default:
				return A("Unknown color space: " + b), "rgba(0, 0, 0, 1)"
		}
	}

	function Sl(a) {
		var b = jm;
		if(null !== b) {
			b.clearRect(0, 0, 1, 1);
			b.fillStyle = "#000000";
			var c = b.fillStyle;
			b.fillStyle = a;
			b.fillStyle !== c ? (b.fillRect(0, 0, 1, 1), a = b.getImageData(0, 0, 1, 1).data, Xl.l = a[0], Xl.K = a[1], Xl.u = a[2], Xl.da = a[3] / 255) : (b.fillStyle = "#FFFFFF", b.fillStyle = a, Xl.l = 0, Xl.K = 0, Xl.u = 0, Xl.da = 1)
		}
	}

	function Zl(a) {
		a /= 255;
		return .04045 >= a ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4)
	}

	function gm(a) {
		return .0031308 >= a ? 12.92 * a : 1.055 * Math.pow(a, 1 / 2.4) - .055
	}

	function am(a) {
		return a > fm ? Math.pow(a, 1 / 3) : (em * a + 16) / 116
	}

	function dm(a) {
		var b = a * a * a;
		return b > fm ? b : (116 * a - 16) / em
	}
	oa.Object.defineProperties(jl.prototype, {
		type: {
			get: function() {
				return this.va
			},
			set: function(a) {
				this.v && za(this, a);
				this.va = a;
				this.start.mc() && (a === pl ? this.start = fd : a === kl && (this.start = id));
				this.end.mc() && (a === pl ? this.end = nd : a === kl && (this.end = id));
				this.ce = null
			}
		},
		color: {
			get: function() {
				return this.zk
			},
			set: function(a) {
				this.v && za(this, a);
				this.zk = a;
				this.ce = null
			}
		},
		start: {
			get: function() {
				return this.yl
			},
			set: function(a) {
				this.v &&
					za(this, a);
				this.yl = a.I();
				this.ce = null
			}
		},
		end: {
			get: function() {
				return this.Mk
			},
			set: function(a) {
				this.v && za(this, a);
				this.Mk = a.I();
				this.ce = null
			}
		},
		startRadius: {
			get: function() {
				return this.ts
			},
			set: function(a) {
				this.v && za(this, a);
				0 > a && Aa(a, ">= zero", jl, "startRadius");
				this.ts = a;
				this.ce = null
			}
		},
		endRadius: {
			get: function() {
				return this.br
			},
			set: function(a) {
				this.v && za(this, a);
				0 > a && Aa(a, ">= zero", jl, "endRadius");
				this.br = a;
				this.ce =
					null
			}
		},
		colorStops: {
			get: function() {
				return this.be
			},
			set: function(a) {
				this.v && za(this, a);
				this.be = a;
				this.ce = null
			}
		},
		pattern: {
			get: function() {
				return this.Yr
			},
			set: function(a) {
				this.v && za(this, a);
				this.Yr = a;
				this.ce = null
			}
		}
	});
	jl.prototype.isDark = jl.prototype.tx;
	jl.prototype.darkenBy = jl.prototype.uy;
	jl.prototype.lightenBy = jl.prototype.rz;
	jl.prototype.addColorStop = jl.prototype.addColorStop;
	var fm = 216 / 24389,
		em = 24389 / 27,
		bm = [95.047, 100, 108.883],
		jm = null,
		Xl = new Ql,
		im = new Ql,
		$l = new Ql,
		cm = new Ql;
	jl.className = "Brush";
	var ml;
	jl.Solid = ml = new D(jl, "Solid", 0);
	var pl;
	jl.Linear = pl = new D(jl, "Linear", 1);
	var kl;
	jl.Radial = kl = new D(jl, "Radial", 2);
	var ol;
	jl.Pattern = ol = new D(jl, "Pattern", 4);
	var Rl;
	jl.Lab = Rl = new D(jl, "Lab", 5);
	var hm;
	jl.HSL = hm = new D(jl, "HSL", 6);
	jl.randomColor = function(a, b) {
		void 0 === a && (a = 128);
		void 0 === b && (b = Math.max(a, 255));
		var c = Math.abs(b - a);
		b = Math.floor(a + Math.random() * c).toString(16);
		var d = Math.floor(a + Math.random() * c).toString(16);
		a = Math.floor(a + Math.random() * c).toString(16);
		2 > b.length && (b = "0" + b);
		2 > d.length && (d = "0" + d);
		2 > a.length && (a = "0" + a);
		return "#" + b + d + a
	};
	jl.isValidColor = function(a) {
		if("black" === a) return !0;
		if("" === a) return !1;
		var b = jm;
		if(null === b) return !0;
		b.fillStyle = "#000000";
		var c = b.fillStyle;
		b.fillStyle = a;
		if(b.fillStyle !== c) return !0;
		b.fillStyle = "#FFFFFF";
		c = b.fillStyle;
		b.fillStyle = a;
		return b.fillStyle !== c
	};
	jl.lighten = function(a) {
		return Ul(a)
	};
	jl.lightenBy = Ul;
	jl.darken = function(a) {
		return Vl(a)
	};
	jl.darkenBy = Vl;
	jl.mix = Wl;
	jl.isDark = Yl;
	jm = Ya ? (new pk(null)).context : null;

	function Dl() {
		this.name = "Base"
	}
	Dl.prototype.measure = function() {};
	Dl.prototype.measureElement = function(a, b, c, d, e) {
		a.measure(b, c, d, e)
	};
	Dl.prototype.arrange = function() {};
	Dl.prototype.arrangeElement = function(a, b, c, d, e, f) {
		a.arrange(b, c, d, e, f)
	};
	oa.Object.defineProperties(Dl.prototype, {
		classType: {
			get: function() {
				return Y
			}
		}
	});
	Dl.className = "PanelLayout";

	function km() {
		this.name = "Base";
		this.name = "Position"
	}
	na(km, Dl);
	km.prototype.measure = function(a, b, c, d, e, f, g) {
		var h = d.length;
		a = lm(a);
		for(var k = 0; k < h; k++) {
			var l = d[k];
			if(l.visible || l === a) {
				var m = l.margin,
					n = m.right + m.left;
				m = m.top + m.bottom;
				l.measure(b, c, f, g);
				var p = l.measuredBounds;
				n = Math.max(p.width + n, 0);
				m = Math.max(p.height + m, 0);
				p = l.position.x;
				var q = l.position.y;
				isFinite(p) || (p = 0);
				isFinite(q) || (q = 0);
				l instanceof qg && l.isGeometryPositioned && (l = l.strokeWidth / 2, p -= l, q -= l);
				Ic(e, p, q, n, m)
			}
		}
	};
	km.prototype.arrange = function(a, b, c) {
		var d = b.length,
			e = a.padding;
		a = c.x - e.left;
		c = c.y - e.top;
		for(e = 0; e < d; e++) {
			var f = b[e],
				g = f.measuredBounds,
				h = f.margin,
				k = f.position.x,
				l = f.position.y;
			k = isNaN(k) ? -a : k - a;
			l = isNaN(l) ? -c : l - c;
			if(f instanceof qg && f.isGeometryPositioned) {
				var m = f.strokeWidth / 2;
				k -= m;
				l -= m
			}
			f.visible && f.arrange(k + h.left, l + h.top, g.width, g.height)
		}
	};

	function mm() {
		this.name = "Base";
		this.name = "Horizontal"
	}
	na(mm, Dl);
	mm.prototype.measure = function(a, b, c, d, e, f, g) {
		var h = d.length;
		b = La();
		f = lm(a);
		for(var k = 0; k < h; k++) {
			var l = d[k];
			if(l.visible || l === f) {
				var m = al(l, !1);
				if(m !== dh && m !== Mk) b.push(l);
				else {
					l.measure(Infinity, c, 0, g);
					m = l.margin;
					l = l.measuredBounds;
					var n = Math.max(l.height + m.top + m.bottom, 0);
					e.width += Math.max(l.width + m.right + m.left, 0);
					e.height = Math.max(e.height, n)
				}
			}
		}
		d = b.length;
		a.desiredSize.height ? c = Math.min(a.desiredSize.height, a.maxSize.height) : 0 !== e.height && (c = Math.min(e.height, a.maxSize.height));
		for(a = 0; a < d; a++)
			if(k =
				b[a], k.visible || k === f) m = k.margin, h = m.right + m.left, m = m.top + m.bottom, k.measure(Infinity, c, 0, g), k = k.measuredBounds, m = Math.max(k.height + m, 0), e.width += Math.max(k.width + h, 0), e.height = Math.max(e.height, m);
		Na(b)
	};
	mm.prototype.arrange = function(a, b, c) {
		for(var d = b.length, e = a.padding, f = e.top, g = a.isOpposite, h = g ? c.width : e.left, k = 0; k < d; k++) {
			var l = f,
				m = b[k];
			if(m.visible) {
				var n = m.measuredBounds,
					p = m.margin,
					q = p.top + p.bottom,
					r = f + e.bottom,
					u = n.height,
					v = al(m, !1);
				if(isNaN(m.desiredSize.height) && v === ge || v === Nk) u = Math.max(c.height - q - r, 0);
				q = u + q + r;
				r = m.alignment;
				r.jb() && (r = a.defaultAlignment);
				r.pb() || (r = id);
				g && (h -= n.width + p.left + p.right);
				m.arrange(h + r.offsetX + p.left, l + r.offsetY + p.top + (c.height * r.y - q * r.y), n.width, u);
				g || (h += n.width +
					p.left + p.right)
			}
		}
	};

	function nm() {
		this.name = "Base";
		this.name = "Vertical"
	}
	na(nm, Dl);
	nm.prototype.measure = function(a, b, c, d, e, f) {
		var g = d.length;
		c = La();
		for(var h = lm(a), k = 0; k < g; k++) {
			var l = d[k];
			if(l.visible || l === h) {
				var m = al(l, !1);
				if(m !== dh && m !== Nk) c.push(l);
				else {
					var n = l.margin;
					m = n.right + n.left;
					n = n.top + n.bottom;
					l.measure(b, Infinity, f, 0);
					l = l.measuredBounds;
					zc(e, Math.max(e.width, Math.max(l.width + m, 0)), e.height + Math.max(l.height + n, 0))
				}
			}
		}
		d = c.length;
		if(0 !== d) {
			a.desiredSize.width ? b = Math.min(a.desiredSize.width, a.maxSize.width) : 0 !== e.width && (b = Math.min(e.width, a.maxSize.width));
			for(a = 0; a < d; a++)
				if(k =
					c[a], k.visible || k === h) l = k.margin, g = l.right + l.left, l = l.top + l.bottom, k.measure(b, Infinity, f, 0), k = k.measuredBounds, l = Math.max(k.height + l, 0), e.width = Math.max(e.width, Math.max(k.width + g, 0)), e.height += l;
			Na(c)
		}
	};
	nm.prototype.arrange = function(a, b, c) {
		for(var d = b.length, e = a.padding, f = e.left, g = a.isOpposite, h = g ? c.height : e.top, k = 0; k < d; k++) {
			var l = f,
				m = b[k];
			if(m.visible) {
				var n = m.measuredBounds,
					p = m.margin,
					q = p.left + p.right,
					r = f + e.right,
					u = n.width,
					v = al(m, !1);
				if(isNaN(m.desiredSize.width) && v === ge || v === Mk) u = Math.max(c.width - q - r, 0);
				q = u + q + r;
				r = m.alignment;
				r.jb() && (r = a.defaultAlignment);
				r.pb() || (r = id);
				g && (h -= n.height + p.bottom + p.top);
				m.arrange(l + r.offsetX + p.left + (c.width * r.x - q * r.x), h + r.offsetY + p.top, u, n.height);
				g || (h += n.height +
					p.bottom + p.top)
			}
		}
	};

	function om() {
		this.name = "Base";
		this.name = "Spot"
	}
	na(om, Dl);
	om.prototype.measure = function(a, b, c, d, e, f, g) {
		var h = d.length,
			k = a.Db(),
			l = k.margin,
			m = l.right + l.left,
			n = l.top + l.bottom;
		k.measure(b, c, f, g);
		var p = k.measuredBounds;
		f = p.width;
		g = p.height;
		var q = Math.max(f + m, 0);
		var r = Math.max(g + n, 0);
		for(var u = a.isClipping, v = M.allocAt(-l.left, -l.top, q, r), x = !0, y = lm(a), z = 0; z < h; z++) {
			var B = d[z];
			if(B !== k && (B.visible || B === y)) {
				l = B.margin;
				q = l.right + l.left;
				r = l.top + l.bottom;
				p = al(B, !1);
				switch(p) {
					case ge:
						b = f;
						c = g;
						break;
					case Mk:
						b = f;
						break;
					case Nk:
						c = g
				}
				B.measure(b, c, 0, 0);
				p = B.measuredBounds;
				q =
					Math.max(p.width + q, 0);
				r = Math.max(p.height + r, 0);
				var C = B.alignment;
				C.jb() && (C = a.defaultAlignment);
				C.pb() || (C = id);
				var I = B.alignmentFocus;
				I.jb() && (I = id);
				var J = null;
				B instanceof Y && "" !== B.vg && (B.arrange(0, 0, p.width, p.height), J = B.Ya(B.vg), J === B && (J = null));
				if(null !== J) {
					l = J.naturalBounds;
					p = J.margin;
					for(l = G.allocAt(I.x * l.width - I.offsetX - p.left, I.y * l.height - I.offsetY - p.top); J !== B;) J.transform.ta(l), J = J.panel;
					B = C.x * f + C.offsetX - l.x;
					p = C.y * g + C.offsetY - l.y;
					G.free(l)
				} else B = C.x * f + C.offsetX - (I.x * p.width + I.offsetX) -
					l.left, p = C.y * g + C.offsetY - (I.y * p.height + I.offsetY) - l.top;
				x ? (x = !1, e.h(B, p, q, r)) : Ic(e, B, p, q, r)
			}
		}
		x ? e.assign(v) : u ? e.Yu(v.x, v.y, v.width, v.height) : Ic(e, v.x, v.y, v.width, v.height);
		M.free(v);
		p = k.stretch;
		p === Lk && (p = al(k, !1));
		switch(p) {
			case dh:
				return;
			case ge:
				if(!isFinite(b) && !isFinite(c)) return;
				break;
			case Mk:
				if(!isFinite(b)) return;
				break;
			case Nk:
				if(!isFinite(c)) return
		}
		p = k.measuredBounds;
		f = p.width;
		g = p.height;
		q = Math.max(f + m, 0);
		r = Math.max(g + n, 0);
		l = k.margin;
		v = M.allocAt(-l.left, -l.top, q, r);
		for(b = 0; b < h; b++) c = d[b], c ===
			k || !c.visible && c !== y || (l = c.margin, q = l.right + l.left, r = l.top + l.bottom, p = c.measuredBounds, q = Math.max(p.width + q, 0), r = Math.max(p.height + r, 0), m = c.alignment, m.jb() && (m = a.defaultAlignment), m.pb() || (m = id), c = c.alignmentFocus, c.jb() && (c = id), x ? (x = !1, e.h(m.x * f + m.offsetX - (c.x * p.width + c.offsetX) - l.left, m.y * g + m.offsetY - (c.y * p.height + c.offsetY) - l.top, q, r)) : Ic(e, m.x * f + m.offsetX - (c.x * p.width + c.offsetX) - l.left, m.y * g + m.offsetY - (c.y * p.height + c.offsetY) - l.top, q, r));
		x ? e.assign(v) : u ? e.Yu(v.x, v.y, v.width, v.height) : Ic(e, v.x,
			v.y, v.width, v.height);
		M.free(v)
	};
	om.prototype.arrange = function(a, b, c) {
		var d = b.length,
			e = a.Db(),
			f = e.measuredBounds,
			g = f.width;
		f = f.height;
		var h = a.padding,
			k = h.left;
		h = h.top;
		var l = k - c.x,
			m = h - c.y;
		e.arrange(l, m, g, f);
		for(var n = 0; n < d; n++) {
			var p = b[n];
			if(p !== e) {
				var q = p.measuredBounds,
					r = q.width;
				q = q.height;
				m = p.alignment;
				m.jb() && (m = a.defaultAlignment);
				m.pb() || (m = id);
				var u = p.alignmentFocus;
				u.jb() && (u = id);
				l = null;
				p instanceof Y && "" !== p.vg && (l = p.Ya(p.vg), l === p && (l = null));
				if(null !== l) {
					var v = l.naturalBounds;
					for(u = G.allocAt(u.x * v.width - u.offsetX, u.y * v.height -
							u.offsetY); l !== p;) l.transform.ta(u), l = l.panel;
					l = m.x * g + m.offsetX - u.x;
					m = m.y * f + m.offsetY - u.y;
					G.free(u)
				} else l = m.x * g + m.offsetX - (u.x * r + u.offsetX), m = m.y * f + m.offsetY - (u.y * q + u.offsetY);
				l -= c.x;
				m -= c.y;
				p.visible && p.arrange(k + l, h + m, r, q)
			}
		}
	};

	function pm() {
		this.name = "Base";
		this.name = "Auto"
	}
	na(pm, Dl);
	pm.prototype.measure = function(a, b, c, d, e, f, g) {
		var h = d.length,
			k = a.Db(),
			l = k.margin,
			m = b,
			n = c,
			p = l.right + l.left,
			q = l.top + l.bottom;
		k.measure(b, c, f, g);
		l = k.measuredBounds;
		var r = 0,
			u = null;
		k instanceof qg && (u = k, r = u.strokeWidth * u.scale);
		var v = Math.max(l.width + p, 0);
		l = Math.max(l.height + q, 0);
		var x = qm(k),
			y = x.x * v + x.offsetX;
		x = x.y * l + x.offsetY;
		var z = rm(k),
			B = z.x * v + z.offsetX;
		z = z.y * l + z.offsetY;
		isFinite(b) && (m = Math.max(Math.abs(y - B) - r, 0));
		isFinite(c) && (n = Math.max(Math.abs(x - z) - r, 0));
		r = L.alloc();
		r.h(0, 0);
		a = lm(a);
		for(z = 0; z < h; z++) x =
			d[z], x === k || !x.visible && x !== a || (l = x.margin, v = l.right + l.left, y = l.top + l.bottom, x.measure(m, n, 0, 0), l = x.measuredBounds, v = Math.max(l.width + v, 0), l = Math.max(l.height + y, 0), r.h(Math.max(v, r.width), Math.max(l, r.height)));
		if(1 === h) e.width = v, e.height = l, L.free(r);
		else {
			x = qm(k);
			z = rm(k);
			h = d = 0;
			z.x !== x.x && z.y !== x.y && (d = r.width / Math.abs(z.x - x.x), h = r.height / Math.abs(z.y - x.y));
			L.free(r);
			r = 0;
			null !== u && (r = u.strokeWidth * u.scale, eh(u) === fh && (d = h = Math.max(d, h)));
			d += Math.abs(x.offsetX) + Math.abs(z.offsetX) + r;
			h += Math.abs(x.offsetY) +
				Math.abs(z.offsetY) + r;
			u = k.stretch;
			u === Lk && (u = al(k, !1));
			switch(u) {
				case dh:
					g = f = 0;
					break;
				case ge:
					isFinite(b) && (d = b);
					isFinite(c) && (h = c);
					break;
				case Mk:
					isFinite(b) && (d = b);
					g = 0;
					break;
				case Nk:
					f = 0, isFinite(c) && (h = c)
			}
			k.Zl();
			k.measure(d, h, f, g);
			e.width = k.measuredBounds.width + p;
			e.height = k.measuredBounds.height + q
		}
	};
	pm.prototype.arrange = function(a, b) {
		var c = b.length,
			d = a.Db(),
			e = d.measuredBounds,
			f = M.alloc();
		f.h(0, 0, 1, 1);
		var g = d.margin,
			h = g.left;
		g = g.top;
		var k = a.padding,
			l = k.left;
		k = k.top;
		d.arrange(l + h, k + g, e.width, e.height);
		var m = qm(d),
			n = rm(d),
			p = m.y * e.height + m.offsetY,
			q = n.x * e.width + n.offsetX;
		n = n.y * e.height + n.offsetY;
		f.x = m.x * e.width + m.offsetX;
		f.y = p;
		Ic(f, q, n, 0, 0);
		f.x += h + l;
		f.y += g + k;
		for(e = 0; e < c; e++) h = b[e], h !== d && (l = h.measuredBounds, g = h.margin, k = Math.max(l.width + g.right + g.left, 0), m = Math.max(l.height + g.top + g.bottom, 0), p = h.alignment,
			p.jb() && (p = a.defaultAlignment), p.pb() || (p = id), k = f.width * p.x + p.offsetX - k * p.x + g.left + f.x, g = f.height * p.y + p.offsetY - m * p.y + g.top + f.y, h.visible && (Jc(f.x, f.y, f.width, f.height, k, g, l.width, l.height) ? h.arrange(k, g, l.width, l.height) : h.arrange(k, g, l.width, l.height, new M(f.x, f.y, f.width, f.height))));
		M.free(f)
	};

	function sm() {
		this.name = "Base";
		this.name = "Table"
	}
	na(sm, Dl);
	sm.prototype.measure = function(a, b, c, d, e, f, g) {
		for(var h = d.length, k = La(), l = La(), m = 0; m < h; m++) {
			var n = d[m],
				p = n instanceof Y ? n : null;
			if(null === p || p.type !== Y.TableRow && p.type !== Y.TableColumn || !n.visible) k.push(n);
			else {
				l.push(p);
				for(var q = p.W.j, r = q.length, u = 0; u < r; u++) {
					var v = q[u];
					p.type === Y.TableRow ? v.row = n.row : p.type === Y.TableColumn && (v.column = n.column);
					k.push(v)
				}
			}
		}
		h = k.length;
		0 === h && (a.Ub(0), a.Tb(0));
		for(var x = [], y = 0; y < h; y++) {
			var z = k[y];
			ej(z, !0);
			bl(z, !0);
			x[z.row] || (x[z.row] = []);
			x[z.row][z.column] || (x[z.row][z.column] = []);
			x[z.row][z.column].push(z)
		}
		Na(k);
		var B = La(),
			C = La(),
			I = La(),
			J = {
				count: 0
			},
			K = {
				count: 0
			},
			X = b,
			R = c,
			la = a.vb;
		h = la.length;
		for(var qa = 0; qa < h; qa++) {
			var O = la[qa];
			void 0 !== O && (O.actual = 0)
		}
		la = a.sb;
		h = la.length;
		for(var xa = 0; xa < h; xa++) O = la[xa], void 0 !== O && (O.actual = 0);
		for(var Pa = x.length, T = 0, ua = 0; ua < Pa; ua++) x[ua] && (T = Math.max(T, x[ua].length));
		var mb = Math.min(a.topIndex, Pa - 1),
			Rc = Math.min(a.leftIndex, T - 1),
			Fa = 0;
		Pa = x.length;
		for(var ya = lm(a), Ja = 0; Ja < Pa; Ja++)
			if(x[Ja]) {
				T = x[Ja].length;
				for(var wd = a.Ub(Ja), hc = wd.actual = 0; hc <
					T; hc++)
					if(x[Ja][hc]) {
						var gb = a.Tb(hc);
						void 0 === B[hc] && (gb.actual = 0, B[hc] = !0);
						for(var cb = x[Ja][hc], da = cb.length, fa = 0; fa < da; fa++) {
							var Ra = cb[fa];
							if(Ra.visible || Ra === ya) {
								var db = 1 < Ra.rowSpan || 1 < Ra.columnSpan;
								db && (Ja < mb || hc < Rc || C.push(Ra));
								var Za = Ra.margin,
									$c = Za.right + Za.left,
									vf = Za.top + Za.bottom;
								var Xa = tl(Ra, wd, gb, !1);
								var rc = Ra.desiredSize,
									Ag = !isNaN(rc.height),
									He = !isNaN(rc.width) && Ag;
								db || Xa === dh || He || Ja < mb || hc < Rc || (void 0 !== J[hc] || Xa !== ge && Xa !== Mk || (J[hc] = -1, J.count++), void 0 !== K[Ja] || Xa !== ge && Xa !== Nk ||
									(K[Ja] = -1, K.count++), I.push(Ra));
								Ra.measure(Infinity, Infinity, 0, 0);
								if(!(Ja < mb || hc < Rc)) {
									var Sc = Ra.measuredBounds,
										Vb = Math.max(Sc.width + $c, 0),
										ae = Math.max(Sc.height + vf, 0);
									if(1 === Ra.rowSpan && (Xa === dh || Xa === Mk)) {
										O = a.Ub(Ja);
										var be = O.vc();
										Fa = Math.max(ae - O.actual, 0);
										Fa + be > R && (Fa = Math.max(R - be, 0));
										var Bg = 0 === O.actual;
										O.actual = O.actual + Fa;
										R = Math.max(R - (Fa + (Bg ? be : 0)), 0)
									}
									if(1 === Ra.columnSpan && (Xa === dh || Xa === Nk)) {
										O = a.Tb(hc);
										var ne = O.vc();
										Fa = Math.max(Vb - O.actual, 0);
										Fa + ne > X && (Fa = Math.max(X - ne, 0));
										var bf = 0 === O.actual;
										O.actual = O.actual + Fa;
										X = Math.max(X - (Fa + (bf ? ne : 0)), 0)
									}
									db && Ra.Zl()
								}
							}
						}
					}
			}
		Na(B);
		var Wb = 0,
			Bc = 0;
		h = a.columnCount;
		for(var ic = 0; ic < h; ic++) {
			var ub = a.sb[ic];
			void 0 !== ub && (Wb += ub.la, 0 !== ub.la && (Wb += ub.vc()))
		}
		h = a.rowCount;
		for(var jc = 0; jc < h; jc++) {
			var Cc = a.vb[jc];
			void 0 !== Cc && (Bc += Cc.la, 0 !== Cc.la && (Bc += Cc.vc()))
		}
		X = Math.max(b - Wb, 0);
		var Zf = R = Math.max(c - Bc, 0),
			Ob = X;
		h = I.length;
		for(var Kc = 0; Kc < h; Kc++) {
			var nb = I[Kc],
				Cg = a.Ub(nb.row),
				Dg = a.Tb(nb.column),
				cf = nb.measuredBounds,
				Hb = nb.margin,
				Ie = Hb.right + Hb.left,
				Je = Hb.top + Hb.bottom;
			J[nb.column] = 0 === Dg.actual && void 0 !== J[nb.column] ? Math.max(cf.width + Ie, J[nb.column]) : null;
			K[nb.row] = 0 === Cg.actual && void 0 !== K[nb.row] ? Math.max(cf.height + Je, K[nb.row]) : null
		}
		var Eg = 0,
			xd = 0,
			Db;
		for(Db in K) "count" !== Db && (Eg += K[Db]);
		for(Db in J) "count" !== Db && (xd += J[Db]);
		for(var hb = L.alloc(), ad = 0; ad < h; ad++) {
			var Pb = I[ad];
			if(Pb.visible || Pb === ya) {
				var sc = a.Ub(Pb.row),
					Ua = a.Tb(Pb.column),
					bd = 0;
				isFinite(Ua.width) ? bd = Ua.width : (isFinite(X) && null !== J[Pb.column] ? 0 === xd ? bd = Ua.actual + X : bd = J[Pb.column] / xd * Ob : null !== J[Pb.column] ?
					bd = X : bd = Ua.actual || X, bd = Math.max(0, bd - Ua.vc()));
				var ld = 0;
				isFinite(sc.height) ? ld = sc.height : (isFinite(R) && null !== K[Pb.row] ? 0 === Eg ? ld = sc.actual + R : ld = K[Pb.row] / Eg * Zf : null !== K[Pb.row] ? ld = R : ld = sc.actual || R, ld = Math.max(0, ld - sc.vc()));
				hb.h(Math.max(Ua.minimum, Math.min(bd, Ua.maximum)), Math.max(sc.minimum, Math.min(ld, sc.maximum)));
				Xa = tl(Pb, sc, Ua, !1);
				switch(Xa) {
					case Mk:
						hb.height = Math.max(hb.height, sc.actual + R);
						break;
					case Nk:
						hb.width = Math.max(hb.width, Ua.actual + X)
				}
				var md = Pb.margin,
					Fg = md.right + md.left,
					wf = md.top +
					md.bottom;
				Pb.Zl();
				Pb.measure(hb.width, hb.height, Ua.minimum, sc.minimum);
				var df = Pb.measuredBounds,
					xf = Math.max(df.width + Fg, 0),
					yf = Math.max(df.height + wf, 0);
				isFinite(X) && (xf = Math.min(xf, hb.width));
				isFinite(R) && (yf = Math.min(yf, hb.height));
				var Ke = 0;
				Ke = sc.actual;
				sc.actual = Math.max(sc.actual, yf);
				Fa = sc.actual - Ke;
				R = Math.max(R - Fa, 0);
				Ke = Ua.actual;
				Ua.actual = Math.max(Ua.actual, xf);
				Fa = Ua.actual - Ke;
				X = Math.max(X - Fa, 0)
			}
		}
		Na(I);
		var Xb = L.alloc(),
			tc = La(),
			Kd = La();
		h = C.length;
		if(0 !== h)
			for(var uc = 0; uc < Pa; uc++)
				if(x[uc]) {
					T = x[uc].length;
					var Eb = a.Ub(uc);
					tc[uc] = Eb.actual;
					for(var ob = 0; ob < T; ob++)
						if(x[uc][ob]) {
							var Ld = a.Tb(ob);
							Kd[ob] = Ld.actual
						}
				}
		for(var Md = 0; Md < h; Md++) {
			var Ca = C[Md];
			if(Ca.visible || Ca === ya) {
				var kc = a.Ub(Ca.row),
					qb = a.Tb(Ca.column);
				hb.h(Math.max(qb.minimum, Math.min(b, qb.maximum)), Math.max(kc.minimum, Math.min(c, kc.maximum)));
				Xa = tl(Ca, kc, qb, !1);
				switch(Xa) {
					case ge:
						0 !== Kd[qb.index] && (hb.width = Math.min(hb.width, Kd[qb.index]));
						0 !== tc[kc.index] && (hb.height = Math.min(hb.height, tc[kc.index]));
						break;
					case Mk:
						0 !== Kd[qb.index] && (hb.width =
							Math.min(hb.width, Kd[qb.index]));
						break;
					case Nk:
						0 !== tc[kc.index] && (hb.height = Math.min(hb.height, tc[kc.index]))
				}
				isFinite(qb.width) && (hb.width = qb.width);
				isFinite(kc.height) && (hb.height = kc.height);
				Xb.h(0, 0);
				for(var Nd = 1; Nd < Ca.rowSpan && !(Ca.row + Nd >= a.rowCount); Nd++) O = a.Ub(Ca.row + Nd), Fa = 0, Fa = Xa === ge || Xa === Nk ? Math.max(O.minimum, 0 === tc[Ca.row + Nd] ? O.maximum : Math.min(tc[Ca.row + Nd], O.maximum)) : Math.max(O.minimum, isNaN(O.Rc) ? O.maximum : Math.min(O.Rc, O.maximum)), Xb.height += Fa;
				for(var oe = 1; oe < Ca.columnSpan && !(Ca.column +
						oe >= a.columnCount); oe++) O = a.Tb(Ca.column + oe), Fa = 0, Fa = Xa === ge || Xa === Mk ? Math.max(O.minimum, 0 === Kd[Ca.column + oe] ? O.maximum : Math.min(Kd[Ca.column + oe], O.maximum)) : Math.max(O.minimum, isNaN(O.Rc) ? O.maximum : Math.min(O.Rc, O.maximum)), Xb.width += Fa;
				hb.width += Xb.width;
				hb.height += Xb.height;
				var pe = Ca.margin,
					yd = pe.right + pe.left,
					Od = pe.top + pe.bottom;
				Ca.measure(hb.width, hb.height, f, g);
				for(var cd = Ca.measuredBounds, qe = Math.max(cd.width + yd, 0), Tc = Math.max(cd.height + Od, 0), kb = 0, Le = 0; Le < Ca.rowSpan && !(Ca.row + Le >= a.rowCount); Le++) O =
					a.Ub(Ca.row + Le), kb += O.total || 0;
				if(kb < Tc) {
					var vc = Tc - kb,
						$f = Tc - kb;
					if(null !== Ca.spanAllocation)
						for(var Gg = Ca.spanAllocation, Qb = 0; Qb < Ca.rowSpan && !(0 >= vc) && !(Ca.row + Qb >= a.rowCount); Qb++) {
							O = a.Ub(Ca.row + Qb);
							var Me = O.la || 0,
								Gh = Gg(Ca, O, $f);
							O.actual = Math.min(O.maximum, Me + Gh);
							O.la !== Me && (vc -= O.la - Me)
						}
					for(; 0 < vc;) {
						var ef = O.la || 0;
						isNaN(O.height) && O.maximum > ef && (O.actual = Math.min(O.maximum, ef + vc), O.la !== ef && (vc -= O.la - ef));
						if(0 === O.index) break;
						O = a.Ub(O.index - 1)
					}
				}
				for(var Ne = 0, Hg = 0; Hg < Ca.columnSpan && !(Ca.column + Hg >=
						a.columnCount); Hg++) O = a.Tb(Ca.column + Hg), Ne += O.total || 0;
				if(Ne < qe) {
					var zf = qe - Ne,
						ak = qe - Ne;
					if(null !== Ca.spanAllocation)
						for(var bk = Ca.spanAllocation, ag = 0; ag < Ca.columnSpan && !(0 >= zf) && !(Ca.column + ag >= a.columnCount); ag++) {
							O = a.Tb(Ca.column + ag);
							var ce = O.la || 0,
								bg = bk(Ca, O, ak);
							O.actual = Math.min(O.maximum, ce + bg);
							O.la !== ce && (zf -= O.la - ce)
						}
					for(; 0 < zf;) {
						var Ig = O.la || 0;
						isNaN(O.width) && O.maximum > Ig && (O.actual = Math.min(O.maximum, Ig + zf), O.la !== Ig && (zf -= O.la - Ig));
						if(0 === O.index) break;
						O = a.Tb(O.index - 1)
					}
				}
			}
		}
		Na(C);
		L.free(Xb);
		L.free(hb);
		void 0 !== tc && Na(tc);
		void 0 !== Kd && Na(Kd);
		var Jg = 0,
			Kg = 0,
			ck = a.desiredSize,
			Tq = a.maxSize;
		Xa = al(a, !0);
		var Fi = Bc = Wb = 0,
			Gi = 0;
		h = a.columnCount;
		for(var dk = 0; dk < h; dk++) void 0 !== a.sb[dk] && (O = a.Tb(dk), isFinite(O.width) ? (Fi += O.width, Fi += O.vc()) : tm(O) === um ? (Fi += O.la, Fi += O.vc()) : 0 !== O.la && (Wb += O.la, Wb += O.vc()));
		isFinite(ck.width) ? Jg = Math.min(ck.width, Tq.width) : Jg = Xa !== dh && isFinite(b) ? b : Wb;
		Jg = Math.max(Jg, a.minSize.width);
		Jg = Math.max(Jg - Fi, 0);
		var kn = Math.max(Jg / Wb, 1);
		isFinite(kn) || (kn = 1);
		for(var fk = 0; fk < h; fk++) void 0 !==
			a.sb[fk] && (O = a.Tb(fk), isFinite(O.width) || tm(O) === um || (O.actual = O.la * kn), O.position = e.width, 0 !== O.la && (e.width += O.la, e.width += O.vc()));
		h = a.rowCount;
		for(var gk = 0; gk < h; gk++) void 0 !== a.vb[gk] && (O = a.Ub(gk), isFinite(O.height) ? (Gi += O.height, Gi += O.vc()) : tm(O) === um ? (Gi += O.la, Gi += O.vc()) : 0 !== O.la && (Bc += O.la, 0 !== O.la && (Bc += O.vc())));
		isFinite(ck.height) ? Kg = Math.min(ck.height, Tq.height) : Kg = Xa !== dh && isFinite(c) ? c : Bc;
		Kg = Math.max(Kg, a.minSize.height);
		Kg = Math.max(Kg - Gi, 0);
		var ln = Math.max(Kg / Bc, 1);
		isFinite(ln) || (ln =
			1);
		for(var hk = 0; hk < h; hk++) void 0 !== a.vb[hk] && (O = a.Ub(hk), isFinite(O.height) || tm(O) === um || (O.actual = O.la * ln), O.position = e.height, 0 !== O.la && (e.height += O.la, 0 !== O.la && (e.height += O.vc())));
		h = l.length;
		for(var mn = 0; mn < h; mn++) {
			var Pd = l[mn],
				nn = 0,
				on = 0;
			Pd.type === Y.TableRow ? (nn = e.width, O = a.Ub(Pd.row), on = O.actual) : (O = a.Tb(Pd.column), nn = O.actual, on = e.height);
			Pd.measuredBounds.h(0, 0, nn, on);
			ej(Pd, !1);
			x[Pd.row] || (x[Pd.row] = []);
			x[Pd.row][Pd.column] || (x[Pd.row][Pd.column] = []);
			x[Pd.row][Pd.column].push(Pd)
		}
		Na(l);
		a.Xo =
			x
	};
	sm.prototype.arrange = function(a, b, c) {
		var d = b.length,
			e = a.padding,
			f = e.left;
		e = e.top;
		for(var g = a.Xo, h, k, l = g.length, m = 0, n = 0; n < l; n++) g[n] && (m = Math.max(m, g[n].length));
		for(n = Math.min(a.topIndex, l - 1); n !== l && (void 0 === a.vb[n] || 0 === a.vb[n].la);) n++;
		n = Math.min(n, l - 1);
		n = -a.vb[n].position;
		for(h = Math.min(a.leftIndex, m - 1); h !== m && (void 0 === a.sb[h] || 0 === a.sb[h].la);) h++;
		h = Math.min(h, m - 1);
		for(var p = -a.sb[h].position, q = L.alloc(), r = 0; r < l; r++)
			if(g[r]) {
				m = g[r].length;
				var u = a.Ub(r);
				k = u.position + n + e;
				0 !== u.la && (k += u.Eu());
				for(var v =
						0; v < m; v++)
					if(g[r][v]) {
						var x = a.Tb(v);
						h = x.position + p + f;
						0 !== x.la && (h += x.Eu());
						for(var y = g[r][v], z = y.length, B = 0; B < z; B++) {
							var C = y[B],
								I = C.measuredBounds,
								J = C instanceof Y ? C : null;
							if(null === J || J.type !== Y.TableRow && J.type !== Y.TableColumn) {
								q.h(0, 0);
								for(var K = 1; K < C.rowSpan && !(r + K >= a.rowCount); K++) J = a.Ub(r + K), q.height += J.total;
								for(K = 1; K < C.columnSpan && !(v + K >= a.columnCount); K++) J = a.Tb(v + K), q.width += J.total;
								var X = x.la + q.width,
									R = u.la + q.height;
								K = h;
								J = k;
								var la = X,
									qa = R,
									O = h,
									xa = k,
									Pa = X,
									T = R;
								h + X > c.width && (Pa = Math.max(c.width -
									h, 0));
								k + R > c.height && (T = Math.max(c.height - k, 0));
								var ua = C.alignment;
								if(ua.jb()) {
									ua = a.defaultAlignment;
									ua.pb() || (ua = id);
									var mb = ua.x;
									var Rc = ua.y;
									var Fa = ua.offsetX;
									ua = ua.offsetY;
									var ya = x.alignment,
										Ja = u.alignment;
									ya.pb() && (mb = ya.x, Fa = ya.offsetX);
									Ja.pb() && (Rc = Ja.y, ua = Ja.offsetY)
								} else mb = ua.x, Rc = ua.y, Fa = ua.offsetX, ua = ua.offsetY;
								if(isNaN(mb) || isNaN(Rc)) Rc = mb = .5, ua = Fa = 0;
								ya = I.width;
								Ja = I.height;
								var wd = C.margin,
									hc = wd.left + wd.right,
									gb = wd.top + wd.bottom,
									cb = tl(C, u, x, !1);
								!isNaN(C.desiredSize.width) || cb !== ge && cb !==
									Mk || (ya = Math.max(X - hc, 0));
								!isNaN(C.desiredSize.height) || cb !== ge && cb !== Nk || (Ja = Math.max(R - gb, 0));
								X = C.maxSize;
								R = C.minSize;
								ya = Math.min(X.width, ya);
								Ja = Math.min(X.height, Ja);
								ya = Math.max(R.width, ya);
								Ja = Math.max(R.height, Ja);
								X = Ja + gb;
								K += la * mb - (ya + hc) * mb + Fa + wd.left;
								J += qa * Rc - X * Rc + ua + wd.top;
								C.visible && (Jc(O, xa, Pa, T, K, J, I.width, I.height) ? C.arrange(K, J, ya, Ja) : C.arrange(K, J, ya, Ja, new M(O, xa, Pa, T)))
							} else C.Yk(), C.actualBounds.ha(), la = C.actualBounds, K = M.allocAt(la.x, la.y, la.width, la.height), la.x = J.type === Y.TableRow ?
								f : h, la.y = J.type === Y.TableColumn ? e : k, la.width = I.width, la.height = I.height, C.actualBounds.freeze(), bl(C, !1), Ec(K, la) || (I = C.part, null !== I && (I.uh(), C.vo(I))), M.free(K)
						}
					}
			}
		L.free(q);
		for(a = 0; a < d; a++) c = b[a], f = c instanceof Y ? c : null, null === f || f.type !== Y.TableRow && f.type !== Y.TableColumn || (f = c.actualBounds, c.naturalBounds.ha(), c.naturalBounds.h(0, 0, f.width, f.height), c.naturalBounds.freeze())
	};

	function vm() {
		this.name = "Base";
		this.name = "TableRow"
	}
	na(vm, Dl);
	vm.prototype.measure = function() {};
	vm.prototype.arrange = function() {};

	function wm() {
		this.name = "Base";
		this.name = "TableColumn"
	}
	na(wm, Dl);
	wm.prototype.measure = function() {};
	wm.prototype.arrange = function() {};

	function xm() {
		this.name = "Base";
		this.name = "Viewbox"
	}
	na(xm, Dl);
	xm.prototype.measure = function(a, b, c, d, e, f, g) {
		1 < d.length && A("Viewbox Panel cannot contain more than one GraphObject.");
		d = d[0];
		d.Ca = 1;
		d.Zl();
		d.measure(Infinity, Infinity, f, g);
		var h = d.measuredBounds,
			k = d.margin,
			l = k.right + k.left;
		k = k.top + k.bottom;
		if(isFinite(b) || isFinite(c)) {
			var m = d.scale,
				n = h.width;
			h = h.height;
			var p = Math.max(b - l, 0),
				q = Math.max(c - k, 0),
				r = 1;
			a.viewboxStretch === fh ? 0 !== n && 0 !== h && (r = Math.min(p / n, q / h)) : 0 !== n && 0 !== h && (r = Math.max(p / n, q / h));
			0 === r && (r = 1E-4);
			d.Ca *= r;
			m !== d.scale && (ej(d, !0), d.measure(Infinity,
				Infinity, f, g))
		}
		h = d.measuredBounds;
		e.width = isFinite(b) ? b : Math.max(h.width + l, 0);
		e.height = isFinite(c) ? c : Math.max(h.height + k, 0)
	};
	xm.prototype.arrange = function(a, b, c) {
		b = b[0];
		var d = b.measuredBounds,
			e = b.margin,
			f = Math.max(d.width + (e.right + e.left), 0);
		e = Math.max(d.height + (e.top + e.bottom), 0);
		var g = b.alignment;
		g.jb() && (g = a.defaultAlignment);
		g.pb() || (g = id);
		b.arrange(c.width * g.x - f * g.x + g.offsetX, c.height * g.y - e * g.y + g.offsetY, d.width, d.height)
	};

	function ym() {
		this.name = "Base";
		this.name = "Grid"
	}
	na(ym, Dl);
	ym.prototype.measure = function() {};
	ym.prototype.arrange = function() {};

	function zm() {
		this.name = "Base";
		this.name = "Link"
	}
	na(zm, Dl);
	zm.prototype.measure = function(a, b, c, d, e) {
		c = d.length;
		if(a instanceof pf || a instanceof S) {
			var f = null,
				g = null,
				h = null;
			a instanceof S && (g = f = a);
			a instanceof pf && (h = a, f = h.adornedPart);
			if(f instanceof S) {
				var k = f;
				if(0 === c) zc(a.naturalBounds, 0, 0), a.measuredBounds.h(0, 0, 0, 0);
				else {
					var l = a instanceof pf ? null : f.path,
						m = f.routeBounds;
					b = a.hg;
					b.h(0, 0, m.width, m.height);
					var n = k.points;
					f = f.pointsCount;
					null !== h ? h.ak(!1) : null !== g && g.ak(!1);
					var p = m.width,
						q = m.height;
					a.location.h(m.x, m.y);
					a.l.length = 0;
					null !== l && (Am(a, p, q, l),
						h = l.measuredBounds, b.Wc(h), a.l.push(h));
					h = Yc.alloc();
					for(var r = G.alloc(), u = G.alloc(), v = 0; v < c; v++) {
						var x = d[v];
						if(x !== l)
							if(x.isPanelMain && x instanceof qg) {
								Am(a, p, q, x);
								var y = x.measuredBounds;
								b.Wc(y);
								a.l.push(y)
							} else if(2 > f) x.measure(Infinity, Infinity, 0, 0), y = x.measuredBounds, b.Wc(y), a.l.push(y);
						else {
							var z = x.segmentIndex;
							y = x.segmentFraction;
							var B = x.alignmentFocus;
							B.mc() && (B = id);
							var C = x.segmentOrientation,
								I = x.segmentOffset;
							if(z < -f || z >= f) {
								y = k.midPoint;
								var J = k.midAngle;
								if(C !== Tg) {
									var K = k.computeAngle(x, C,
										J);
									x.Bc = K
								}
								K = y.x - m.x;
								var X = y.y - m.y
							} else {
								K = 0;
								if(0 <= z) {
									X = n.N(z);
									var R = z < f - 1 ? n.N(z + 1) : X
								} else K = f + z, X = n.N(K), R = 0 < K ? n.N(K - 1) : X;
								if(X.Oa(R)) {
									0 <= z ? (J = 0 < z ? n.N(z - 1) : X, K = z < f - 2 ? n.N(z + 2) : R) : (J = K < f - 1 ? n.N(K + 1) : X, K = 1 < K ? n.N(K - 2) : R);
									var la = J.Be(X),
										qa = R.Be(K);
									J = la > qa + 10 ? 0 <= z ? J.Na(X) : X.Na(J) : qa > la + 10 ? 0 <= z ? R.Na(K) : K.Na(R) : 0 <= z ? J.Na(K) : K.Na(J)
								} else J = 0 <= z ? X.Na(R) : R.Na(X);
								C !== Tg && (K = k.computeAngle(x, C, J), x.Bc = K);
								K = X.x + (R.x - X.x) * y - m.x;
								X = X.y + (R.y - X.y) * y - m.y
							}
							x.measure(Infinity, Infinity, 0, 0);
							y = x.measuredBounds;
							qa = x.naturalBounds;
							la = 0;
							x instanceof qg && (la = x.strokeWidth);
							R = qa.width + la;
							qa = qa.height + la;
							h.reset();
							h.translate(-y.x, -y.y);
							h.scale(x.scale, x.scale);
							h.rotate(C === Tg ? x.angle : J, R / 2, qa / 2);
							C !== Bm && C !== Cm || h.rotate(90, R / 2, qa / 2);
							C !== Dm && C !== Em || h.rotate(-90, R / 2, qa / 2);
							C === Fm && (45 < J && 135 > J || 225 < J && 315 > J) && h.rotate(-J, R / 2, qa / 2);
							C = new M(0, 0, R, qa);
							r.Li(C, B);
							h.ta(r);
							B = -r.x + la / 2 * x.scale;
							x = -r.y + la / 2 * x.scale;
							u.assign(I);
							isNaN(u.x) && (u.x = 0 <= z ? R / 2 + 3 : -(R / 2 + 3));
							isNaN(u.y) && (u.y = -(qa / 2 + 3));
							u.rotate(J);
							K += u.x;
							X += u.y;
							C.set(y);
							C.h(K + B, X + x,
								y.width, y.height);
							a.l.push(C);
							b.Wc(C)
						}
					}
					if(null !== g)
						for(d = g.labelNodes; d.next();) d.value.measure(Infinity, Infinity);
					a.hg = b;
					a = a.location;
					a.h(a.x + b.x, a.y + b.y);
					zc(e, b.width || 0, b.height || 0);
					Yc.free(h);
					G.free(r);
					G.free(u)
				}
			}
		}
	};
	zm.prototype.arrange = function(a, b) {
		var c = b.length;
		if(a instanceof pf || a instanceof S) {
			var d = null,
				e = null,
				f = null;
			a instanceof S && (e = d = a);
			a instanceof pf && (f = a, d = f.adornedPart);
			var g = a instanceof pf ? null : d.path;
			if(0 !== a.l.length) {
				var h = a.l,
					k = 0;
				if(null !== g && k < a.l.length) {
					var l = h[k];
					k++;
					g.arrange(l.x - a.hg.x, l.y - a.hg.y, l.width, l.height)
				}
				for(l = 0; l < c; l++) {
					var m = b[l];
					if(m !== g && k < a.l.length) {
						var n = h[k];
						k++;
						m.arrange(n.x - a.hg.x, n.y - a.hg.y, n.width, n.height)
					}
				}
			}
			b = d.points;
			c = b.count;
			if(2 <= c && a instanceof S)
				for(d =
					a.labelNodes; d.next();) {
					n = a;
					g = d.value;
					h = g.segmentIndex;
					var p = g.segmentFraction;
					l = g.alignmentFocus;
					var q = g.segmentOrientation;
					k = g.segmentOffset;
					if(h < -c || h >= c) {
						var r = n.midPoint;
						m = n.midAngle;
						q !== Tg && (n = n.computeAngle(g, q, m), g.angle = n);
						n = r.x;
						var u = r.y
					} else {
						var v = 0;
						0 <= h ? (u = b.j[h], r = h < c - 1 ? b.j[h + 1] : u) : (v = c + h, u = b.j[v], r = 0 < v ? b.j[v - 1] : u);
						if(u.Oa(r)) {
							0 <= h ? (m = 0 < h ? b.j[h - 1] : u, v = h < c - 2 ? b.j[h + 2] : r) : (m = v < c - 1 ? b.j[v + 1] : u, v = 1 < v ? b.j[v - 2] : r);
							var x = m.Be(u),
								y = r.Be(v);
							m = x > y + 10 ? 0 <= h ? m.Na(u) : u.Na(m) : y > x + 10 ? 0 <= h ? r.Na(v) : v.Na(r) :
								0 <= h ? m.Na(v) : v.Na(m)
						} else m = 0 <= h ? u.Na(r) : r.Na(u);
						q !== Tg && (n = n.computeAngle(g, q, m), g.angle = n);
						n = u.x + (r.x - u.x) * p;
						u = u.y + (r.y - u.y) * p
					}
					l.A(dd) ? g.location = new G(n, u) : (l.mc() && (l = id), r = Yc.alloc(), r.reset(), r.scale(g.scale, g.scale), r.rotate(g.angle, 0, 0), p = g.naturalBounds, p = M.allocAt(0, 0, p.width, p.height), q = G.alloc(), q.Li(p, l), r.ta(q), l = -q.x, v = -q.y, k = k.copy(), isNaN(k.x) && (0 <= h ? k.x = q.x + 3 : k.x = -(q.x + 3)), isNaN(k.y) && (k.y = -(q.y + 3)), k.rotate(m), n += k.x, u += k.y, r.Rv(p), l += p.x, v += p.y, h = G.allocAt(n + l, u + v), g.move(h), G.free(h),
						G.free(q), M.free(p), Yc.free(r))
				}
			null !== f ? f.ak(!1) : null !== e && e.ak(!1)
		}
	};

	function Am(a, b, c, d) {
		if(!1 !== jj(d)) {
			var e = d.strokeWidth;
			0 === e && a instanceof pf && a.type === Y.Link && a.adornedObject instanceof qg && (e = a.adornedObject.strokeWidth);
			e *= d.Ca;
			a instanceof S && null !== a.pa ? (a = a.pa.bounds, Yk(d, a.x - e / 2, a.y - e / 2, a.width + e, a.height + e)) : a instanceof pf && null !== a.adornedPart.pa ? (a = a.adornedPart.pa.bounds, Yk(d, a.x - e / 2, a.y - e / 2, a.width + e, a.height + e)) : Yk(d, -(e / 2), -(e / 2), b + e, c + e);
			ej(d, !1)
		}
	}

	function Gm() {
		this.name = "Base";
		this.name = "Graduated"
	}
	na(Gm, Dl);
	Gm.prototype.measure = function(a, b, c, d, e, f, g) {
		var h = a.Db();
		a.aj = [];
		var k = h.margin,
			l = k.right + k.left,
			m = k.top + k.bottom;
		h.measure(b, c, f, g);
		var n = h.measuredBounds,
			p = new M(-k.left, -k.top, Math.max(n.width + l, 0), Math.max(n.height + m, 0));
		a.aj.push(p);
		e.assign(p);
		for(var q = h.geometry, r = h.strokeWidth, u = q.flattenedSegments, v = q.flattenedLengths, x = q.flattenedTotalLength, y = u.length, z = 0, B = 0, C = La(), I = 0; I < y; I++) {
			var J = u[I],
				K = [];
			B = z = 0;
			for(var X = J.length, R = 0; R < X; R += 2) {
				var la = J[R],
					qa = J[R + 1];
				if(0 !== R) {
					var O = 180 * Math.atan2(qa -
						B, la - z) / Math.PI;
					0 > O && (O += 360);
					K.push(O)
				}
				z = la;
				B = qa
			}
			C.push(K)
		}
		if(null === a.Jg) {
			for(var xa = [], Pa = a.W.j, T = Pa.length, ua = 0; ua < T; ua++) {
				var mb = Pa[ua],
					Rc = [];
				xa.push(Rc);
				if(mb.visible)
					for(var Fa = mb.interval, ya = 0; ya < T; ya++) {
						var Ja = Pa[ya];
						if(Ja.visible && mb !== Ja && !(mb instanceof qg && !(Ja instanceof qg) || mb instanceof wh && !(Ja instanceof wh))) {
							var wd = Ja.interval;
							wd > Fa && Rc.push(wd)
						}
					}
			}
			a.Jg = xa
		}
		var hc = a.Jg;
		var gb = a.W.j,
			cb = gb.length,
			da = 0,
			fa = 0,
			Ra = x;
		a.cj = [];
		for(var db = [], Za = 0; Za < cb; Za++) {
			var $c = gb[Za];
			db = [];
			if($c.visible &&
				$c !== h) {
				var vf = $c.interval,
					Xa = a.graduatedTickUnit;
				if(!(2 > Xa * vf * x / a.graduatedRange)) {
					var rc = a.graduatedTickBase,
						Ag = hc[Za],
						He = v[0][0],
						Sc = 0,
						Vb = 0;
					fa = x * $c.graduatedStart - 1E-4;
					Ra = x * $c.graduatedEnd + 1E-4;
					var ae = Xa * vf;
					if(rc < a.graduatedMin) {
						var be = (a.graduatedMin - rc) / ae;
						be = 0 === be % 1 ? be : Math.floor(be + 1);
						rc += be * ae
					} else rc > a.graduatedMin + ae && (rc -= Math.floor((rc - a.graduatedMin) / ae) * ae);
					for(; rc <= a.graduatedMax;) {
						a: {
							for(var Bg = Ag.length, ne = 0; ne < Bg; ne++)
								if(H.ba((rc - a.graduatedTickBase) % (Ag[ne] * a.graduatedTickUnit),
										0)) {
									var bf = !1;
									break a
								}
							bf = !0
						}
						if(bf && (null === $c.graduatedSkip || !$c.graduatedSkip(rc)) && (da = (rc - a.graduatedMin) * x / a.graduatedRange, da > x && (da = x), fa <= da && da <= Ra)) {
							for(var Wb = C[Sc][Vb], Bc = v[Sc][Vb]; Sc < v.length;) {
								for(; da > He && Vb < v[Sc].length - 1;) Vb++, Wb = C[Sc][Vb], Bc = v[Sc][Vb], He += Bc;
								if(da <= He) break;
								Sc++;
								Vb = 0;
								Wb = C[Sc][Vb];
								Bc = v[Sc][Vb];
								He += Bc
							}
							var ic = u[Sc],
								ub = ic[2 * Vb],
								jc = ic[2 * Vb + 1],
								Cc = (da - (He - Bc)) / Bc,
								Zf = new G(ub + (ic[2 * Vb + 2] - ub) * Cc + r / 2 - q.bounds.x, jc + (ic[2 * Vb + 3] - jc) * Cc + r / 2 - q.bounds.y);
							Zf.scale(h.scale, h.scale);
							var Ob = Wb,
								Kc = C[Sc];
							1E-4 > Cc ? 0 < Vb ? Ob = Kc[Vb - 1] : H.ba(ic[0], ic[ic.length - 2]) && H.ba(ic[1], ic[ic.length - 1]) && (Ob = Kc[Kc.length - 1]) : .9999 < Cc && (Vb + 1 < Kc.length ? Ob = Kc[Vb + 1] : H.ba(ic[0], ic[ic.length - 2]) && H.ba(ic[1], ic[ic.length - 1]) && (Ob = Kc[0]));
							Wb !== Ob && (180 < Math.abs(Wb - Ob) && (Wb < Ob ? Wb += 360 : Ob += 360), Wb = (Wb + Ob) / 2 % 360);
							if($c instanceof wh) {
								var nb = "";
								null !== $c.graduatedFunction ? (nb = $c.graduatedFunction(rc), null !== nb && void 0 !== nb ? nb = nb.toString() : nb = "") : nb = (+rc.toFixed(2)).toString();
								"" !== nb && db.push([Zf, Wb, nb])
							} else db.push([Zf,
								Wb
							])
						}
						rc += ae
					}
				}
			}
			a.cj.push(db)
		}
		Na(C);
		for(var Cg = a.cj, Dg = d.length, cf = 0; cf < Dg; cf++) {
			var Hb = d[cf],
				Ie = Cg[cf];
			if(Hb.visible && Hb !== h && 0 !== Ie.length) {
				if(Hb instanceof qg) {
					var Je = a,
						Eg = e,
						xd = Hb.alignmentFocus;
					xd.mc() && (xd = fd);
					var Db = Hb.angle;
					Hb.Bc = 0;
					Hb.measure(Infinity, Infinity, 0, 0);
					Hb.Bc = Db;
					var hb = Hb.measuredBounds,
						ad = hb.width,
						Pb = hb.height,
						sc = M.allocAt(0, 0, ad, Pb),
						Ua = G.alloc();
					Ua.Li(sc, xd);
					M.free(sc);
					for(var bd = -Ua.x, ld = -Ua.y, md = new M, Fg = Ie.length, wf = 0; wf < Fg; wf++)
						for(var df = Ie[wf], xf = df[0].x, yf = df[0].y, Ke = df[1],
								Xb = 0; 4 > Xb; Xb++) {
							switch(Xb) {
								case 0:
									Ua.h(bd, ld);
									break;
								case 1:
									Ua.h(bd + ad, ld);
									break;
								case 2:
									Ua.h(bd, ld + Pb);
									break;
								case 3:
									Ua.h(bd + ad, ld + Pb)
							}
							Ua.rotate(Ke + Hb.angle);
							Ua.offset(xf, yf);
							0 === wf && 0 === Xb ? md.h(Ua.x, Ua.y, 0, 0) : md.Je(Ua);
							Ua.offset(-xf, -yf);
							Ua.rotate(-Ke - Hb.angle)
						}
					G.free(Ua);
					Je.aj.push(md);
					Ic(Eg, md.x, md.y, md.width, md.height)
				} else if(Hb instanceof wh) {
					var tc = a,
						Kd = e;
					null === tc.dh && (tc.dh = new wh);
					var uc = tc.dh;
					Hm(uc, Hb);
					var Eb = Hb.alignmentFocus;
					Eb.mc() && (Eb = fd);
					for(var ob = Hb.segmentOrientation, Ld = Hb.segmentOffset,
							Md = null, Ca = 0, kc = 0, qb = 0, Nd = 0, oe = Ie.length, pe = 0; pe < oe; pe++) {
						var yd = Ie[pe];
						Ca = yd[0].x;
						kc = yd[0].y;
						qb = yd[1];
						ob !== Tg && (Nd = S.computeAngle(ob, qb), uc.Bc = Nd);
						uc.text = yd[2];
						uc.measure(Infinity, Infinity, 0, 0);
						var Od = uc.measuredBounds,
							cd = uc.naturalBounds,
							qe = cd.width,
							Tc = cd.height,
							kb = Yc.alloc();
						kb.reset();
						kb.translate(-Od.x, -Od.y);
						kb.scale(uc.scale, uc.scale);
						kb.rotate(ob === Tg ? uc.angle : qb, qe / 2, Tc / 2);
						ob !== Bm && ob !== Cm || kb.rotate(90, qe / 2, Tc / 2);
						ob !== Dm && ob !== Em || kb.rotate(-90, qe / 2, Tc / 2);
						ob === Fm && (45 < qb && 135 > qb || 225 < qb &&
							315 > qb) && kb.rotate(-qb, qe / 2, Tc / 2);
						var Le = M.allocAt(0, 0, qe, Tc),
							vc = G.alloc();
						vc.Li(Le, Eb);
						kb.ta(vc);
						var $f = -vc.x,
							Gg = -vc.y,
							Qb = G.alloc();
						Qb.assign(Ld);
						isNaN(Qb.x) && (Qb.x = qe / 2 + 3);
						isNaN(Qb.y) && (Qb.y = -(Tc / 2 + 3));
						Qb.rotate(qb);
						Ca += Qb.x + $f;
						kc += Qb.y + Gg;
						var Me = new M(Ca, kc, Od.width, Od.height),
							Gh = new M(Od.x, Od.y, Od.width, Od.height),
							ef = new M(cd.x, cd.y, cd.width, cd.height),
							Ne = new Im;
						Ne.Ql(uc.metrics);
						yd.push(Nd);
						yd.push(uc.lineCount);
						yd.push(Ne);
						yd.push(Me);
						yd.push(Gh);
						yd.push(ef);
						0 === pe ? Md = Me.copy() : Md.Wc(Me);
						G.free(Qb);
						G.free(vc);
						M.free(Le);
						Yc.free(kb)
					}
					tc.aj.push(Md);
					Ic(Kd, Md.x, Md.y, Md.width, Md.height)
				}
				ej(Hb, !1)
			}
		}
	};
	Gm.prototype.arrange = function(a, b, c) {
		if(null !== a.aj) {
			var d = a.Db(),
				e = a.cj,
				f = a.aj,
				g = 0,
				h = f[g];
			g++;
			d.arrange(h.x - c.x, h.y - c.y, h.width, h.height);
			for(var k = b.length, l = 0; l < k; l++) {
				var m = b[l];
				h = e[l];
				m.visible && m !== d && 0 !== h.length && (h = f[g], g++, m.arrange(h.x - c.x, h.y - c.y, h.width, h.height))
			}
			a.aj = null
		}
	};

	function Y(a) {
		P.call(this);
		this.va = void 0 === a ? Y.Position : a;
		null === this.va && A("Panel type not specified or PanelLayout not loaded: " + a);
		this.W = new E;
		this.hb = Wc;
		this.va === Y.Grid && (this.isAtomic = !0);
		this.dn = Hd;
		this.Df = Lk;
		this.va === Y.Table && Jm(this);
		this.zp = fh;
		this.Dn = oc;
		this.En = bc;
		this.An = 0;
		this.zn = 100;
		this.Cn = 10;
		this.Bn = 0;
		this.Mh = this.lb = this.Jg = this.aj = this.cj = null;
		this.Rn = NaN;
		this.Hd = this.Ng = null;
		this.Zk = "category";
		this.Gd = null;
		this.hg = new M(NaN, NaN, NaN, NaN);
		this.dh = this.Xo = this.pi = null;
		this.vg = ""
	}
	na(Y, P);

	function Jm(a) {
		a.Wi = Wc;
		a.Dg = 1;
		a.Rh = null;
		a.Qh = null;
		a.Cg = 1;
		a.Bg = null;
		a.Ph = null;
		a.vb = [];
		a.sb = [];
		a.zj = Km;
		a.Ui = Km;
		a.ti = 0;
		a.di = 0
	}
	Y.prototype.cloneProtected = function(a) {
		P.prototype.cloneProtected.call(this, a);
		a.va = this.va;
		a.hb = this.hb.I();
		a.dn = this.dn.I();
		a.Df = this.Df;
		if(a.va === Y.Table) {
			a.Wi = this.Wi.I();
			a.Dg = this.Dg;
			a.Rh = this.Rh;
			a.Qh = this.Qh;
			a.Cg = this.Cg;
			a.Bg = this.Bg;
			a.Ph = this.Ph;
			var b = [];
			if(0 < this.vb.length)
				for(var c = this.vb, d = c.length, e = 0; e < d; e++)
					if(void 0 !== c[e]) {
						var f = c[e].copy();
						f.Ki(a);
						b[e] = f
					}
			a.vb = b;
			b = [];
			if(0 < this.sb.length)
				for(c = this.sb, d = c.length, e = 0; e < d; e++) void 0 !== c[e] && (f = c[e].copy(), f.Ki(a), b[e] = f);
			a.sb = b;
			a.zj =
				this.zj;
			a.Ui = this.Ui;
			a.ti = this.ti;
			a.di = this.di
		}
		a.zp = this.zp;
		a.Dn = this.Dn.I();
		a.En = this.En.I();
		a.An = this.An;
		a.zn = this.zn;
		a.Cn = this.Cn;
		a.Bn = this.Bn;
		a.cj = this.cj;
		a.Jg = this.Jg;
		a.lb = this.lb;
		a.Mh = this.Mh;
		a.Rn = this.Rn;
		a.Ng = this.Ng;
		a.Hd = this.Hd;
		a.Zk = this.Zk;
		a.hg.assign(this.hg);
		a.vg = this.vg;
		null !== this.Xo && (a.Xo = this.Xo)
	};
	Y.prototype.lf = function(a) {
		P.prototype.lf.call(this, a);
		a.W = this.W;
		for(var b = a.W.j, c = b.length, d = 0; d < c; d++) b[d].ag = a;
		a.pi = null
	};
	Y.prototype.copy = function() {
		var a = P.prototype.copy.call(this);
		if(null !== a) {
			for(var b = this.W.j, c = b.length, d = 0; d < c; d++) {
				var e = b[d].copy();
				e.Ki(a);
				e.uj = null;
				var f = a.W,
					g = f.count;
				f.Nb(g, e);
				f = a.part;
				if(null !== f) {
					f.pj = null;
					null !== e.portId && f instanceof W && (f.th = !0);
					var h = a.diagram;
					null !== h && h.undoManager.isUndoingRedoing || f.cb(af, "elements", a, null, e, null, g)
				}
			}
			return a
		}
		return null
	};
	t = Y.prototype;
	t.toString = function() {
		return "Panel(" + this.type + ")#" + Bb(this)
	};
	t.vo = function(a) {
		P.prototype.vo.call(this, a);
		for(var b = this.W.j, c = b.length, d = 0; d < c; d++) b[d].vo(a)
	};
	t.xi = function(a, b) {
		if(this.va === Y.Grid) {
			b = this.mf() * b.scale;
			0 >= b && (b = 1);
			var c = this.gridCellSize,
				d = c.width;
			c = c.height;
			var e = this.naturalBounds,
				f = this.actualBounds,
				g = e.width,
				h = e.height,
				k = Math.ceil(g / d),
				l = Math.ceil(h / c),
				m = this.gridOrigin;
			a.save();
			a.beginPath();
			a.rect(0, 0, g, h);
			a.clip();
			for(var n = [], p = this.W.j, q = p.length, r = 0; r < q; r++) {
				var u = p[r],
					v = [];
				n.push(v);
				if(u.visible) {
					u = Mj(u.figure);
					for(var x = r + 1; x < q; x++) {
						var y = p[x];
						y.visible && Mj(y.figure) === u && (y = y.interval, 2 <= y && v.push(y))
					}
				}
			}
			p = this.W.j;
			q = p.length;
			for(r = 0; r < q; r++) {
				var z = p[r];
				if(z.visible && (v = z.interval, !(2 > d * v * b))) {
					u = z.opacity;
					x = 1;
					if(1 !== u) {
						if(0 === u) continue;
						x = a.globalAlpha;
						a.globalAlpha = x * u
					}
					y = n[r];
					var B = !1,
						C = z.strokeDashArray;
					null !== C && (B = !0, a.Ms(C, z.strokeDashOffset));
					if("LineV" === z.figure && null !== z.stroke) {
						a.lineWidth = z.strokeWidth;
						ii(this, a, z.stroke, !1, !1, e, f);
						a.beginPath();
						for(C = z = Math.floor(-m.x / d); C <= z + k; C++) {
							var I = C * d + m.x;
							0 <= I && I <= g && Lm(C, v, y) && (a.moveTo(I, 0), a.lineTo(I, h))
						}
						a.stroke()
					} else if("LineH" === z.figure && null !== z.stroke) {
						a.lineWidth =
							z.strokeWidth;
						ii(this, a, z.stroke, !1, !1, e, f);
						a.beginPath();
						for(C = z = Math.floor(-m.y / c); C <= z + l; C++) I = C * c + m.y, 0 <= I && I <= h && Lm(C, v, y) && (a.moveTo(0, I), a.lineTo(g, I));
						a.stroke()
					} else if("BarV" === z.figure && null !== z.fill)
						for(ii(this, a, z.fill, !0, !1, e, f), z = z.width, isNaN(z) && (z = d), I = C = Math.floor(-m.x / d); I <= C + k; I++) {
							var J = I * d + m.x;
							0 <= J && J <= g && Lm(I, v, y) && a.fillRect(J, 0, z, h)
						} else if("BarH" === z.figure && null !== z.fill)
							for(ii(this, a, z.fill, !0, !1, e, f), z = z.height, isNaN(z) && (z = c), I = C = Math.floor(-m.y / c); I <= C + l; I++) J = I * c +
								m.y, 0 <= J && J <= h && Lm(I, v, y) && a.fillRect(0, J, g, z);
					B && a.Js();
					1 !== u && (a.globalAlpha = x)
				}
			}
			a.restore();
			a.Tc(!1)
		} else if(this.va === Y.Graduated) {
			d = b.gj;
			b.gj = !0;
			e = this.naturalBounds;
			c = e.width;
			e = e.height;
			a.save();
			a.beginPath();
			a.rect(-1, -1, c + 1, e + 1);
			a.clip();
			c = this.Db();
			c.jc(a, b);
			e = this.mf() * b.scale;
			0 >= e && (e = 1);
			f = c.actualBounds;
			g = this.W.j;
			h = this.cj;
			k = g.length;
			for(l = 0; l < k; l++)
				if(p = g[l], m = h[l], n = m.length, p.visible && p !== c && 0 !== m.length)
					if(p instanceof qg) {
						if(!(2 > this.graduatedTickUnit * p.interval * e))
							for(q = p.measuredBounds,
								r = p.strokeWidth * p.scale, v = p.alignmentFocus, v.mc() && (v = fd), u = 0; u < n; u++) x = m[u][0], y = m[u][1], B = v, z = p.wb, z.reset(), z.translate(x.x + f.x, x.y + f.y), z.rotate(y + p.angle, 0, 0), z.translate(-q.width * B.x + B.offsetX + r / 2, -q.height * B.y + B.offsetY + r / 2), z.scale(p.scale, p.scale), ql(p, !1), p.zh.set(p.wb), p.Lk = p.scale, rl(p, !1), p.jc(a, b), p.wb.reset()
					} else if(p instanceof wh)
				for(null === this.dh && (this.dh = new wh), q = this.dh, Hm(q, p), p = 0; p < n; p++) u = m[p], 3 < u.length && (r = u[6], q.Rb = u[2], q.Bc = u[3], q.rc = u[4], q.rd = u[5], q.hc = u[8], q.arrange(r.x,
					r.y, r.width, r.height), r = u[6], q.arrange(r.x, r.y, r.width, r.height), v = u[7], u = u[8], x = q.wb, x.reset(), x.translate(r.x + f.x, r.y + f.y), x.translate(-v.x, -v.y), Zk(q, x, u.x, u.y, u.width, u.height), ql(q, !1), q.zh.set(q.wb), q.Lk = q.scale, rl(q, !1), q.jc(a, b));
			b.gj = d;
			a.restore();
			a.Tc(!0)
		} else {
			this.va === Y.Table && (a.lineCap = "butt", Mm(this, a, !0, this.vb, !0), Mm(this, a, !1, this.sb, !0), Nm(this, a, !0, this.vb), Nm(this, a, !1, this.sb), Mm(this, a, !0, this.vb, !1), Mm(this, a, !1, this.sb, !1));
			(d = this.isClipping) && a.save();
			c = this.Db();
			e = this.W.j;
			f = e.length;
			for(g = 0; g < f; g++) h = e[g], d && h === c && (a.clipInsteadOfFill = !0), h.jc(a, b), d && h === c && (a.clipInsteadOfFill = !1);
			d && (a.restore(), a.Tc(!0))
		}
	};

	function Nm(a, b, c, d) {
		for(var e = d.length, f = a.actualBounds, g = a.naturalBounds, h = !0, k = 0; k < e; k++) {
			var l = d[k];
			if(void 0 !== l)
				if(h) h = !1;
				else if(0 !== l.actual) {
				if(c) {
					if(l.position > f.height) continue
				} else if(l.position > f.width) continue;
				var m = l.separatorStrokeWidth;
				isNaN(m) && (m = c ? a.Dg : a.Cg);
				var n = l.separatorStroke;
				null === n && (n = c ? a.Rh : a.Bg);
				if(0 !== m && null !== n) {
					ii(a, b, n, !1, !1, g, f);
					n = !1;
					var p = l.separatorDashArray;
					null === p && (p = c ? a.Qh : a.Ph);
					null !== p && (n = !0, b.Ms(p, 0));
					b.beginPath();
					p = l.position + m;
					c ? p > f.height && (m -=
						p - f.height) : p > f.width && (m -= p - f.width);
					l = l.position + m / 2;
					b.lineWidth = m;
					m = a.hb;
					c ? (l += m.top, p = f.width - m.right, b.moveTo(m.left, l), b.lineTo(p, l)) : (l += m.left, p = f.height - m.bottom, b.moveTo(l, m.top), b.lineTo(l, p));
					b.stroke();
					n && b.Js()
				}
			}
		}
	}

	function Mm(a, b, c, d, e) {
		for(var f = d.length, g = a.actualBounds, h = a.naturalBounds, k = 0; k < f; k++) {
			var l = d[k];
			if(void 0 !== l && null !== l.background && l.coversSeparators !== e && 0 !== l.actual) {
				var m = c ? g.height : g.width;
				if(!(l.position > m)) {
					var n = l.vc(),
						p = l.separatorStrokeWidth;
					isNaN(p) && (p = c ? a.Dg : a.Cg);
					var q = l.separatorStroke;
					null === q && (q = c ? a.Rh : a.Bg);
					null === q && (p = 0);
					n -= p;
					p = l.position + p;
					n += l.actual;
					p + n > m && (n = m - p);
					0 >= n || (m = a.hb, ii(a, b, l.background, !0, !1, h, g), c ? b.fillRect(m.left, p + m.top, g.width - (m.left + m.right), n) : b.fillRect(p +
						m.left, m.top, n, g.height - (m.top + m.bottom)))
				}
			}
		}
	}

	function Lm(a, b, c) {
		if(0 !== a % b) return !1;
		b = c.length;
		for(var d = 0; d < b; d++)
			if(0 === a % c[d]) return !1;
		return !0
	}

	function Mj(a) {
		return "LineV" === a || "BarV" === a
	}
	t.Wj = function(a, b, c, d, e) {
		var f = this.$d(),
			g = this.transform,
			h = 1 / (g.m11 * g.m22 - g.m12 * g.m21),
			k = g.m22 * h,
			l = -g.m12 * h,
			m = -g.m21 * h,
			n = g.m11 * h,
			p = h * (g.m21 * g.dy - g.m22 * g.dx),
			q = h * (g.m12 * g.dx - g.m11 * g.dy);
		if(null !== this.areaBackground) return g = this.actualBounds, H.Vc(g.left, g.top, g.right, g.bottom, a, b, c, d, e);
		if(null !== this.background) return f = a * k + b * m + p, h = a * l + b * n + q, a = c * k + d * m + p, k = c * l + d * n + q, e.h(0, 0), c = this.naturalBounds, f = H.Vc(0, 0, c.width, c.height, f, h, a, k, e), e.transform(g), f;
		f || (k = 1, m = l = 0, n = 1, q = p = 0);
		h = a * k + b * m + p;
		a = a * l + b *
			n + q;
		k = c * k + d * m + p;
		c = c * l + d * n + q;
		e.h(k, c);
		d = (k - h) * (k - h) + (c - a) * (c - a);
		l = !1;
		n = this.W.j;
		q = n.length;
		m = G.alloc();
		p = null;
		b = Infinity;
		var r = null;
		this.isClipping && (r = G.alloc(), p = this.Db(), (l = p.Wj(h, a, k, c, r)) && (b = (h - r.x) * (h - r.x) + (a - r.y) * (a - r.y)));
		for(var u = 0; u < q; u++) {
			var v = n[u];
			v.visible && v !== p && v.Wj(h, a, k, c, m) && (l = !0, v = (h - m.x) * (h - m.x) + (a - m.y) * (a - m.y), v < d && (d = v, e.set(m)))
		}
		this.isClipping && (b > d && e.set(r), G.free(r));
		G.free(m);
		f && e.transform(g);
		return l
	};
	t.o = function(a) {
		P.prototype.o.call(this, a);
		a = null;
		if(this.va === Y.Auto || this.va === Y.Link) a = this.Db();
		for(var b = this.W.j, c = b.length, d = 0; d < c; d++) {
			var e = b[d];
			(e === a || e.isPanelMain) && e.o(!0);
			if(!e.desiredSize.s()) {
				var f = al(e, !1);
				(e instanceof bh || e instanceof Y || e instanceof wh || f !== dh) && e.o(!0)
			}
		}
	};
	t.Zl = function() {
		if(!1 === jj(this)) {
			ej(this, !0);
			bl(this, !0);
			for(var a = this.W.j, b = a.length, c = 0; c < b; c++) a[c].Zl()
		}
	};
	t.Yk = function() {
		if(0 !== (this.G & 2048) === !1) {
			ql(this, !0);
			rl(this, !0);
			for(var a = this.W.j, b = a.length, c = 0; c < b; c++) a[c].$u()
		}
	};
	t.$u = function() {
		rl(this, !0);
		for(var a = this.W.j, b = a.length, c = 0; c < b; c++) a[c].$u()
	};
	t.cm = function(a, b, c, d) {
		var e = this.hg;
		e.h(0, 0, 0, 0);
		var f = this.desiredSize,
			g = this.minSize;
		void 0 === c && (c = g.width, d = g.height);
		c = Math.max(c, g.width);
		d = Math.max(d, g.height);
		var h = this.maxSize;
		isNaN(f.width) || (a = Math.min(f.width, h.width));
		isNaN(f.height) || (b = Math.min(f.height, h.height));
		a = Math.max(c, a);
		b = Math.max(d, b);
		var k = this.hb;
		a = Math.max(a - k.left - k.right, 0);
		b = Math.max(b - k.top - k.bottom, 0);
		var l = this.W.j;
		0 !== l.length && this.va.measure(this, a, b, l, e, c, d);
		a = e.width + k.left + k.right;
		k = e.height + k.top + k.bottom;
		isFinite(f.width) && (a = f.width);
		isFinite(f.height) && (k = f.height);
		a = Math.min(h.width, a);
		k = Math.min(h.height, k);
		a = Math.max(g.width, a);
		k = Math.max(g.height, k);
		a = Math.max(c, a);
		k = Math.max(d, k);
		zc(e, a, k);
		zc(this.naturalBounds, a, k);
		Yk(this, 0, 0, a, k)
	};
	t.Db = function() {
		if(null === this.pi) {
			var a = this.W.j,
				b = a.length;
			if(0 === b) return null;
			for(var c = 0; c < b; c++) {
				var d = a[c];
				if(!0 === d.isPanelMain) return this.pi = d
			}
			this.pi = a[0]
		}
		return this.pi
	};

	function lm(a) {
		return null !== a.part ? a.part.locationObject : null
	}
	t.nh = function(a, b, c, d) {
		var e = this.W.j;
		this.actualBounds.h(a, b, c, d);
		if(0 !== e.length) {
			if(!this.desiredSize.s()) {
				a = al(this, !0);
				var f = this.measuredBounds;
				b = f.width;
				f = f.height;
				var g = this.Rg,
					h = g.left + g.right;
				g = g.top + g.bottom;
				b === c && f === d && (a = dh);
				switch(a) {
					case dh:
						if(b > c || f > d) this.o(), this.measure(b > c ? c : b, f > d ? d : f, 0, 0);
						break;
					case ge:
						this.o(!0);
						this.measure(c + h, d + g, 0, 0);
						break;
					case Mk:
						this.o(!0);
						this.measure(c + h, f + g, 0, 0);
						break;
					case Nk:
						this.o(!0), this.measure(b + h, d + g, 0, 0)
				}
			}
			this.va.arrange(this, e, this.hg)
		}
	};
	t.ph = function(a) {
		var b = this.naturalBounds,
			c = lm(this);
		if(Jc(0, 0, b.width, b.height, a.x, a.y)) {
			b = this.W.j;
			for(var d = b.length, e = G.allocAt(0, 0); d--;) {
				var f = b[d];
				if(f.visible || f === c)
					if(Ub(e.set(a), f.transform), f.ea(e)) return G.free(e), !0
			}
			G.free(e);
			return null === this.kb && null === this.dc ? !1 : !0
		}
		return !1
	};
	t.Ns = function(a) {
		if(this.xk === a) return this;
		for(var b = this.W.j, c = b.length, d = 0; d < c; d++) {
			var e = b[d].Ns(a);
			if(null !== e) return e
		}
		return null
	};
	t.qm = function(a, b) {
		b(this, a);
		if(a instanceof Y) {
			a = a.W.j;
			for(var c = a.length, d = 0; d < c; d++) this.qm(a[d], b)
		}
	};

	function vj(a, b) {
		Om(a, a, b)
	}

	function Om(a, b, c) {
		c(b);
		b = b.W.j;
		for(var d = b.length, e = 0; e < d; e++) {
			var f = b[e];
			f instanceof Y && Om(a, f, c)
		}
	}

	function Pm(a, b) {
		Qm(a, a, b)
	}

	function Qm(a, b, c) {
		c(b);
		if(b instanceof Y) {
			b = b.W.j;
			for(var d = b.length, e = 0; e < d; e++) Qm(a, b[e], c)
		}
	}
	t.Tl = function(a) {
		return Rm(this, this, a)
	};

	function Rm(a, b, c) {
		if(c(b)) return b;
		if(b instanceof Y) {
			b = b.W.j;
			for(var d = b.length, e = 0; e < d; e++) {
				var f = Rm(a, b[e], c);
				if(null !== f) return f
			}
		}
		return null
	}
	t.Ya = function(a) {
		if(this.name === a) return this;
		for(var b = this.W.j, c = b.length, d = 0; d < c; d++) {
			var e = b[d];
			if(e.name === a) return e;
			if(e instanceof Y)
				if(null === e.Ng && null === e.Hd) {
					if(e = e.Ya(a), null !== e) return e
				} else if(Sm(e) && (e = e.W.first(), null !== e && (e = e.Ya(a), null !== e))) return e
		}
		return null
	};

	function Tm(a) {
		a = a.W.j;
		for(var b = a.length, c = 0, d = 0; d < b; d++) {
			var e = a[d];
			if(e instanceof Y) c = Math.max(c, Tm(e));
			else if(e instanceof qg) {
				a: {
					switch(e.Nk) {
						case "None":
						case "Square":
						case "Ellipse":
						case "Circle":
						case "LineH":
						case "LineV":
						case "FramedRectangle":
						case "RoundedRectangle":
						case "Line1":
						case "Line2":
						case "Border":
						case "Cube1":
						case "Cube2":
						case "Junction":
						case "Cylinder1":
						case "Cylinder2":
						case "Cylinder3":
						case "Cylinder4":
						case "PlusLine":
						case "XLine":
						case "ThinCross":
						case "ThickCross":
							e = 0;
							break a
					}
					e =
					e.bh / 2 * e.Cj * e.mf()
				}
				c = Math.max(c, e)
			}
		}
		return c
	}
	t.$d = function() {
		return !(this.type === Y.TableRow || this.type === Y.TableColumn)
	};
	t.Sb = function(a, b, c) {
		if(!1 === this.pickable) return null;
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		if(kj(this)) return null;
		var d = this.naturalBounds,
			e = 1 / this.mf(),
			f = this.$d(),
			g = f ? a : Ub(G.allocAt(a.x, a.y), this.transform),
			h = this.diagram,
			k = 10,
			l = 5;
		null !== h && (k = h.Xl("extraTouchArea"), l = k / 2);
		if(Jc(-(l * e), -(l * e), d.width + k * e, d.height + k * e, g.x, g.y)) {
			if(!this.isAtomic) {
				e = this.W.j;
				var m = e.length;
				h = G.alloc();
				l = (k = this.isClipping) ? this.Db() : null;
				if(k && (l.$d() ? Ub(h.set(a), l.transform) : h.set(a), !l.ea(h))) return G.free(h),
					f || G.free(g), null;
				for(var n = lm(this); m--;) {
					var p = e[m];
					if(p.visible || p === n)
						if(p.$d() ? Ub(h.set(a), p.transform) : h.set(a), !k || p !== l) {
							var q = null;
							p instanceof Y ? q = p.Sb(h, b, c) : !0 === p.pickable && p.ea(h) && (q = p);
							if(null !== q && (null !== b && (q = b(q)), null !== q && (null === c || c(q)))) return G.free(h), f || G.free(g), q
						}
				}
				G.free(h)
			}
			if(null === this.background && null === this.areaBackground) return f || G.free(g), null;
			a = Jc(0, 0, d.width, d.height, g.x, g.y) ? this : null;
			f || G.free(g);
			return a
		}
		f || G.free(g);
		return null
	};
	t.Uj = function(a, b, c, d) {
		if(!1 === this.pickable) return !1;
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		d instanceof E || d instanceof F || (d = new E);
		var e = this.naturalBounds,
			f = this.$d(),
			g = f ? a : Ub(G.allocAt(a.x, a.y), this.transform);
		e = Jc(0, 0, e.width, e.height, g.x, g.y);
		if(this.type === Y.TableRow || this.type === Y.TableColumn || e) {
			if(!this.isAtomic) {
				for(var h = this.W.j, k = h.length, l = G.alloc(), m = lm(this); k--;) {
					var n = h[k];
					if(n.visible || n === m) {
						n.$d() ? Ub(l.set(a), n.transform) : l.set(a);
						var p = n;
						n = n instanceof Y ? n : null;
						(null !==
							n ? n.Uj(l, b, c, d) : p.ea(l)) && !1 !== p.pickable && (null !== b && (p = b(p)), null === p || null !== c && !c(p) || d.add(p))
					}
				}
				G.free(l)
			}
			f || G.free(g);
			return e && (null !== this.background || null !== this.areaBackground)
		}
		f || G.free(g);
		return !1
	};
	t.mg = function(a, b, c, d, e, f) {
		if(!1 === this.pickable) return !1;
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		var g = f;
		void 0 === f && (g = Yc.alloc(), g.reset());
		g.multiply(this.transform);
		if(this.oh(a, g)) return Um(this, b, c, e), void 0 === f && Yc.free(g), !0;
		if(this.Kc(a, g)) {
			if(!this.isAtomic)
				for(var h = lm(this), k = this.W.j, l = k.length; l--;) {
					var m = k[l];
					if(m.visible || m === h) {
						var n = m.actualBounds,
							p = this.naturalBounds;
						if(!(n.x > p.width || n.y > p.height || 0 > n.x + n.width || 0 > n.y + n.height)) {
							n = m;
							m = m instanceof Y ? m : null;
							p = Yc.alloc();
							p.set(g);
							if(null !== m ? m.mg(a, b, c, d, e, p) : $k(n, a, d, p)) null !== b && (n = b(n)), null === n || null !== c && !c(n) || e.add(n);
							Yc.free(p)
						}
					}
				}
			void 0 === f && Yc.free(g);
			return d
		}
		void 0 === f && Yc.free(g);
		return !1
	};

	function Um(a, b, c, d) {
		for(var e = a.W.j, f = e.length; f--;) {
			var g = e[f];
			if(g.visible) {
				var h = g.actualBounds,
					k = a.naturalBounds;
				h.x > k.width || h.y > k.height || 0 > h.x + h.width || 0 > h.y + h.height || (g instanceof Y && Um(g, b, c, d), null !== b && (g = b(g)), null === g || null !== c && !c(g) || d.add(g))
			}
		}
	}
	t.ng = function(a, b, c, d, e, f) {
		if(!1 === this.pickable) return !1;
		void 0 === c && (c = null);
		void 0 === d && (d = null);
		var g = this.naturalBounds,
			h = this.$d(),
			k = h ? a : Ub(G.allocAt(a.x, a.y), this.transform),
			l = h ? b : Ub(G.allocAt(b.x, b.y), this.transform),
			m = k.Be(l),
			n = 0 < k.x && k.x < g.width && 0 < k.y && k.y < g.height || Yb(k.x, k.y, 0, 0, 0, g.height) <= m || Yb(k.x, k.y, 0, g.height, g.width, g.height) <= m || Yb(k.x, k.y, g.width, g.height, g.width, 0) <= m || Yb(k.x, k.y, g.width, 0, 0, 0) <= m;
		g = k.ed(0, 0) <= m && k.ed(0, g.height) <= m && k.ed(g.width, 0) <= m && k.ed(g.width, g.height) <=
			m;
		h || (G.free(k), G.free(l));
		if(n) {
			if(!this.isAtomic) {
				k = G.alloc();
				l = G.alloc();
				m = lm(this);
				for(var p = this.W.j, q = p.length; q--;) {
					var r = p[q];
					if(r.visible || r === m) {
						var u = r.actualBounds,
							v = this.naturalBounds;
						if(!h || !(u.x > v.width || u.y > v.height || 0 > u.x + u.width || 0 > u.y + u.height))
							if(r.$d() ? (u = r.transform, Ub(k.set(a), u), Ub(l.set(b), u)) : (k.set(a), l.set(b)), u = r, r = r instanceof Y ? r : null, null !== r ? r.ng(k, l, c, d, e, f) : u.ix(k, l, e)) null !== c && (u = c(u)), null === u || null !== d && !d(u) || f.add(u)
					}
				}
				G.free(k);
				G.free(l)
			}
			return e ? n : g
		}
		return !1
	};

	function qm(a) {
		var b = null;
		a instanceof qg && (b = a.spot1, b === Hd && (b = null), a = a.geometry, null !== a && null === b && (b = a.spot1));
		null === b && (b = ed);
		return b
	}

	function rm(a) {
		var b = null;
		a instanceof qg && (b = a.spot2, b === Hd && (b = null), a = a.geometry, null !== a && null === b && (b = a.spot2));
		null === b && (b = od);
		return b
	}
	t.add = function(a) {
		this.Nb(this.W.count, a)
	};
	t.N = function(a) {
		return this.W.N(a)
	};
	t.Nb = function(a, b) {
		b instanceof U && A("Cannot add a Part to a Panel: " + b + "; use a Panel instead");
		if(this === b || this.vh(b)) this === b && A("Cannot make a Panel contain itself: " + this.toString()), A("Cannot make a Panel indirectly contain itself: " + this.toString() + " already contains " + b.toString());
		var c = b.panel;
		null !== c && c !== this && A("Cannot add a GraphObject that already belongs to another Panel to this Panel: " + b.toString() + ", already contained by " + c.toString() + ", cannot be shared by this Panel: " + this.toString());
		this.va !== Y.Grid || b instanceof qg || A("Can only add Shapes to a Grid Panel, not: " + b);
		this.va !== Y.Graduated || b instanceof qg || b instanceof wh || A("Can only add Shapes or TextBlocks to a Graduated Panel, not: " + b);
		b.Ki(this);
		b.uj = null;
		if(null !== this.itemArray) {
			var d = b.data;
			null !== d && "object" === typeof d && (null === this.Gd && (this.Gd = new Nb), this.Gd.add(d, b))
		}
		var e = this.W;
		d = -1;
		if(c === this) {
			for(var f = -1, g = this.W.j, h = g.length, k = 0; k < h; k++)
				if(g[k] === b) {
					f = k;
					break
				}
			if(-1 !== f) {
				if(f === a || f + 1 >= e.count && a >= e.count) return;
				e.qb(f);
				d = f
			} else A("element " + b.toString() + " has panel " + c.toString() + " but is not contained by it.")
		}
		if(0 > a || a > e.count) a = e.count;
		e.Nb(a, b);
		if(0 === a || b.isPanelMain) this.pi = null;
		jj(this) || this.o();
		b.o(!1);
		null !== b.portId ? this.th = !0 : b instanceof Y && !0 === b.th && (this.th = !0);
		this.Jg = null;
		c = this.part;
		null !== c && (c.pj = null, c.Sg = NaN, this.th && c instanceof W && (c.th = !0), c.th && c instanceof W && (c.tc = null), e = this.diagram, null !== e && e.undoManager.isUndoingRedoing || (-1 !== d && c.cb(ff, "elements", this, b, null, d, null), c.cb(af,
			"elements", this, null, b, null, a), this.pg() || Vm(this, b, !1)))
	};

	function Wm(a, b) {
		a.G = b ? a.G | 16777216 : a.G & -16777217
	}
	t.remove = function(a) {
		for(var b = this.W.j, c = b.length, d = -1, e = 0; e < c; e++)
			if(b[e] === a) {
				d = e;
				break
			} - 1 !== d && this.zc(d, !0)
	};
	t.qb = function(a) {
		0 <= a && this.zc(a, !0)
	};
	t.zc = function(a, b) {
		var c = this.W,
			d = c.N(a);
		d.uj = null;
		d.Ki(null);
		if(null !== this.Gd) {
			var e = d.data;
			"object" === typeof e && this.Gd.remove(e)
		}
		c.qb(a);
		ej(this, !1);
		this.o();
		this.pi === d && (this.pi = null);
		this.Jg = null;
		var f = this.part;
		null !== f && (f.pj = null, f.Sg = NaN, f.Ob(), f instanceof W && (d instanceof Y ? d.qm(d, function(a, c) {
			Gl(f, c, b)
		}) : Gl(f, d, b)), c = this.diagram, null !== c && c.undoManager.isUndoingRedoing || f.cb(ff, "elements", this, d, null, a, null))
	};
	t.Ub = function(a) {
		0 > a && Aa(a, ">= 0", Y, "getRowDefinition:idx");
		a = Math.round(a);
		var b = this.vb;
		if(void 0 === b[a]) {
			var c = new Kj;
			c.Ki(this);
			c.isRow = !0;
			c.index = a;
			b[a] = c
		}
		return b[a]
	};
	t.sv = function(a) {
		0 > a && Aa(a, ">= 0", Y, "removeRowDefinition:idx");
		a = Math.round(a);
		var b = this.vb;
		this.cb(ff, "coldefs", this, b[a], null, a, null);
		b[a] && delete b[a];
		this.o()
	};
	t.Tb = function(a) {
		0 > a && Aa(a, ">= 0", Y, "getColumnDefinition:idx");
		a = Math.round(a);
		var b = this.sb;
		if(void 0 === b[a]) {
			var c = new Kj;
			c.Ki(this);
			c.isRow = !1;
			c.index = a;
			b[a] = c
		}
		return b[a]
	};
	t.pv = function(a) {
		0 > a && Aa(a, ">= 0", Y, "removeColumnDefinition:idx");
		a = Math.round(a);
		var b = this.sb;
		this.cb(ff, "coldefs", this, b[a], null, a, null);
		b[a] && delete b[a];
		this.o()
	};
	t.Ly = function(a) {
		if(0 > a || this.type !== Y.Table) return -1;
		for(var b = 0, c = this.vb, d = c.length, e = this.ti; e < d; e++) {
			var f = c[e];
			if(void 0 !== f && (b += f.total, a < b)) break
		}
		return e
	};
	t.Ey = function(a) {
		if(0 > a || this.type !== Y.Table) return -1;
		for(var b = 0, c = this.sb, d = c.length, e = this.di; e < d; e++) {
			var f = c[e];
			if(void 0 !== f && (b += f.total, a < b)) break
		}
		return e
	};
	t.az = function(a, b) {
		void 0 === b && (b = new G(NaN, NaN));
		if(this.type !== Y.Graduated) return b.h(NaN, NaN), b;
		a = Math.min(Math.max(a, this.graduatedMin), this.graduatedMax);
		var c = this.Db();
		c.geometry.Tu((a - this.graduatedMin) / this.graduatedRange, b);
		return c.transform.ta(b)
	};
	t.bz = function(a) {
		if(this.type !== Y.Graduated) return NaN;
		var b = this.Db();
		b.transform.Wd(a);
		return b.geometry.lx(a) * this.graduatedRange + this.graduatedMin
	};

	function yl(a) {
		a = a.Mh;
		return null !== a && a.v
	}

	function ch(a) {
		var b = a.Mh;
		if(null === b) null !== a.data && A("Template cannot have .data be non-null: " + a), a.Mh = b = new E;
		else if(b.v) return;
		var c = new E;
		Wm(a, !1);
		a.qm(a, function(a, d) {
			var e = d.gb;
			if(null !== e)
				for(vl(d, !1), e = e.iterator; e.next();) {
					var f = e.value;
					f.mode === Xm && vl(d, !0);
					var g = f.sourceName;
					null !== g && ("/" === g && Wm(a, !0), g = Xk(f, a, d), null !== g && (c.add(g), null === g.xl && (g.xl = new E), g.xl.add(f)));
					b.add(f)
				}
			if(d instanceof Y && d.type === Y.Table) {
				if(0 < d.vb.length)
					for(a = d.vb, e = a.length, f = 0; f < e; f++)
						if(g = a[f], void 0 !==
							g && null !== g.gb)
							for(var h = g.gb.iterator; h.next();) {
								var k = h.value;
								k.Sd = g;
								k.pp = 2;
								k.Hl = g.index;
								b.add(k)
							}
				if(0 < d.sb.length)
					for(d = d.sb, a = d.length, e = 0; e < a; e++)
						if(f = d[e], void 0 !== f && null !== f.gb)
							for(g = f.gb.iterator; g.next();) h = g.value, h.Sd = f, h.pp = 1, h.Hl = f.index, b.add(h)
			}
		});
		for(var d = c.iterator; d.next();) {
			var e = d.value;
			if(null !== e.xl) {
				vl(e, !0);
				for(var f = e.xl.iterator; f.next();) {
					var g = f.value;
					null === e.gb && (e.gb = new E);
					e.gb.add(g)
				}
			}
			e.xl = null
		}
		for(d = b.iterator; d.next();)
			if(e = d.value, f = e.Sd, null !== f) {
				e.Sd = null;
				var h =
					e.targetProperty,
					k = h.indexOf(".");
				0 < k && f instanceof Y && (g = h.substring(0, k), h = h.substr(k + 1), k = f.Ya(g), null !== k ? (f = k, e.targetProperty = h) : Ba('Warning: unable to find GraphObject named "' + g + '" for Binding: ' + e.toString()));
				f instanceof Kj ? (g = Bb(f.panel), e.Oi = void 0 === g ? -1 : g, f.panel.xk = e.Oi) : f instanceof P ? (g = Bb(f), e.Oi = void 0 === g ? -1 : g, f.xk = e.Oi) : A("Unknown type of binding target: " + f)
			}
		b.freeze();
		a instanceof U && a.ac() && a.kc()
	}
	t.sy = function() {
		var a = this.copy();
		Pm(a, function(a) {
			a instanceof Y && (a.Mh = null, a.lb = null);
			var b = a.gb;
			null !== b && (a.gb = null, b.each(function(b) {
				a.bind(b.copy())
			}))
		});
		return a
	};
	t.Da = function(a) {
		var b = this.Mh;
		if(null !== b)
			for(void 0 === a && (a = ""), b = b.iterator; b.next();) {
				var c = b.value,
					d = c.sourceProperty;
				if("" === a || "" === d || d === a)
					if(d = c.targetProperty, null !== c.converter || "" !== d) {
						d = this.data;
						var e = c.sourceName;
						if(null !== e) d = "" === e ? this : "/" === e ? this : "." === e ? this : ".." === e ? this : this.Ya(e);
						else {
							var f = this.diagram;
							null !== f && c.isToModel && (d = f.model.modelData)
						}
						if(null !== d) {
							f = this;
							var g = c.Oi;
							if(-1 !== g) {
								if(f = this.Ns(g), null === f) continue
							} else null !== c.Sd && (f = c.Sd);
							"/" === e ? d = f.part : "." ===
								e ? d = f : ".." === e && (d = f.panel);
							e = c.pp;
							if(0 !== e) {
								if(!(f instanceof Y)) continue;
								1 === e ? f = f.Tb(c.Hl) : 2 === e && (f = f.Ub(c.Hl))
							}
							void 0 !== f && c.Uv(f, d)
						}
					}
			}
	};

	function Sm(a) {
		return a.type === Y.Spot || a.type === Y.Auto || a.type === Y.Link || a.type === Y.Table && 0 < a.W.length && (a = a.W.N(0), a.isPanelMain && a instanceof Y && (a.type === Y.TableRow || a.type === Y.TableColumn)) ? !0 : !1
	}
	t.it = function() {
		var a = 0;
		for(Sm(this) && (a = 1); this.W.length > a;) this.zc(this.W.length - 1, !1);
		a = this.itemArray;
		if(null !== a)
			for(var b = a.length, c = 0; c < b; c++) Ym(this, a[c], c)
	};
	t.hx = function(a) {
		return void 0 === a || null === a || null === this.Gd ? null : this.Gd.J(a)
	};

	function Ym(a, b, c) {
		if(!(void 0 === b || null === b || 0 > c)) {
			var d = Zm(a, b),
				e = a.itemTemplateMap,
				f = null;
			null !== e && (f = e.J(d));
			null === f && ($m || ($m = !0, Ba('No item template Panel found for category "' + d + '" on ' + a), Ba("  Using default item template."), d = new Y, e = new wh, e.bind(new Bi("text", "", Qa)), d.add(e), an = d), f = an);
			d = f;
			null !== d && (ch(d), d = d.copy(), 0 !== (d.G & 16777216) && (e = a.qh(), null !== e && Wm(e, !0)), "object" === typeof b && (null === a.Gd && (a.Gd = new Nb), a.Gd.add(b, d)), e = c, Sm(a) && e++, a.Nb(e, d), d.lb = b, bn(a, e, c), d.lb = null, d.data =
				b)
		}
	}

	function bn(a, b, c) {
		for(a = a.W; b < a.length;) {
			var d = a.N(b);
			if(d instanceof Y) {
				var e = b,
					f = c;
				d.type === Y.TableRow ? d.row = e : d.type === Y.TableColumn && (d.column = e);
				d.itemIndex = f
			}
			b++;
			c++
		}
	}

	function Zm(a, b) {
		if(null === b) return "";
		a = a.Zk;
		if("function" === typeof a) a = a(b);
		else if("string" === typeof a && "object" === typeof b) {
			if("" === a) return "";
			a = cn(b, a)
		} else return "";
		if(void 0 === a) return "";
		if("string" === typeof a) return a;
		A("Panel.getCategoryForItemData found a non-string category for " + b + ": " + a);
		return ""
	}

	function Vm(a, b, c) {
		var d = b.enabledChanged;
		null !== d && d(b, c);
		if(b instanceof Y) {
			b = b.W.j;
			d = b.length;
			for(var e = 0; e < d; e++) {
				var f = b[e];
				c && f instanceof Y && !f.isEnabled || Vm(a, f, c)
			}
		}
	}

	function dn(a, b) {
		Cl.add(a, b)
	}
	oa.Object.defineProperties(Y.prototype, {
		type: {
			get: function() {
				return this.va
			},
			set: function(a) {
				var b = this.va;
				b !== a && (this.va = a, this.va === Y.Grid ? this.isAtomic = !0 : this.va === Y.Table && Jm(this), this.o(), this.g("type", b, a))
			}
		},
		elements: {
			get: function() {
				return this.W.iterator
			}
		},
		naturalBounds: {
			get: function() {
				return this.hc
			}
		},
		padding: {
			get: function() {
				return this.hb
			},
			set: function(a) {
				"number" ===
				typeof a ? (0 > a && Aa(a, ">= 0", Y, "padding"), a = new Pc(a)) : (0 > a.left && Aa(a.left, ">= 0", Y, "padding:value.left"), 0 > a.right && Aa(a.right, ">= 0", Y, "padding:value.right"), 0 > a.top && Aa(a.top, ">= 0", Y, "padding:value.top"), 0 > a.bottom && Aa(a.bottom, ">= 0", Y, "padding:value.bottom"));
				var b = this.hb;
				b.A(a) || (this.hb = a = a.I(), this.o(), this.g("padding", b, a))
			}
		},
		defaultAlignment: {
			get: function() {
				return this.dn
			},
			set: function(a) {
				var b = this.dn;
				b.A(a) || (this.dn = a = a.I(), this.o(), this.g("defaultAlignment",
					b, a))
			}
		},
		defaultStretch: {
			get: function() {
				return this.Df
			},
			set: function(a) {
				var b = this.Df;
				b !== a && (this.Df = a, this.o(), this.g("defaultStretch", b, a))
			}
		},
		defaultSeparatorPadding: {
			get: function() {
				return void 0 === this.Wi ? Wc : this.Wi
			},
			set: function(a) {
				if(void 0 !== this.Wi) {
					"number" === typeof a && (a = new Pc(a));
					var b = this.Wi;
					b.A(a) || (this.Wi = a = a.I(), this.o(), this.g("defaultSeparatorPadding", b, a))
				}
			}
		},
		defaultRowSeparatorStroke: {
			get: function() {
				return void 0 ===
					this.Rh ? null : this.Rh
			},
			set: function(a) {
				var b = this.Rh;
				b !== a && (null === a || "string" === typeof a || a instanceof jl) && (a instanceof jl && a.freeze(), this.Rh = a, this.R(), this.g("defaultRowSeparatorStroke", b, a))
			}
		},
		defaultRowSeparatorStrokeWidth: {
			get: function() {
				return void 0 === this.Dg ? 1 : this.Dg
			},
			set: function(a) {
				if(void 0 !== this.Dg) {
					var b = this.Dg;
					b !== a && isFinite(a) && 0 <= a && (this.Dg = a, this.o(), this.g("defaultRowSeparatorStrokeWidth", b, a))
				}
			}
		},
		defaultRowSeparatorDashArray: {
			get: function() {
				return void 0 === this.Qh ? null : this.Qh
			},
			set: function(a) {
				if(void 0 !== this.Qh) {
					var b = this.Qh;
					if(b !== a) {
						if(null !== a) {
							for(var c = a.length, d = 0, e = 0; e < c; e++) {
								var f = a[e];
								"number" === typeof f && 0 <= f && isFinite(f) || A("defaultRowSeparatorDashArray value " + f + " at index " + e + " must be a positive number or zero.");
								d += f
							}
							if(0 === d) {
								if(null === b) return;
								a = null
							}
						}
						this.Qh = a;
						this.R();
						this.g("defaultRowSeparatorDashArray", b, a)
					}
				}
			}
		},
		defaultColumnSeparatorStroke: {
			get: function() {
				return void 0 ===
					this.Bg ? null : this.Bg
			},
			set: function(a) {
				if(void 0 !== this.Bg) {
					var b = this.Bg;
					b !== a && (null === a || "string" === typeof a || a instanceof jl) && (a instanceof jl && a.freeze(), this.Bg = a, this.R(), this.g("defaultColumnSeparatorStroke", b, a))
				}
			}
		},
		defaultColumnSeparatorStrokeWidth: {
			get: function() {
				return void 0 === this.Cg ? 1 : this.Cg
			},
			set: function(a) {
				if(void 0 !== this.Cg) {
					var b = this.Cg;
					b !== a && isFinite(a) && 0 <= a && (this.Cg = a, this.o(), this.g("defaultColumnSeparatorStrokeWidth", b, a))
				}
			}
		},
		defaultColumnSeparatorDashArray: {
			get: function() {
				return void 0 === this.Ph ? null : this.Ph
			},
			set: function(a) {
				if(void 0 !== this.Ph) {
					var b = this.Ph;
					if(b !== a) {
						if(null !== a) {
							for(var c = a.length, d = 0, e = 0; e < c; e++) {
								var f = a[e];
								"number" === typeof f && 0 <= f && isFinite(f) || A("defaultColumnSeparatorDashArray value " + f + " at index " + e + " must be a positive number or zero.");
								d += f
							}
							if(0 === d) {
								if(null === b) return;
								a = null
							}
						}
						this.Ph = a;
						this.R();
						this.g("defaultColumnSeparatorDashArray", b, a)
					}
				}
			}
		},
		viewboxStretch: {
			get: function() {
				return this.zp
			},
			set: function(a) {
				var b = this.zp;
				b !== a && (this.zp = a, this.o(), this.g("viewboxStretch", b, a))
			}
		},
		gridCellSize: {
			get: function() {
				return this.Dn
			},
			set: function(a) {
				var b = this.Dn;
				if(!b.A(a)) {
					a.s() && 0 !== a.width && 0 !== a.height || A("Invalid Panel.gridCellSize: " + a);
					this.Dn = a.I();
					var c = this.diagram;
					null !== c && this === c.grid && fj(c);
					this.R();
					this.g("gridCellSize", b, a)
				}
			}
		},
		gridOrigin: {
			get: function() {
				return this.En
			},
			set: function(a) {
				var b = this.En;
				if(!b.A(a)) {
					a.s() ||
						A("Invalid Panel.gridOrigin: " + a);
					this.En = a.I();
					var c = this.diagram;
					null !== c && this === c.grid && fj(c);
					this.R();
					this.g("gridOrigin", b, a)
				}
			}
		},
		graduatedMin: {
			get: function() {
				return this.An
			},
			set: function(a) {
				var b = this.An;
				b !== a && (this.An = a, this.o(), this.g("graduatedMin", b, a), Vk(this) && (a = this.part, null !== a && Wk(this, a, "graduatedRange")))
			}
		},
		graduatedMax: {
			get: function() {
				return this.zn
			},
			set: function(a) {
				var b = this.zn;
				b !== a && (this.zn = a, this.o(), this.g("graduatedMax",
					b, a), Vk(this) && (a = this.part, null !== a && Wk(this, a, "graduatedRange")))
			}
		},
		graduatedRange: {
			get: function() {
				return this.graduatedMax - this.graduatedMin
			}
		},
		graduatedTickUnit: {
			get: function() {
				return this.Cn
			},
			set: function(a) {
				var b = this.Cn;
				b !== a && 0 < a && (this.Cn = a, this.o(), this.g("graduatedTickUnit", b, a))
			}
		},
		graduatedTickBase: {
			get: function() {
				return this.Bn
			},
			set: function(a) {
				var b = this.Bn;
				b !== a && (this.Bn = a, this.o(), this.g("graduatedTickBase",
					b, a))
			}
		},
		th: {
			get: function() {
				return 0 !== (this.G & 8388608)
			},
			set: function(a) {
				0 !== (this.G & 8388608) !== a && (this.G ^= 8388608)
			}
		},
		rowCount: {
			get: function() {
				return void 0 === this.vb ? 0 : this.vb.length
			}
		},
		columnCount: {
			get: function() {
				return void 0 === this.sb ? 0 : this.sb.length
			}
		},
		rowSizing: {
			get: function() {
				return void 0 === this.zj ? Km : this.zj
			},
			set: function(a) {
				if(void 0 !== this.zj) {
					var b = this.zj;
					b !== a && (this.zj =
						a, this.o(), this.g("rowSizing", b, a))
				}
			}
		},
		columnSizing: {
			get: function() {
				return void 0 === this.Ui ? Km : this.Ui
			},
			set: function(a) {
				if(void 0 !== this.Ui) {
					var b = this.Ui;
					b !== a && (this.Ui = a, this.o(), this.g("columnSizing", b, a))
				}
			}
		},
		topIndex: {
			get: function() {
				return void 0 === this.ti ? 0 : this.ti
			},
			set: function(a) {
				if(void 0 !== this.ti) {
					var b = this.ti;
					b !== a && ((!isFinite(a) || 0 > a) && A("Panel.topIndex must be greater than zero and a real number, not: " + a), this.ti = a, this.o(),
						this.g("topIndex", b, a))
				}
			}
		},
		leftIndex: {
			get: function() {
				return void 0 === this.di ? 0 : this.di
			},
			set: function(a) {
				if(void 0 !== this.di) {
					var b = this.di;
					b !== a && ((!isFinite(a) || 0 > a) && A("Panel.leftIndex must be greater than zero and a real number, not: " + a), this.di = a, this.o(), this.g("leftIndex", b, a))
				}
			}
		},
		data: {
			get: function() {
				return this.lb
			},
			set: function(a) {
				var b = this.lb;
				if(b !== a) {
					var c = this instanceof U && !(this instanceof pf);
					ch(this);
					this.lb = a;
					var d = this.diagram;
					null !== d && (c ? (c = d.partManager, this instanceof S ? (null !== b && c.Ag.remove(b), null !== a && c.Ag.add(a, this)) : this instanceof U && (null !== b && c.Ne.remove(b), null !== a && c.Ne.add(a, this))) : (c = this.panel, null !== c && null !== c.Gd && (null !== b && c.Gd.remove(b), null !== a && c.Gd.add(a, this))));
					this.g("data", b, a);
					null !== d && d.undoManager.isUndoingRedoing || null !== a && this.Da()
				}
			}
		},
		itemIndex: {
			get: function() {
				return this.Rn
			},
			set: function(a) {
				var b = this.Rn;
				b !== a && (this.Rn = a, this.g("itemIndex", b, a))
			}
		},
		itemArray: {
			get: function() {
				return this.Ng
			},
			set: function(a) {
				var b = this.Ng;
				if(b !== a) {
					var c = this.diagram;
					null !== c && null !== b && Bj(c.partManager, this);
					this.Ng = a;
					null !== c && null !== a && xj(c.partManager, this);
					this.g("itemArray", b, a);
					null !== c && c.undoManager.isUndoingRedoing || this.it()
				}
			}
		},
		itemTemplate: {
			get: function() {
				return null === this.Hd ? null : this.Hd.J("")
			},
			set: function(a) {
				if(null === this.Hd) {
					if(null === a) return;
					this.Hd = new Nb
				}
				var b = this.Hd.J("");
				b !== a && ((a instanceof U || a.isPanelMain) &&
					A("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: " + a), this.Hd.add("", a), this.g("itemTemplate", b, a), a = this.diagram, null !== a && a.undoManager.isUndoingRedoing || this.it())
			}
		},
		itemTemplateMap: {
			get: function() {
				return this.Hd
			},
			set: function(a) {
				var b = this.Hd;
				if(b !== a) {
					for(var c = a.iterator; c.next(););
					this.Hd = a;
					this.g("itemTemplateMap", b, a);
					a = this.diagram;
					null !== a && a.undoManager.isUndoingRedoing || this.it()
				}
			}
		},
		itemCategoryProperty: {
			get: function() {
				return this.Zk
			},
			set: function(a) {
				var b = this.Zk;
				b !== a && (this.Zk = a, this.g("itemCategoryProperty", b, a))
			}
		},
		isAtomic: {
			get: function() {
				return 0 !== (this.G & 1048576)
			},
			set: function(a) {
				var b = 0 !== (this.G & 1048576);
				b !== a && (this.G ^= 1048576, this.g("isAtomic", b, a))
			}
		},
		isClipping: {
			get: function() {
				return 0 !== (this.G & 2097152)
			},
			set: function(a) {
				var b = 0 !== (this.G & 2097152);
				b !== a && (this.G ^= 2097152, this.o(), this.g("isClipping", b, a))
			}
		},
		isOpposite: {
			get: function() {
				return 0 !==
					(this.G & 33554432)
			},
			set: function(a) {
				var b = 0 !== (this.G & 33554432);
				b !== a && (this.G ^= 33554432, this.o(), this.g("isOpposite", b, a))
			}
		},
		isEnabled: {
			get: function() {
				return 0 !== (this.G & 4194304)
			},
			set: function(a) {
				var b = 0 !== (this.G & 4194304);
				if(b !== a) {
					var c = null === this.panel || this.panel.pg();
					this.G ^= 4194304;
					this.g("isEnabled", b, a);
					b = this.diagram;
					null !== b && b.undoManager.isUndoingRedoing || c && Vm(this, this, a)
				}
			}
		},
		alignmentFocusName: {
			get: function() {
				return this.vg
			},
			set: function(a) {
				var b = this.vg;
				b !== a && (this.vg = a, this.o(), this.g("alignmentFocusName", b, a))
			}
		}
	});
	oa.Object.defineProperties(Y, {
		Position: {
			get: function() {
				return Cl.J("Position")
			}
		},
		Horizontal: {
			get: function() {
				return Cl.J("Horizontal")
			}
		},
		Vertical: {
			get: function() {
				return Cl.J("Vertical")
			}
		},
		Spot: {
			get: function() {
				return Cl.J("Spot")
			}
		},
		Auto: {
			get: function() {
				return Cl.J("Auto")
			}
		},
		Table: {
			get: function() {
				return Cl.J("Table")
			}
		},
		Viewbox: {
			get: function() {
				return Cl.J("Viewbox")
			}
		},
		TableRow: {
			get: function() {
				return Cl.J("TableRow")
			}
		},
		TableColumn: {
			get: function() {
				return Cl.J("TableColumn")
			}
		},
		Link: {
			get: function() {
				return Cl.J("Link")
			}
		},
		Grid: {
			get: function() {
				return Cl.J("Grid")
			}
		},
		Graduated: {
			get: function() {
				return Cl.J("Graduated")
			}
		}
	});
	Y.prototype.findItemPanelForData = Y.prototype.hx;
	Y.prototype.rebuildItemElements = Y.prototype.it;
	Y.prototype.updateTargetBindings = Y.prototype.Da;
	Y.prototype.copyTemplate = Y.prototype.sy;
	Y.prototype.graduatedValueForPoint = Y.prototype.bz;
	Y.prototype.graduatedPointForValue = Y.prototype.az;
	Y.prototype.findColumnForLocalX = Y.prototype.Ey;
	Y.prototype.findRowForLocalY = Y.prototype.Ly;
	Y.prototype.removeColumnDefinition = Y.prototype.pv;
	Y.prototype.getColumnDefinition = Y.prototype.Tb;
	Y.prototype.removeRowDefinition = Y.prototype.sv;
	Y.prototype.getRowDefinition = Y.prototype.Ub;
	Y.prototype.removeAt = Y.prototype.qb;
	Y.prototype.remove = Y.prototype.remove;
	Y.prototype.insertAt = Y.prototype.Nb;
	Y.prototype.elt = Y.prototype.N;
	Y.prototype.add = Y.prototype.add;
	Y.prototype.findObject = Y.prototype.Ya;
	Y.prototype.findInVisualTree = Y.prototype.Tl;
	Y.prototype.walkVisualTreeFrom = Y.prototype.qm;
	Y.prototype.findMainElement = Y.prototype.Db;
	var $m = !1,
		an = null,
		Cl = new Nb;
	Y.className = "Panel";
	Y.definePanelLayout = dn;
	dn("Position", new km);
	dn("Vertical", new nm);
	dn("Auto", new pm);
	dn("Link", new zm);
	dn("Grid", new ym);

	function Kj() {
		rb(this);
		this.ag = null;
		this.xr = !0;
		this.Qa = 0;
		this.Rc = NaN;
		this.Ug = 0;
		this.Tg = Infinity;
		this.zb = Hd;
		this.ra = this.la = 0;
		this.gb = null;
		this.ip = en;
		this.te = Lk;
		this.ep = this.dg = null;
		this.fp = NaN;
		this.kb = this.Aj = null;
		this.Zm = !1
	}
	Kj.prototype.copy = function() {
		var a = new Kj;
		a.xr = this.xr;
		a.Qa = this.Qa;
		a.Rc = this.Rc;
		a.Ug = this.Ug;
		a.Tg = this.Tg;
		a.zb = this.zb;
		a.la = this.la;
		a.ra = this.ra;
		a.te = this.te;
		a.ip = this.ip;
		null === this.dg ? a.dg = null : a.dg = this.dg.I();
		a.ep = this.ep;
		a.fp = this.fp;
		a.Aj = null;
		null !== this.Aj && (a.separatorDashArray = Ha(this.separatorDashArray));
		a.kb = this.kb;
		a.Zm = this.Zm;
		a.gb = this.gb;
		return a
	};
	t = Kj.prototype;
	t.Ql = function(a) {
		a.isRow ? this.height = a.height : this.width = a.width;
		this.minimum = a.minimum;
		this.maximum = a.maximum;
		this.alignment = a.alignment;
		this.stretch = a.stretch;
		this.sizing = a.sizing;
		this.dg = null === a.separatorPadding ? null : a.separatorPadding.I();
		this.separatorStroke = a.separatorStroke;
		this.separatorStrokeWidth = a.separatorStrokeWidth;
		this.Aj = null;
		a.separatorDashArray && (this.Aj = Ha(a.separatorDashArray));
		this.background = a.background;
		this.coversSeparators = a.coversSeparators;
		this.gb = a.gb
	};
	t.ib = function(a) {
		a.classType === Kj && (this.sizing = a)
	};
	t.toString = function() {
		return "RowColumnDefinition " + (this.isRow ? "(Row " : "(Column ") + this.index + ") #" + Bb(this)
	};
	t.Ki = function(a) {
		this.ag = a
	};
	t.Eu = function() {
		var a = 0,
			b = 0,
			c = this.ag,
			d = this.isRow;
		if(null !== c)
			for(var e = d ? c.vb.length : c.sb.length, f = 0; f < e; f++) {
				var g = d ? c.vb[f] : c.sb[f];
				if(void 0 !== g) {
					b = g.index;
					break
				}
			}
		this.index !== b && (b = this.separatorStroke, null === b && null !== c && (b = this.isRow ? c.defaultRowSeparatorStroke : c.defaultColumnSeparatorStroke), null !== b && (a = this.separatorStrokeWidth, isNaN(a) && (null !== c ? a = this.isRow ? c.defaultRowSeparatorStrokeWidth : c.defaultColumnSeparatorStrokeWidth : a = 0)));
		b = this.dg;
		if(null === b)
			if(null !== c) b = c.defaultSeparatorPadding;
			else return a;
		return a + (this.isRow ? b.top : b.left)
	};
	t.vc = function() {
		var a = 0,
			b = this.ag,
			c = 0,
			d = this.isRow;
		if(null !== b)
			for(var e = d ? b.vb.length : b.sb.length, f = 0; f < e; f++) {
				var g = d ? b.vb[f] : b.sb[f];
				if(void 0 !== g) {
					c = g.index;
					break
				}
			}
		this.index !== c && (c = this.separatorStroke, null === c && null !== b && (c = d ? b.defaultRowSeparatorStroke : b.defaultColumnSeparatorStroke), null !== c && (a = this.separatorStrokeWidth, isNaN(a) && (null !== b ? a = d ? b.defaultRowSeparatorStrokeWidth : b.defaultColumnSeparatorStrokeWidth : a = 0)));
		d = this.dg;
		if(null === d)
			if(null !== b) d = b.defaultSeparatorPadding;
			else return a;
		return a + (this.isRow ? d.top + d.bottom : d.left + d.right)
	};
	t.Cb = function(a, b, c) {
		var d = this.ag;
		if(null !== d && (d.cb(Ze, a, this, b, c, void 0, void 0), null !== this.gb && (b = d.diagram, null !== b && !b.skipsModelSourceBindings && (d = d.qh(), null !== d && (b = d.data, null !== b)))))
			for(c = this.gb.iterator; c.next();) c.value.rq(this, b, a, d)
	};

	function tm(a) {
		if(a.sizing === en) {
			var b = a.ag;
			return a.isRow ? b.rowSizing : b.columnSizing
		}
		return a.sizing
	}
	t.bind = function(a) {
		a.Sd = this;
		var b = this.panel;
		if(null !== b) {
			var c = b.qh();
			null !== c && yl(c) && A("Cannot add a Binding to a RowColumnDefinition that is already frozen: " + a + " on " + b)
		}
		null === this.gb && (this.gb = new E);
		this.gb.add(a)
	};
	oa.Object.defineProperties(Kj.prototype, {
		panel: {
			get: function() {
				return this.ag
			}
		},
		isRow: {
			get: function() {
				return this.xr
			},
			set: function(a) {
				this.xr = a
			}
		},
		index: {
			get: function() {
				return this.Qa
			},
			set: function(a) {
				this.Qa = a
			}
		},
		height: {
			get: function() {
				return this.Rc
			},
			set: function(a) {
				var b = this.Rc;
				b !== a && (0 > a && Aa(a, ">= 0", Kj, "height"), this.Rc = a, this.actual = this.la, null !== this.panel && this.panel.o(),
					this.Cb("height", b, a))
			}
		},
		width: {
			get: function() {
				return this.Rc
			},
			set: function(a) {
				var b = this.Rc;
				b !== a && (0 > a && Aa(a, ">= 0", Kj, "width"), this.Rc = a, this.actual = this.la, null !== this.panel && this.panel.o(), this.Cb("width", b, a))
			}
		},
		minimum: {
			get: function() {
				return this.Ug
			},
			set: function(a) {
				var b = this.Ug;
				b !== a && ((0 > a || !isFinite(a)) && Aa(a, ">= 0", Kj, "minimum"), this.Ug = a, this.actual = this.la, null !== this.panel && this.panel.o(), this.Cb("minimum", b, a))
			}
		},
		maximum: {
			get: function() {
				return this.Tg
			},
			set: function(a) {
				var b = this.Tg;
				b !== a && (0 > a && Aa(a, ">= 0", Kj, "maximum"), this.Tg = a, this.actual = this.la, null !== this.panel && this.panel.o(), this.Cb("maximum", b, a))
			}
		},
		alignment: {
			get: function() {
				return this.zb
			},
			set: function(a) {
				var b = this.zb;
				b.A(a) || (this.zb = a.I(), null !== this.panel && this.panel.o(), this.Cb("alignment", b, a))
			}
		},
		stretch: {
			get: function() {
				return this.te
			},
			set: function(a) {
				var b = this.te;
				b !== a && (this.te =
					a, null !== this.panel && this.panel.o(), this.Cb("stretch", b, a))
			}
		},
		separatorPadding: {
			get: function() {
				return this.dg
			},
			set: function(a) {
				"number" === typeof a && (a = new Pc(a));
				var b = this.dg;
				null !== a && null !== b && b.A(a) || (null !== a && (a = a.I()), this.dg = a, null !== this.panel && this.panel.o(), this.Cb("separatorPadding", b, a))
			}
		},
		separatorStroke: {
			get: function() {
				return this.ep
			},
			set: function(a) {
				var b = this.ep;
				b !== a && (null === a || "string" === typeof a || a instanceof jl) && (a instanceof jl && a.freeze(), this.ep = a, null !== this.panel && this.panel.o(), this.Cb("separatorStroke", b, a))
			}
		},
		separatorStrokeWidth: {
			get: function() {
				return this.fp
			},
			set: function(a) {
				var b = this.fp;
				b !== a && (this.fp = a, null !== this.panel && this.panel.o(), this.Cb("separatorStrokeWidth", b, a))
			}
		},
		separatorDashArray: {
			get: function() {
				return this.Aj
			},
			set: function(a) {
				var b = this.Aj;
				if(b !== a) {
					if(null !== a) {
						for(var c = a.length, d = 0, e = 0; e < c; e++) {
							var f = a[e];
							"number" === typeof f && 0 <=
								f && isFinite(f) || A("separatorDashArray value " + f + " at index " + e + " must be a positive number or zero.");
							d += f
						}
						if(0 === d) {
							if(null === b) return;
							a = null
						}
					}
					this.Aj = a;
					null !== this.panel && this.panel.R();
					this.Cb("separatorDashArray", b, a)
				}
			}
		},
		background: {
			get: function() {
				return this.kb
			},
			set: function(a) {
				var b = this.kb;
				b !== a && (null === a || "string" === typeof a || a instanceof jl) && (a instanceof jl && a.freeze(), this.kb = a, null !== this.panel && this.panel.R(), this.Cb("background", b, a))
			}
		},
		coversSeparators: {
			get: function() {
				return this.Zm
			},
			set: function(a) {
				var b = this.Zm;
				b !== a && (this.Zm = a, null !== this.panel && this.panel.R(), this.Cb("coversSeparators", b, a))
			}
		},
		sizing: {
			get: function() {
				return this.ip
			},
			set: function(a) {
				var b = this.ip;
				b !== a && (this.ip = a, null !== this.panel && this.panel.o(), this.Cb("sizing", b, a))
			}
		},
		actual: {
			get: function() {
				return this.la
			},
			set: function(a) {
				this.la = isNaN(this.Rc) ? Math.max(Math.min(this.Tg, a), this.Ug) : Math.max(Math.min(this.Tg,
					this.Rc), this.Ug)
			}
		},
		total: {
			get: function() {
				return this.la + this.vc()
			},
			set: function(a) {
				this.la = isNaN(this.Rc) ? Math.max(Math.min(this.Tg, a), this.Ug) : Math.max(Math.min(this.Tg, this.Rc), this.Ug);
				this.la = Math.max(0, this.la - this.vc())
			}
		},
		position: {
			get: function() {
				return this.ra
			},
			set: function(a) {
				this.ra = a
			}
		}
	});
	Kj.prototype.bind = Kj.prototype.bind;
	Kj.prototype.computeEffectiveSpacing = Kj.prototype.vc;
	Kj.prototype.computeEffectiveSpacingTop = Kj.prototype.Eu;
	var en = new D(Kj, "Default", 0),
		um = new D(Kj, "None", 1),
		Km = new D(Kj, "ProportionalExtra", 2);
	Kj.className = "RowColumnDefinition";
	Kj.Default = en;
	Kj.None = um;
	Kj.ProportionalExtra = Km;

	function qg() {
		P.call(this);
		this.Rd = this.pa = null;
		this.Nk = "None";
		this.yn = Lk;
		this.Hc = this.Ok = "black";
		this.bh = 1;
		this.Al = "butt";
		this.Dl = "miter";
		this.Cj = 10;
		this.Bl = null;
		this.Cl = 0;
		this.cf = this.bf = Hd;
		this.Eo = this.Do = NaN;
		this.In = !1;
		this.Go = null;
		this.Qk = this.Jl = "None";
		this.Ed = 1;
		this.Dd = 0;
		this.Bd = 1;
		this.Cd = null
	}
	na(qg, P);
	qg.prototype.cloneProtected = function(a) {
		P.prototype.cloneProtected.call(this, a);
		a.pa = this.pa;
		a.Nk = this.Nk;
		a.yn = this.yn;
		a.Rd = this.Rd;
		a.Ok = this.Ok;
		a.Hc = this.Hc;
		a.bh = this.bh;
		a.Al = this.Al;
		a.Dl = this.Dl;
		a.Cj = this.Cj;
		null !== this.Bl && (a.Bl = Ha(this.Bl));
		a.Cl = this.Cl;
		a.bf = this.bf.I();
		a.cf = this.cf.I();
		a.Do = this.Do;
		a.Eo = this.Eo;
		a.In = this.In;
		a.Go = this.Go;
		a.Jl = this.Jl;
		a.Qk = this.Qk;
		a.Ed = this.Ed;
		a.Dd = this.Dd;
		a.Bd = this.Bd;
		a.Cd = this.Cd
	};
	t = qg.prototype;
	t.ib = function(a) {
		a === dh || a === fh || a === Ok || a === Lk ? this.geometryStretch = a : P.prototype.ib.call(this, a)
	};
	t.toString = function() {
		return "Shape(" + ("None" !== this.figure ? this.figure : "None" !== this.toArrow ? this.toArrow : this.fromArrow) + ")#" + Bb(this)
	};

	function fn(a, b, c, d) {
		var e = c.length;
		if(!(4 > e)) {
			var f = d.measuredBounds,
				g = Math.max(1, f.width);
			f = f.height;
			for(var h = c[0], k = c[1], l, m, n, p, q, r, u = 0, v = La(), x = 2; x < e; x += 2) l = c[x], m = c[x + 1], n = l - h, h = m - k, 0 === n && (n = .001), p = h / n, q = Math.atan2(h, n), r = Math.sqrt(n * n + h * h), v.push([n, q, p, r]), u += r, h = l, k = m;
			h = c[0];
			k = c[1];
			n = d.measuredBounds.width;
			d instanceof qg && (n -= d.strokeWidth);
			1 > n && (n = 1);
			e = c = n;
			l = g / 2;
			m = 0 === l ? !1 : !0;
			x = 0;
			r = v[x];
			n = r[0];
			q = r[1];
			p = r[2];
			r = r[3];
			for(var y = 0; .1 <= u;) {
				0 === y && (m ? (e = c, e -= l, u -= l, m = !1) : e = c, 0 === e && (e = 1));
				if(e > u) {
					Na(v);
					return
				}
				e > r ? (y = e - r, e = r) : y = 0;
				var z = Math.sqrt(e * e / (1 + p * p));
				0 > n && (z = -z);
				h += z;
				k += p * z;
				a.translate(h, k);
				a.rotate(q);
				a.translate(-(g / 2), -(f / 2));
				0 === y && d.xi(a, b);
				a.translate(g / 2, f / 2);
				a.rotate(-q);
				a.translate(-h, -k);
				u -= e;
				r -= e;
				if(0 !== y) {
					x++;
					if(x === v.length) {
						Na(v);
						return
					}
					r = v[x];
					n = r[0];
					q = r[1];
					p = r[2];
					r = r[3];
					e = y
				}
			}
			Na(v)
		}
	}
	t.xi = function(a, b) {
		var c = this.Hc,
			d = this.Ok;
		if(null !== c || null !== d) {
			var e = this.actualBounds,
				f = this.naturalBounds;
			null !== d && ii(this, a, d, !0, !1, f, e);
			null !== c && ii(this, a, c, !1, !1, f, e);
			e = this.part;
			f = this.bh;
			0 === f && null !== e && (f = e instanceof pf && e.type === Y.Link && "Selection" === e.category && e.adornedObject instanceof qg && e.adornedPart.Db() === e.adornedObject ? e.adornedObject.strokeWidth : 0);
			a.lineWidth = f;
			a.lineJoin = this.Dl;
			a.lineCap = this.Al;
			a.miterLimit = this.Cj;
			var g = !1;
			e && b.Ce("drawShadows") && (g = e.isShadowed);
			var h = !0;
			null !== c && null === d && (h = !1);
			e = !1;
			var k = this.strokeDashArray;
			null !== k && (e = !0, a.Ms(k, this.Cl));
			var l = this.pa;
			if(null !== l) {
				if(l.type === he) a.beginPath(), a.moveTo(l.startX, l.startY), a.lineTo(l.endX, l.endY), null !== d && a.Vd(d), 0 !== f && null !== c && a.Ni();
				else if(l.type === le) {
					var m = l.startX,
						n = l.startY,
						p = l.endX,
						q = l.endY;
					k = Math.min(m, p);
					l = Math.min(n, q);
					m = Math.abs(p - m);
					n = Math.abs(q - n);
					null !== d && (a.beginPath(), a.rect(k, l, m, n), a.Vd(d));
					null !== c && (p = d = c = 0, h && g && (c = a.shadowOffsetX, d = a.shadowOffsetY, p = a.shadowBlur,
						a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), 0 !== f && (a.beginPath(), a.rect(k, l, m, n), a.Ni()), h && g && (a.shadowOffsetX = c, a.shadowOffsetY = d, a.shadowBlur = p))
				} else if(l.type === me) n = l.startX, k = l.startY, p = l.endX, q = l.endY, l = Math.abs(p - n) / 2, m = Math.abs(q - k) / 2, n = Math.min(n, p) + l, k = Math.min(k, q) + m, a.beginPath(), a.moveTo(n, k - m), a.bezierCurveTo(n + H.ug * l, k - m, n + l, k - H.ug * m, n + l, k), a.bezierCurveTo(n + l, k + H.ug * m, n + H.ug * l, k + m, n, k + m), a.bezierCurveTo(n - H.ug * l, k + m, n - l, k + H.ug * m, n - l, k), a.bezierCurveTo(n - l, k - H.ug * m, n - H.ug *
					l, k - m, n, k - m), a.closePath(), null !== d && a.Vd(d), 0 !== f && null !== c && (h && g ? (f = a.shadowOffsetX, g = a.shadowOffsetY, c = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0, a.Ni(), a.shadowOffsetX = f, a.shadowOffsetY = g, a.shadowBlur = c) : a.Ni());
				else if(l.type === fe)
					for(k = l.figures, l = k.length, m = 0; m < l; m++) {
						n = k.j[m];
						a.beginPath();
						a.moveTo(n.startX, n.startY);
						p = n.segments.j;
						q = p.length;
						for(var r = null, u = 0; u < q; u++) {
							var v = p[u];
							switch(v.type) {
								case Be:
									a.moveTo(v.endX, v.endY);
									break;
								case je:
									a.lineTo(v.endX, v.endY);
									break;
								case Ce:
									a.bezierCurveTo(v.point1X, v.point1Y, v.point2X, v.point2Y, v.endX, v.endY);
									break;
								case De:
									a.quadraticCurveTo(v.point1X, v.point1Y, v.endX, v.endY);
									break;
								case Ee:
									if(v.radiusX === v.radiusY) {
										var x = Math.PI / 180;
										a.arc(v.point1X, v.point1Y, v.radiusX, v.startAngle * x, (v.startAngle + v.sweepAngle) * x, 0 > v.sweepAngle, null !== r ? r.endX : n.startX, null !== r ? r.endY : n.startY)
									} else if(r = Ge(v, n), x = r.length, 0 === x) a.lineTo(v.centerX, v.centerY);
									else
										for(var y = 0; y < x; y++) {
											var z = r[y];
											0 === y && a.lineTo(z[0], z[1]);
											a.bezierCurveTo(z[2],
												z[3], z[4], z[5], z[6], z[7])
										}
									break;
								case Fe:
									y = x = 0;
									if(null !== r && r.type === Ee) {
										r = Ge(r, n);
										z = r.length;
										if(0 === z) {
											a.lineTo(v.centerX, v.centerY);
											break
										}
										r = r[z - 1] || null;
										null !== r && (x = r[6], y = r[7])
									} else x = null !== r ? r.endX : n.startX, y = null !== r ? r.endY : n.startY;
									r = Oe(v, n, x, y);
									x = r.length;
									if(0 === x) {
										a.lineTo(v.centerX, v.centerY);
										break
									}
									for(y = 0; y < x; y++) z = r[y], a.bezierCurveTo(z[2], z[3], z[4], z[5], z[6], z[7]);
									break;
								default:
									A("Segment not of valid type: " + v.type)
							}
							v.isClosed && a.closePath();
							r = v
						}
						g ? (u = q = p = 0, n.isShadowed ? (!0 === n.isFilled &&
							null !== d ? (a.Vd(d), h = !0) : h = !1, 0 !== f && null !== c && (h && (p = a.shadowOffsetX, q = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), a.Ni(), h && (a.shadowOffsetX = p, a.shadowOffsetY = q, a.shadowBlur = u))) : (h && (p = a.shadowOffsetX, q = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), !0 === n.isFilled && null !== d && a.Vd(d), 0 !== f && null !== c && a.Ni(), h && (a.shadowOffsetX = p, a.shadowOffsetY = q, a.shadowBlur = u))) : (!0 === n.isFilled && null !== d && a.Vd(d), 0 !== f && null !== c && a.Ni())
					}
				e &&
					a.Js();
				if(null !== this.pathPattern) {
					e = this.pathPattern;
					e.measure(Infinity, Infinity);
					f = e.measuredBounds;
					e.arrange(0, 0, f.width, f.height);
					g = this.geometry;
					a.save();
					a.beginPath();
					f = La();
					if(g.type === he) f.push(g.startX), f.push(g.startY), f.push(g.endX), f.push(g.endY), fn(a, b, f, e);
					else if(g.type === fe)
						for(g = g.figures.iterator; g.next();) {
							c = g.value;
							f.length = 0;
							f.push(c.startX);
							f.push(c.startY);
							d = c.startX;
							h = c.startY;
							k = d;
							l = h;
							m = c.segments.j;
							n = m.length;
							for(p = 0; p < n; p++) {
								q = m[p];
								switch(q.type) {
									case Be:
										fn(a, b, f, e);
										f.length =
											0;
										f.push(q.endX);
										f.push(q.endY);
										d = q.endX;
										h = q.endY;
										k = d;
										l = h;
										break;
									case je:
										f.push(q.endX);
										f.push(q.endY);
										d = q.endX;
										h = q.endY;
										break;
									case Ce:
										H.ye(d, h, q.point1X, q.point1Y, q.point2X, q.point2Y, q.endX, q.endY, .5, f);
										d = q.endX;
										h = q.endY;
										break;
									case De:
										H.aq(d, h, q.point1X, q.point1Y, q.endX, q.endY, .5, f);
										d = q.endX;
										h = q.endY;
										break;
									case Ee:
										u = Ge(q, c);
										v = u.length;
										if(0 === v) {
											f.push(q.centerX);
											f.push(q.centerY);
											d = q.centerX;
											h = q.centerY;
											break
										}
										for(r = 0; r < v; r++) x = u[r], H.ye(d, h, x[2], x[3], x[4], x[5], x[6], x[7], .5, f), d = x[6], h = x[7];
										break;
									case Fe:
										u = Oe(q, c, d, h);
										v = u.length;
										if(0 === v) {
											f.push(q.centerX);
											f.push(q.centerY);
											d = q.centerX;
											h = q.centerY;
											break
										}
										for(r = 0; r < v; r++) x = u[r], H.ye(d, h, x[2], x[3], x[4], x[5], x[6], x[7], .5, f), d = x[6], h = x[7];
										break;
									default:
										A("Segment not of valid type: " + q.type)
								}
								q.isClosed && (f.push(k), f.push(l), fn(a, b, f, e))
							}
							fn(a, b, f, e)
						} else if(g.type === le) f.push(g.startX), f.push(g.startY), f.push(g.endX), f.push(g.startY), f.push(g.endX), f.push(g.endY), f.push(g.startX), f.push(g.endY), f.push(g.startX), f.push(g.startY), fn(a, b, f, e);
						else if(g.type ===
						me) {
						h = new Se;
						h.startX = g.endX;
						h.startY = (g.startY + g.endY) / 2;
						d = new Te(Ee);
						d.startAngle = 0;
						d.sweepAngle = 360;
						d.centerX = (g.startX + g.endX) / 2;
						d.centerY = (g.startY + g.endY) / 2;
						d.radiusX = Math.abs(g.startX - g.endX) / 2;
						d.radiusY = Math.abs(g.startY - g.endY) / 2;
						h.add(d);
						g = Ge(d, h);
						c = g.length;
						if(0 === c) f.push(d.centerX), f.push(d.centerY);
						else
							for(d = h.startX, h = h.startY, k = 0; k < c; k++) l = g[k], H.ye(d, h, l[2], l[3], l[4], l[5], l[6], l[7], .5, f), d = l[6], h = l[7];
						fn(a, b, f, e)
					}
					Na(f);
					a.restore();
					a.Tc(!1)
				}
			}
		}
	};
	t.ka = function(a, b) {
		void 0 === b && (b = new G);
		if(a instanceof N) {
			a.mc() && A("getDocumentPoint Spot must be a real, specific Spot, not: " + a.toString());
			var c = this.naturalBounds,
				d = this.strokeWidth;
			b.h(a.x * (c.width + d) - d / 2 + c.x + a.offsetX, a.y * (c.height + d) - d / 2 + c.y + a.offsetY)
		} else b.set(a);
		this.Ud.ta(b);
		return b
	};
	t.ph = function(a, b) {
		var c = this.geometry;
		if(null === c || null === this.fill && null === this.stroke) return !1;
		var d = c.bounds,
			e = this.strokeWidth / 2;
		c.type !== he || b || (e += 2);
		var f = M.alloc();
		f.assign(d);
		f.gd(e + 2, e + 2);
		if(!f.ea(a)) return M.free(f), !1;
		d = e + 1E-4;
		if(c.type === he) {
			if(null === this.stroke) return !1;
			d = (c.endX - c.startX) * (a.x - c.startX) + (c.endY - c.startY) * (a.y - c.startY);
			if(0 > (c.startX - c.endX) * (a.x - c.endX) + (c.startY - c.endY) * (a.y - c.endY) || 0 > d) return !1;
			M.free(f);
			return H.Vb(c.startX, c.startY, c.endX, c.endY, e, a.x, a.y)
		}
		if(c.type ===
			le) {
			b = c.startX;
			var g = c.startY,
				h = c.endX;
			c = c.endY;
			f.x = Math.min(b, h);
			f.y = Math.min(g, c);
			f.width = Math.abs(h - b);
			f.height = Math.abs(c - g);
			if(null === this.fill) {
				f.gd(-d, -d);
				if(f.ea(a)) return M.free(f), !1;
				f.gd(d, d)
			}
			null !== this.stroke && f.gd(e, e);
			a = f.ea(a);
			M.free(f);
			return a
		}
		if(c.type === me) {
			g = c.startX;
			e = c.startY;
			h = c.endX;
			var k = c.endY;
			c = Math.min(g, h);
			b = Math.min(e, k);
			g = Math.abs(h - g) / 2;
			e = Math.abs(k - e) / 2;
			c = a.x - (c + g);
			b = a.y - (b + e);
			if(null === this.fill) {
				g -= d;
				e -= d;
				if(0 >= g || 0 >= e || 1 >= c * c / (g * g) + b * b / (e * e)) return M.free(f), !1;
				g += d;
				e += d
			}
			null !== this.stroke && (g += d, e += d);
			M.free(f);
			return 0 >= g || 0 >= e ? !1 : 1 >= c * c / (g * g) + b * b / (e * e)
		}
		if(c.type === fe) return M.free(f), null === this.fill ? Qe(c, a.x, a.y, e) : c.ea(a, e, 1 < this.strokeWidth, b);
		A("Unknown Geometry type: " + c.type);
		return !1
	};
	t.cm = function(a, b, c, d) {
		var e = this.desiredSize,
			f = this.bh;
		a = Math.max(a, 0);
		b = Math.max(b, 0);
		if(null !== this.Rd) var g = this.geometry.bounds;
		else {
			var h = this.figure,
				k = gn[h];
			if(void 0 === k) {
				var l = H.Ke[h];
				"string" === typeof l && (l = H.Ke[l]);
				"function" === typeof l ? (k = l(null, 100, 100), gn[h] = k) : A("Unsupported Figure: " + h)
			}
			g = k.bounds
		}
		h = g.width;
		k = g.height;
		l = g.width;
		var m = g.height;
		switch(al(this, !0)) {
			case dh:
				d = c = 0;
				break;
			case ge:
				l = Math.max(a - f, 0);
				m = Math.max(b - f, 0);
				break;
			case Mk:
				l = Math.max(a - f, 0);
				d = 0;
				break;
			case Nk:
				c = 0, m =
					Math.max(b - f, 0)
		}
		isFinite(e.width) && (l = e.width);
		isFinite(e.height) && (m = e.height);
		e = this.maxSize;
		g = this.minSize;
		c = Math.max(c - f, g.width);
		d = Math.max(d - f, g.height);
		l = Math.min(e.width, l);
		m = Math.min(e.height, m);
		l = isFinite(l) ? Math.max(c, l) : Math.max(h, c);
		m = isFinite(m) ? Math.max(d, m) : Math.max(k, d);
		c = eh(this);
		switch(c) {
			case dh:
				break;
			case ge:
				h = l;
				k = m;
				break;
			case fh:
				c = Math.min(l / h, m / k);
				isFinite(c) || (c = 1);
				h *= c;
				k *= c;
				break;
			default:
				A(c + " is not a valid geometryStretch.")
		}
		null !== this.Rd ? (h = Math.max(h, .01), k = Math.max(k,
			.01), g = null !== this.Rd ? this.Rd : this.pa, e = h, d = k, c = g.copy(), g = g.bounds, e /= g.width, d /= g.height, isFinite(e) || (e = 1), isFinite(d) || (d = 1), 1 === e && 1 === d || c.scale(e, d), this.pa = c) : null !== this.pa && H.ba(this.pa.Xk, a - f) && H.ba(this.pa.Vk, b - f) || (this.pa = qg.makeGeometry(this, h, k));
		g = this.pa.bounds;
		Infinity === a || Infinity === b ? Yk(this, g.x - f / 2, g.y - f / 2, 0 === a && 0 === h ? 0 : g.width + f, 0 === b && 0 === k ? 0 : g.height + f) : Yk(this, -(f / 2), -(f / 2), l + f, m + f)
	};

	function eh(a) {
		var b = a.geometryStretch;
		return null !== a.Rd ? b === Lk ? ge : b : b === Lk ? gn[a.figure].defaultStretch : b
	}
	t.nh = function(a, b, c, d) {
		cl(this, a, b, c, d)
	};
	t.Vc = function(a, b, c) {
		return this.Wj(a.x, a.y, b.x, b.y, c)
	};
	t.Wj = function(a, b, c, d, e) {
		var f = this.transform,
			g = 1 / (f.m11 * f.m22 - f.m12 * f.m21),
			h = f.m22 * g,
			k = -f.m12 * g,
			l = -f.m21 * g,
			m = f.m11 * g,
			n = g * (f.m21 * f.dy - f.m22 * f.dx),
			p = g * (f.m12 * f.dx - f.m11 * f.dy);
		f = a * h + b * l + n;
		g = a * k + b * m + p;
		h = c * h + d * l + n;
		k = c * k + d * m + p;
		n = this.bh / 2;
		l = this.pa;
		null === l && (this.measure(Infinity, Infinity), l = this.pa);
		p = l.bounds;
		m = !1;
		if(l.type === he)
			if(1.5 >= this.strokeWidth) m = H.Fe(l.startX, l.startY, l.endX, l.endY, f, g, h, k, e);
			else {
				l.startX === l.endX ? (d = n, m = 0) : (b = (l.endY - l.startY) / (l.endX - l.startX), m = n / Math.sqrt(1 + b * b), d = m *
					b);
				b = La();
				a = new G;
				H.Fe(l.startX + d, l.startY + m, l.endX + d, l.endY + m, f, g, h, k, a) && b.push(a);
				a = new G;
				H.Fe(l.startX - d, l.startY - m, l.endX - d, l.endY - m, f, g, h, k, a) && b.push(a);
				a = new G;
				H.Fe(l.startX + d, l.startY + m, l.startX - d, l.startY - m, f, g, h, k, a) && b.push(a);
				a = new G;
				H.Fe(l.endX + d, l.endY + m, l.endX - d, l.endY - m, f, g, h, k, a) && b.push(a);
				h = b.length;
				if(0 === h) return Na(b), !1;
				m = !0;
				k = Infinity;
				for(d = 0; d < h; d++) a = b[d], c = (a.x - f) * (a.x - f) + (a.y - g) * (a.y - g), c < k && (k = c, e.x = a.x, e.y = a.y);
				Na(b)
			}
		else if(l.type === le) m = H.Vc(p.x - n, p.y - n, p.x + p.width +
			n, p.y + p.height + n, f, g, h, k, e);
		else if(l.type === me) {
			b = M.allocAt(p.x, p.y, p.width, p.height).gd(n, n);
			a: if(0 === b.width) m = H.Fe(b.x, b.y, b.x, b.y + b.height, f, g, h, k, e);
				else
			if(0 === b.height) m = H.Fe(b.x, b.y, b.x + b.width, b.y, f, g, h, k, e);
			else {
				a = b.width / 2;
				l = b.height / 2;
				d = b.x + a;
				m = b.y + l;
				c = 9999;
				f !== h && (c = (g - k) / (f - h));
				if(9999 > Math.abs(c)) {
					k = g - m - c * (f - d);
					if(0 > a * a * c * c + l * l - k * k) {
						e.x = NaN;
						e.y = NaN;
						m = !1;
						break a
					}
					n = Math.sqrt(a * a * c * c + l * l - k * k);
					h = (-(a * a * c * k) + a * l * n) / (l * l + a * a * c * c) + d;
					a = (-(a * a * c * k) - a * l * n) / (l * l + a * a * c * c) + d;
					l = c * (h - d) + k + m;
					k = c *
						(a - d) + k + m;
					Math.abs((f - h) * (f - h)) + Math.abs((g - l) * (g - l)) < Math.abs((f - a) * (f - a)) + Math.abs((g - k) * (g - k)) ? (e.x = h, e.y = l) : (e.x = a, e.y = k)
				} else {
					h = l * l;
					k = f - d;
					h -= h / (a * a) * k * k;
					if(0 > h) {
						e.x = NaN;
						e.y = NaN;
						m = !1;
						break a
					}
					k = Math.sqrt(h);
					h = m + k;
					k = m - k;
					Math.abs(h - g) < Math.abs(k - g) ? (e.x = f, e.y = h) : (e.x = f, e.y = k)
				}
				m = !0
			}
			M.free(b)
		} else if(l.type === fe) {
			p = G.alloc();
			var q = h - f;
			var r = k - g;
			var u = q * q + r * r;
			e.x = h;
			e.y = k;
			for(var v = 0; v < l.figures.count; v++) {
				var x = l.figures.j[v],
					y = x.segments;
				q = x.startX;
				r = x.startY;
				for(var z = q, B = r, C = 0; C < y.count; C++) {
					var I =
						y.j[C],
						J = I.type;
					var K = I.endX;
					var X = I.endY;
					var R = !1;
					switch(J) {
						case Be:
							z = K;
							B = X;
							break;
						case je:
							R = hn(q, r, K, X, f, g, h, k, p);
							break;
						case Ce:
							R = H.Gp(q, r, I.point1X, I.point1Y, I.point2X, I.point2Y, K, X, f, g, h, k, .6, p);
							break;
						case De:
							R = H.Gp(q, r, (q + 2 * I.point1X) / 3, (r + 2 * I.point1Y) / 3, (2 * I.point1X + K) / 3, (2 * I.point1X + K) / 3, K, X, f, g, h, k, .6, p);
							break;
						case Ee:
						case Fe:
							J = I.type === Ee ? Ge(I, x) : Oe(I, x, q, r);
							var la = J.length;
							if(0 === la) {
								R = hn(q, r, I.centerX, I.centerY, f, g, h, k, p);
								break
							}
							X = null;
							for(K = 0; K < la; K++) {
								X = J[K];
								if(0 === K && hn(q, r, X[0], X[1],
										f, g, h, k, p)) {
									var qa = jn(f, g, p, u, e);
									qa < u && (u = qa, m = !0)
								}
								H.Gp(X[0], X[1], X[2], X[3], X[4], X[5], X[6], X[7], f, g, h, k, .6, p) && (qa = jn(f, g, p, u, e), qa < u && (u = qa, m = !0))
							}
							K = X[6];
							X = X[7];
							break;
						default:
							A("Unknown Segment type: " + J)
					}
					q = K;
					r = X;
					R && (R = jn(f, g, p, u, e), R < u && (u = R, m = !0));
					I.isClosed && (K = z, X = B, hn(q, r, K, X, f, g, h, k, p) && (I = jn(f, g, p, u, e), I < u && (u = I, m = !0)))
				}
			}
			f = c - a;
			g = d - b;
			h = Math.sqrt(f * f + g * g);
			0 !== h && (f /= h, g /= h);
			e.x -= f * n;
			e.y -= g * n;
			G.free(p)
		} else A("Unknown Geometry type: " + l.type);
		if(!m) return !1;
		this.transform.ta(e);
		return !0
	};

	function jn(a, b, c, d, e) {
		a = c.x - a;
		b = c.y - b;
		b = a * a + b * b;
		return b < d ? (e.x = c.x, e.y = c.y, b) : d
	}

	function hn(a, b, c, d, e, f, g, h, k) {
		var l = !1,
			m = (e - g) * (b - d) - (f - h) * (a - c);
		if(0 === m) return !1;
		k.x = ((e * h - f * g) * (a - c) - (e - g) * (a * d - b * c)) / m;
		k.y = ((e * h - f * g) * (b - d) - (f - h) * (a * d - b * c)) / m;
		(a > c ? a - c : c - a) < (b > d ? b - d : d - b) ? (a = b < d ? b : d, b = b < d ? d : b, (k.y > a || H.ba(k.y, a)) && (k.y < b || H.ba(k.y, b)) && (l = !0)) : (b = a < c ? a : c, a = a < c ? c : a, (k.x > b || H.ba(k.x, b)) && (k.x < a || H.ba(k.x, a)) && (l = !0));
		return l
	}
	t.oh = function(a, b) {
		if(void 0 === b) return a.kf(this.actualBounds);
		var c = this.pa;
		null === c && (this.measure(Infinity, Infinity), c = this.pa);
		c = c.bounds;
		var d = this.strokeWidth / 2,
			e = !1,
			f = G.alloc();
		f.h(c.x - d, c.y - d);
		a.ea(b.ta(f)) && (f.h(c.x - d, c.bottom + d), a.ea(b.ta(f)) && (f.h(c.right + d, c.bottom + d), a.ea(b.ta(f)) && (f.h(c.right + d, c.y - d), a.ea(b.ta(f)) && (e = !0))));
		G.free(f);
		return e
	};
	t.Kc = function(a, b) {
		if(this.oh(a, b) || void 0 === b && (b = this.transform, a.kf(this.actualBounds))) return !0;
		var c = Yc.alloc();
		c.set(b);
		c.Zs();
		var d = a.left,
			e = a.right,
			f = a.top;
		a = a.bottom;
		var g = G.alloc();
		g.h(d, f);
		c.ta(g);
		if(this.ph(g, !0)) return G.free(g), !0;
		g.h(e, f);
		c.ta(g);
		if(this.ph(g, !0)) return G.free(g), !0;
		g.h(d, a);
		c.ta(g);
		if(this.ph(g, !0)) return G.free(g), !0;
		g.h(e, a);
		c.ta(g);
		if(this.ph(g, !0)) return G.free(g), !0;
		var h = G.alloc(),
			k = G.alloc();
		c.set(b);
		c.ev(this.transform);
		c.Zs();
		h.x = e;
		h.y = f;
		h.transform(c);
		g.x =
			d;
		g.y = f;
		g.transform(c);
		b = !1;
		pn(this, g, h, k) ? b = !0 : (g.x = e, g.y = a, g.transform(c), pn(this, g, h, k) ? b = !0 : (h.x = d, h.y = a, h.transform(c), pn(this, g, h, k) ? b = !0 : (g.x = d, g.y = f, g.transform(c), pn(this, g, h, k) && (b = !0))));
		G.free(g);
		Yc.free(c);
		G.free(h);
		G.free(k);
		return b
	};

	function pn(a, b, c, d) {
		if(!a.Vc(b, c, d)) return !1;
		a = b.x;
		b = b.y;
		var e = c.x,
			f = c.y;
		c = d.x;
		d = d.y;
		if(a === e) return b < f ? (a = b, b = f) : a = f, d >= a && d <= b;
		a < e ? (d = a, a = e) : d = e;
		return c >= d && c <= a
	}
	t.ix = function(a, b, c) {
		function d(a, b, c) {
			b = a.length;
			for(var d = 0; d < b; d += 2)
				if(c.ed(a[d], a[d + 1]) > e) return !0;
			return !1
		}
		if(c && null !== this.fill && this.ph(a, !0)) return !0;
		var e = a.Be(b),
			f = e;
		1.5 < this.strokeWidth && (e = this.strokeWidth / 2 + Math.sqrt(e), e *= e);
		b = this.pa;
		if(null === b && (this.measure(Infinity, Infinity), b = this.pa, null === b)) return !1;
		if(!c) {
			var g = b.bounds,
				h = g.x,
				k = g.y,
				l = g.x + g.width;
			g = g.y + g.height;
			if(Zb(a.x, a.y, h, k) <= e && Zb(a.x, a.y, l, k) <= e && Zb(a.x, a.y, h, g) <= e && Zb(a.x, a.y, l, g) <= e) return !0
		}
		h = b.startX;
		k = b.startY;
		l = b.endX;
		g = b.endY;
		if(b.type === he) {
			if(c = (h - l) * (a.x - l) + (k - g) * (a.y - g), Yb(a.x, a.y, h, k, l, g) <= (0 <= (l - h) * (a.x - h) + (g - k) * (a.y - k) && 0 <= c ? e : f)) return !0
		} else {
			if(b.type === le) return b = !1, c && (b = Yb(a.x, a.y, h, k, h, g) <= e || Yb(a.x, a.y, h, k, l, k) <= e || Yb(a.x, a.y, l, k, l, g) <= e || Yb(a.x, a.y, h, g, l, g) <= e), b;
			if(b.type === me) {
				b = a.x - (h + l) / 2;
				f = a.y - (k + g) / 2;
				var m = Math.abs(l - h) / 2,
					n = Math.abs(g - k) / 2;
				if(0 === m || 0 === n) return Yb(a.x, a.y, h, k, l, g) <= e ? !0 : !1;
				if(c) {
					if(a = H.yy(m, n, b, f), a * a <= e) return !0
				} else return Zb(b, f, -m, 0) >= e || Zb(b, f, 0, -n) >= e || Zb(b,
					f, 0, n) >= e || Zb(b, f, m, 0) >= e ? !1 : !0
			} else if(b.type === fe) {
				l = b.bounds;
				f = l.x;
				h = l.y;
				k = l.x + l.width;
				l = l.y + l.height;
				if(a.x > k && a.x < f && a.y > l && a.y < h && Yb(a.x, a.y, f, h, f, l) > e && Yb(a.x, a.y, f, h, k, h) > e && Yb(a.x, a.y, k, l, f, l) > e && Yb(a.x, a.y, k, l, k, h) > e) return !1;
				f = Math.sqrt(e);
				if(c) {
					if(null === this.fill ? Qe(b, a.x, a.y, f) : b.ea(a, f, !0)) return !0
				} else {
					c = b.figures;
					for(b = 0; b < c.count; b++) {
						f = c.j[b];
						g = f.startX;
						m = f.startY;
						if(a.ed(g, m) > e) return !1;
						h = f.segments.j;
						k = h.length;
						for(l = 0; l < k; l++) switch(n = h[l], n.type) {
							case Be:
							case je:
								g = n.endX;
								m =
									n.endY;
								if(a.ed(g, m) > e) return !1;
								break;
							case Ce:
								var p = La();
								H.ye(g, m, n.point1X, n.point1Y, n.point2X, n.point2Y, n.endX, n.endY, .8, p);
								g = d(p, e, a);
								Na(p);
								if(g) return !1;
								g = n.endX;
								m = n.endY;
								if(a.ed(g, m) > e) return !1;
								break;
							case De:
								p = La();
								H.aq(g, m, n.point1X, n.point1Y, n.endX, n.endY, .8, p);
								g = d(p, e, a);
								Na(p);
								if(g) return !1;
								g = n.endX;
								m = n.endY;
								if(a.ed(g, m) > e) return !1;
								break;
							case Ee:
							case Fe:
								p = n.type === Ee ? Ge(n, f) : Oe(n, f, g, m);
								var q = p.length;
								if(0 === q) {
									g = n.centerX;
									m = n.centerY;
									if(a.ed(g, m) > e) return !1;
									break
								}
								n = null;
								for(var r = La(), u = 0; u <
									q; u++)
									if(n = p[u], r.length = 0, H.ye(n[0], n[1], n[2], n[3], n[4], n[5], n[6], n[7], .8, r), d(r, e, a)) return Na(r), !1;
								Na(r);
								null !== n && (g = n[6], m = n[7]);
								break;
							default:
								A("Unknown Segment type: " + n.type)
						}
					}
					return !0
				}
			}
		}
		return !1
	};
	t.$b = function() {
		this.pa = null
	};

	function qn(a) {
		var b = a.diagram;
		null !== b && b.undoManager.isUndoingRedoing || (a.segmentOrientation = rn, "None" !== a.Jl ? (a.segmentIndex = -1, a.alignmentFocus = Ud) : "None" !== a.Qk && (a.segmentIndex = 0, a.alignmentFocus = new N(1 - Ud.x, Ud.y)))
	}
	qg.makeGeometry = function(a, b, c) {
		if("None" !== a.toArrow) var d = sn[a.toArrow];
		else "None" !== a.fromArrow ? d = sn[a.fromArrow] : (d = H.Ke[a.figure], "string" === typeof d && (d = H.Ke[d]), void 0 === d && A("Unknown Shape.figure: " + a.figure), d = d(a, b, c), d.Xk = b, d.Vk = c);
		if(null === d) {
			var e = H.Ke.Rectangle;
			"function" === typeof e && (d = e(a, b, c))
		}
		return d
	};

	function tn(a) {
		var b = sn[a];
		if(void 0 === b) {
			var c = a.toLowerCase();
			if("none" === c) return "None";
			b = sn[c];
			if(void 0 === b) {
				var d = null,
					e;
				for(e in H.tm)
					if(e.toLowerCase() === c) {
						d = e;
						break
					}
				if(null !== d) return a = re(H.tm[d], !1), sn[d] = a, c !== d && (sn[c] = d), d
			}
		}
		return "string" === typeof b ? b : b instanceof ee ? a : null
	}
	oa.Object.defineProperties(qg.prototype, {
		geometry: {
			get: function() {
				return null !== this.pa ? this.pa : this.Rd
			},
			set: function(a) {
				var b = this.pa;
				if(b !== a) {
					null !== a ? this.Rd = this.pa = a.freeze() : this.Rd = this.pa = null;
					var c = this.part;
					null !== c && (c.Sg = NaN);
					this.o();
					this.g("geometry", b, a);
					Vk(this) && (a = this.part, null !== a && Wk(this, a, "geometryString"))
				}
			}
		},
		geometryString: {
			get: function() {
				return null === this.geometry ? "" : this.geometry.toString()
			},
			set: function(a) {
				a =
					re(a);
				var b = a.normalize();
				this.geometry = a;
				this.position = a = G.allocAt(-b.x, -b.y);
				G.free(a)
			}
		},
		isGeometryPositioned: {
			get: function() {
				return this.In
			},
			set: function(a) {
				var b = this.In;
				b !== a && (this.In = a, this.o(), this.g("isGeometryPositioned", b, a))
			}
		},
		fill: {
			get: function() {
				return this.Ok
			},
			set: function(a) {
				var b = this.Ok;
				b !== a && (a instanceof jl && a.freeze(), this.Ok = a, this.R(), this.g("fill", b, a))
			}
		},
		stroke: {
			get: function() {
				return this.Hc
			},
			set: function(a) {
				var b = this.Hc;
				b !== a && (a instanceof jl && a.freeze(), this.Hc = a, this.R(), this.g("stroke", b, a))
			}
		},
		strokeWidth: {
			get: function() {
				return this.bh
			},
			set: function(a) {
				var b = this.bh;
				if(b !== a)
					if(0 <= a) {
						this.bh = a;
						this.o();
						var c = this.part;
						null !== c && (c.Sg = NaN);
						this.g("strokeWidth", b, a)
					} else Aa(a, "value >= 0", qg, "strokeWidth:value")
			}
		},
		strokeCap: {
			get: function() {
				return this.Al
			},
			set: function(a) {
				var b = this.Al;
				b !== a && ("string" !== typeof a || "butt" !==
					a && "round" !== a && "square" !== a ? Aa(a, '"butt", "round", or "square"', qg, "strokeCap") : (this.Al = a, this.R(), this.g("strokeCap", b, a)))
			}
		},
		strokeJoin: {
			get: function() {
				return this.Dl
			},
			set: function(a) {
				var b = this.Dl;
				b !== a && ("string" !== typeof a || "miter" !== a && "bevel" !== a && "round" !== a ? Aa(a, '"miter", "bevel", or "round"', qg, "strokeJoin") : (this.Dl = a, this.R(), this.g("strokeJoin", b, a)))
			}
		},
		strokeMiterLimit: {
			get: function() {
				return this.Cj
			},
			set: function(a) {
				var b =
					this.Cj;
				if(b !== a && 1 <= a) {
					this.Cj = a;
					this.R();
					var c = this.part;
					null !== c && (c.Sg = NaN);
					this.g("strokeMiterLimit", b, a)
				}
			}
		},
		strokeDashArray: {
			get: function() {
				return this.Bl
			},
			set: function(a) {
				var b = this.Bl;
				if(b !== a) {
					if(null !== a) {
						for(var c = a.length, d = 0, e = 0; e < c; e++) {
							var f = a[e];
							0 <= f && isFinite(f) || A("strokeDashArray:value " + f + " at index " + e + " must be a positive number or zero.");
							d += f
						}
						if(0 === d) {
							if(null === b) return;
							a = null
						}
					}
					this.Bl = a;
					this.R();
					this.g("strokeDashArray", b, a)
				}
			}
		},
		strokeDashOffset: {
			get: function() {
				return this.Cl
			},
			set: function(a) {
				var b = this.Cl;
				b !== a && 0 <= a && (this.Cl = a, this.R(), this.g("strokeDashOffset", b, a))
			}
		},
		figure: {
			get: function() {
				return this.Nk
			},
			set: function(a) {
				var b = this.Nk;
				if(b !== a) {
					var c = H.Ke[a];
					"function" === typeof c ? c = a : (c = H.Ke[a.toLowerCase()]) || A("Unknown Shape.figure: " + a);
					b !== c && (a = this.part, null !== a && (a.Sg = NaN), this.Nk = c, this.Rd = null, this.$b(), this.o(), this.g("figure", b, c))
				}
			}
		},
		toArrow: {
			get: function() {
				return this.Jl
			},
			set: function(a) {
				var b = this.Jl;
				!0 === a ? a = "Standard" : !1 === a && (a = "");
				if(b !== a) {
					var c = tn(a);
					null === c ? A("Unknown Shape.toArrow: " + a) : b !== c && (this.Jl = c, this.Rd = null, this.$b(), this.o(), qn(this), this.g("toArrow", b, c))
				}
			}
		},
		fromArrow: {
			get: function() {
				return this.Qk
			},
			set: function(a) {
				var b = this.Qk;
				!0 === a ? a = "Standard" : !1 === a && (a = "");
				if(b !== a) {
					var c = tn(a);
					null === c ? A("Unknown Shape.fromArrow: " + a) : b !== c && (this.Qk = c, this.Rd = null, this.$b(), this.o(), qn(this), this.g("fromArrow", b, c))
				}
			}
		},
		spot1: {
			get: function() {
				return this.bf
			},
			set: function(a) {
				var b = this.bf;
				b.A(a) || (this.bf = a = a.I(), this.o(), this.g("spot1", b, a))
			}
		},
		spot2: {
			get: function() {
				return this.cf
			},
			set: function(a) {
				var b = this.cf;
				b.A(a) || (this.cf = a = a.I(), this.o(), this.g("spot2", b, a))
			}
		},
		parameter1: {
			get: function() {
				return this.Do
			},
			set: function(a) {
				var b = this.Do;
				b !== a && (this.Do = a, this.$b(), this.o(), this.g("parameter1", b, a))
			}
		},
		parameter2: {
			get: function() {
				return this.Eo
			},
			set: function(a) {
				var b = this.Eo;
				b !== a && (this.Eo = a, this.$b(), this.o(), this.g("parameter2", b, a))
			}
		},
		naturalBounds: {
			get: function() {
				if(null !== this.pa) return this.hc.assign(this.pa.bounds), this.hc;
				var a = this.desiredSize;
				return new M(0, 0, a.width, a.height)
			}
		},
		pathPattern: {
			get: function() {
				return this.Go
			},
			set: function(a) {
				var b = this.Go;
				b !== a && (this.Go = a, this.R(), this.g("pathPattern", b, a))
			}
		},
		geometryStretch: {
			get: function() {
				return this.yn
			},
			set: function(a) {
				var b = this.yn;
				b !== a && (this.yn = a, this.g("geometryStretch", b, a))
			}
		},
		interval: {
			get: function() {
				return this.Ed
			},
			set: function(a) {
				var b = this.Ed;
				a = Math.floor(a);
				if(b !== a && 0 <= a) {
					this.Ed = a;
					var c = this.diagram;
					null !== c && this.panel === c.grid && fj(c);
					this.o();
					c = this.panel;
					null !== c && (c.Jg = null);
					this.g("interval", b, a)
				}
			}
		},
		graduatedStart: {
			get: function() {
				return this.Dd
			},
			set: function(a) {
				var b = this.Dd;
				b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.Dd = a, this.o(),
					this.g("graduatedStart", b, a))
			}
		},
		graduatedEnd: {
			get: function() {
				return this.Bd
			},
			set: function(a) {
				var b = this.Bd;
				b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.Bd = a, this.o(), this.g("graduatedEnd", b, a))
			}
		},
		graduatedSkip: {
			get: function() {
				return this.Cd
			},
			set: function(a) {
				var b = this.Cd;
				b !== a && (this.Cd = a, this.o(), this.g("graduatedSkip", b, a))
			}
		}
	});
	qg.prototype.intersectsRect = qg.prototype.Kc;
	qg.prototype.containedInRect = qg.prototype.oh;
	qg.prototype.getNearestIntersectionPoint = qg.prototype.Vc;
	qg.prototype.getDocumentPoint = qg.prototype.ka;
	var sn = new vb,
		gn = new vb;
	qg.className = "Shape";
	qg.getFigureGenerators = function() {
		var a = new Nb,
			b;
		for(b in H.Ke) b !== b.toLowerCase() && a.add(b, H.Ke[b]);
		a.freeze();
		return a
	};
	qg.defineFigureGenerator = function(a, b) {
		var c = a.toLowerCase(),
			d = H.Ke;
		d[a] = b;
		d[c] = a
	};
	qg.getArrowheadGeometries = function() {
		var a = new Nb;
		for(d in H.tm)
			if(void 0 === sn[d]) {
				var b = re(H.tm[d], !1);
				sn[d] = b;
				b = d.toLowerCase();
				b !== d && (sn[b] = d)
			}
		for(var c in sn)
			if(c !== c.toLowerCase()) {
				var d = sn[c];
				d instanceof ee && a.add(c, d)
			}
		a.freeze();
		return a
	};
	qg.defineArrowheadGeometry = function(a, b) {
		var c = null;
		"string" === typeof b ? c = re(b, !1) : c = b;
		b = a.toLowerCase();
		"none" !== b && a !== b || A("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: " + a);
		var d = sn;
		d[a] = c;
		d[b] = a
	};

	function wh() {
		P.call(this);
		this.Rb = "";
		this.Hc = "black";
		this.ee = "13px sans-serif";
		this.ri = "start";
		this.Ad = dh;
		this.wi = Qd;
		this.hj = !0;
		this.ai = this.bi = !1;
		this.Zf = un;
		this.jg = vn;
		this.Jr = this.rc = 0;
		this.bu = this.cu = null;
		this.rd = new Im;
		this.sn = !1;
		this.Ec = this.Pm = this.qp = this.si = this.rp = null;
		this.af = this.$e = 0;
		this.le = Infinity;
		this.bl = 0;
		this.Ed = 1;
		this.Dd = 0;
		this.Bd = 1;
		this.Cd = this.bj = null
	}
	na(wh, P);
	wh.prototype.cloneProtected = function(a) {
		P.prototype.cloneProtected.call(this, a);
		a.Rb = this.Rb;
		a.Hc = this.Hc;
		a.ee = this.ee;
		a.ri = this.ri;
		a.Ad = this.Ad;
		a.wi = this.wi;
		a.hj = this.hj;
		a.bi = this.bi;
		a.ai = this.ai;
		a.Zf = this.Zf;
		a.jg = this.jg;
		a.rc = this.rc;
		a.Jr = this.Jr;
		a.cu = this.cu;
		a.bu = this.bu;
		a.rd.Ql(this.rd);
		a.sn = this.sn;
		a.rp = this.rp;
		a.si = this.si;
		a.qp = this.qp;
		a.Pm = this.Pm;
		a.Ec = this.Ec;
		a.$e = this.$e;
		a.af = this.af;
		a.le = this.le;
		a.bl = this.bl;
		a.Ed = this.Ed;
		a.Dd = this.Dd;
		a.Bd = this.Bd;
		a.bj = this.bj;
		a.Cd = this.Cd
	};

	function Hm(a, b) {
		a.G = b.G | 6144;
		a.ob = b.opacity;
		a.kb = b.background;
		a.dc = b.areaBackground;
		a.Oc = b.desiredSize.I();
		a.Qf = b.minSize.I();
		a.Pf = b.maxSize.I();
		a.Nf = b.Nf.copy();
		a.Ca = b.scale;
		a.Bc = b.angle;
		a.te = b.stretch;
		a.Rg = b.margin.I();
		a.zb = b.alignment.I();
		a.sk = b.alignmentFocus.I();
		a.ql = b.segmentFraction;
		a.rl = b.segmentOffset.I();
		a.sl = b.segmentOrientation;
		null !== b.od && (a.od = b.od.copy());
		a.ul = b.shadowVisible;
		b instanceof wh && (a.Rb = b.Rb, a.Hc = b.Hc, a.ee = b.ee, a.ri = b.ri, a.Ad = b.Ad, a.wi = b.wi, a.hj = b.hj, a.bi = b.bi, a.ai = b.ai,
			a.Zf = b.Zf, a.jg = b.jg, a.rd.If = null, a.$e = b.$e, a.af = b.af, a.le = b.le, a.bl = b.bl, a.Ed = b.Ed, a.Dd = b.Dd, a.Bd = b.Bd, a.bj = b.bj, a.Cd = b.Cd)
	}
	t = wh.prototype;
	t.ib = function(a) {
		a.classType === wh ? this.wrap = a : P.prototype.ib.call(this, a)
	};
	t.toString = function() {
		return 22 < this.Rb.length ? 'TextBlock("' + this.Rb.substring(0, 20) + '"...)' : 'TextBlock("' + this.Rb + '")'
	};

	function wn() {
		return xn
	}

	function yn(a) {
		xn = a;
		zn = new vb;
		An = 0
	}
	t.o = function() {
		P.prototype.o.call(this);
		this.bu = this.cu = null
	};

	function Bn(a) {
		if(null === Cn) return !0;
		var b = Cn.font;
		if(a === b || "10px sans-serif" === a) return !0;
		Cn.font = "10px sans-serif";
		Cn.font = a;
		var c = Cn.font;
		if("10px sans-serif" !== c) return Cn.font = b, !0;
		Cn.font = "19px serif";
		var d = Cn.font;
		Cn.font = a;
		c = Cn.font;
		Cn.font = b;
		return c !== d
	}
	t.xi = function(a, b) {
		if(null !== this.Hc && 0 !== this.Rb.length && null !== this.ee) {
			var c = this.naturalBounds,
				d = this.actualBounds,
				e = c.width,
				f = c.height,
				g = Dn(this),
				h = a.textAlign = this.ri,
				k = b.Ln;
			"start" === h ? h = k ? "right" : "left" : "end" === h && (h = k ? "left" : "right");
			k = this.bi;
			var l = this.ai;
			ii(this, a, this.Hc, !0, !1, c, d);
			(k || l) && ii(this, a, this.Hc, !1, !1, c, d);
			d = 0;
			c = !1;
			var m = G.allocAt(0, 0);
			this.Ud.ta(m);
			var n = G.allocAt(0, g);
			this.Ud.ta(n);
			var p = m.Be(n);
			G.free(m);
			G.free(n);
			m = b.scale;
			8 > p * m * m && (c = !0);
			b.$c !== a && (c = !1);
			!1 === b.Ce("textGreeking") &&
				(c = !1);
			b = this.$e;
			p = this.af;
			switch(this.flip) {
				case Qk:
					a.translate(e, 0);
					a.scale(-1, 1);
					break;
				case Pk:
					a.translate(0, f);
					a.scale(1, -1);
					break;
				case Rk:
					a.translate(e, f), a.scale(-1, -1)
			}
			m = this.rc;
			n = (b + g + p) * m;
			f > n && (d = this.wi, d = d.y * f - d.y * n + d.offsetY);
			n = this.rd;
			for(var q = 0; q < m; q++) {
				var r = n.Yc[q];
				r > e && (r = e);
				d += b;
				var u = n.Cc[q],
					v = a,
					x = d,
					y = h,
					z = 0;
				c ? ("left" === y ? z = 0 : "right" === y ? z = e - r : "center" === y && (z = (e - r) / 2), v.fillRect(0 + z, x + .25 * g, r, 1)) : ("left" === y ? z = 0 : "right" === y ? z = e : "center" === y && (z = e / 2), v.fillText(u, 0 + z, x + g - .25 * g),
					u = g / 20 | 0, 0 === u && (u = 1), "right" === y ? z -= r : "center" === y && (z -= r / 2), k && (v.beginPath(), v.lineWidth = u, v.moveTo(0 + z, x + g - .2 * g), v.lineTo(0 + z + r, x + g - .2 * g), v.stroke()), l && (v.beginPath(), v.lineWidth = u, x = x + g - g / 2.2 | 0, 0 !== u % 2 && (x += .5), v.moveTo(0 + z, x), v.lineTo(0 + z + r, x), v.stroke()));
				d += g + p
			}
			switch(this.flip) {
				case Qk:
					a.scale(-1, 1);
					a.translate(-e, 0);
					break;
				case Pk:
					a.scale(1, -1);
					a.translate(0, -f);
					break;
				case Rk:
					a.scale(-1, -1), a.translate(-e, -f)
			}
		}
	};
	t.cm = function(a, b, c, d) {
		this.bl = a;
		var e = this.ee;
		null !== Cn && En !== e && (En = Cn.font = e);
		e = this.rd;
		e.reset();
		var f;
		if(isNaN(this.desiredSize.width)) {
			var g = this.Rb.replace(/\r\n/g, "\n").replace(/\r/g, "\n");
			if(0 === g.length) g = 0;
			else if(this.isMultiline) {
				for(var h = f = 0, k = !1; !k;) {
					var l = g.indexOf("\n", h); - 1 === l && (l = g.length, k = !0);
					f = Math.max(f, Fn(g.substr(h, l - h).trim()));
					h = l + 1
				}
				g = f
			} else f = g.indexOf("\n", 0), 0 <= f && (g = g.substr(0, f)), g = Fn(g);
			g = Math.min(g, a / this.scale);
			g = Math.max(8, g)
		} else g = this.desiredSize.width;
		null !==
			this.panel && (g = Math.min(g, this.panel.maxSize.width));
		f = Gn(this, g, e);
		isNaN(this.desiredSize.height) ? f = Math.min(f, b / this.scale) : f = this.desiredSize.height;
		h = f;
		if(0 !== e.Fc && 1 !== e.Cc.length && this.Zf === Hn && (b = this.ee, b = this.Zf === Hn ? In(b) : 0, k = this.$e + this.af, k = Math.max(0, Dn(this) + k), h = Math.min(this.maxLines - 1, Math.max(Math.floor(h / k + .01) - 1, 0)), !(h + 1 >= e.Cc.length))) {
			k = e.Cc[h];
			for(b = Math.max(1, a - b); Fn(k) > b && 1 < k.length;) k = k.substr(0, k.length - 1);
			k += xn;
			b = Fn(k);
			e.Cc[h] = k;
			e.Cc = e.Cc.slice(0, h + 1);
			e.Yc[h] = b;
			e.Yc =
				e.Yc.slice(0, h + 1);
			e.ig = e.Cc.length;
			e.Fc = Math.max(e.Fc, b);
			this.rc = e.ig
		}
		if(this.wrap === Jn || isNaN(this.desiredSize.width)) g = isNaN(a) ? e.Fc : Math.min(a, e.Fc), isNaN(this.desiredSize.width) && (g = Math.max(8, g));
		g = Math.max(c, g);
		f = Math.max(d, f);
		zc(this.hc, g, f);
		Yk(this, 0, 0, g, f)
	};
	t.nh = function(a, b, c, d) {
		cl(this, a, b, c, d)
	};

	function Kn(a, b, c, d, e) {
		b = b.trim();
		var f = 0;
		var g = a.ee;
		var h = a.$e + a.af;
		h = Math.max(0, Dn(a) + h);
		var k = a.Zf === Hn ? In(g) : 0;
		if(a.rc >= a.le) null !== e && e.h(0, h);
		else {
			var l = b;
			if(a.jg === Ln)
				if(c.ig = 1, g = Fn(b), 0 === k || g <= d) c.Fc = Math.max(c.Fc, g), c.Yc.push(c.Fc), c.Cc.push(b), null !== e && e.h(g, h);
				else {
					f = Mn(a, l);
					l = l.substr(f.length);
					b = Mn(a, l);
					for(g = Fn(f + b); 0 < b.length && g <= d;) f += b, l = l.substr(b.length), b = Mn(a, l), g = Fn((f + b).trim());
					f += b.trim();
					for(d = Math.max(1, d - k); Fn(f) > d && 1 < f.length;) f = f.substr(0, f.length - 1);
					f += xn;
					b = Fn(f);
					c.Yc.push(b);
					c.Fc = b;
					c.Cc.push(f);
					null !== e && e.h(b, h)
				}
			else {
				k = 0;
				0 === l.length && (k = 1, c.Yc.push(0), c.Cc.push(l));
				for(; 0 < l.length;) {
					var m = Mn(a, l);
					for(l = l.substr(m.length); Fn(m) > d;) {
						var n = 1;
						g = Fn(m.substr(0, n));
						for(b = 0; g <= d;) n++, b = g, g = Fn(m.substr(0, n));
						1 === n ? (c.Yc[a.rc + k] = g, f = Math.max(f, g)) : (c.Yc[a.rc + k] = b, f = Math.max(f, b));
						n--;
						1 > n && (n = 1);
						c.Cc[a.rc + k] = m.substr(0, n);
						k++;
						m = m.substr(n);
						if(a.rc + k > a.le) break
					}
					b = Mn(a, l);
					for(g = Fn(m + b); 0 < b.length && g <= d;) m += b, l = l.substr(b.length), b = Mn(a, l), g = Fn((m + b).trim());
					m = m.trim();
					if("" !== m && ("\u00ad" === m[m.length - 1] && (m = m.substring(0, m.length - 1) + "\u2010"), 0 === b.length ? (c.Yc.push(g), f = Math.max(f, g)) : (b = Fn(m), c.Yc.push(b), f = Math.max(f, b)), c.Cc.push(m), k++, a.rc + k > a.le)) break
				}
				c.ig = Math.min(a.le, k);
				c.Fc = Math.max(c.Fc, f);
				null !== e && e.h(c.Fc, h * c.ig)
			}
		}
	}

	function Mn(a, b) {
		if(a.jg === Nn) return b.substr(0, 1);
		a = b.length;
		for(var c = 0, d = On; c < a && !d.test(b.charAt(c));) c++;
		for(; c < a && d.test(b.charAt(c));) c++;
		return c >= a ? b : b.substr(0, c)
	}

	function Fn(a) {
		return null === Cn ? 8 * a.length : Cn.measureText(a).width
	}

	function Dn(a) {
		if(null !== a.rd.If) return a.rd.If;
		var b = a.ee;
		if(null === Cn) {
			var c = 16;
			return a.rd.If = c
		}
		void 0 !== Pn[b] && 5E3 > Qn ? c = Pn[b] : (c = 1.3 * Cn.measureText("M").width, Pn[b] = c, Qn++);
		return a.rd.If = c
	}

	function In(a) {
		if(null === Cn) return 6;
		if(void 0 !== zn[a] && 5E3 > An) var b = zn[a];
		else b = Cn.measureText(xn).width, zn[a] = b, An++;
		return b
	}

	function Gn(a, b, c) {
		var d = a.Rb.replace(/\r\n/g, "\n").replace(/\r/g, "\n"),
			e = a.$e + a.af;
		e = Math.max(0, Dn(a) + e);
		if(0 === d.length) return c.Fc = 0, a.rc = 1, e;
		if(!a.isMultiline) {
			var f = d.indexOf("\n", 0);
			0 <= f && (d = d.substr(0, f))
		}
		f = 0;
		for(var g = a.rc = 0, h, k = !1; !k;) {
			h = d.indexOf("\n", g); - 1 === h && (h = d.length, k = !0);
			if(g <= h) {
				g = d.substr(g, h - g);
				if(a.jg !== Ln) {
					c.ig = 0;
					var l = L.alloc();
					Kn(a, g, c, b, l);
					f += l.height;
					L.free(l);
					a.rc += c.ig
				} else Kn(a, g, c, b, null), f += e, a.rc++;
				a.rc === a.le && (k = !0)
			}
			g = h + 1
		}
		return a.Jr = f
	}
	oa.Object.defineProperties(wh.prototype, {
		font: {
			get: function() {
				return this.ee
			},
			set: function(a) {
				var b = this.ee;
				b !== a && (this.ee = a, this.rd.If = null, this.o(), this.g("font", b, a))
			}
		},
		text: {
			get: function() {
				return this.Rb
			},
			set: function(a) {
				var b = this.Rb;
				null !== a && void 0 !== a ? a = a.toString() : a = "";
				b !== a && (this.Rb = a, this.o(), this.g("text", b, a))
			}
		},
		textAlign: {
			get: function() {
				return this.ri
			},
			set: function(a) {
				var b = this.ri;
				b === a || "start" !==
					a && "end" !== a && "left" !== a && "right" !== a && "center" !== a || (this.ri = a, this.R(), this.g("textAlign", b, a))
			}
		},
		flip: {
			get: function() {
				return this.Ad
			},
			set: function(a) {
				var b = this.Ad;
				b !== a && (this.Ad = a, this.R(), this.g("flip", b, a))
			}
		},
		verticalAlignment: {
			get: function() {
				return this.wi
			},
			set: function(a) {
				var b = this.wi;
				b.A(a) || (this.wi = a = a.I(), sl(this), this.g("verticalAlignment", b, a))
			}
		},
		naturalBounds: {
			get: function() {
				if(!this.hc.s()) {
					var a =
						L.alloc();
					Kn(this, this.Rb, this.rd, 999999, a);
					var b = a.width;
					L.free(a);
					a = Gn(this, b, this.rd);
					var c = this.desiredSize;
					isNaN(c.width) || (b = c.width);
					isNaN(c.height) || (a = c.height);
					zc(this.hc, b, a)
				}
				return this.hc
			}
		},
		isMultiline: {
			get: function() {
				return this.hj
			},
			set: function(a) {
				var b = this.hj;
				b !== a && (this.hj = a, this.o(), this.g("isMultiline", b, a))
			}
		},
		isUnderline: {
			get: function() {
				return this.bi
			},
			set: function(a) {
				var b = this.bi;
				b !== a && (this.bi = a, this.R(), this.g("isUnderline",
					b, a))
			}
		},
		isStrikethrough: {
			get: function() {
				return this.ai
			},
			set: function(a) {
				var b = this.ai;
				b !== a && (this.ai = a, this.R(), this.g("isStrikethrough", b, a))
			}
		},
		wrap: {
			get: function() {
				return this.jg
			},
			set: function(a) {
				var b = this.jg;
				b !== a && (this.jg = a, this.o(), this.g("wrap", b, a))
			}
		},
		overflow: {
			get: function() {
				return this.Zf
			},
			set: function(a) {
				var b = this.Zf;
				b !== a && (this.Zf = a, this.o(), this.g("overflow", b, a))
			}
		},
		stroke: {
			get: function() {
				return this.Hc
			},
			set: function(a) {
				var b = this.Hc;
				b !== a && (a instanceof jl && a.freeze(), this.Hc = a, this.R(), this.g("stroke", b, a))
			}
		},
		lineCount: {
			get: function() {
				return this.rc
			}
		},
		editable: {
			get: function() {
				return this.sn
			},
			set: function(a) {
				var b = this.sn;
				b !== a && (this.sn = a, this.g("editable", b, a))
			}
		},
		textEditor: {
			get: function() {
				return this.rp
			},
			set: function(a) {
				var b = this.rp;
				b !== a && (this.rp = a, this.g("textEditor", b,
					a))
			}
		},
		errorFunction: {
			get: function() {
				return this.Ec
			},
			set: function(a) {
				var b = this.Ec;
				b !== a && (this.Ec = a, this.g("errorFunction", b, a))
			}
		},
		interval: {
			get: function() {
				return this.Ed
			},
			set: function(a) {
				var b = this.Ed;
				a = Math.floor(a);
				if(b !== a && 0 <= a) {
					this.Ed = a;
					this.o();
					var c = this.panel;
					null !== c && (c.Jg = null);
					this.g("interval", b, a)
				}
			}
		},
		graduatedStart: {
			get: function() {
				return this.Dd
			},
			set: function(a) {
				var b = this.Dd;
				b !== a && (0 > a ? a = 0 :
					1 < a && (a = 1), this.Dd = a, this.o(), this.g("graduatedStart", b, a))
			}
		},
		graduatedEnd: {
			get: function() {
				return this.Bd
			},
			set: function(a) {
				var b = this.Bd;
				b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.Bd = a, this.o(), this.g("graduatedEnd", b, a))
			}
		},
		graduatedFunction: {
			get: function() {
				return this.bj
			},
			set: function(a) {
				var b = this.bj;
				b !== a && (this.bj = a, this.o(), this.g("graduatedFunction", b, a))
			}
		},
		graduatedSkip: {
			get: function() {
				return this.Cd
			},
			set: function(a) {
				var b =
					this.Cd;
				b !== a && (this.Cd = a, this.o(), this.g("graduatedSkip", b, a))
			}
		},
		textValidation: {
			get: function() {
				return this.si
			},
			set: function(a) {
				var b = this.si;
				b !== a && (this.si = a, this.g("textValidation", b, a))
			}
		},
		textEdited: {
			get: function() {
				return this.qp
			},
			set: function(a) {
				var b = this.qp;
				b !== a && (this.qp = a, this.g("textEdited", b, a))
			}
		},
		spacingAbove: {
			get: function() {
				return this.$e
			},
			set: function(a) {
				var b = this.$e;
				b !== a && (this.$e = a, this.g("spacingAbove",
					b, a))
			}
		},
		spacingBelow: {
			get: function() {
				return this.af
			},
			set: function(a) {
				var b = this.af;
				b !== a && (this.af = a, this.g("spacingBelow", b, a))
			}
		},
		maxLines: {
			get: function() {
				return this.le
			},
			set: function(a) {
				var b = this.le;
				b !== a && (a = Math.floor(a), 0 >= a && Aa(a, "> 0", wh, "maxLines"), this.le = a, this.g("maxLines", b, a), this.o())
			}
		},
		metrics: {
			get: function() {
				return this.rd
			}
		},
		choices: {
			get: function() {
				return this.Pm
			},
			set: function(a) {
				var b = this.Pm;
				b !== a && (this.Pm = a, this.g("choices", b, a))
			}
		}
	});
	var Ln = new D(wh, "None", 0),
		Jn = new D(wh, "WrapFit", 1),
		vn = new D(wh, "WrapDesiredSize", 2),
		Nn = new D(wh, "WrapBreakAll", 3),
		un = new D(wh, "OverflowClip", 0),
		Hn = new D(wh, "OverflowEllipsis", 1),
		On = null,
		Pn = null,
		Qn = 0,
		zn = null,
		An = 0,
		xn = "...",
		En = "",
		Cn = null;
	wh.className = "TextBlock";
	On = /[ \u200b\u00ad]/;
	Pn = new vb;
	zn = new vb;
	Cn = Ya ? (new pk(null)).context : null;
	wh.getEllipsis = wn;
	wh.setEllipsis = yn;
	wh.isValidFont = Bn;
	wh.None = Ln;
	wh.WrapFit = Jn;
	wh.WrapDesiredSize = vn;
	wh.WrapBreakAll = Nn;
	wh.OverflowClip = un;
	wh.OverflowEllipsis = Hn;

	function Im() {
		this.Fc = this.ig = 0;
		this.Yc = [];
		this.Cc = [];
		this.If = null
	}
	Im.prototype.reset = function() {
		this.Fc = this.ig = 0;
		this.If = null;
		this.Yc = [];
		this.Cc = []
	};
	Im.prototype.Ql = function(a) {
		this.ig = a.ig;
		this.If = a.If;
		this.Fc = a.Fc;
		this.Yc = Ha(a.Yc);
		this.Cc = Ha(a.Cc)
	};
	oa.Object.defineProperties(Im.prototype, {
		arrSize: {
			get: function() {
				return this.Yc
			}
		},
		arrText: {
			get: function() {
				return this.Cc
			}
		},
		maxLineWidth: {
			get: function() {
				return this.Fc
			}
		},
		fontHeight: {
			get: function() {
				return this.If
			}
		}
	});
	Im.className = "TextBlockMetrics";
	wh.getEllipsis = wn;
	wh.setEllipsis = yn;
	wh.isValidFont = Bn;

	function Qj() {
		P.call(this);
		this.Fg = null;
		this.kp = "";
		this.ah = Oc;
		this.Tk = ge;
		this.df = this.Ec = null;
		this.Sk = id;
		this.Ad = dh;
		this.Fl = null;
		this.Xt = !1;
		this.er = !0;
		this.fl = !1;
		this.vl = null
	}
	na(Qj, P);
	Qj.prototype.cloneProtected = function(a) {
		P.prototype.cloneProtected.call(this, a);
		a.element = this.Fg;
		a.kp = this.kp;
		a.ah = this.ah.I();
		a.Tk = this.Tk;
		a.Ad = this.Ad;
		a.Ec = this.Ec;
		a.df = this.df;
		a.Sk = this.Sk.I();
		a.er = this.er;
		a.vl = this.vl
	};
	t = Qj.prototype;
	t.ib = function(a) {
		a === dh || a === fh || a === Ok ? this.imageStretch = a : P.prototype.ib.call(this, a)
	};
	t.toString = function() {
		return "Picture(" + this.source + ")#" + Bb(this)
	};

	function Rn() {
		var a = li;
		if(0 === a.length)
			for(var b = w.document.getElementsByTagName("canvas"), c = b.length, d = 0; d < c; d++) {
				var e = b[d];
				e.parentElement && e.parentElement.F && a.push(e.parentElement.F)
			}
		return a
	}

	function Sj(a) {
		void 0 === a && (a = "");
		"" !== a ? Sn[a] && (delete Sn[a], Tn--) : (Sn = new vb, Tn = 0)
	}

	function Un(a, b) {
		a.Jn = !0;
		a.Rk = !1;
		for(var c, d = Rn(), e = d.length, f = 0; f < e; f++) {
			var g = d[f],
				h = g.wj.J(a.src);
			if(null !== h)
				for(var k = h.length, l = 0; l < k; l++) c = h[l], g.gu.add(c), g.cc(), null === a.ku && (a.ku = b, null !== c.df && c.df(c, b))
		}
	}

	function Vn(a, b) {
		a.Rk = b;
		for(var c, d = Rn(), e = d.length, f = 0; f < e; f++)
			if(c = d[f].wj.J(a.src), null !== c) {
				for(var g = c.length, h = La(), k = 0; k < g; k++) h.push(c[k]);
				for(k = 0; k < g; k++) c = h[k], null !== c.Ec && c.Ec(c, b);
				Na(h)
			}
	}
	t.xi = function(a, b) {
		var c = this.Fg;
		if(null !== c) {
			var d = c.src;
			null !== d && "" !== d || A('Element has no source ("src") attribute: ' + c);
			if(!(c.Rk instanceof Event) && !0 === c.Jn) {
				d = this.naturalBounds;
				var e = 0,
					f = 0,
					g = this.Xt,
					h = g ? +c.width : c.naturalWidth;
				g = g ? +c.height : c.naturalHeight;
				void 0 === h && c.videoWidth && (h = c.videoWidth);
				void 0 === g && c.videoHeight && (g = c.videoHeight);
				h = h || d.width;
				g = g || d.height;
				if(0 !== h && 0 !== g) {
					var k = h,
						l = g;
					this.sourceRect.s() && (e = this.ah.x, f = this.ah.y, h = this.ah.width, g = this.ah.height);
					var m = h,
						n = g,
						p = this.Tk,
						q = this.Sk;
					switch(p) {
						case dh:
							if(this.sourceRect.s()) break;
							m >= d.width && (e = e + q.offsetX + (m * q.x - d.width * q.x));
							n >= d.height && (f = f + q.offsetY + (n * q.y - d.height * q.y));
							h = Math.min(d.width, m);
							g = Math.min(d.height, n);
							break;
						case ge:
							m = d.width;
							n = d.height;
							break;
						case fh:
						case Ok:
							p === fh ? (p = Math.min(d.height / n, d.width / m), m *= p, n *= p) : p === Ok && (p = Math.max(d.height / n, d.width / m), m *= p, n *= p, m >= d.width && (e = (e + q.offsetX + (m * q.x - d.width * q.x) / m) * h), n >= d.height && (f = (f + q.offsetY + (n * q.y - d.height * q.y) / n) * g), h *= 1 / (m / d.width), g *=
								1 / (n / d.height), m = d.width, n = d.height)
					}
					p = this.mf() * b.scale;
					var r = h * g / (m * p * n * p),
						u = Sn[this.source];
					p = null;
					var v = Wn;
					if(c.Jn && void 0 !== u && r > v * v)
						for(2 > u.Ml.length && (Xn(u, 4, k, l), Xn(u, 16, k, l)), k = u.Ml, l = k.length, p = k[0], v = 0; v < l; v++)
							if(k[v].ratio * k[v].ratio < r) p = k[v];
							else break;
					if(!b.pn) {
						if(null === this.Fl)
							if(null === this.Fg) this.Fl = !1;
							else {
								k = (new pk(null)).context;
								k.drawImage(this.Fg, 0, 0);
								try {
									k.getImageData(0, 0, 1, 1).data[3] && (this.Fl = !1), this.Fl = !1
								} catch(x) {
									this.Fl = !0
								}
							}
						if(this.Fl) return
					}
					k = 0;
					m < d.width && (k = q.offsetX +
						(d.width * q.x - m * q.x));
					l = 0;
					n < d.height && (l = q.offsetY + (d.height * q.y - n * q.y));
					switch(this.flip) {
						case Qk:
							a.translate(Math.min(d.width, m), 0);
							a.scale(-1, 1);
							break;
						case Pk:
							a.translate(0, Math.min(d.height, n));
							a.scale(1, -1);
							break;
						case Rk:
							a.translate(Math.min(d.width, m), Math.min(d.height, n)), a.scale(-1, -1)
					}
					if(b.Ce("pictureRatioOptimization") && !b.gj && void 0 !== u && null !== p && 1 !== p.ratio) {
						a.save();
						b = p.ratio;
						try {
							a.drawImage(p.source, e / b, f / b, Math.min(p.source.width, h / b), Math.min(p.source.height, g / b), k, l, Math.min(d.width,
								m), Math.min(d.height, n))
						} catch(x) {
							this.er = !1
						}
						a.restore()
					} else try {
						a.drawImage(c, e, f, h, g, k, l, Math.min(d.width, m), Math.min(d.height, n))
					} catch(x) {
						this.er = !1
					}
					switch(this.flip) {
						case Qk:
							a.scale(-1, 1);
							a.translate(-Math.min(d.width, m), 0);
							break;
						case Pk:
							a.scale(1, -1);
							a.translate(0, -Math.min(d.height, n));
							break;
						case Rk:
							a.scale(-1, -1), a.translate(-Math.min(d.width, m), -Math.min(d.height, n))
					}
				}
			}
		}
	};
	t.cm = function(a, b, c, d) {
		var e = this.desiredSize,
			f = al(this, !0),
			g = this.Fg,
			h = this.Xt;
		if(h || !this.fl && g && g.complete) this.fl = !0;
		null === g && (isFinite(e.width) || (a = 0), isFinite(e.height) || (b = 0));
		isFinite(e.width) || f === ge || f === Mk ? (isFinite(a) || (a = this.sourceRect.s() ? this.sourceRect.width : h ? +g.width : g.naturalWidth), c = 0) : null !== g && !1 !== this.fl && (a = this.sourceRect.s() ? this.sourceRect.width : h ? +g.width : g.naturalWidth);
		isFinite(e.height) || f === ge || f === Nk ? (isFinite(b) || (b = this.sourceRect.s() ? this.sourceRect.height : h ?
			+g.height : g.naturalHeight), d = 0) : null !== g && !1 !== this.fl && (b = this.sourceRect.s() ? this.sourceRect.height : h ? +g.height : g.naturalHeight);
		isFinite(e.width) && (a = e.width);
		isFinite(e.height) && (b = e.height);
		e = this.maxSize;
		f = this.minSize;
		c = Math.max(c, f.width);
		d = Math.max(d, f.height);
		a = Math.min(e.width, a);
		b = Math.min(e.height, b);
		a = Math.max(c, a);
		b = Math.max(d, b);
		null === g || g.complete || (isFinite(a) || (a = 0), isFinite(b) || (b = 0));
		zc(this.hc, a, b);
		Yk(this, 0, 0, a, b)
	};
	t.nh = function(a, b, c, d) {
		cl(this, a, b, c, d)
	};
	oa.Object.defineProperties(Qj.prototype, {
		element: {
			get: function() {
				return this.Fg
			},
			set: function(a) {
				var b = this.Fg;
				if(b !== a) {
					null === a || a instanceof HTMLImageElement || a instanceof HTMLVideoElement || a instanceof HTMLCanvasElement || A("Picture.element must be an instance of Image, Canvas, or Video, not: " + a);
					this.Xt = a instanceof HTMLCanvasElement;
					this.Fg = a;
					if(null !== a)
						if(a instanceof HTMLCanvasElement || !0 === a.complete) a.Rk instanceof Event && null !== this.Ec && this.Ec(this, a.Rk), !0 === a.Jn && null !== this.df && this.df(this, a.ku), a.Jn = !0, this.desiredSize.s() || (ej(this, !1), this.o());
						else {
							var c = this;
							a.ww || (a.addEventListener("load", function(b) {
								Un(a, b);
								c.desiredSize.s() || (ej(c, !1), c.o())
							}), a.addEventListener("error", function(b) {
								Vn(a, b)
							}), a.ww = !0)
						}
					this.g("element", b, a);
					this.R()
				}
			}
		},
		source: {
			get: function() {
				return this.kp
			},
			set: function(a) {
				var b = this.kp;
				if(b !== a) {
					this.kp = a;
					var c = Sn,
						d = this.diagram,
						e = null;
					if(void 0 !== c[a]) e = c[a].Ml[0].source;
					else {
						30 < Tn && (Sj(),
							c = Sn);
						e = wa("img");
						var f = this;
						e.addEventListener("load", function(a) {
							Un(e, a);
							f.desiredSize.s() || (ej(f, !1), f.o())
						});
						e.addEventListener("error", function(a) {
							Vn(e, a)
						});
						e.ww = !0;
						var g = this.vl;
						null !== g && (e.crossOrigin = g(this));
						e.src = a;
						c[a] = new Yn(e);
						Tn++
					}
					null !== d && Rj(d, this);
					this.element = e;
					null !== d && Pj(d, this);
					this.o();
					this.R();
					this.g("source", b, a)
				}
			}
		},
		sourceCrossOrigin: {
			get: function() {
				return this.vl
			},
			set: function(a) {
				if(this.vl !== a && (this.vl = a, null !== this.element)) {
					var b = this.element.src;
					null === a && "string" === typeof b ? this.element.crossOrigin = null : null !== a && (this.element.crossOrigin = a(this));
					this.element.src = b
				}
			}
		},
		sourceRect: {
			get: function() {
				return this.ah
			},
			set: function(a) {
				var b = this.ah;
				b.A(a) || (this.ah = a = a.I(), this.R(), this.g("sourceRect", b, a))
			}
		},
		imageStretch: {
			get: function() {
				return this.Tk
			},
			set: function(a) {
				var b = this.Tk;
				b !== a && (this.Tk = a, this.R(), this.g("imageStretch", b, a))
			}
		},
		flip: {
			get: function() {
				return this.Ad
			},
			set: function(a) {
				var b = this.Ad;
				b !== a && (this.Ad = a, this.R(), this.g("flip", b, a))
			}
		},
		imageAlignment: {
			get: function() {
				return this.Sk
			},
			set: function(a) {
				var b = this.Sk;
				b.A(a) || (this.Sk = a = a.I(), this.o(), this.g("imageAlignment", b, a))
			}
		},
		errorFunction: {
			get: function() {
				return this.Ec
			},
			set: function(a) {
				var b = this.Ec;
				b !== a && (this.Ec = a, this.g("errorFunction", b, a))
			}
		},
		successFunction: {
			get: function() {
				return this.df
			},
			set: function(a) {
				var b =
					this.df;
				b !== a && (this.df = a, this.g("successFunction", b, a))
			}
		},
		naturalBounds: {
			get: function() {
				return this.hc
			}
		}
	});
	var Sn = null,
		Tn = 0,
		li = [],
		Wn = 4;
	Qj.className = "Picture";
	Qj.clearCache = Sj;
	Sn = new vb;
	Qj.clearCache = Sj;

	function Yn(a) {
		this.Ml = [new Zn(a, 1)]
	}

	function Xn(a, b, c, d) {
		var e = new pk(null),
			f = e.context,
			g = 1 / b;
		e.width = c / b;
		e.height = d / b;
		b = new Zn(e.Ha, b);
		c = a.Ml[a.Ml.length - 1];
		f.setTransform(g * c.ratio, 0, 0, g * c.ratio, 0, 0);
		f.drawImage(c.source, 0, 0);
		a.Ml.push(b)
	}
	Yn.className = "PictureCacheArray";

	function Zn(a, b) {
		this.source = a;
		this.ratio = b
	}
	Zn.className = "PictureCacheInstance";

	function $n() {
		this.Rs = new ee;
		this.ec = null
	}
	t = $n.prototype;
	t.reset = function(a) {
		null !== a ? (this.Rs = a, a.figures.clear()) : this.Rs = new ee;
		this.ec = null
	};

	function te(a, b, c, d, e) {
		a.ec = new Se;
		a.ec.startX = b;
		a.ec.startY = c;
		a.ec.isFilled = d;
		a.Rs.figures.add(a.ec);
		void 0 !== e && (a.ec.isShadowed = e)
	}

	function xe(a) {
		var b = a.ec.segments.length;
		0 < b && a.ec.segments.N(b - 1).close()
	}
	t.mq = function(a) {
		this.ec.isShadowed = a
	};
	t.moveTo = function(a, b, c) {
		void 0 === c && (c = !1);
		var d = new Te(Be);
		d.endX = a;
		d.endY = b;
		c && d.close();
		this.ec.segments.add(d)
	};
	t.lineTo = function(a, b, c) {
		void 0 === c && (c = !1);
		var d = new Te(je);
		d.endX = a;
		d.endY = b;
		c && d.close();
		this.ec.segments.add(d)
	};

	function ue(a, b, c, d, e, f, g) {
		var h;
		void 0 === h && (h = !1);
		var k = new Te(Ce);
		k.point1X = b;
		k.point1Y = c;
		k.point2X = d;
		k.point2Y = e;
		k.endX = f;
		k.endY = g;
		h && k.close();
		a.ec.segments.add(k)
	}

	function ve(a, b, c, d, e) {
		var f;
		void 0 === f && (f = !1);
		var g = new Te(De);
		g.point1X = b;
		g.point1Y = c;
		g.endX = d;
		g.endY = e;
		f && g.close();
		a.ec.segments.add(g)
	}
	t.arcTo = function(a, b, c, d, e, f, g) {
		void 0 === f && (f = 0);
		void 0 === g && (g = !1);
		var h = new Te(Ee);
		h.startAngle = a;
		h.sweepAngle = b;
		h.centerX = c;
		h.centerY = d;
		h.radiusX = e;
		h.radiusY = 0 !== f ? f : e;
		g && h.close();
		this.ec.segments.add(h)
	};

	function we(a, b, c, d, e, f, g, h) {
		var k;
		void 0 === k && (k = !1);
		b = new Te(Fe, g, h, b, c, d, e, f);
		k && b.close();
		a.ec.segments.add(b)
	}

	function se(a) {
		var b = ye;
		if(null !== b) return ye = null, b.reset(a), b;
		b = new $n;
		b.reset(a);
		return b
	}
	var ye = null;
	$n.className = "StreamGeometryContext";

	function ao(a, b) {
		var c = a.toLowerCase(),
			d = H.Ke;
		d[a] = b;
		d[c] = a
	}
	ao("Rectangle", function(a, b, c) {
		a = new ee(le);
		a.startX = 0;
		a.startY = 0;
		a.endX = b;
		a.endY = c;
		return a
	});
	ao("Square", function(a, b, c) {
		a = new ee(le);
		a.startX = 0;
		a.startY = 0;
		a.endX = b;
		a.endY = c;
		a.defaultStretch = fh;
		return a
	});
	ao("RoundedRectangle", function(a, b, c) {
		var d = a ? a.parameter1 : NaN;
		if(isNaN(d) || 0 >= d) d = 5;
		d = Math.min(d, b / 3);
		d = Math.min(d, c / 3);
		a = d * H.ug;
		b = (new ee).add((new Se(d, 0, !0)).add(new Te(je, b - d, 0)).add(new Te(Ce, b, d, b - a, 0, b, a)).add(new Te(je, b, c - d)).add(new Te(Ce, b - d, c, b, c - a, b - a, c)).add(new Te(je, d, c)).add(new Te(Ce, 0, c - d, a, c, 0, c - a)).add(new Te(je, 0, d)).add((new Te(Ce, d, 0, 0, a, a, 0)).close()));
		1 < a && (b.spot1 = new N(0, 0, a, a), b.spot2 = new N(1, 1, -a, -a));
		return b
	});
	ao("Border", "RoundedRectangle");
	ao("Ellipse", function(a, b, c) {
		a = new ee(me);
		a.startX = 0;
		a.startY = 0;
		a.endX = b;
		a.endY = c;
		a.spot1 = Wd;
		a.spot2 = Xd;
		return a
	});
	ao("Circle", function(a, b, c) {
		a = new ee(me);
		a.startX = 0;
		a.startY = 0;
		a.endX = b;
		a.endY = c;
		a.spot1 = Wd;
		a.spot2 = Xd;
		a.defaultStretch = fh;
		return a
	});
	ao("TriangleRight", function(a, b, c) {
		return(new ee).add((new Se(0, 0)).add(new Te(je, b, .5 * c)).add((new Te(je, 0, c)).close())).pm(0, .25, .5, .75)
	});
	ao("TriangleDown", function(a, b, c) {
		return(new ee).add((new Se(0, 0)).add(new Te(je, b, 0)).add((new Te(je, .5 * b, c)).close())).pm(.25, 0, .75, .5)
	});
	ao("TriangleLeft", function(a, b, c) {
		return(new ee).add((new Se(b, c)).add(new Te(je, 0, .5 * c)).add((new Te(je, b, 0)).close())).pm(.5, .25, 1, .75)
	});
	ao("TriangleUp", function(a, b, c) {
		return(new ee).add((new Se(b, c)).add(new Te(je, 0, c)).add((new Te(je, .5 * b, 0)).close())).pm(.25, .5, .75, 1)
	});
	ao("Triangle", "TriangleUp");
	ao("Diamond", function(a, b, c) {
		return(new ee).add((new Se(.5 * b, 0)).add(new Te(je, 0, .5 * c)).add(new Te(je, .5 * b, c)).add((new Te(je, b, .5 * c)).close())).pm(.25, .25, .75, .75)
	});
	ao("LineH", function(a, b, c) {
		a = new ee(he);
		a.startX = 0;
		a.startY = c / 2;
		a.endX = b;
		a.endY = c / 2;
		return a
	});
	ao("LineV", function(a, b, c) {
		a = new ee(he);
		a.startX = b / 2;
		a.startY = 0;
		a.endX = b / 2;
		a.endY = c;
		return a
	});
	ao("None", "Rectangle");
	ao("BarH", "Rectangle");
	ao("BarV", "Rectangle");
	ao("MinusLine", "LineH");
	ao("PlusLine", function(a, b, c) {
		return(new ee).add((new Se(0, c / 2, !1)).add(new Te(je, b, c / 2)).add(new Te(Be, b / 2, 0)).add(new Te(je, b / 2, c)))
	});
	ao("XLine", function(a, b, c) {
		return(new ee).add((new Se(0, c, !1)).add(new Te(je, b, 0)).add(new Te(Be, 0, 0)).add(new Te(je, b, c)))
	});
	H.tm = {
		"": "",
		Standard: "F1 m 0,0 l 8,4 -8,4 2,-4 z",
		Backward: "F1 m 8,0 l -2,4 2,4 -8,-4 z",
		Triangle: "F1 m 0,0 l 8,4.62 -8,4.62 z",
		BackwardTriangle: "F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",
		Boomerang: "F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
		BackwardBoomerang: "F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",
		SidewaysV: "m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",
		BackwardV: "m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",
		OpenTriangle: "m 0,0 l 8,4 -8,4",
		BackwardOpenTriangle: "m 8,0 l -8,4 8,4",
		OpenTriangleLine: "m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",
		BackwardOpenTriangleLine: "m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
		OpenTriangleTop: "m 0,0 l 8,4 m 0,4",
		BackwardOpenTriangleTop: "m 8,0 l -8,4 m 0,4",
		OpenTriangleBottom: "m 0,8 l 8,-4",
		BackwardOpenTriangleBottom: "m 0,4 l 8,4",
		HalfTriangleTop: "F1 m 0,0 l 0,4 8,0 z m 0,8",
		BackwardHalfTriangleTop: "F1 m 8,0 l 0,4 -8,0 z m 0,8",
		HalfTriangleBottom: "F1 m 0,4 l 0,4 8,-4 z",
		BackwardHalfTriangleBottom: "F1 m 8,4 l 0,4 -8,-4 z",
		ForwardSemiCircle: "m 4,0 b 270 180 0 4 4",
		BackwardSemiCircle: "m 4,8 b 90 180 0 -4 4",
		Feather: "m 0,0 l 3,4 -3,4",
		BackwardFeather: "m 3,0 l -3,4 3,4",
		DoubleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
		BackwardDoubleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",
		TripleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
		BackwardTripleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",
		ForwardSlash: "m 0,8 l 5,-8",
		BackSlash: "m 0,0 l 5,8",
		DoubleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8",
		DoubleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8",
		TripleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
		TripleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",
		Fork: "m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
		BackwardFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",
		LineFork: "m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
		BackwardLineFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",
		CircleFork: "F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
		BackwardCircleFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
		CircleLineFork: "F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
		BackwardCircleLineFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
		Circle: "F1 m 8,4 b 0 360 -4 0 4 z",
		Block: "F1 m 0,0 l 0,8 8,0 0,-8 z",
		StretchedDiamond: "F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
		Diamond: "F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",
		Chevron: "F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",
		StretchedChevron: "F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",
		NormalArrow: "F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",
		X: "m 0,0 l 8,8 m 0,-8 l -8,8",
		TailedNormalArrow: "F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
		DoubleTriangle: "F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
		BigEndArrow: "F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",
		ConcaveTailArrow: "F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",
		RoundedTriangle: "F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",
		SimpleArrow: "F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",
		AccelerationArrow: "F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",
		BoxArrow: "F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
		TriangleLine: "F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",
		CircleEndedArrow: "F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",
		DynamicWidthArrow: "F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",
		EquilibriumArrow: "m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",
		FastForward: "F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
		Kite: "F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",
		HalfArrowTop: "F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",
		HalfArrowBottom: "F1 m 0,8 l 4,-4 4,0 -8,4 z",
		OpposingDirectionDoubleArrow: "F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",
		PartialDoubleTriangle: "F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",
		LineCircle: "F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
		DoubleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
		TripleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
		CircleLine: "F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",
		DiamondCircle: "F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",
		PlusCircle: "F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
		OpenRightTriangleTop: "m 8,0 l 0,4 -8,0 m 0,4",
		OpenRightTriangleBottom: "m 8,8 l 0,-4 -8,0",
		Line: "m 0,0 l 0,8",
		DoubleLine: "m 0,0 l 0,8 m 2,0 l 0,-8",
		TripleLine: "m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",
		PentagonArrow: "F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"
	};

	function U(a) {
		Y.call(this, a);
		this.H = 2408959;
		this.Pg = this.yf = "";
		this.Ro = this.Oo = this.ap = this.Tn = null;
		this.cp = "";
		this.wf = this.Fn = this.bp = this.Zg = null;
		this.Qo = "";
		this.Po = qc;
		this.Rb = this.So = "";
		this.ci = this.Sm = this.Nh = null;
		this.Of = (new G(NaN, NaN)).freeze();
		this.Zn = "";
		this.Ve = null;
		this.$n = ed;
		this.u = Hd;
		this.jo = cc;
		this.ao = dc;
		this.on = null;
		this.Un = 127;
		this.oi = ec;
		this.Bj = "gray";
		this.Qd = 4;
		this.zw = -1;
		this.Cp = NaN;
		this.Vx = new M;
		this.pj = null;
		this.Sg = NaN
	}
	na(U, Y);
	U.prototype.cloneProtected = function(a) {
		Y.prototype.cloneProtected.call(this, a);
		a.H = this.H & -4097 | 49152;
		a.yf = this.yf;
		a.Pg = this.Pg;
		a.Tn = this.Tn;
		a.ap = this.ap;
		a.Oo = this.Oo;
		a.Ro = this.Ro;
		a.cp = this.cp;
		a.bp = this.bp;
		a.Fn = this.Fn;
		a.wf = null;
		a.Qo = this.Qo;
		a.Po = this.Po.I();
		a.So = this.So;
		a.Rb = this.Rb;
		a.Sm = this.Sm;
		a.Of.assign(this.Of);
		a.Zn = this.Zn;
		a.$n = this.$n.I();
		a.jo = this.jo.I();
		a.ao = this.ao.I();
		a.on = this.on;
		a.Un = this.Un;
		a.oi = this.oi.I();
		a.Bj = this.Bj;
		a.Qd = this.Qd;
		a.Cp = this.Cp
	};
	U.prototype.lf = function(a) {
		Y.prototype.lf.call(this, a);
		a.uh();
		a.Zg = null;
		a.Ve = null;
		a.pj = null
	};
	U.prototype.toString = function() {
		var a = Oa(this.constructor) + "#" + Bb(this);
		null !== this.data && (a += "(" + Qa(this.data) + ")");
		return a
	};
	U.prototype.hk = function(a, b, c, d, e, f, g) {
		var h = this.diagram;
		null !== h && (a === af && "elements" === b ? e instanceof Y ? vj(e, function(a) {
			xj(h.partManager, a);
			wj(h, a)
		}) : Pj(h, e) : a === ff && "elements" === b && (e instanceof Y ? vj(e, function(a) {
			Bj(h.partManager, a);
			Aj(h, a)
		}) : Rj(h, e)), h.cb(a, b, c, d, e, f, g))
	};
	U.prototype.Da = function(a) {
		Y.prototype.Da.call(this, a);
		if(null !== this.data) {
			a = this.W.j;
			for(var b = a.length, c = 0; c < b; c++) {
				var d = a[c];
				d instanceof Y && vj(d, function(a) {
					null !== a.data && a.Da()
				})
			}
		}
	};
	U.prototype.updateRelationshipsFromData = function() {
		null !== this.data && this.diagram.partManager.updateRelationshipsFromData(this)
	};
	U.prototype.Tj = function(a) {
		var b = this.wf;
		return null === b ? null : b.J(a)
	};
	U.prototype.jh = function(a, b) {
		if(null !== b) {
			var c = null,
				d = this.wf;
			null !== d && (c = d.J(a));
			if(c !== b) {
				if(null !== c) {
					var e = c.diagram;
					null !== e && e.remove(c)
				}
				null === d && (this.wf = d = new Nb);
				b.yf !== a && (b.category = a);
				d.add(a, b);
				a = this.diagram;
				null !== a && (a.add(b), b.data = this.data)
			}
		}
	};
	U.prototype.sf = function(a) {
		var b = this.wf;
		if(null !== b) {
			var c = b.J(a);
			if(null !== c) {
				var d = c.diagram;
				null !== d && d.remove(c)
			}
			b.remove(a);
			0 === b.count && (this.wf = null)
		}
	};
	U.prototype.Lj = function() {
		var a = this.wf;
		if(null !== a) {
			var b = La();
			for(a = a.iterator; a.next();) b.push(a.key);
			a = b.length;
			for(var c = 0; c < a; c++) this.sf(b[c]);
			Na(b)
		}
	};
	U.prototype.updateAdornments = function() {
		var a = this.diagram;
		if(null !== a) {
			a: {
				if(this.isSelected && this.selectionAdorned) {
					var b = this.selectionObject;
					if(null !== b && this.actualBounds.s() && this.isVisible() && b.rf() && b.actualBounds.s()) {
						var c = this.Tj("Selection");
						if(null === c) {
							c = this.selectionAdornmentTemplate;
							null === c && (c = this.wh() ? a.linkSelectionAdornmentTemplate : this instanceof V ? a.groupSelectionAdornmentTemplate : a.nodeSelectionAdornmentTemplate);
							if(!(c instanceof pf)) break a;
							ch(c);
							c = c.copy();
							null !== c && (this.wh() &&
								this.selectionObject === this.path && (c.type = Y.Link), c.adornedObject = b)
						}
						if(null !== c) {
							var d = c.placeholder;
							if(null !== d) {
								var e = b.mf(),
									f = 0;
								b instanceof qg && (f = b.strokeWidth);
								var g = L.alloc();
								g.h((b.naturalBounds.width + f) * e, (b.naturalBounds.height + f) * e);
								d.desiredSize = g;
								L.free(g)
							}
							c.angle = b.Di();
							c.type === Y.Link ? c.o() : (d = G.alloc(), c.location = b.ka(ed, d), G.free(d));
							this.jh("Selection", c);
							break a
						}
					}
				}
				this.sf("Selection")
			}
			bo(this, a);
			for(a = this.adornments; a.next();) a.value.Da()
		}
	};
	U.prototype.Ob = function() {
		var a = this.diagram;
		null !== a && (Li(a), 0 !== (this.H & 16384) !== !0 && (ei(this, !0), a.cc()))
	};

	function di(a) {
		0 !== (a.H & 16384) !== !1 && (a.updateAdornments(), ei(a, !1))
	}

	function bo(a, b) {
		b.toolManager.mouseDownTools.each(function(b) {
			b.isEnabled && b.updateAdornments(a)
		});
		b.toolManager.updateAdornments(a)
	}

	function co(a) {
		if(!1 === lj(a)) {
			var b = a.diagram;
			null !== b && (b.Fd.add(a), b.cc());
			eo(a, !0);
			a.Yk()
		}
	}

	function fo(a) {
		a.H |= 2097152;
		if(!1 !== lj(a)) {
			var b = a.position,
				c = a.location;
			c.s() && b.s() || ho(a, b, c);
			c = a.yb;
			var d = M.alloc().assign(c);
			c.ha();
			c.x = b.x;
			c.y = b.y;
			c.freeze();
			a.gt(d, c);
			M.free(d);
			eo(a, !1)
		}
	}
	U.prototype.move = function(a, b) {
		!0 === b ? this.location = a : this.position = a
	};
	U.prototype.moveTo = function(a, b, c) {
		a = G.allocAt(a, b);
		this.move(a, c);
		G.free(a)
	};
	U.prototype.isVisible = function() {
		if(!this.visible) return !1;
		var a = this.layer;
		if(null !== a && !a.visible) return !1;
		a = this.diagram;
		if(null !== a && (a = a.animationManager, a.isAnimating && (a = a.rj.J(this), null !== a && a.kt))) return !0;
		a = this.containingGroup;
		return null === a || a.isSubGraphExpanded && a.isVisible() ? !0 : !1
	};
	t = U.prototype;
	t.Pb = function(a) {
		var b = this.diagram;
		a ? (this.B(4), this.Ob(), null !== b && b.Fd.add(this)) : (this.B(8), this.Lj());
		this.uh();
		null !== b && (b.Xa(), b.R())
	};
	t.Ya = function(a) {
		if(this.name === a) return this;
		var b = this.pj;
		null === b && (this.pj = b = new Nb);
		if(null !== b.J(a)) return b.J(a);
		for(var c = this.W.j, d = c.length, e = 0; e < d; e++) {
			var f = c[e];
			if(f.name === a) return b.set(a, f), f;
			if(f instanceof Y)
				if(null === f.Ng && null === f.Hd) {
					if(f = f.Ya(a), null !== f) return b.set(a, f), f
				} else if(Sm(f) && (f = f.W.first(), null !== f && f.name === a)) return b.set(a, f), f
		}
		b.set(a, null);
		return null
	};
	t.sh = function(a, b, c) {
		void 0 === c && (c = new G);
		b = b.mc() ? id : b;
		var d = a.naturalBounds;
		c.h(d.width * b.x + b.offsetX, d.height * b.y + b.offsetY);
		if(null === a || a === this) return c;
		a.transform.ta(c);
		for(a = a.panel; null !== a && a !== this;) a.transform.ta(c), a = a.panel;
		this.Nf.ta(c);
		c.offset(-this.sc.x, -this.sc.y);
		return c
	};
	t.Qu = function(a) {
		void 0 === a && (a = new M);
		return a.assign(this.actualBounds)
	};
	t.kc = function() {
		!0 === jj(this) && (this instanceof V && this.memberParts.each(function(a) {
			a.kc()
		}), this.measure(Infinity, Infinity));
		this.arrange()
	};

	function hi(a, b) {
		var c = a.Vx;
		isNaN(a.Sg) && (a.Sg = Tm(a));
		var d = a.Sg;
		var e = 2 * d;
		if(!a.isShadowed) return c.h(b.x - 1 - d, b.y - 1 - d, b.width + 2 + e, b.height + 2 + e), c;
		d = b.x;
		e = b.y;
		var f = b.width;
		b = b.height;
		var g = a.shadowBlur;
		a = a.shadowOffset;
		f += g;
		b += g;
		d -= g / 2;
		e -= g / 2;
		0 < a.x ? f += a.x : (d += a.x, f -= a.x);
		0 < a.y ? b += a.y : (e += a.y, b -= a.y);
		c.h(d - 1, e - 1, f + 2, b + 2);
		return c
	}
	U.prototype.arrange = function() {
		if(!1 === kj(this)) fo(this);
		else {
			var a = this.yb,
				b = M.alloc();
			b.assign(a);
			a.ha();
			var c = mg(this);
			this.nh(0, 0, this.sc.width, this.sc.height);
			var d = this.position;
			ho(this, d, this.location);
			a.x = d.x;
			a.y = d.y;
			a.freeze();
			this.gt(b, a);
			bl(this, !1);
			b.A(a) ? this.ld(c) : !this.ac() || H.w(b.width, a.width) && H.w(b.height, a.height) || 0 <= this.zw && this.B(16);
			M.free(b);
			eo(this, !1)
		}
	};
	t = U.prototype;
	t.gt = function(a, b) {
		var c = this.diagram;
		if(null !== c) {
			var d = !1;
			if(!1 === c.Lg && a.s()) {
				var e = M.alloc();
				e.assign(c.documentBounds);
				e.Lv(c.padding);
				a.x > e.x && a.y > e.y && a.right < e.right && a.bottom < e.bottom && b.x > e.x && b.y > e.y && b.right < e.right && b.bottom < e.bottom && (d = !0);
				M.free(e)
			}
			0 !== (this.H & 65536) !== !0 && a.A(b) || yj(this, d, c);
			c.R();
			Ec(a, b) || (this instanceof W && !c.undoManager.isUndoingRedoing && this.hd(), this.uh())
		}
	};
	t.Fv = function(a, b) {
		if(this.wh() || !a.s()) return !1;
		var c = this.diagram;
		if(null !== c && (io(this, c, a, b), !0 === c.undoManager.isUndoingRedoing)) return !0;
		this.ra = a;
		this.H &= -2097153;
		c = this.Of;
		if(c.s()) {
			var d = c.copy();
			c.h(c.x + (a.x - b.x), c.y + (a.y - b.y));
			this.g("location", d, c)
		}!1 === lj(this) && !1 === kj(this) && (co(this), fo(this));
		return !0
	};

	function io(a, b, c, d) {
		null === b || a instanceof pf || (b = b.animationManager, b.ab && Sh(b, a, "position", d.copy(), c.copy(), !1))
	}
	t.rt = function(a, b) {
		var c = this.Of,
			d = this.ra;
		lj(this) || kj(this) ? c.h(NaN, NaN) : c.h(c.x + a - d.x, c.y + b - d.y);
		d.h(a, b);
		co(this)
	};
	t.Gv = function() {
		this.H &= -2097153;
		co(this)
	};

	function ho(a, b, c) {
		var d = G.alloc(),
			e = a.locationSpot,
			f = a.locationObject;
		e.mc() && A("determineOffset: Part's locationSpot must be real: " + e.toString());
		var g = f.naturalBounds,
			h = f instanceof qg ? f.strokeWidth : 0;
		d.kk(0, 0, g.width + h, g.height + h, e);
		if(f !== a)
			for(d.offset(-h / 2, -h / 2), f.transform.ta(d), e = f.panel; null !== e && e !== a;) e.transform.ta(d), e = e.panel;
		a.Nf.ta(d);
		d.offset(-a.sc.x, -a.sc.y);
		e = a.diagram;
		f = c.s();
		g = b.s();
		f && g ? 0 !== (a.H & 2097152) ? jo(a, b, c, e, d) : ko(a, b, c, e, d) : f ? jo(a, b, c, e, d) : g && ko(a, b, c, e, d);
		a.H |= 2097152;
		G.free(d);
		a.Yk()
	}

	function jo(a, b, c, d, e) {
		var f = b.x,
			g = b.y;
		b.h(c.x - e.x, c.y - e.y);
		null !== d && (c = d.animationManager, (e = c.isAnimating) || !c.ab || a instanceof pf || Sh(c, a, "position", new G(f, g), b, !1), e || b.x === f && b.y === g || (c = d.skipsUndoManager, d.skipsUndoManager = !0, a.g("position", new G(f, g), b), d.skipsUndoManager = c))
	}

	function ko(a, b, c, d, e) {
		var f = c.copy();
		c.h(b.x + e.x, b.y + e.y);
		c.A(f) || null === d || (b = d.skipsUndoManager, d.skipsUndoManager = !0, a.g("location", f, c), d.skipsUndoManager = b)
	}

	function yj(a, b, c) {
		dl(a, !1);
		a instanceof W && kk(c, a);
		a.layer.isTemporary || b || c.Xa();
		b = a.yb;
		var d = c.viewportBounds;
		d.s() ? mg(a) ? (Hc(b, d, 10) || a.ld(!1), a.updateAdornments()) : b.Kc(d) ? (a.ld(!0), a.updateAdornments()) : a.Ob() : c.Zh = !0
	}
	t.Hi = function() {
		return !0
	};
	t.ac = function() {
		return !0
	};
	t.wh = function() {
		return !1
	};
	t.qg = function() {
		return !0
	};

	function lo(a, b, c, d) {
		b.constructor === a.constructor || mo || (mo = !0, Ba('Should not change the class of the Part when changing category from "' + c + '" to "' + d + '"'), Ba("  Old class: " + Oa(a.constructor) + ", new class: " + Oa(b.constructor) + ", part: " + a.toString()));
		a.Lj();
		var e = a.data;
		c = a.layerName;
		var f = a.isSelected,
			g = a.isHighlighted,
			h = !0,
			k = !0,
			l = !1;
		a instanceof W && (h = a.isTreeLeaf, k = a.isTreeExpanded, l = a.wasTreeExpanded);
		b.lf(a);
		b.cloneProtected(a);
		a.yf = d;
		a.o();
		a.R();
		b = a.diagram;
		d = !0;
		null !== b && (d = b.skipsUndoManager,
			b.skipsUndoManager = !0);
		a.lb = e;
		null !== e && a.Da();
		null !== b && (b.skipsUndoManager = d);
		e = a.layerName;
		e !== c && (a.Pg = c, a.layerName = e);
		a instanceof W && (a.isTreeLeaf = h, a.isTreeExpanded = k, a.wasTreeExpanded = l, a.ac() && a.B(64));
		a.isSelected = f;
		a.isHighlighted = g
	}
	U.prototype.canCopy = function() {
		if(!this.copyable) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowCopy) return !1;
		a = a.diagram;
		return null === a ? !0 : a.allowCopy ? !0 : !1
	};
	U.prototype.canDelete = function() {
		if(!this.deletable) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowDelete) return !1;
		a = a.diagram;
		return null === a ? !0 : a.allowDelete ? !0 : !1
	};
	U.prototype.canEdit = function() {
		if(!this.textEditable) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowTextEdit) return !1;
		a = a.diagram;
		return null === a ? !0 : a.allowTextEdit ? !0 : !1
	};
	U.prototype.canGroup = function() {
		if(!this.groupable) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowGroup) return !1;
		a = a.diagram;
		return null === a ? !0 : a.allowGroup ? !0 : !1
	};
	U.prototype.canMove = function() {
		if(!this.movable) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowMove) return !1;
		a = a.diagram;
		return null === a ? !0 : a.allowMove ? !0 : !1
	};
	U.prototype.canReshape = function() {
		if(!this.reshapable) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowReshape) return !1;
		a = a.diagram;
		return null === a ? !0 : a.allowReshape ? !0 : !1
	};
	U.prototype.canResize = function() {
		if(!this.resizable) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowResize) return !1;
		a = a.diagram;
		return null === a ? !0 : a.allowResize ? !0 : !1
	};
	U.prototype.canRotate = function() {
		if(!this.rotatable) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowRotate) return !1;
		a = a.diagram;
		return null === a ? !0 : a.allowRotate ? !0 : !1
	};
	U.prototype.canSelect = function() {
		if(!this.selectable) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowSelect) return !1;
		a = a.diagram;
		return null === a ? !0 : a.allowSelect ? !0 : !1
	};

	function ei(a, b) {
		a.H = b ? a.H | 16384 : a.H & -16385
	}

	function lj(a) {
		return 0 !== (a.H & 32768)
	}

	function eo(a, b) {
		a.H = b ? a.H | 32768 : a.H & -32769
	}

	function dl(a, b) {
		a.H = b ? a.H | 65536 : a.H & -65537
	}

	function mg(a) {
		return 0 !== (a.H & 131072)
	}
	t = U.prototype;
	t.ld = function(a) {
		this.H = a ? this.H | 131072 : this.H & -131073
	};

	function no(a, b) {
		a.H = b ? a.H | 1048576 : a.H & -1048577
	}
	t.uh = function() {
		var a = this.containingGroup;
		null !== a && (a.o(), null !== a.placeholder && a.placeholder.o(), a.hd())
	};
	t.R = function() {
		var a = this.diagram;
		null !== a && !kj(this) && !lj(this) && this.isVisible() && this.yb.s() && a.R(hi(this, this.yb))
	};
	t.o = function() {
		Y.prototype.o.call(this);
		var a = this.diagram;
		null !== a && (a.Fd.add(this), this instanceof W && null !== this.labeledLink && sl(this.labeledLink), a.cc(!0))
	};
	t.Rp = function(a) {
		a || (a = this.Nh, null !== a && oo(a, this))
	};
	t.Sp = function(a) {
		a || (a = this.Nh, null !== a && po(a, this))
	};
	t.Rj = function() {
		var a = this.data;
		if(null !== a) {
			var b = this.diagram;
			null !== b && (b = b.model, null !== b && b.fq(a))
		}
	};
	t.My = function() {
		return qo(this, this)
	};

	function qo(a, b) {
		var c = b.containingGroup;
		return null !== c ? 1 + qo(a, c) : b instanceof W && (b = b.labeledLink, null !== b) ? qo(a, b) : 0
	}
	t.Py = function() {
		return ro(this, this)
	};

	function ro(a, b) {
		var c = b.containingGroup;
		return null !== c || b instanceof W && (c = b.labeledLink, null !== c) ? ro(a, c) : b
	}
	t.Ee = function(a) {
		return a instanceof V ? so(this, this, a) : !1
	};

	function so(a, b, c) {
		if(b === c || null === c) return !1;
		var d = b.containingGroup;
		return null === d || d !== c && !so(a, d, c) ? b instanceof W && (b = b.labeledLink, null !== b) ? so(a, b, c) : !1 : !0
	}
	t.gx = function(a) {
		if(null === a) return null;
		if(this === a) return this.containingGroup;
		for(var b = this; null !== b;) {
			b instanceof V && no(b, !0);
			if(b instanceof W) {
				var c = b.labeledLink;
				null !== c && (b = c)
			}
			b = b.containingGroup
		}
		c = null;
		for(b = a; null !== b;) {
			if(0 !== (b.H & 1048576)) {
				c = b;
				break
			}
			b instanceof W && (a = b.labeledLink, null !== a && (b = a));
			b = b.containingGroup
		}
		for(b = this; null !== b;) b instanceof V && no(b, !1), b instanceof W && (a = b.labeledLink, null !== a && (b = a)), b = b.containingGroup;
		return c
	};
	U.prototype.canLayout = function() {
		if(!this.isLayoutPositioned || !this.isVisible()) return !1;
		var a = this.layer;
		return null !== a && a.isTemporary || this instanceof W && this.isLinkLabel ? !1 : !0
	};
	U.prototype.B = function(a) {
		void 0 === a && (a = 16777215);
		if(this.isLayoutPositioned && 0 !== (a & this.layoutConditions)) {
			var b = this.layer;
			null !== b && b.isTemporary || this instanceof W && this.isLinkLabel ? b = !1 : (b = this.diagram, b = null !== b && b.undoManager.isUndoingRedoing ? !1 : !0)
		} else b = !1;
		if(b)
			if(b = this.Nh, null !== b) {
				var c = b.layout;
				null !== c ? c.B() : b.B(a)
			} else a = this.diagram, null !== a && (a = a.layout, null !== a && a.B())
	};

	function zj(a) {
		if(!a.isVisible()) return !1;
		a = a.layer;
		return null !== a && a.isTemporary ? !1 : !0
	}

	function Hk(a, b, c, d, e, f) {
		void 0 === f && (f = null);
		if(!(a.contains(b) || null !== f && !f(b) || b instanceof pf))
			if(a.add(b), b instanceof W) {
				if(c && b instanceof V)
					for(var g = b.memberParts; g.next();) Hk(a, g.value, c, d, e, f);
				if(!1 !== e)
					for(g = b.linksConnected; g.next();) {
						var h = g.value;
						if(!a.contains(h)) {
							var k = h.fromNode,
								l = h.toNode;
							k = null === k || a.contains(k);
							l = null === l || a.contains(l);
							(e ? k && l : k || l) && Hk(a, h, c, d, e, f)
						}
					}
				if(1 < d)
					for(b = b.Pu(); b.next();) Hk(a, b.value, c, d - 1, e, f)
			} else if(b instanceof S)
			for(b = b.labelNodes; b.next();) Hk(a,
				b.value, c, d, e, f)
	}
	oa.Object.defineProperties(U.prototype, {
		key: {
			get: function() {
				var a = this.diagram;
				if(null !== a) return a.model.sa(this.data)
			}
		},
		adornments: {
			get: function() {
				return null === this.wf ? xb : this.wf.iteratorValues
			}
		},
		layer: {
			get: function() {
				return this.ci
			}
		},
		diagram: {
			get: function() {
				var a = this.ci;
				return null !== a ? a.diagram : null
			}
		},
		layerName: {
			get: function() {
				return this.Pg
			},
			set: function(a) {
				var b =
					this.Pg;
				if(b !== a) {
					var c = this.diagram;
					if(null === c || null !== c.Ul(a))
						if(this.Pg = a, null !== c && c.Xa(), this.g("layerName", b, a), b = this.layer, null !== b && b.name !== a && (c = b.diagram, null !== c && (a = c.Ul(a), null !== a && a !== b))) {
							var d = b.zc(-1, this, !0);
							0 <= d && c.cb(ff, "parts", b, this, null, d, !0);
							d = a.Gi(99999999, this, !0);
							b.visible !== a.visible && this.Pb(a.visible);
							0 <= d && c.cb(af, "parts", a, null, this, !0, d);
							d = this.layerChanged;
							if(null !== d) {
								var e = c.ca;
								c.ca = !0;
								d(this, b, a);
								c.ca = e
							}
						}
				}
			}
		},
		layerChanged: {
			get: function() {
				return this.Tn
			},
			set: function(a) {
				var b = this.Tn;
				b !== a && (this.Tn = a, this.g("layerChanged", b, a))
			}
		},
		zOrder: {
			get: function() {
				return this.Cp
			},
			set: function(a) {
				var b = this.Cp;
				if(b !== a) {
					this.Cp = a;
					var c = this.layer;
					null !== c && ji(c, -1, this);
					this.g("zOrder", b, a);
					a = this.diagram;
					null !== a && a.R()
				}
			}
		},
		locationObject: {
			get: function() {
				if(null === this.Ve) {
					var a = this.locationObjectName;
					"" !== a ? (a = this.Ya(a), null !== a ? this.Ve = a : this.Ve = this) : this instanceof pf ? this.type !== Y.Link && null !==
						this.placeholder ? this.Ve = this.placeholder : this.Ve = this : this.Ve = this
				}
				return this.Ve.visible ? this.Ve : this
			}
		},
		minLocation: {
			get: function() {
				return this.jo
			},
			set: function(a) {
				var b = this.jo;
				b.A(a) || (this.jo = a = a.I(), this.g("minLocation", b, a))
			}
		},
		maxLocation: {
			get: function() {
				return this.ao
			},
			set: function(a) {
				var b = this.ao;
				b.A(a) || (this.ao = a = a.I(), this.g("maxLocation", b, a))
			}
		},
		locationObjectName: {
			get: function() {
				return this.Zn
			},
			set: function(a) {
				var b = this.Zn;
				b !== a && (this.Zn = a, this.Ve = null, this.o(), this.g("locationObjectName", b, a))
			}
		},
		locationSpot: {
			get: function() {
				return this.$n
			},
			set: function(a) {
				var b = this.$n;
				b.A(a) || (this.$n = a = a.I(), this.o(), this.g("locationSpot", b, a))
			}
		},
		location: {
			get: function() {
				return this.Of
			},
			set: function(a) {
				var b = a.x,
					c = a.y,
					d = this.Of,
					e = d.x,
					f = d.y;
				(e === b || isNaN(e) && isNaN(b)) && (f === c || isNaN(f) && isNaN(c)) || (a = a.I(), b = a, this.wh() ? b = !1 : (this.Of = b, this.H |=
					2097152, !1 === kj(this) && (co(this), c = this.ra, c.s() && (e = c.copy(), c.h(c.x + (b.x - d.x), c.y + (b.y - d.y)), io(this, this.diagram, c, e), this.g("position", e, c))), b = !0), b && this.g("location", d, a))
			}
		},
		category: {
			get: function() {
				return this.yf
			},
			set: function(a) {
				var b = this.yf;
				if(b !== a) {
					var c = this.diagram,
						d = this.data,
						e = null;
					if(null !== c && null !== d && !(this instanceof pf)) {
						var f = c.model.undoManager;
						f.isEnabled && !f.isUndoingRedoing && (e = this.clone(), e.W.addAll(this.W))
					}
					this.yf = a;
					this.g("category", b,
						a);
					null === c || null === d || this instanceof pf ? this instanceof pf && (e = this.adornedPart, null !== e && (a = e.wf, null !== a && a.remove(b), e.jh(this.category, this))) : (f = c.model, f.undoManager.isUndoingRedoing || (this.wh() ? (c.partManager.setLinkCategoryForData(d, a), c = c.partManager.findLinkTemplateForCategory(a), null !== c && (ch(c), c = c.copy(), null !== c && lo(this, c, b, a))) : (null !== f && f.kq(d, a), c = to(c.partManager, d, a), null !== c && (ch(c), c = c.copy(), null === c || c instanceof S || (c.location = this.location, lo(this, c, b, a)))), null !== e &&
						(b = this.clone(), b.W.addAll(this.W), this.g("self", e, b))))
				}
			}
		},
		self: {
			get: function() {
				return this
			},
			set: function(a) {
				lo(this, a, this.category, a.category)
			}
		},
		copyable: {
			get: function() {
				return 0 !== (this.H & 1)
			},
			set: function(a) {
				var b = 0 !== (this.H & 1);
				b !== a && (this.H ^= 1, this.g("copyable", b, a))
			}
		},
		deletable: {
			get: function() {
				return 0 !== (this.H & 2)
			},
			set: function(a) {
				var b = 0 !== (this.H & 2);
				b !== a && (this.H ^= 2, this.g("deletable", b, a))
			}
		},
		textEditable: {
			get: function() {
				return 0 !== (this.H & 4)
			},
			set: function(a) {
				var b = 0 !== (this.H & 4);
				b !== a && (this.H ^= 4, this.g("textEditable", b, a), this.Ob())
			}
		},
		groupable: {
			get: function() {
				return 0 !== (this.H & 8)
			},
			set: function(a) {
				var b = 0 !== (this.H & 8);
				b !== a && (this.H ^= 8, this.g("groupable", b, a))
			}
		},
		movable: {
			get: function() {
				return 0 !== (this.H & 16)
			},
			set: function(a) {
				var b = 0 !== (this.H & 16);
				b !== a && (this.H ^= 16, this.g("movable", b, a))
			}
		},
		selectionAdorned: {
			get: function() {
				return 0 !== (this.H & 32)
			},
			set: function(a) {
				var b = 0 !== (this.H & 32);
				b !== a && (this.H ^= 32, this.g("selectionAdorned", b, a), this.Ob())
			}
		},
		isInDocumentBounds: {
			get: function() {
				return 0 !== (this.H & 64)
			},
			set: function(a) {
				var b = 0 !== (this.H & 64);
				if(b !== a) {
					this.H ^= 64;
					var c = this.diagram;
					null !== c && c.Xa();
					this.g("isInDocumentBounds", b, a)
				}
			}
		},
		isLayoutPositioned: {
			get: function() {
				return 0 !== (this.H & 128)
			},
			set: function(a) {
				var b = 0 !== (this.H & 128);
				b !== a && (this.H ^= 128, this.g("isLayoutPositioned", b, a), this.B(a ? 4 : 8))
			}
		},
		selectable: {
			get: function() {
				return 0 !== (this.H & 256)
			},
			set: function(a) {
				var b = 0 !== (this.H & 256);
				b !== a && (this.H ^= 256, this.g("selectable", b, a), this.Ob())
			}
		},
		reshapable: {
			get: function() {
				return 0 !== (this.H & 512)
			},
			set: function(a) {
				var b = 0 !== (this.H & 512);
				b !== a && (this.H ^= 512, this.g("reshapable", b, a), this.Ob())
			}
		},
		resizable: {
			get: function() {
				return 0 !== (this.H &
					1024)
			},
			set: function(a) {
				var b = 0 !== (this.H & 1024);
				b !== a && (this.H ^= 1024, this.g("resizable", b, a), this.Ob())
			}
		},
		rotatable: {
			get: function() {
				return 0 !== (this.H & 2048)
			},
			set: function(a) {
				var b = 0 !== (this.H & 2048);
				b !== a && (this.H ^= 2048, this.g("rotatable", b, a), this.Ob())
			}
		},
		isSelected: {
			get: function() {
				return 0 !== (this.H & 4096)
			},
			set: function(a) {
				var b = 0 !== (this.H & 4096);
				if(b !== a) {
					var c = this.diagram;
					if(!a || this.canSelect() && !(null !== c && c.selection.count >= c.maxSelectionCount)) {
						this.H ^=
							4096;
						var d = !1;
						if(null !== c) {
							d = c.skipsUndoManager;
							c.skipsUndoManager = !0;
							var e = c.selection;
							e.ha();
							a ? e.add(this) : e.remove(this);
							e.freeze()
						}
						this.g("isSelected", b, a);
						this.Ob();
						a = this.selectionChanged;
						null !== a && a(this);
						null !== c && (c.cc(), c.skipsUndoManager = d)
					}
				}
			}
		},
		isHighlighted: {
			get: function() {
				return 0 !== (this.H & 524288)
			},
			set: function(a) {
				var b = 0 !== (this.H & 524288);
				if(b !== a) {
					this.H ^= 524288;
					var c = this.diagram;
					null !== c && (c = c.highlighteds, c.ha(), a ? c.add(this) : c.remove(this), c.freeze());
					this.g("isHighlighted", b, a);
					this.R();
					a = this.highlightedChanged;
					null !== a && a(this)
				}
			}
		},
		isShadowed: {
			get: function() {
				return 0 !== (this.H & 8192)
			},
			set: function(a) {
				var b = 0 !== (this.H & 8192);
				b !== a && (this.H ^= 8192, this.g("isShadowed", b, a), this.R())
			}
		},
		isAnimated: {
			get: function() {
				return 0 !== (this.H & 262144)
			},
			set: function(a) {
				var b = 0 !== (this.H & 262144);
				b !== a && (this.H ^= 262144, this.g("isAnimated", b, a))
			}
		},
		highlightedChanged: {
			get: function() {
				return this.Fn
			},
			set: function(a) {
				var b = this.Fn;
				b !== a && (this.Fn = a, this.g("highlightedChanged", b, a))
			}
		},
		selectionObjectName: {
			get: function() {
				return this.cp
			},
			set: function(a) {
				var b = this.cp;
				b !== a && (this.cp = a, this.Zg = null, this.g("selectionObjectName", b, a))
			}
		},
		selectionAdornmentTemplate: {
			get: function() {
				return this.ap
			},
			set: function(a) {
				var b = this.ap;
				b !== a && (this.ap = a, this.g("selectionAdornmentTemplate", b, a))
			}
		},
		selectionObject: {
			get: function() {
				if(null ===
					this.Zg) {
					var a = this.selectionObjectName;
					null !== a && "" !== a ? (a = this.Ya(a), null !== a ? this.Zg = a : this.Zg = this) : this instanceof S ? (a = this.path, null !== a ? this.Zg = a : this.Zg = this) : this.Zg = this
				}
				return this.Zg
			}
		},
		selectionChanged: {
			get: function() {
				return this.bp
			},
			set: function(a) {
				var b = this.bp;
				b !== a && (this.bp = a, this.g("selectionChanged", b, a))
			}
		},
		resizeAdornmentTemplate: {
			get: function() {
				return this.Oo
			},
			set: function(a) {
				var b = this.Oo;
				b !== a && (this.Oo = a, this.g("resizeAdornmentTemplate",
					b, a))
			}
		},
		resizeObjectName: {
			get: function() {
				return this.Qo
			},
			set: function(a) {
				var b = this.Qo;
				b !== a && (this.Qo = a, this.g("resizeObjectName", b, a))
			}
		},
		resizeObject: {
			get: function() {
				var a = this.resizeObjectName;
				return "" !== a && (a = this.Ya(a), null !== a) ? a : this
			}
		},
		resizeCellSize: {
			get: function() {
				return this.Po
			},
			set: function(a) {
				var b = this.Po;
				b.A(a) || (this.Po = a = a.I(), this.g("resizeCellSize", b, a))
			}
		},
		rotateAdornmentTemplate: {
			get: function() {
				return this.Ro
			},
			set: function(a) {
				var b = this.Ro;
				b !== a && (this.Ro = a, this.g("rotateAdornmentTemplate", b, a))
			}
		},
		rotateObjectName: {
			get: function() {
				return this.So
			},
			set: function(a) {
				var b = this.So;
				b !== a && (this.So = a, this.g("rotateObjectName", b, a))
			}
		},
		rotateObject: {
			get: function() {
				var a = this.rotateObjectName;
				return "" !== a && (a = this.Ya(a), null !== a) ? a : this
			}
		},
		rotationSpot: {
			get: function() {
				return this.u
			},
			set: function(a) {
				var b = this.u;
				b.A(a) || (this.u = a = a.I(), this.g("rotationSpot", b, a))
			}
		},
		text: {
			get: function() {
				return this.Rb
			},
			set: function(a) {
				var b = this.Rb;
				b !== a && (this.Rb = a, this.g("text", b, a))
			}
		},
		containingGroup: {
			get: function() {
				return this.Nh
			},
			set: function(a) {
				if(this.ac()) {
					var b = this.Nh;
					if(b !== a) {
						null === a || this !== a && !a.Ee(this) || (this === a && A("Cannot make a Group a member of itself: " + this.toString()), A("Cannot make a Group indirectly contain itself: " +
							this.toString() + " already contains " + a.toString()));
						this.B(2);
						var c = this.diagram;
						null !== b ? po(b, this) : this instanceof V && null !== c && c.ui.remove(this);
						this.Nh = a;
						null !== a ? oo(a, this) : this instanceof V && null !== c && c.ui.add(this);
						this.B(1);
						if(null !== c) {
							var d = this.data,
								e = c.model;
							null !== d && Jk(e) && e.Bv(d, e.sa(null !== a ? a.data : null))
						}
						d = this.containingGroupChanged;
						null !== d && (e = !0, null !== c && (e = c.ca, c.ca = !0), d(this, b, a), null !== c && (c.ca = e));
						if(this instanceof V)
							for(c = new F, Hk(c, this, !0, 0, !0), c = c.iterator; c.next();)
								if(d =
									c.value, d instanceof W)
									for(d = d.linksConnected; d.next();) uo(d.value);
						if(this instanceof W) {
							for(c = this.linksConnected; c.next();) uo(c.value);
							c = this.labeledLink;
							null !== c && uo(c)
						}
						this.g("containingGroup", b, a);
						null !== a && (b = a.layer, null !== b && ji(b, -1, a))
					}
				} else A("cannot set the Part.containingGroup of a Link or Adornment")
			}
		},
		containingGroupChanged: {
			get: function() {
				return this.Sm
			},
			set: function(a) {
				var b = this.Sm;
				b !== a && (this.Sm = a, this.g("containingGroupChanged", b, a))
			}
		},
		isTopLevel: {
			get: function() {
				return null !== this.containingGroup || this instanceof W && null !== this.labeledLink ? !1 : !0
			}
		},
		layoutConditions: {
			get: function() {
				return this.Un
			},
			set: function(a) {
				var b = this.Un;
				b !== a && (this.Un = a, this.g("layoutConditions", b, a))
			}
		},
		dragComputation: {
			get: function() {
				return this.on
			},
			set: function(a) {
				var b = this.on;
				b !== a && (this.on = a, this.g("dragComputation", b, a))
			}
		},
		shadowOffset: {
			get: function() {
				return this.oi
			},
			set: function(a) {
				var b = this.oi;
				b.A(a) || (this.oi = a = a.I(), this.R(), this.g("shadowOffset", b, a))
			}
		},
		shadowColor: {
			get: function() {
				return this.Bj
			},
			set: function(a) {
				var b = this.Bj;
				b !== a && (this.Bj = a, this.R(), this.g("shadowColor", b, a))
			}
		},
		shadowBlur: {
			get: function() {
				return this.Qd
			},
			set: function(a) {
				var b = this.Qd;
				b !== a && (this.Qd = a, this.R(), this.g("shadowBlur", b, a))
			}
		}
	});
	U.prototype.invalidateLayout = U.prototype.B;
	U.prototype.findCommonContainingGroup = U.prototype.gx;
	U.prototype.isMemberOf = U.prototype.Ee;
	U.prototype.findTopLevelPart = U.prototype.Py;
	U.prototype.findSubGraphLevel = U.prototype.My;
	U.prototype.ensureBounds = U.prototype.kc;
	U.prototype.getDocumentBounds = U.prototype.Qu;
	U.prototype.getRelativePoint = U.prototype.sh;
	U.prototype.findObject = U.prototype.Ya;
	U.prototype.moveTo = U.prototype.moveTo;
	U.prototype.invalidateAdornments = U.prototype.Ob;
	U.prototype.clearAdornments = U.prototype.Lj;
	U.prototype.removeAdornment = U.prototype.sf;
	U.prototype.addAdornment = U.prototype.jh;
	U.prototype.findAdornment = U.prototype.Tj;
	U.prototype.updateTargetBindings = U.prototype.Da;
	var mo = !1;
	U.className = "Part";
	U.LayoutNone = 0;
	U.LayoutAdded = 1;
	U.LayoutRemoved = 2;
	U.LayoutShown = 4;
	U.LayoutHidden = 8;
	U.LayoutNodeSized = 16;
	U.LayoutGroupLayout = 32;
	U.LayoutNodeReplaced = 64;
	U.LayoutStandard = 127;
	U.LayoutAll = 16777215;

	function pf(a) {
		0 === arguments.length ? U.call(this, Y.Position) : U.call(this, a);
		this.H &= -257;
		this.Pg = "Adornment";
		this.fb = null;
		this.Cw = 0;
		this.Mw = !1;
		this.l = [];
		this.Ua = null
	}
	na(pf, U);
	pf.prototype.toString = function() {
		var a = this.adornedPart;
		return "Adornment(" + this.category + ")" + (null !== a ? a.toString() : "")
	};
	pf.prototype.updateRelationshipsFromData = function() {};
	pf.prototype.ak = function(a) {
		var b = this.adornedObject.part;
		if(b instanceof S && this.adornedObject instanceof qg) {
			var c = b.path;
			b.ak(a);
			a = c.geometry;
			b = this.W.j;
			c = b.length;
			for(var d = 0; d < c; d++) {
				var e = b[d];
				e.isPanelMain && e instanceof qg && (e.pa = a)
			}
		}
	};
	pf.prototype.Hi = function() {
		var a = this.fb;
		if(null === a) return !0;
		a = a.part;
		return null === a || !kj(a)
	};
	pf.prototype.ac = function() {
		return !1
	};
	pf.prototype.hk = function(a, b, c, d, e, f, g) {
		if(a === af && "elements" === b)
			if(e instanceof bh) null === this.Ua && (this.Ua = e);
			else {
				if(e instanceof Y) {
					var h = e.Tl(function(a) {
						return a instanceof bh
					});
					h instanceof bh && null === this.Ua && (this.Ua = h)
				}
			}
		else a === ff && "elements" === b && null !== this.Ua && (d === this.Ua ? this.Ua = null : d instanceof Y && this.Ua.vh(d) && (this.Ua = null));
		U.prototype.hk.call(this, a, b, c, d, e, f, g)
	};
	pf.prototype.updateAdornments = function() {};
	pf.prototype.Rj = function() {};
	oa.Object.defineProperties(pf.prototype, {
		placeholder: {
			get: function() {
				return this.Ua
			}
		},
		adornedObject: {
			get: function() {
				return this.fb
			},
			set: function(a) {
				var b = this.adornedPart,
					c = null;
				null !== a && (c = a.part);
				null === b || null !== a && b === c || b.sf(this.category);
				this.fb = a;
				null !== c && c.jh(this.category, this)
			}
		},
		adornedPart: {
			get: function() {
				var a = this.fb;
				return null !== a ? a.part : null
			}
		},
		containingGroup: {
			get: function() {
				return null
			}
		}
	});
	pf.className = "Adornment";

	function W(a) {
		U.call(this, a);
		this.Z = 13;
		this.$a = new E;
		this.wp = this.$k = this.fi = this.Wn = this.Vn = null;
		this.wk = Xc;
		this.tc = this.Me = null;
		this.Jo = vo;
		this.hh = !1
	}
	na(W, U);
	W.prototype.cloneProtected = function(a) {
		U.prototype.cloneProtected.call(this, a);
		a.Z = this.Z;
		a.Z = this.Z & -17;
		a.Vn = this.Vn;
		a.Wn = this.Wn;
		a.fi = this.fi;
		a.wp = this.wp;
		a.wk = this.wk.I();
		a.Jo = this.Jo
	};
	t = W.prototype;
	t.lf = function(a) {
		U.prototype.lf.call(this, a);
		a.hd();
		a.Me = this.Me;
		a.tc = null
	};

	function wo(a, b) {
		null !== b && (null === a.Me && (a.Me = new F), a.Me.add(b))
	}

	function xo(a, b, c, d) {
		if(null === b || null === a.Me) return null;
		for(var e = a.Me.iterator; e.next();) {
			var f = e.value;
			if(f.et === a && f.fv === b && f.Ex === c && f.Fx === d || f.et === b && f.fv === a && f.Ex === d && f.Fx === c) return f
		}
		return null
	}
	t.jz = function(a, b, c) {
		if(void 0 === b || null === b) b = "";
		if(void 0 === c || null === c) c = "";
		a = xo(this, a, b, c);
		null !== a && a.Yl()
	};
	t.hk = function(a, b, c, d, e, f, g) {
		a === af && "elements" === b ? this.tc = null : a === ff && "elements" === b && (this.tc = null);
		U.prototype.hk.call(this, a, b, c, d, e, f, g)
	};
	t.hd = function(a) {
		void 0 === a && (a = null);
		for(var b = this.linksConnected; b.next();) {
			var c = b.value;
			null !== a && a.contains(c) || (yo(this, c.fromPort), yo(this, c.toPort), c.Pa())
		}
	};

	function el(a, b) {
		for(var c = a.linksConnected; c.next();) {
			var d = c.value;
			if(d.fromPort === b || d.toPort === b) yo(a, d.fromPort), yo(a, d.toPort), d.Pa()
		}
	}

	function yo(a, b) {
		null !== b && (b = b.Io, null !== b && b.Yl(), a = a.containingGroup, null === a || a.isSubGraphExpanded || yo(a, a.port))
	}
	t.Hi = function() {
		return !0
	};
	W.prototype.getAvoidableRect = function(a) {
		a.set(this.actualBounds);
		a.Fp(this.wk);
		return a
	};
	W.prototype.findVisibleNode = function() {
		for(var a = this; null !== a && !a.isVisible();) a = a.containingGroup;
		return a
	};
	W.prototype.isVisible = function() {
		if(!U.prototype.isVisible.call(this)) return !1;
		var a = !0,
			b = pi,
			c = this.diagram;
		if(null !== c) {
			a = c.animationManager;
			if(a.isAnimating && (a = a.rj.J(this), null !== a && a.kt)) return !0;
			a = c.isTreePathToChildren;
			b = c.treeCollapsePolicy
		}
		if(b === pi) {
			if(c = this.og(), null !== c && !c.isTreeExpanded) return !1
		} else if(b === rk) {
			if(c = a ? this.Nu() : this.Ou(), 0 < c.count && c.all(function(a) {
					return !a.isTreeExpanded
				})) return !1
		} else if(b === sk && (c = a ? this.Nu() : this.Ou(), 0 < c.count && c.any(function(a) {
				return !a.isTreeExpanded
			}))) return !1;
		c = this.labeledLink;
		return null !== c ? c.isVisible() : !0
	};
	t = W.prototype;
	t.Pb = function(a) {
		U.prototype.Pb.call(this, a);
		for(var b = this.linksConnected; b.next();) b.value.Pb(a)
	};
	t.Lu = function(a) {
		void 0 === a && (a = null);
		if(null === a) return this.$a.iterator;
		var b = new zb(this.$a),
			c = this;
		b.predicate = function(b) {
			return b.fromNode === c && b.fromPortId === a || b.toNode === c && b.toPortId === a
		};
		return b
	};
	t.Mp = function(a) {
		void 0 === a && (a = null);
		var b = new zb(this.$a),
			c = this;
		b.predicate = function(b) {
			return b.fromNode !== c ? !1 : null === a ? !0 : b.fromPortId === a
		};
		return b
	};
	t.vd = function(a) {
		void 0 === a && (a = null);
		var b = new zb(this.$a),
			c = this;
		b.predicate = function(b) {
			return b.toNode !== c ? !1 : null === a ? !0 : b.toPortId === a
		};
		return b
	};
	t.Mu = function(a) {
		void 0 === a && (a = null);
		for(var b = null, c = null, d = this.$a.iterator; d.next();) {
			var e = d.value;
			if(e.fromNode === this) {
				if(null === a || e.fromPortId === a) e = e.toNode, null !== b ? b.add(e) : null !== c && c !== e ? (b = new F, b.add(c), b.add(e)) : c = e
			} else e.toNode !== this || null !== a && e.toPortId !== a || (e = e.fromNode, null !== b ? b.add(e) : null !== c && c !== e ? (b = new F, b.add(c), b.add(e)) : c = e)
		}
		return null !== b ? b.iterator : null !== c ? new yb(c) : xb
	};
	t.Ou = function(a) {
		void 0 === a && (a = null);
		for(var b = null, c = null, d = this.$a.iterator; d.next();) {
			var e = d.value;
			e.fromNode !== this || null !== a && e.fromPortId !== a || (e = e.toNode, null !== b ? b.add(e) : null !== c && c !== e ? (b = new F, b.add(c), b.add(e)) : c = e)
		}
		return null !== b ? b.iterator : null !== c ? new yb(c) : xb
	};
	t.Nu = function(a) {
		void 0 === a && (a = null);
		for(var b = null, c = null, d = this.$a.iterator; d.next();) {
			var e = d.value;
			e.toNode !== this || null !== a && e.toPortId !== a || (e = e.fromNode, null !== b ? b.add(e) : null !== c && c !== e ? (b = new F, b.add(c), b.add(e)) : c = e)
		}
		return null !== b ? b.iterator : null !== c ? new yb(c) : xb
	};
	t.Iy = function(a, b, c) {
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		var d = new zb(this.$a),
			e = this;
		d.predicate = function(d) {
			return(d.fromNode !== e || d.toNode !== a || null !== b && d.fromPortId !== b || null !== c && d.toPortId !== c) && (d.fromNode !== a || d.toNode !== e || null !== c && d.fromPortId !== c || null !== b && d.toPortId !== b) ? !1 : !0
		};
		return d
	};
	t.Jy = function(a, b, c) {
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		var d = new zb(this.$a),
			e = this;
		d.predicate = function(d) {
			return d.fromNode !== e || d.toNode !== a || null !== b && d.fromPortId !== b || null !== c && d.toPortId !== c ? !1 : !0
		};
		return d
	};

	function zo(a, b, c) {
		yo(a, c);
		var d = a.$a.contains(b);
		d || a.$a.add(b);
		if(!d || b.fromNode === b.toNode) {
			var e = a.linkConnected;
			if(null !== e) {
				var f = !0,
					g = a.diagram;
				null !== g && (f = g.ca, g.ca = !0);
				e(a, b, c);
				null !== g && (g.ca = f)
			}
		}!d && b.isTreeLink && (c = b.fromNode, b = b.toNode, null !== c && null !== b && c !== b && (d = !0, a = a.diagram, null !== a && (d = a.isTreePathToChildren), e = d ? b : c, f = d ? c : b, e.hh || (e.hh = f), !f.isTreeLeaf || null !== a && a.undoManager.isUndoingRedoing || (d ? c === f && (f.isTreeLeaf = !1) : b === f && (f.isTreeLeaf = !1))))
	}

	function Ao(a, b, c) {
		yo(a, c);
		var d = a.$a.remove(b),
			e = null;
		if(d || b.toNode === b.fromNode) {
			var f = a.linkDisconnected;
			e = a.diagram;
			if(null !== f) {
				var g = !0;
				null !== e && (g = e.ca, e.ca = !0);
				f(a, b, c);
				null !== e && (e.ca = g)
			}
		}
		d && b.isTreeLink && (c = !0, null !== e && (c = e.isTreePathToChildren), a = c ? b.toNode : b.fromNode, b = c ? b.fromNode : b.toNode, null !== a && (a.hh = !1), null === b || b.isTreeLeaf || (0 === b.$a.count ? (b.hh = null, null !== e && e.undoManager.isUndoingRedoing || (b.isTreeLeaf = !0)) : qk(b)))
	}

	function qk(a) {
		a.hh = !1;
		if(0 !== a.$a.count) {
			var b = !0,
				c = a.diagram;
			if(null === c || !c.undoManager.isUndoingRedoing) {
				null !== c && (b = c.isTreePathToChildren);
				for(c = a.$a.iterator; c.next();) {
					var d = c.value;
					if(d.isTreeLink)
						if(b) {
							if(d.fromNode === a) {
								a.isTreeLeaf = !1;
								return
							}
						} else if(d.toNode === a) {
						a.isTreeLeaf = !1;
						return
					}
				}
				a.isTreeLeaf = !0
			}
		}
	}
	W.prototype.updateRelationshipsFromData = function() {
		var a = this.diagram;
		null !== a && a.partManager.updateRelationshipsFromData(this)
	};
	t = W.prototype;
	t.Rp = function(a) {
		U.prototype.Rp.call(this, a);
		a || (qk(this), a = this.$k, null !== a && Bo(a, this))
	};
	t.Sp = function(a) {
		U.prototype.Sp.call(this, a);
		a || (a = this.$k, null !== a && null !== a.bd && (a.bd.remove(this), a.o()))
	};
	t.Rj = function() {
		if(0 < this.$a.count) {
			var a = this.diagram;
			if(null !== a)
				for(var b = null !== a.commandHandler ? a.commandHandler.deletesConnectedLinks : !0, c = this.$a.copy().iterator; c.next();) {
					var d = c.value;
					b ? a.remove(d) : (d.fromNode === this && (d.fromNode = null), d.toNode === this && (d.toNode = null))
				}
		}
		this.labeledLink = null;
		U.prototype.Rj.call(this)
	};
	t.Qs = function(a) {
		if(null === this.tc) {
			if("" === a && !1 === this.th) return this;
			Co(this)
		}
		var b = this.tc.J(a);
		return null !== b || "" !== a && (b = this.tc.J(""), null !== b) ? b : this
	};

	function Co(a) {
		null === a.tc ? a.tc = new Nb : a.tc.clear();
		a.qm(a, function(a, c) {
			Hl(a, c)
		});
		0 === a.tc.count && a.tc.add("", a)
	}

	function Hl(a, b) {
		var c = b.portId;
		null !== c && null !== a.tc && a.tc.add(c, b)
	}

	function Gl(a, b, c) {
		var d = b.portId;
		if(null !== d && (null !== a.tc && a.tc.remove(d), b = a.diagram, null !== b && c)) {
			c = null;
			for(a = a.Lu(d); a.next();) d = a.value, null === c && (c = La()), c.push(d);
			if(null !== c) {
				for(a = 0; a < c.length; a++) b.remove(c[a]);
				Na(c)
			}
		}
	}
	t.lz = function(a) {
		if(null === a || a === this) return !1;
		var b = !0,
			c = this.diagram;
		null !== c && (b = c.isTreePathToChildren);
		c = this;
		if(b)
			for(; c !== a;) {
				b = null;
				for(var d = c.$a.iterator; d.next();) {
					var e = d.value;
					if(e.isTreeLink && (b = e.fromNode, b !== c && b !== this)) break
				}
				if(b === this || null === b || b === c) return !1;
				c = b
			} else
				for(; c !== a;) {
					b = null;
					for(d = c.$a.iterator; d.next() && (e = d.value, !e.isTreeLink || (b = e.toNode, b === c || b === this)););
					if(b === this || null === b || b === c) return !1;
					c = b
				}
		return !0
	};
	t.Ty = function() {
		var a = !0,
			b = this.diagram;
		null !== b && (a = b.isTreePathToChildren);
		b = this;
		if(a)
			for(;;) {
				a = null;
				for(var c = b.$a.iterator; c.next();) {
					var d = c.value;
					if(d.isTreeLink && (a = d.fromNode, a !== b && a !== this)) break
				}
				if(a === this) return this;
				if(null === a || a === b) return b;
				b = a
			} else
				for(;;) {
					a = null;
					for(c = b.$a.iterator; c.next() && (d = c.value, !d.isTreeLink || (a = d.toNode, a === b || a === this)););
					if(a === this) return this;
					if(null === a || a === b) return b;
					b = a
				}
	};
	t.Fy = function(a) {
		if(null === a) return null;
		if(this === a) return this;
		for(var b = this; null !== b;) no(b, !0), b = b.og();
		var c = null;
		for(b = a; null !== b;) {
			if(0 !== (b.H & 1048576)) {
				c = b;
				break
			}
			b = b.og()
		}
		for(b = this; null !== b;) no(b, !1), b = b.og();
		return c
	};
	t.Bi = function() {
		var a = !0,
			b = this.diagram;
		null !== b && (a = b.isTreePathToChildren);
		b = this.$a.iterator;
		if(a)
			for(; b.next();) {
				if(a = b.value, a.isTreeLink && a.fromNode !== this) return a
			} else
				for(; b.next();)
					if(a = b.value, a.isTreeLink && a.toNode !== this) return a;
		return null
	};
	t.og = function() {
		var a = this.hh;
		if(null === a) return null;
		if(a instanceof W) return a;
		var b = !0;
		a = this.diagram;
		null !== a && (b = a.isTreePathToChildren);
		a = this.$a.iterator;
		if(b)
			for(; a.next();) {
				if(b = a.value, b.isTreeLink && (b = b.fromNode, b !== this)) return this.hh = b
			} else
				for(; a.next();)
					if(b = a.value, b.isTreeLink && (b = b.toNode, b !== this)) return this.hh = b;
		return this.hh = null
	};
	t.Ry = function() {
		function a(b, d) {
			if(null !== b) {
				d.add(b);
				var c = b.Bi();
				null !== c && (d.add(c), a(b.og(), d))
			}
		}
		var b = new F;
		a(this, b);
		return b
	};
	t.Qy = function() {
		return Do(this, this)
	};

	function Do(a, b) {
		b = b.og();
		return null === b ? 0 : 1 + Do(a, b)
	}
	t.Op = function() {
		var a = !0,
			b = this.diagram;
		null !== b && (a = b.isTreePathToChildren);
		b = new zb(this.$a);
		var c = this;
		b.predicate = a ? function(a) {
			return a.isTreeLink && a.fromNode === c ? !0 : !1
		} : function(a) {
			return a.isTreeLink && a.toNode === c ? !0 : !1
		};
		return b
	};
	t.Pu = function() {
		var a = !0,
			b = this.diagram;
		null !== b && (a = b.isTreePathToChildren);
		var c = b = null,
			d = this.$a.iterator;
		if(a)
			for(; d.next();) a = d.value, a.isTreeLink && a.fromNode === this && (a = a.toNode, null !== b ? b.add(a) : null !== c && c !== a ? (b = new E, b.add(c), b.add(a)) : c = a);
		else
			for(; d.next();) a = d.value, a.isTreeLink && a.toNode === this && (a = a.fromNode, null !== b ? b.add(a) : null !== c && c !== a ? (b = new E, b.add(c), b.add(a)) : c = a);
		return null !== b ? b.iterator : null !== c ? new yb(c) : xb
	};
	t.Sy = function(a) {
		void 0 === a && (a = Infinity);
		var b = new F;
		Hk(b, this, !1, a, !0);
		return b
	};
	W.prototype.collapseTree = function(a) {
		void 0 === a && (a = 1);
		1 > a && (a = 1);
		var b = this.diagram;
		if(null !== b && !b.De) {
			b.De = !0;
			var c = new F;
			c.add(this);
			Eo(this, c, b.isTreePathToChildren, a, b, this, b.treeCollapsePolicy === pi);
			b.De = !1
		}
	};

	function Eo(a, b, c, d, e, f, g) {
		if(1 < d)
			for(var h = c ? a.Mp() : a.vd(); h.next();) {
				var k = h.value;
				k.isTreeLink && (k = k.Us(a), null === k || k === a || b.contains(k) || (b.add(k), Eo(k, b, c, d - 1, e, f, g)))
			} else Fo(a, b, c, e, f, g)
	}

	function Fo(a, b, c, d, e, f) {
		for(var g = e === a ? !0 : a.isTreeExpanded, h = c ? a.Mp() : a.vd(); h.next();) {
			var k = h.value;
			if(k.isTreeLink && (k = k.Us(a), null !== k && k !== a)) {
				var l = b.contains(k);
				l || b.add(k);
				g && (f && d.Dp(k, e), k.uh(), k.Pb(!1));
				k.isTreeExpanded && (k.wasTreeExpanded = k.isTreeExpanded, l || Fo(k, b, c, d, e, f))
			}
		}
		a.isTreeExpanded = !1
	}
	W.prototype.expandTree = function(a) {
		void 0 === a && (a = 2);
		2 > a && (a = 2);
		var b = this.diagram;
		if(null !== b && !b.De) {
			b.De = !0;
			var c = new F;
			c.add(this);
			Go(this, c, b.isTreePathToChildren, a, b, this, b.treeCollapsePolicy === pi);
			b.De = !1
		}
	};

	function Go(a, b, c, d, e, f, g) {
		for(var h = f === a ? !1 : a.isTreeExpanded, k = c ? a.Mp() : a.vd(); k.next();) {
			var l = k.value;
			l.isTreeLink && (h || l.Mc || l.Pa(), l = l.Us(a), null !== l && l !== a && !b.contains(l) && (b.add(l), h || (l.Pb(!0), l.uh(), g && e.Ep(l, f)), 2 < d || l.wasTreeExpanded)) && (l.wasTreeExpanded = !1, Go(l, b, c, d - 1, e, f, g))
		}
		a.isTreeExpanded = !0
	}
	oa.Object.defineProperties(W.prototype, {
		portSpreading: {
			get: function() {
				return this.Jo
			},
			set: function(a) {
				var b = this.Jo;
				b !== a && (this.Jo = a, this.g("portSpreading", b, a), a = this.diagram, null !== a && a.undoManager.isUndoingRedoing || this.hd())
			}
		},
		avoidable: {
			get: function() {
				return 0 !== (this.Z & 8)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 8);
				if(b !== a) {
					this.Z ^= 8;
					var c = this.diagram;
					null !== c && kk(c, this);
					this.g("avoidable", b, a)
				}
			}
		},
		avoidableMargin: {
			get: function() {
				return this.wk
			},
			set: function(a) {
				"number" === typeof a && (a = new Pc(a));
				var b = this.wk;
				if(!b.A(a)) {
					this.wk = a = a.I();
					var c = this.diagram;
					null !== c && kk(c, this);
					this.g("avoidableMargin", b, a)
				}
			}
		},
		linksConnected: {
			get: function() {
				return this.$a.iterator
			}
		},
		linkConnected: {
			get: function() {
				return this.Vn
			},
			set: function(a) {
				var b = this.Vn;
				b !== a && (this.Vn = a, this.g("linkConnected", b, a))
			}
		},
		linkDisconnected: {
			get: function() {
				return this.Wn
			},
			set: function(a) {
				var b = this.Wn;
				b !== a && (this.Wn = a, this.g("linkDisconnected", b, a))
			}
		},
		linkValidation: {
			get: function() {
				return this.fi
			},
			set: function(a) {
				var b = this.fi;
				b !== a && (this.fi = a, this.g("linkValidation", b, a))
			}
		},
		isLinkLabel: {
			get: function() {
				return null !== this.$k
			}
		},
		labeledLink: {
			get: function() {
				return this.$k
			},
			set: function(a) {
				var b = this.$k;
				if(b !== a) {
					var c = this.diagram,
						d = this.data;
					if(null !== b) {
						null !== b.bd && (b.bd.remove(this),
							b.o());
						if(null !== c && null !== d && !c.undoManager.isUndoingRedoing) {
							var e = b.data,
								f = c.model;
							if(null !== e && Ho(f)) {
								var g = f.sa(d);
								void 0 !== g && f.qv(e, g)
							}
						}
						this.containingGroup = null
					}
					this.$k = a;
					null !== a && (Bo(a, this), null === c || null === d || c.undoManager.isUndoingRedoing || (e = a.data, c = c.model, null !== e && Ho(c) && (d = c.sa(d), void 0 !== d && c.Ds(e, d))), this.containingGroup = a.containingGroup);
					sl(this);
					this.g("labeledLink", b, a)
				}
			}
		},
		port: {
			get: function() {
				return this.Qs("")
			}
		},
		ports: {
			get: function() {
				null === this.tc && Co(this);
				return this.tc.iteratorValues
			}
		},
		isTreeExpanded: {
			get: function() {
				return 0 !== (this.Z & 1)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 1);
				if(b !== a) {
					this.Z ^= 1;
					var c = this.diagram;
					this.g("isTreeExpanded", b, a);
					b = this.treeExpandedChanged;
					if(null !== b) {
						var d = !0;
						null !== c && (d = c.ca, c.ca = !0);
						b(this);
						null !== c && (c.ca = d)
					}
					null !== c && c.undoManager.isUndoingRedoing ? this.Pb(a) : a ? this.expandTree() : this.collapseTree()
				}
			}
		},
		wasTreeExpanded: {
			get: function() {
				return 0 !== (this.Z & 2)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 2);
				b !== a && (this.Z ^= 2, this.g("wasTreeExpanded", b, a))
			}
		},
		treeExpandedChanged: {
			get: function() {
				return this.wp
			},
			set: function(a) {
				var b = this.wp;
				b !== a && (this.wp = a, this.g("treeExpandedChanged", b, a))
			}
		},
		isTreeLeaf: {
			get: function() {
				return 0 !== (this.Z & 4)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 4);
				b !== a && (this.Z ^= 4, this.g("isTreeLeaf", b, a))
			}
		}
	});
	W.prototype.expandTree = W.prototype.expandTree;
	W.prototype.collapseTree = W.prototype.collapseTree;
	W.prototype.findTreeParts = W.prototype.Sy;
	W.prototype.findTreeChildrenNodes = W.prototype.Pu;
	W.prototype.findTreeChildrenLinks = W.prototype.Op;
	W.prototype.findTreeLevel = W.prototype.Qy;
	W.prototype.findTreeParentChain = W.prototype.Ry;
	W.prototype.findTreeParentNode = W.prototype.og;
	W.prototype.findTreeParentLink = W.prototype.Bi;
	W.prototype.findCommonTreeParent = W.prototype.Fy;
	W.prototype.findTreeRoot = W.prototype.Ty;
	W.prototype.isInTreeOf = W.prototype.lz;
	W.prototype.findPort = W.prototype.Qs;
	W.prototype.findLinksTo = W.prototype.Jy;
	W.prototype.findLinksBetween = W.prototype.Iy;
	W.prototype.findNodesInto = W.prototype.Nu;
	W.prototype.findNodesOutOf = W.prototype.Ou;
	W.prototype.findNodesConnected = W.prototype.Mu;
	W.prototype.findLinksInto = W.prototype.vd;
	W.prototype.findLinksOutOf = W.prototype.Mp;
	W.prototype.findLinksConnected = W.prototype.Lu;
	W.prototype.invalidateConnectedLinks = W.prototype.hd;
	W.prototype.invalidateLinkBundle = W.prototype.jz;
	var Io = new D(W, "SpreadingNone", 10),
		vo = new D(W, "SpreadingEvenly", 11),
		Jo = new D(W, "SpreadingPacked", 12);
	W.className = "Node";
	W.SpreadingNone = Io;
	W.SpreadingEvenly = vo;
	W.SpreadingPacked = Jo;

	function V(a) {
		W.call(this, a);
		this.Z |= 4608;
		this.fo = new F;
		this.jl = new F;
		this.Ua = this.np = this.gi = this.ho = this.eo = null;
		this.gc = new vi;
		this.gc.group = this
	}
	na(V, W);
	V.prototype.cloneProtected = function(a) {
		W.prototype.cloneProtected.call(this, a);
		this.Z = this.Z & -32769;
		a.eo = this.eo;
		a.ho = this.ho;
		a.gi = this.gi;
		a.np = this.np;
		var b = a.Tl(function(a) {
			return a instanceof bh
		});
		b instanceof bh ? a.Ua = b : a.Ua = null;
		null !== this.gc ? (a.gc = this.gc.copy(), a.gc.group = a) : (null !== a.gc && (a.gc.group = null), a.gc = null)
	};
	t = V.prototype;
	t.lf = function(a) {
		W.prototype.lf.call(this, a);
		var b = a.Vj();
		for(a = a.memberParts; a.next();) {
			var c = a.value;
			c.o();
			c.B(8);
			c.Lj();
			if(c instanceof W) c.hd(b);
			else if(c instanceof S)
				for(c = c.labelNodes; c.next();) c.value.hd(b)
		}
	};
	t.hk = function(a, b, c, d, e, f, g) {
		if(a === af && "elements" === b)
			if(e instanceof bh) null === this.Ua ? this.Ua = e : this.Ua !== e && A("Cannot insert a second Placeholder into the visual tree of a Group.");
			else {
				if(e instanceof Y) {
					var h = e.Tl(function(a) {
						return a instanceof bh
					});
					h instanceof bh && (null === this.Ua ? this.Ua = h : this.Ua !== h && A("Cannot insert a second Placeholder into the visual tree of a Group."))
				}
			}
		else a === ff && "elements" === b && null !== this.Ua && (d === this.Ua ? this.Ua = null : d instanceof Y && this.Ua.vh(d) && (this.Ua = null));
		W.prototype.hk.call(this, a, b, c, d, e, f, g)
	};
	t.nh = function(a, b, c, d) {
		this.Ve = this.Ua;
		W.prototype.nh.call(this, a, b, c, d)
	};
	t.Hi = function() {
		if(!W.prototype.Hi.call(this)) return !1;
		for(var a = this.memberParts; a.next();) {
			var b = a.value;
			if(b instanceof W) {
				if(b.isVisible() && kj(b)) return !1
			} else if(b instanceof S && b.isVisible() && kj(b) && b.fromNode !== this && b.toNode !== this) return !1
		}
		return !0
	};

	function oo(a, b) {
		if(a.fo.add(b)) {
			b instanceof V && a.jl.add(b);
			var c = a.memberAdded;
			if(null !== c) {
				var d = !0,
					e = a.diagram;
				null !== e && (d = e.ca, e.ca = !0);
				c(a, b);
				null !== e && (e.ca = d)
			}
			a.isVisible() && a.isSubGraphExpanded || b.Pb(!1)
		}
		b instanceof S && !a.computesBoundsIncludingLinks || (b = a.Ua, null === b && (b = a), b.o())
	}

	function po(a, b) {
		if(a.fo.remove(b)) {
			b instanceof V && a.jl.remove(b);
			var c = a.memberRemoved;
			if(null !== c) {
				var d = !0,
					e = a.diagram;
				null !== e && (d = e.ca, e.ca = !0);
				c(a, b);
				null !== e && (e.ca = d)
			}
			a.isVisible() && a.isSubGraphExpanded || b.Pb(!0)
		}
		b instanceof S && !a.computesBoundsIncludingLinks || (b = a.Ua, null === b && (b = a), b.o())
	}
	t.Rj = function() {
		if(0 < this.fo.count) {
			var a = this.diagram;
			if(null !== a)
				for(var b = this.fo.copy().iterator; b.next();) a.remove(b.value)
		}
		W.prototype.Rj.call(this)
	};
	V.prototype.canAddMembers = function(a) {
		var b = this.diagram;
		if(null === b) return !1;
		b = b.commandHandler;
		for(a = Kk(a).iterator; a.next();)
			if(!b.isValidMember(this, a.value)) return !1;
		return !0
	};
	V.prototype.addMembers = function(a, b) {
		var c = this.diagram;
		if(null === c) return !1;
		c = c.commandHandler;
		var d = !0;
		for(a = Kk(a).iterator; a.next();) {
			var e = a.value;
			!b || c.isValidMember(this, e) ? e.containingGroup = this : d = !1
		}
		return d
	};
	V.prototype.canUngroup = function() {
		if(!this.ungroupable) return !1;
		var a = this.layer;
		if(null !== a && !a.allowUngroup) return !1;
		a = a.diagram;
		return null === a || a.allowUngroup ? !0 : !1
	};
	t = V.prototype;
	t.hd = function(a) {
		void 0 === a && (a = null);
		var b = 0 !== (this.Z & 65536);
		W.prototype.hd.call(this, a);
		if(!b)
			for(0 !== (this.Z & 65536) !== !0 && (this.Z = this.Z ^ 65536), b = this.Ku(); b.next();) {
				var c = b.value;
				if(null === a || !a.contains(c)) {
					var d = c.fromNode;
					null !== d && d !== this && d.Ee(this) && !d.isVisible() ? (yo(d, c.fromPort), yo(d, c.toPort), c.Pa()) : (d = c.toNode, null !== d && d !== this && d.Ee(this) && !d.isVisible() && (yo(d, c.fromPort), yo(d, c.toPort), c.Pa()))
				}
			}
	};
	t.Ku = function() {
		var a = this.Vj();
		a.add(this);
		for(var b = new F, c = a.iterator; c.next();) {
			var d = c.value;
			if(d instanceof W)
				for(d = d.linksConnected; d.next();) {
					var e = d.value;
					a.contains(e) || b.add(e)
				}
		}
		return b.iterator
	};
	t.Hy = function() {
		var a = this.Vj();
		a.add(this);
		for(var b = new F, c = a.iterator; c.next();) {
			var d = c.value;
			if(d instanceof W)
				for(d = d.linksConnected; d.next();) {
					var e = d.value,
						f = e.fromNode;
					a.contains(f) && f !== this || b.add(f);
					e = e.toNode;
					a.contains(e) && e !== this || b.add(e)
				}
		}
		return b.iterator
	};
	t.Gy = function() {
		function a(b, d) {
			null !== b && (d.add(b), a(b.containingGroup, d))
		}
		var b = new F;
		a(this, b);
		return b
	};
	t.Vj = function() {
		var a = new F;
		Hk(a, this, !0, 0, !0);
		a.remove(this);
		return a
	};
	t.Pb = function(a) {
		W.prototype.Pb.call(this, a);
		for(var b = this.memberParts; b.next();) b.value.Pb(a)
	};
	V.prototype.collapseSubGraph = function() {
		var a = this.diagram;
		if(null !== a && !a.De) {
			a.De = !0;
			var b = this.Vj();
			Ko(this, b, a, this);
			a.De = !1
		}
	};

	function Ko(a, b, c, d) {
		for(var e = a.memberParts; e.next();) {
			var f = e.value;
			f.Pb(!1);
			f instanceof V && f.isSubGraphExpanded && (f.wasSubGraphExpanded = f.isSubGraphExpanded, Ko(f, b, c, d));
			if(f instanceof W) f.hd(b), c.Dp(f, d);
			else if(f instanceof S)
				for(f = f.labelNodes; f.next();) f.value.hd(b)
		}
		a.isSubGraphExpanded = !1
	}
	V.prototype.expandSubGraph = function() {
		var a = this.diagram;
		if(null !== a && !a.De) {
			a.De = !0;
			var b = this.Vj();
			Lo(this, b, a, this);
			a.De = !1
		}
	};

	function Lo(a, b, c, d) {
		for(var e = a.memberParts; e.next();) {
			var f = e.value;
			f.Pb(!0);
			f instanceof V && f.wasSubGraphExpanded && (f.wasSubGraphExpanded = !1, Lo(f, b, c, d));
			if(f instanceof W) f.hd(b), c.Ep(f, d);
			else if(f instanceof S)
				for(f = f.labelNodes; f.next();) f.value.hd(b)
		}
		a.isSubGraphExpanded = !0
	}
	V.prototype.move = function(a, b) {
		void 0 === b && (b = !1);
		var c = b ? this.location : this.position,
			d = c.x;
		isNaN(d) && (d = 0);
		c = c.y;
		isNaN(c) && (c = 0);
		d = a.x - d;
		c = a.y - c;
		var e = G.allocAt(d, c);
		W.prototype.move.call(this, a, b);
		a = new F;
		for(b = this.Vj().iterator; b.next();) {
			var f = b.value;
			f instanceof S && (f.suspendsRouting && a.add(f), f.Mc || f.fromNode !== this && f.toNode !== this) && (f.suspendsRouting = !0)
		}
		for(b.reset(); b.next();)
			if(f = b.value, !(f.wh() || f instanceof W && f.isLinkLabel)) {
				var g = f.position,
					h = f.location;
				g.s() ? (e.x = g.x + d, e.y = g.y +
					c, f.position = e) : h.s() && (e.x = h.x + d, e.y = h.y + c, f.location = e)
			}
		for(b.reset(); b.next();)
			if(f = b.value, f instanceof S && (f.suspendsRouting = a.contains(f), f.Mc || f.fromNode !== this && f.toNode !== this)) g = f.position, e.x = g.x + d, e.y = g.y + c, e.s() ? f.move(e) : f.Pa(), Hj(f) && f.Pa();
		G.free(e)
	};
	oa.Object.defineProperties(V.prototype, {
		placeholder: {
			get: function() {
				return this.Ua
			}
		},
		computesBoundsAfterDrag: {
			get: function() {
				return 0 !== (this.Z & 2048)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 2048);
				b !== a && (this.Z ^= 2048, this.g("computesBoundsAfterDrag", b, a))
			}
		},
		computesBoundsIncludingLinks: {
			get: function() {
				return 0 !== (this.Z & 4096)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 4096);
				b !== a && (this.Z ^= 4096, this.g("computesBoundsIncludingLinks",
					b, a))
			}
		},
		computesBoundsIncludingLocation: {
			get: function() {
				return 0 !== (this.Z & 8192)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 8192);
				b !== a && (this.Z ^= 8192, this.g("computesBoundsIncludingLocation", b, a))
			}
		},
		handlesDragDropForMembers: {
			get: function() {
				return 0 !== (this.Z & 16384)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 16384);
				b !== a && (this.Z ^= 16384, this.g("handlesDragDropForMembers", b, a))
			}
		},
		memberParts: {
			get: function() {
				return this.fo.iterator
			}
		},
		layout: {
			get: function() {
				return this.gc
			},
			set: function(a) {
				var b = this.gc;
				if(b !== a) {
					null !== b && (b.diagram = null, b.group = null);
					this.gc = a;
					var c = this.diagram;
					null !== a && (a.diagram = c, a.group = this);
					null !== c && (c.wg = !0);
					this.g("layout", b, a);
					null !== c && c.cc()
				}
			}
		},
		memberAdded: {
			get: function() {
				return this.eo
			},
			set: function(a) {
				var b = this.eo;
				b !== a && (this.eo = a, this.g("memberAdded", b, a))
			}
		},
		memberRemoved: {
			get: function() {
				return this.ho
			},
			set: function(a) {
				var b = this.ho;
				b !== a && (this.ho = a, this.g("memberRemoved", b, a))
			}
		},
		memberValidation: {
			get: function() {
				return this.gi
			},
			set: function(a) {
				var b = this.gi;
				b !== a && (this.gi = a, this.g("memberValidation", b, a))
			}
		},
		ungroupable: {
			get: function() {
				return 0 !== (this.Z & 256)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 256);
				b !== a && (this.Z ^= 256, this.g("ungroupable", b, a))
			}
		},
		isSubGraphExpanded: {
			get: function() {
				return 0 !== (this.Z & 512)
			},
			set: function(a) {
				var b = 0 !== (this.Z & 512);
				if(b !== a) {
					this.Z ^= 512;
					var c = this.diagram;
					this.g("isSubGraphExpanded", b, a);
					b = this.subGraphExpandedChanged;
					if(null !== b) {
						var d = !0;
						null !== c && (d = c.ca, c.ca = !0);
						b(this);
						null !== c && (c.ca = d)
					}
					null !== c && c.undoManager.isUndoingRedoing ? (null !== this.Ua && this.Ua.o(), this.memberParts.each(function(a) {
						a.updateAdornments()
					})) : a ? this.expandSubGraph() : this.collapseSubGraph()
				}
			}
		},
		wasSubGraphExpanded: {
			get: function() {
				return 0 !== (this.Z & 1024)
			},
			set: function(a) {
				var b =
					0 !== (this.Z & 1024);
				b !== a && (this.Z ^= 1024, this.g("wasSubGraphExpanded", b, a))
			}
		},
		subGraphExpandedChanged: {
			get: function() {
				return this.np
			},
			set: function(a) {
				var b = this.np;
				b !== a && (this.np = a, this.g("subGraphExpandedChanged", b, a))
			}
		},
		gk: {
			get: function() {
				return 0 !== (this.Z & 32768)
			},
			set: function(a) {
				0 !== (this.Z & 32768) !== a && (this.Z ^= 32768)
			}
		}
	});
	V.prototype.expandSubGraph = V.prototype.expandSubGraph;
	V.prototype.collapseSubGraph = V.prototype.collapseSubGraph;
	V.prototype.findSubGraphParts = V.prototype.Vj;
	V.prototype.findContainingGroupChain = V.prototype.Gy;
	V.prototype.findExternalNodesConnected = V.prototype.Hy;
	V.prototype.findExternalLinksConnected = V.prototype.Ku;
	V.className = "Group";

	function bh() {
		P.call(this);
		this.hb = Wc;
		this.Yo = new M(NaN, NaN, NaN, NaN)
	}
	na(bh, P);
	bh.prototype.cloneProtected = function(a) {
		P.prototype.cloneProtected.call(this, a);
		a.hb = this.hb.I();
		a.Yo = this.Yo.copy()
	};
	bh.prototype.ph = function(a) {
		if(null === this.background && null === this.areaBackground) return !1;
		var b = this.naturalBounds;
		return Jc(0, 0, b.width, b.height, a.x, a.y)
	};
	bh.prototype.cm = function() {
		var a = this.part;
		null !== a && (a instanceof V || a instanceof pf) || A("Placeholder is not inside a Group or Adornment.");
		if(a instanceof V) {
			var b = this.computeBorder(this.Yo),
				c = this.minSize,
				d = this.hc;
			zc(d, (isFinite(c.width) ? Math.max(c.width, b.width) : b.width) || 0, (isFinite(c.height) ? Math.max(c.height, b.height) : b.height) || 0);
			Yk(this, 0, 0, d.width, d.height);
			d = a.memberParts;
			for(c = !1; d.next();)
				if(d.value.isVisible()) {
					c = !0;
					break
				}
			d = a.diagram;
			!c || null === d || d.animationManager.isAnimating ||
				isNaN(b.x) || isNaN(b.y) || (c = G.alloc(), c.Li(b, a.locationSpot), c.A(a.location) || (a.location = new G(c.x, c.y)), G.free(c))
		} else {
			var e = this.desiredSize;
			b = this.hc;
			c = this.hb;
			d = c.left + c.right;
			var f = c.top + c.bottom;
			if(e.s()) zc(b, e.width + d || 0, e.height + f || 0), Yk(this, -c.left, -c.top, b.width, b.height);
			else {
				e = a.adornedObject;
				var g = e.ka(ed, G.alloc()),
					h = M.allocAt(g.x, g.y, 0, 0);
				h.Je(e.ka(od, g));
				h.Je(e.ka(gd, g));
				h.Je(e.ka(kd, g));
				a.location.h(h.x, h.y);
				zc(b, h.width + d || 0, h.height + f || 0);
				Yk(this, -c.left, -c.top, b.width, b.height);
				G.free(g);
				M.free(h)
			}
		}
	};
	bh.prototype.nh = function(a, b, c, d) {
		this.actualBounds.h(a, b, c, d)
	};
	bh.prototype.computeBorder = function(a) {
		var b = this.part,
			c = b.diagram;
		if(null !== c && b instanceof V && !b.layer.isTemporary && b.computesBoundsAfterDrag && this.Yo.s()) {
			var d = c.toolManager.findTool("Dragging");
			if(d === c.currentTool && (c = d.computeBorder(b, this.Yo, a), null !== c)) return c
		}
		c = M.alloc();
		d = this.computeMemberBounds(c);
		var e = this.hb;
		b instanceof V && !b.isSubGraphExpanded ? a.h(d.x - e.left, d.y - e.top, 0, 0) : a.h(d.x - e.left, d.y - e.top, Math.max(d.width + e.left + e.right, 0), Math.max(d.height + e.top + e.bottom, 0));
		M.free(c);
		b instanceof V && b.computesBoundsIncludingLocation && b.location.s() && a.Je(b.location);
		return a
	};
	bh.prototype.computeMemberBounds = function(a) {
		if(!(this.part instanceof V)) return a.h(0, 0, 0, 0), a;
		for(var b = this.part, c = Infinity, d = Infinity, e = -Infinity, f = -Infinity, g = b.memberParts; g.next();) {
			var h = g.value;
			if(h.isVisible()) {
				if(h instanceof S) {
					if(!b.computesBoundsIncludingLinks) continue;
					if(jj(h)) continue;
					if(h.fromNode === b || h.toNode === b) continue
				}
				h = h.actualBounds;
				h.left < c && (c = h.left);
				h.top < d && (d = h.top);
				h.right > e && (e = h.right);
				h.bottom > f && (f = h.bottom)
			}
		}
		isFinite(c) && isFinite(d) ? a.h(c, d, e - c, f - d) : (b = b.location,
			a.h(b.x, b.y, 0, 0));
		return a
	};
	oa.Object.defineProperties(bh.prototype, {
		padding: {
			get: function() {
				return this.hb
			},
			set: function(a) {
				"number" === typeof a && (a = new Pc(a));
				var b = this.hb;
				b.A(a) || (this.hb = a = a.I(), this.g("padding", b, a))
			}
		}
	});
	bh.className = "Placeholder";

	function S() {
		U.call(this, Y.Link);
		this.Sa = 8;
		this.Oe = null;
		this.Pe = "";
		this.ef = this.xn = null;
		this.ff = "";
		this.vp = null;
		this.Em = Tg;
		this.Ym = 0;
		this.an = Tg;
		this.bn = NaN;
		this.yj = Mo;
		this.jp = .5;
		this.bd = null;
		this.Bb = (new E).freeze();
		this.pl = this.Vg = null;
		this.Ko = new M;
		this.pa = new ee;
		this.ur = !0;
		this.da = this.K = this.xf = this.Hf = null;
		this.l = [];
		this.ru = new G;
		this.gr = this.Iw = this.Hw = null;
		this.Wt = NaN;
		this.P = null
	}
	na(S, U);
	S.prototype.cloneProtected = function(a) {
		U.prototype.cloneProtected.call(this, a);
		a.Sa = this.Sa & -113;
		a.Pe = this.Pe;
		a.xn = this.xn;
		a.ff = this.ff;
		a.vp = this.vp;
		a.Em = this.Em;
		a.Ym = this.Ym;
		a.an = this.an;
		a.bn = this.bn;
		a.yj = this.yj;
		a.jp = this.jp;
		null !== this.P && (a.P = this.P.copy())
	};
	t = S.prototype;
	t.lf = function(a) {
		U.prototype.lf.call(this, a);
		this.Pe = a.Pe;
		this.ff = a.ff;
		a.Vg = null;
		a.Pa();
		a.xf = this.xf;
		var b = a.fromPort;
		null !== b && yo(a.fromNode, b);
		b = a.toPort;
		null !== b && yo(a.toNode, b)
	};
	t.ib = function(a) {
		a.classType === S ? 2 === (a.value & 2) ? this.routing = a : a === Wg || a === Sg || a === Rg ? this.curve = a : a === No || a === Oo || a === Po ? this.adjusting = a : a !== Mo && a !== Tg && A("Unknown Link enum value for a Link property: " + a) : U.prototype.ib.call(this, a)
	};
	t.Jc = function() {
		null === this.P && (this.P = new Uk)
	};
	t.Hi = function() {
		var a = this.fromNode;
		if(null !== a) {
			var b = a.findVisibleNode();
			null !== b && (a = b);
			if(kj(a) || lj(a)) return !1
		}
		a = this.toNode;
		return null !== a && (b = a.findVisibleNode(), null !== b && (a = b), kj(a) || lj(a)) ? !1 : !0
	};
	t.Fv = function() {
		return !1
	};
	t.Gv = function() {};
	t.ac = function() {
		return !1
	};
	S.prototype.computeAngle = function(a, b, c) {
		return S.computeAngle(b, c)
	};
	S.computeAngle = function(a, b) {
		switch(a) {
			default:
				case Tg:
				a = 0;
			break;
			case rn:
					a = b;
				break;
			case Bm:
					a = b + 90;
				break;
			case Dm:
					a = b - 90;
				break;
			case Qo:
					a = b + 180;
				break;
			case Ro:
					a = H.Yp(b);90 < a && 270 > a && (a -= 180);
				break;
			case Cm:
					a = H.Yp(b + 90);90 < a && 270 > a && (a -= 180);
				break;
			case Em:
					a = H.Yp(b - 90);90 < a && 270 > a && (a -= 180);
				break;
			case Fm:
					a = H.Yp(b);
				if(45 < a && 135 > a || 225 < a && 315 > a) return 0;90 < a && 270 > a && (a -= 180)
		}
		return H.Yp(a)
	};

	function uo(a) {
		var b = a.fromNode,
			c = a.toNode,
			d = null;
		null !== b ? d = null !== c ? b.gx(c) : b.containingGroup : null !== c ? d = c.containingGroup : d = null;
		b = d;
		c = a.Nh;
		if(c !== b) {
			null !== c && po(c, a);
			a.Nh = b;
			null !== b && oo(b, a);
			var e = a.containingGroupChanged;
			if(null !== e) {
				var f = !0,
					g = a.diagram;
				null !== g && (f = g.ca, g.ca = !0);
				e(a, c, b);
				null !== g && (g.ca = f)
			}!a.Mc || a.Hw !== c && a.Iw !== c || a.Pa()
		}
		if(a.isLabeledLink)
			for(a = a.labelNodes; a.next();) a.value.containingGroup = d
	}
	t = S.prototype;
	t.uh = function() {
		var a = this.containingGroup;
		null !== a && this.fromNode !== a && this.toNode !== a && a.computesBoundsIncludingLinks && U.prototype.uh.call(this)
	};
	t.Us = function(a) {
		var b = this.fromNode;
		return a === b ? this.toNode : b
	};
	t.Yy = function(a) {
		var b = this.fromPort;
		return a === b ? this.toPort : b
	};

	function Bo(a, b) {
		null === a.bd && (a.bd = new F);
		a.bd.add(b);
		a.o()
	}
	t.Rp = function(a) {
		U.prototype.Rp.call(this, a);
		So(this) && this.Tp(this.actualBounds);
		if(!a) {
			a = this.Oe;
			var b = null;
			null !== a && (b = this.fromPort, zo(a, this, b));
			var c = this.ef;
			if(null !== c) {
				var d = this.toPort;
				c === a && d === b || zo(c, this, d)
			}
			To(this)
		}
	};
	t.Sp = function(a) {
		U.prototype.Sp.call(this, a);
		So(this) && this.Tp(this.actualBounds);
		if(!a) {
			a = this.Oe;
			var b = null;
			null !== a && (b = this.fromPort, Ao(a, this, b));
			var c = this.ef;
			if(null !== c) {
				var d = this.toPort;
				c === a && d === b || Ao(c, this, d)
			}
			Uo(this)
		}
	};
	t.Rj = function() {
		this.Mc = !0;
		if(null !== this.bd) {
			var a = this.diagram;
			if(null !== a)
				for(var b = this.bd.copy().iterator; b.next();) a.remove(b.value)
		}
		null !== this.data && (a = this.diagram, null !== a && a.partManager.removeDataForLink(this))
	};
	S.prototype.updateRelationshipsFromData = function() {
		if(null !== this.data) {
			var a = this.diagram;
			null !== a && a.partManager.updateRelationshipsFromData(this)
		}
	};
	S.prototype.move = function(a, b) {
		var c = b ? this.location : this.position,
			d = c.x;
		isNaN(d) && (d = 0);
		var e = c.y;
		isNaN(e) && (e = 0);
		d = a.x - d;
		e = a.y - e;
		!0 === b ? U.prototype.move.call(this, a, !1) : (a = G.allocAt(c.x + d, c.y + e), U.prototype.move.call(this, a, !1), G.free(a));
		Wf(this, d, e);
		for(a = this.labelNodes; a.next();) b = a.value, c = b.position, b.moveTo(c.x + d, c.y + e)
	};
	S.prototype.canRelinkFrom = function() {
		if(!this.relinkableFrom) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowRelink) return !1;
		a = a.diagram;
		return null === a || a.allowRelink ? !0 : !1
	};
	S.prototype.canRelinkTo = function() {
		if(!this.relinkableTo) return !1;
		var a = this.layer;
		if(null === a) return !0;
		if(!a.allowRelink) return !1;
		a = a.diagram;
		return null === a || a.allowRelink ? !0 : !1
	};
	S.prototype.computeMidPoint = function(a) {
		var b = this.pointsCount;
		if(0 === b) return a.assign(fc), a;
		if(1 === b) return a.assign(this.i(0)), a;
		if(2 === b) {
			var c = this.i(0),
				d = this.i(1);
			a.h((c.x + d.x) / 2, (c.y + d.y) / 2);
			return a
		}
		if(this.isOrthogonal && (15 <= this.computeCorner() || this.computeCurve() === Wg)) return this.path.ka(this.pa.Tu(.5));
		if(this.computeCurve() === Wg) {
			if(3 === b) return this.i(1);
			d = (b - 1) / 3 | 0;
			c = 3 * (d / 2 | 0);
			if(1 === d % 2) {
				d = this.i(c);
				var e = this.i(c + 1),
					f = this.i(c + 2);
				c = this.i(c + 3);
				H.ny(d.x, d.y, e.x, e.y, f.x, f.y, c.x,
					c.y, a)
			} else a.assign(this.i(c));
			return a
		}
		var g = this.flattenedLengths;
		c = this.flattenedTotalLength;
		for(e = f = d = 0; d < c / 2 && f < b;) {
			e = g[f];
			if(d + e > c / 2) break;
			d += e;
			f++
		}
		b = this.i(f);
		f = this.i(f + 1);
		1 > Math.abs(b.x - f.x) ? b.y > f.y ? a.h(b.x, b.y - (c / 2 - d)) : a.h(b.x, b.y + (c / 2 - d)) : 1 > Math.abs(b.y - f.y) ? b.x > f.x ? a.h(b.x - (c / 2 - d), b.y) : a.h(b.x + (c / 2 - d), b.y) : (c = (c / 2 - d) / e, a.h(b.x + c * (f.x - b.x), b.y + c * (f.y - b.y)));
		return a
	};
	S.prototype.computeMidAngle = function() {
		var a = this.pointsCount;
		if(2 > a) return NaN;
		if(2 === a) return this.i(0).Na(this.i(1));
		if(this.isOrthogonal && (15 <= this.computeCorner() || this.computeCurve() === Wg)) {
			a: {
				a = this.pa;
				var b = .5;0 > b ? b = 0 : 1 < b && (b = 1);
				if(a.type === he) a = 180 * Math.atan2(a.endY - a.startY, a.endX - a.startX) / Math.PI;
				else {
					var c = a.flattenedSegments,
						d = a.flattenedLengths,
						e = c.length;
					b = a.flattenedTotalLength * b;
					for(var f = 0, g = 0; g < e; g++) {
						var h = d[g],
							k = h.length;
						for(a = 0; a < k; a++) {
							var l = h[a];
							if(f + l >= b) {
								b = c[g];
								c = b[2 * a];
								d = b[2 * a + 1];
								e = b[2 * a + 2];
								a = b[2 * a + 3];
								a = 1 > Math.abs(e - c) && 1 > Math.abs(a - d) ? 0 : 1 > Math.abs(e - c) ? 0 <= a - d ? 90 : 270 : 1 > Math.abs(a - d) ? 0 <= e - c ? 0 : 180 : 180 * Math.atan2(a - d, e - c) / Math.PI;
								break a
							}
							f += l
						}
					}
					a = NaN
				}
			}
			return a
		}
		if(this.computeCurve() === Wg && 4 <= a) {
			d = (a - 1) / 3 | 0;
			c = 3 * (d / 2 | 0);
			if(1 === d % 2) return c = Math.floor(c), a = this.i(c), d = this.i(c + 1), e = this.i(c + 2), c = this.i(c + 3), H.my(a.x, a.y, d.x, d.y, e.x, e.y, c.x, c.y);
			if(0 < c && c + 1 < a) return this.i(c - 1).Na(this.i(c + 1))
		}
		d = this.flattenedLengths;
		e = this.flattenedTotalLength;
		for(c = b = 0; b < e / 2 && c < a;) {
			f =
				d[c];
			if(b + f > e / 2) break;
			b += f;
			c++
		}
		d = this.i(c);
		e = this.i(c + 1);
		if(1 > Math.abs(d.x - e.x) && 1 > Math.abs(d.y - e.y)) {
			if(0 < c && c + 2 < a) return this.i(c - 1).Na(this.i(c + 2))
		} else {
			if(1 > Math.abs(d.x - e.x)) return d.y > e.y ? 270 : 90;
			if(1 > Math.abs(d.y - e.y)) return d.x > e.x ? 180 : 0
		}
		return d.Na(e)
	};
	t = S.prototype;
	t.i = function(a) {
		return this.Bb.j[a]
	};
	t.md = function(a, b) {
		this.Bb.kd(a, b)
	};
	t.M = function(a, b, c) {
		this.Bb.kd(a, new G(b, c))
	};
	t.hz = function(a, b) {
		this.Bb.Nb(a, b)
	};
	t.m = function(a, b, c) {
		this.Bb.Nb(a, new G(b, c))
	};
	t.xe = function(a) {
		this.Bb.add(a)
	};
	t.hf = function(a, b) {
		this.Bb.add(new G(a, b))
	};
	t.rv = function(a) {
		this.Bb.qb(a)
	};
	t.Mj = function() {
		this.Bb.clear()
	};

	function Wf(a, b, c) {
		if(0 !== b || 0 !== c) {
			for(var d = a.Mc, e = new E, f = a.Bb.iterator; f.next();) {
				var g = f.value;
				e.add((new G(g.x + b, g.y + c)).freeze())
			}
			e.freeze();
			f = a.Bb;
			a.Bb = e;
			isNaN(b) || isNaN(c) || a.diagram.animationManager.ab ? a.o() : (a.Of.h(a.Of.x + b, a.Of.y + c), a.ra.h(a.ra.x + b, a.ra.y + c), sl(a));
			d && Vo(a);
			b = a.diagram;
			null !== b && b.animationManager.ab && (a.pl = e);
			a.g("points", f, e)
		}
	}
	t.yh = function() {
		null === this.Vg && (this.Vg = this.Bb, this.Bb = this.Bb.copy())
	};
	t.jf = function() {
		if(null !== this.Vg) {
			for(var a = this.Vg, b = this.Bb, c = Infinity, d = Infinity, e = a.j, f = e.length, g = 0; g < f; g++) {
				var h = e[g];
				c = Math.min(h.x, c);
				d = Math.min(h.y, d)
			}
			h = g = Infinity;
			for(var k = b.j, l = k.length, m = 0; m < l; m++) {
				var n = k[m];
				g = Math.min(n.x, g);
				h = Math.min(n.y, h);
				n.freeze()
			}
			b.freeze();
			if(l === f)
				for(f = 0; f < l; f++) {
					if(m = e[f], n = k[f], m.x - c !== n.x - g || m.y - d !== n.y - h) {
						this.o();
						this.$b();
						break
					}
				} else this.o(), this.$b();
			this.Vg = null;
			c = this.diagram;
			null !== c && c.animationManager.ab && (this.pl = b);
			Vo(this);
			this.g("points",
				a, b)
		}
	};
	t.Ix = function() {
		null !== this.Vg && (this.Bb = this.Vg, this.Vg = null)
	};

	function Vo(a) {
		0 === a.Bb.count ? a.Mc = !1 : (a.Mc = !0, a.gr = null, a.Wt = NaN, a.defaultFromPoint = a.i(0), a.defaultToPoint = a.i(a.pointsCount - 1), Wo(a, !1))
	}
	t.Pa = function() {
		if(!this.suspendsRouting) {
			var a = this.diagram;
			a && (a.bt.contains(this) || a.undoManager.isUndoingRedoing || a.animationManager.isTicking && !a.animationManager.isAnimating) || (a = this.path, null !== a && (this.Mc = !1, this.o(), a.o()))
		}
	};
	t.Pi = function() {
		if(!this.Mc && !this.Fu) {
			var a = !0;
			try {
				this.Fu = !0, this.yh(), a = this.computePoints()
			} finally {
				this.Fu = !1, a ? this.jf() : this.Ix()
			}
		}
	};
	S.prototype.computePoints = function() {
		var a = this.diagram;
		if(null === a) return !1;
		var b = this.fromNode,
			c = null;
		null === b ? (a.li || (a.To = new qg, a.To.desiredSize = gc, a.To.strokeWidth = 0, a.li = new W, a.li.add(a.To), a.li.kc()), this.defaultFromPoint && (a.li.position = a.li.location = this.defaultFromPoint, a.li.kc(), b = a.li, c = a.To)) : c = this.fromPort;
		if(null !== c && !b.isVisible()) {
			var d = b.findVisibleNode();
			null !== d && d !== b ? (b = d, c = d.port) : b = d
		}
		this.Hw = b;
		if(null === b || !b.location.s()) return !1;
		for(; !(null === c || c.actualBounds.s() && c.rf());) c =
			c.panel;
		if(null === c) return !1;
		var e = this.toNode,
			f = null;
		null === e ? (a.mi || (a.Uo = new qg, a.Uo.desiredSize = gc, a.Uo.strokeWidth = 0, a.mi = new W, a.mi.add(a.Uo), a.mi.kc()), this.defaultToPoint && (a.mi.position = a.mi.location = this.defaultToPoint, a.mi.kc(), e = a.mi, f = a.Uo)) : f = this.toPort;
		null === f || e.isVisible() || (a = e.findVisibleNode(), null !== a && a !== e ? (e = a, f = a.port) : e = a);
		this.Iw = e;
		if(null === e || !e.location.s()) return !1;
		for(; !(null === f || f.actualBounds.s() && f.rf());) f = f.panel;
		if(null === f) return !1;
		var g = this.pointsCount;
		d = this.computeSpot(!0, c);
		a = this.computeSpot(!1, f);
		var h = Xo(d),
			k = Xo(a),
			l = c === f && null !== c,
			m = this.isOrthogonal,
			n = this.curve === Wg;
		this.Hf = l && !m ? n = !0 : !1;
		var p = this.adjusting === Tg || l;
		if(!m && !l && h && k) {
			if(h = !1, !p && 3 <= g && (p = this.getLinkPoint(b, c, d, !0, !1, e, f), k = this.getLinkPoint(e, f, a, !1, !1, b, c), h = this.adjustPoints(0, p, g - 1, k)) && (p = this.getLinkPoint(b, c, d, !0, !1, e, f), k = this.getLinkPoint(e, f, a, !1, !1, b, c), this.adjustPoints(0, p, g - 1, k)), !h)
				if(this.Mj(), n) {
					g = this.getLinkPoint(b, c, d, !0, !1, e, f);
					p = this.getLinkPoint(e,
						f, a, !1, !1, b, c);
					h = p.x - g.x;
					k = p.y - g.y;
					l = this.computeCurviness();
					n = m = 0;
					var q = g.x + h / 3,
						r = g.y + k / 3,
						u = q,
						v = r;
					H.w(k, 0) ? v = 0 < h ? v - l : v + l : (m = -h / k, n = Math.sqrt(l * l / (m * m + 1)), 0 > l && (n = -n), u = (0 > k ? -1 : 1) * n + q, v = m * (u - q) + r);
					q = g.x + 2 * h / 3;
					r = g.y + 2 * k / 3;
					var x = q,
						y = r;
					H.w(k, 0) ? y = 0 < h ? y - l : y + l : (x = (0 > k ? -1 : 1) * n + q, y = m * (x - q) + r);
					this.Mj();
					this.xe(g);
					this.hf(u, v);
					this.hf(x, y);
					this.xe(p);
					this.md(0, this.getLinkPoint(b, c, d, !0, !1, e, f));
					this.md(3, this.getLinkPoint(e, f, a, !1, !1, b, c))
				} else d = this.getLinkPoint(b, c, d, !0, !1, e, f), a = this.getLinkPoint(e,
					f, a, !1, !1, b, c), this.hasCurviness() ? (p = a.x - d.x, e = a.y - d.y, f = this.computeCurviness(), b = d.x + p / 2, c = d.y + e / 2, g = b, h = c, H.w(e, 0) ? h = 0 < p ? h - f : h + f : (p = -p / e, g = Math.sqrt(f * f / (p * p + 1)), 0 > f && (g = -g), g = (0 > e ? -1 : 1) * g + b, h = p * (g - b) + c), this.xe(d), this.hf(g, h)) : this.xe(d), this.xe(a)
		} else {
			n = this.isAvoiding;
			p && (m && n || l) && this.Mj();
			var z = l ? this.computeCurviness() : 0;
			n = this.getLinkPoint(b, c, d, !0, m, e, f);
			q = u = r = 0;
			if(m || !h || l) v = this.computeEndSegmentLength(b, c, d, !0), q = this.getLinkDirection(b, c, n, d, !0, m, e, f), l && (h || d.A(a) || !m && 1 === d.x +
				a.x && 1 === d.y + a.y) && (q -= m ? 90 : 30, 0 > z && (q -= 180)), 0 > q ? q += 360 : 360 <= q && (q -= 360), l && (v += Math.abs(z) * (m ? 1 : 2)), 0 === q ? r = v : 90 === q ? u = v : 180 === q ? r = -v : 270 === q ? u = -v : (r = v * Math.cos(q * Math.PI / 180), u = v * Math.sin(q * Math.PI / 180)), d.mc() && l && (v = c.ka(id, G.alloc()), x = G.allocAt(v.x + 1E3 * r, v.y + 1E3 * u), this.getLinkPointFromPoint(b, c, v, x, !0, n), G.free(v), G.free(x));
			v = this.getLinkPoint(e, f, a, !1, m, b, c);
			var B = y = x = 0;
			if(m || !k || l) {
				var C = this.computeEndSegmentLength(e, f, a, !1);
				B = this.getLinkDirection(e, f, v, a, !1, m, b, c);
				l && (k || d.A(a) || !m &&
					1 === d.x + a.x && 1 === d.y + a.y) && (B += m ? 0 : 30, 0 > z && (B += 180));
				0 > B ? B += 360 : 360 <= B && (B -= 360);
				l && (C += Math.abs(z) * (m ? 1 : 2));
				0 === B ? x = C : 90 === B ? y = C : 180 === B ? x = -C : 270 === B ? y = -C : (x = C * Math.cos(B * Math.PI / 180), y = C * Math.sin(B * Math.PI / 180));
				a.mc() && l && (a = f.ka(id, G.alloc()), d = G.allocAt(a.x + 1E3 * x, a.y + 1E3 * y), this.getLinkPointFromPoint(e, f, a, d, !1, v), G.free(a), G.free(d))
			}
			a = n;
			if(m || !h || l) a = new G(n.x + r, n.y + u);
			d = v;
			if(m || !k || l) d = new G(v.x + x, v.y + y);
			!p && !m && h && 3 < g && this.adjustPoints(0, n, g - 2, d) ? this.md(g - 1, v) : !p && !m && k && 3 < g && this.adjustPoints(1,
				a, g - 1, v) ? this.md(0, n) : !p && (m ? 6 <= g : 4 < g) && this.adjustPoints(1, a, g - 2, d) ? (this.md(0, n), this.md(g - 1, v)) : (this.Mj(), this.xe(n), (m || !h || l) && this.xe(a), m && this.addOrthoPoints(a, q, d, B, b, e), (m || !k || l) && this.xe(d), this.xe(v))
		}
		return !0
	};

	function Yo(a, b) {
		Math.abs(b.x - a.x) > Math.abs(b.y - a.y) ? (b.x >= a.x ? b.x = a.x + 9E9 : b.x = a.x - 9E9, b.y = a.y) : (b.y >= a.y ? b.y = a.y + 9E9 : b.y = a.y - 9E9, b.x = a.x);
		return b
	}
	S.prototype.getLinkPointFromPoint = function(a, b, c, d, e, f) {
		void 0 === f && (f = new G);
		if(null === a || null === b) return f.assign(c), f;
		a.isVisible() || (e = a.findVisibleNode(), null !== e && e !== a && (b = e.port));
		a = null;
		e = b.panel;
		null === e || e.$d() || (e = e.panel);
		if(null === e) {
			e = d.x;
			d = d.y;
			var g = c.x;
			c = c.y
		} else {
			a = e.Ud;
			e = 1 / (a.m11 * a.m22 - a.m12 * a.m21);
			g = a.m22 * e;
			var h = -a.m12 * e,
				k = -a.m21 * e,
				l = a.m11 * e,
				m = e * (a.m21 * a.dy - a.m22 * a.dx),
				n = e * (a.m12 * a.dx - a.m11 * a.dy);
			e = d.x * g + d.y * k + m;
			d = d.x * h + d.y * l + n;
			g = c.x * g + c.y * k + m;
			c = c.x * h + c.y * l + n
		}
		b.Wj(e, d, g, c, f);
		null !==
			a && f.transform(a);
		return f
	};

	function Zo(a, b) {
		var c = b.Io;
		null === c && (c = new $o, c.port = b, c.node = b.part, b.Io = c);
		return ap(c, a)
	}
	S.prototype.getLinkPoint = function(a, b, c, d, e, f, g, h) {
		void 0 === h && (h = new G);
		if(c.pb()) return b.ka(c, h), h;
		if(c.qf()) {
			var k = Zo(this, b);
			if(null !== k) {
				h.assign(k.Wp);
				if(e && this.routing === bp) {
					var l = Zo(this, g);
					if(null !== l && k.Rl < l.Rl) {
						k = G.alloc();
						l = G.alloc();
						var m = new M(b.ka(ed, k), b.ka(od, l)),
							n = this.computeSpot(!d, g);
						a = this.getLinkPoint(f, g, n, !d, e, a, b, l);
						(c.pf(qd) || c.pf(rd)) && a.y >= m.y && a.y <= m.y + m.height ? h.y = a.y : (c.pf(pd) || c.pf(sd)) && a.x >= m.x && a.x <= m.x + m.width && (h.x = a.x);
						G.free(k);
						G.free(l)
					}
				}
				return h
			}
		}
		c = b.ka(id,
			G.alloc());
		this.pointsCount > (e ? 6 : 2) ? (g = d ? this.i(1) : this.i(this.pointsCount - 2), e && (g = Yo(c, g.copy()))) : (f = G.alloc(), g = g.ka(id, f), e && (g = Yo(c, g)), G.free(f));
		this.getLinkPointFromPoint(a, b, c, g, d, h);
		G.free(c);
		return h
	};
	S.prototype.getLinkDirection = function(a, b, c, d, e, f, g, h) {
		a: if(d.pb()) var k = d.x > d.y ? d.x > 1 - d.y ? 0 : d.x < 1 - d.y ? 270 : 315 : d.x < d.y ? d.x > 1 - d.y ? 90 : d.x < 1 - d.y ? 180 : 135 : .5 > d.x ? 225 : .5 < d.x ? 45 : 0;
			else {
				if(d.qf() && (k = Zo(this, b), null !== k)) switch(k.Ac) {
					case 1:
						k = 270;
						break a;
					case 2:
						k = 180;
						break a;
					default:
					case 4:
						k = 0;
						break a;
					case 8:
						k = 90;
						break a
				}
				k = b.ka(id, G.alloc());
				this.pointsCount > (f ? 6 : 2) ? (h = e ? this.i(1) : this.i(this.pointsCount - 2), h = f ? Yo(k, h.copy()) : c) : (c = G.alloc(), h = h.ka(id, c), G.free(c));
				c = Math.abs(h.x - k.x) > Math.abs(h.y - k.y) ? h.x >=
					k.x ? 0 : 180 : h.y >= k.y ? 90 : 270;
				G.free(k);
				k = c
			}d.mc() && g.Ee(a) && (k += 180, 360 <= k && (k -= 360));
		if(d.vx()) return k;a = b.Di();
		if(0 === a) return k;45 <= a && 135 > a ? k += 90 : 135 <= a && 225 > a ? k += 180 : 225 <= a && 315 > a && (k += 270);360 <= k && (k -= 360);
		return k
	};
	S.prototype.computeEndSegmentLength = function(a, b, c, d) {
		if(null !== b && c.qf() && (a = Zo(this, b), null !== a)) return a.Ju;
		a = d ? this.fromEndSegmentLength : this.toEndSegmentLength;
		null !== b && isNaN(a) && (a = d ? b.fromEndSegmentLength : b.toEndSegmentLength);
		isNaN(a) && (a = 10);
		return a
	};
	S.prototype.computeSpot = function(a, b) {
		void 0 === b && (b = null);
		a ? (a = b ? b : this.fromPort, null === a ? a = id : (b = this.fromSpot, b.jb() && (b = a.fromSpot), a = b === Hd ? dd : b)) : (a = b ? b : this.toPort, null === a ? a = id : (b = this.toSpot, b.jb() && (b = a.toSpot), a = b === Hd ? dd : b));
		return a
	};

	function Xo(a) {
		return a === dd || .5 === a.x && .5 === a.y
	}
	S.prototype.computeOtherPoint = function(a, b) {
		a = b.ka(id);
		b = b.Io;
		b = null !== b ? ap(b, this) : null;
		null !== b && (a = b.Wp);
		return a
	};
	S.prototype.computeShortLength = function(a) {
		if(a) {
			a = this.fromShortLength;
			if(isNaN(a)) {
				var b = this.fromPort;
				null !== b && (a = b.fromShortLength)
			}
			return isNaN(a) ? 0 : a
		}
		a = this.toShortLength;
		isNaN(a) && (b = this.toPort, null !== b && (a = b.toShortLength));
		return isNaN(a) ? 0 : a
	};
	S.prototype.mg = function(a, b, c, d, e, f) {
		if(!1 === this.pickable) return !1;
		void 0 === b && (b = null);
		void 0 === c && (c = null);
		var g = f;
		void 0 === f && (g = Yc.alloc(), g.reset());
		g.multiply(this.transform);
		if(this.oh(a, g)) return Um(this, b, c, e), void 0 === f && Yc.free(g), !0;
		if(this.Kc(a, g)) {
			var h = !1;
			if(!this.isAtomic)
				for(var k = this.W.j, l = k.length; l--;) {
					var m = k[l];
					if(m.visible || m === this.locationObject) {
						var n = m.actualBounds,
							p = this.naturalBounds;
						if(!(n.x > p.width || n.y > p.height || 0 > n.x + n.width || 0 > n.y + n.height)) {
							n = Yc.alloc();
							n.set(g);
							if(m instanceof Y) h = m.mg(a, b, c, d, e, n);
							else if(this.path === m) {
								if(m instanceof qg) {
									h = m;
									p = a;
									var q = d;
									if(!1 === h.pickable) h = !1;
									else if(n.multiply(h.transform), q) b: {
										var r = p,
											u = n;
										if(h.oh(r, u)) h = !0;
										else {
											if(void 0 === u && (u = h.transform, r.kf(h.actualBounds))) {
												h = !0;
												break b
											}
											p = r.left;
											q = r.right;
											var v = r.top;
											r = r.bottom;
											var x = G.alloc(),
												y = G.alloc(),
												z = G.alloc(),
												B = Yc.alloc();
											B.set(u);
											B.ev(h.transform);
											B.Zs();
											y.x = q;
											y.y = v;
											y.transform(B);
											x.x = p;
											x.y = v;
											x.transform(B);
											u = !1;
											pn(h, x, y, z) ? u = !0 : (x.x = q, x.y = r, x.transform(B), pn(h, x, y,
												z) ? u = !0 : (y.x = p, y.y = r, y.transform(B), pn(h, x, y, z) ? u = !0 : (x.x = p, x.y = v, x.transform(B), pn(h, x, y, z) && (u = !0))));
											Yc.free(B);
											G.free(x);
											G.free(y);
											G.free(z);
											h = u
										}
									}
									else h = h.oh(p, n)
								}
							} else h = $k(m, a, d, n);
							h && (null !== b && (m = b(m)), m && (null === c || c(m)) && e.add(m));
							Yc.free(n)
						}
					}
				}
			void 0 === f && Yc.free(g);
			return h || null !== this.background || null !== this.areaBackground
		}
		void 0 === f && Yc.free(g);
		return !1
	};
	S.prototype.computeCurve = function() {
		if(null === this.Hf) {
			var a = this.fromPort,
				b = this.isOrthogonal;
			this.Hf = null !== a && a === this.toPort && !b
		}
		return this.Hf ? Wg : this.curve
	};
	S.prototype.computeCorner = function() {
		if(this.curve === Wg) return 0;
		var a = this.corner;
		if(isNaN(a) || 0 > a) a = 10;
		return a
	};
	S.prototype.findMidLabel = function() {
		for(var a = this.path, b = this.W.j, c = b.length, d = 0; d < c; d++) {
			var e = b[d];
			if(e !== a && !e.isPanelMain && (-Infinity === e.segmentIndex || isNaN(e.segmentIndex))) return e
		}
		for(a = this.labelNodes; a.next();)
			if(b = a.value, -Infinity === b.segmentIndex || isNaN(b.segmentIndex)) return b;
		return null
	};
	S.prototype.computeSpacing = function() {
		if(!this.isVisible()) return 0;
		var a = Math.max(14, this.computeThickness());
		var b = this.fromPort,
			c = this.toPort;
		if(null !== b && null !== c) {
			var d = this.findMidLabel();
			if(null !== d) {
				var e = d.naturalBounds,
					f = d.margin,
					g = isNaN(e.width) ? 30 : e.width * d.scale + f.left + f.right;
				e = isNaN(e.height) ? 14 : e.height * d.scale + f.top + f.bottom;
				d = d.segmentOrientation;
				d === rn || d === Ro || d === Qo ? a = Math.max(a, e) : d === Dm || d === Em || d === Bm || d === Cm ? a = Math.max(a, g) : (b = b.ka(id).Na(c.ka(id)) / 180 * Math.PI, a = Math.max(a,
					Math.abs(Math.sin(b) * g) + Math.abs(Math.cos(b) * e) + 1));
				this.curve === Wg && (a *= 1.333)
			}
		}
		return a
	};
	S.prototype.arrangeBundledLinks = function(a, b) {
		if(b)
			for(b = 0; b < a.length; b++) {
				var c = a[b];
				c.adjusting === Tg && c.Pa()
			}
	};
	S.prototype.computeCurviness = function() {
		var a = this.curviness;
		if(isNaN(a)) {
			a = 16;
			var b = this.xf;
			if(null !== b) {
				for(var c = La(), d = 0, e = b.links, f = 0; f < e.length; f++) {
					var g = e[f].computeSpacing();
					c.push(g);
					d += g
				}
				d = -d / 2;
				for(f = 0; f < e.length; f++) {
					if(e[f] === this) {
						a = d + c[f] / 2;
						break
					}
					d += c[f]
				}
				b.et === this.fromNode && (a = -a);
				Na(c)
			}
		}
		return a
	};
	S.prototype.computeThickness = function() {
		if(!this.isVisible()) return 0;
		var a = this.path;
		return null !== a ? Math.max(a.strokeWidth, 1) : 1
	};
	S.prototype.hasCurviness = function() {
		return !isNaN(this.curviness) || null !== this.xf
	};
	S.prototype.adjustPoints = function(a, b, c, d) {
		var e = this.adjusting;
		if(this.isOrthogonal) {
			if(e === Oo) return !1;
			e === Po && (e = No)
		}
		switch(e) {
			case Oo:
				var f = this.i(a),
					g = this.i(c);
				if(!f.Oa(b) || !g.Oa(d)) {
					e = f.x;
					f = f.y;
					var h = g.x - e,
						k = g.y - f,
						l = Math.sqrt(h * h + k * k);
					if(!H.ba(l, 0)) {
						if(H.ba(h, 0)) var m = 0 > k ? -Math.PI / 2 : Math.PI / 2;
						else m = Math.atan(k / Math.abs(h)), 0 > h && (m = Math.PI - m);
						g = b.x;
						var n = b.y;
						h = d.x - g;
						var p = d.y - n;
						k = Math.sqrt(h * h + p * p);
						H.ba(h, 0) ? p = 0 > p ? -Math.PI / 2 : Math.PI / 2 : (p = Math.atan(p / Math.abs(h)), 0 > h && (p = Math.PI - p));
						l = k / l;
						m =
							p - m;
						this.md(a, b);
						for(a += 1; a < c; a++) b = this.i(a), h = b.x - e, k = b.y - f, b = Math.sqrt(h * h + k * k), H.ba(b, 0) || (H.ba(h, 0) ? k = 0 > k ? -Math.PI / 2 : Math.PI / 2 : (k = Math.atan(k / Math.abs(h)), 0 > h && (k = Math.PI - k)), h = k + m, b *= l, this.M(a, g + b * Math.cos(h), n + b * Math.sin(h)));
						this.md(c, d)
					}
				}
				return !0;
			case Po:
				f = this.i(a);
				n = this.i(c);
				if(!f.Oa(b) || !n.Oa(d)) {
					e = f.x;
					f = f.y;
					g = n.x;
					n = n.y;
					l = (g - e) * (g - e) + (n - f) * (n - f);
					h = b.x;
					m = b.y;
					k = d.x;
					p = d.y;
					var q = 1;
					if(0 !== k - h) {
						var r = (p - m) / (k - h);
						q = Math.sqrt(1 + 1 / (r * r))
					} else r = 9E9;
					this.md(a, b);
					for(a += 1; a < c; a++) {
						b = this.i(a);
						var u = b.x,
							v = b.y,
							x = .5;
						0 !== l && (x = ((e - u) * (e - g) + (f - v) * (f - n)) / l);
						var y = e + x * (g - e),
							z = f + x * (n - f);
						b = Math.sqrt((u - y) * (u - y) + (v - z) * (v - z));
						v < r * (u - y) + z && (b = -b);
						0 < r && (b = -b);
						u = h + x * (k - h);
						x = m + x * (p - m);
						0 !== r ? (b = u + b / q, this.M(a, b, x - (b - u) / r)) : this.M(a, u, x + b)
					}
					this.md(c, d)
				}
				return !0;
			case No:
				a: {
					if(this.isOrthogonal && (e = this.i(a), f = this.i(a + 1), g = this.i(a + 2), h = f.x, m = f.y, n = h, l = m, H.w(e.y, f.y) ? H.w(f.x, g.x) ? m = b.y : H.w(f.y, g.y) && (h = b.x) : H.w(e.x, f.x) && (H.w(f.y, g.y) ? h = b.x : H.w(f.x, g.x) && (m = b.y)), this.M(a + 1, h, m), e = this.i(c), f = this.i(c -
							1), g = this.i(c - 2), h = f.x, m = f.y, k = h, p = m, H.w(e.y, f.y) ? H.w(f.x, g.x) ? m = d.y : H.w(f.y, g.y) && (h = d.x) : H.w(e.x, f.x) && (H.w(f.y, g.y) ? h = d.x : H.w(f.x, g.x) && (m = d.y)), this.M(c - 1, h, m), Hj(this))) {
						this.M(a + 1, n, l);
						this.M(c - 1, k, p);
						c = !1;
						break a
					}
					this.md(a, b);this.md(c, d);c = !0
				}
				return c;
			default:
				return !1
		}
	};
	S.prototype.addOrthoPoints = function(a, b, c, d, e, f) {
		b = -45 <= b && 45 > b ? 0 : 45 <= b && 135 > b ? 90 : 135 <= b && 225 > b ? 180 : 270;
		d = -45 <= d && 45 > d ? 0 : 45 <= d && 135 > d ? 90 : 135 <= d && 225 > d ? 180 : 270;
		var g = e.actualBounds.copy(),
			h = f.actualBounds.copy();
		if(g.s() && h.s()) {
			g.gd(8, 8);
			h.gd(8, 8);
			g.Je(a);
			h.Je(c);
			if(0 === b)
				if(c.x > a.x || 270 === d && c.y < a.y && h.right > a.x || 90 === d && c.y > a.y && h.right > a.x) {
					var k = new G(c.x, a.y);
					var l = new G(c.x, (a.y + c.y) / 2);
					180 === d ? (k.x = this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !1), l.x = k.x, l.y = c.y) : 270 === d && c.y < a.y || 90 === d &&
						c.y > a.y ? (k.x = a.x < h.left ? this.computeMidOrthoPosition(a.x, a.y, h.left, c.y, !1) : a.x < h.right && (270 === d && a.y < h.top || 90 === d && a.y > h.bottom) ? this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !1) : h.right, l.x = k.x, l.y = c.y) : 0 === d && a.x < h.left && a.y > h.top && a.y < h.bottom && (k.x = a.x, k.y = a.y < c.y ? Math.min(c.y, h.top) : Math.max(c.y, h.bottom), l.y = k.y)
				} else {
					k = new G(a.x, c.y);
					l = new G((a.x + c.x) / 2, c.y);
					if(180 === d || 90 === d && c.y < g.top || 270 === d && c.y > g.bottom) 180 === d && (h.ea(a) || g.ea(c)) ? k.y = this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !0) :
						c.y < a.y && (180 === d || 90 === d) ? k.y = this.computeMidOrthoPosition(a.x, g.top, c.x, Math.max(c.y, h.bottom), !0) : c.y > a.y && (180 === d || 270 === d) && (k.y = this.computeMidOrthoPosition(a.x, g.bottom, c.x, Math.min(c.y, h.top), !0)), l.x = c.x, l.y = k.y;
					if(k.y > g.top && k.y < g.bottom)
						if(c.x >= g.left && c.x <= a.x || a.x <= h.right && a.x >= c.x) {
							if(90 === d || 270 === d) k = new G(Math.max((a.x + c.x) / 2, a.x), a.y), l = new G(k.x, c.y)
						} else k.y = 270 === d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 0 === d ? g.top : Math.min(g.top, h.top)) : Math.max(c.y, 0 === d ? g.bottom : Math.max(g.bottom,
							h.bottom)), l.x = c.x, l.y = k.y
				}
			else if(180 === b)
				if(c.x < a.x || 270 === d && c.y < a.y && h.left < a.x || 90 === d && c.y > a.y && h.left < a.x) k = new G(c.x, a.y), l = new G(c.x, (a.y + c.y) / 2), 0 === d ? (k.x = this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !1), l.x = k.x, l.y = c.y) : 270 === d && c.y < a.y || 90 === d && c.y > a.y ? (k.x = a.x > h.right ? this.computeMidOrthoPosition(a.x, a.y, h.right, c.y, !1) : a.x > h.left && (270 === d && a.y < h.top || 90 === d && a.y > h.bottom) ? this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !1) : h.left, l.x = k.x, l.y = c.y) : 180 === d && a.x > h.right && a.y > h.top && a.y <
					h.bottom && (k.x = a.x, k.y = a.y < c.y ? Math.min(c.y, h.top) : Math.max(c.y, h.bottom), l.y = k.y);
				else {
					k = new G(a.x, c.y);
					l = new G((a.x + c.x) / 2, c.y);
					if(0 === d || 90 === d && c.y < g.top || 270 === d && c.y > g.bottom) 0 === d && (h.ea(a) || g.ea(c)) ? k.y = this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !0) : c.y < a.y && (0 === d || 90 === d) ? k.y = this.computeMidOrthoPosition(a.x, g.top, c.x, Math.max(c.y, h.bottom), !0) : c.y > a.y && (0 === d || 270 === d) && (k.y = this.computeMidOrthoPosition(a.x, g.bottom, c.x, Math.min(c.y, h.top), !0)), l.x = c.x, l.y = k.y;
					if(k.y > g.top && k.y < g.bottom)
						if(c.x <=
							g.right && c.x >= a.x || a.x >= h.left && a.x <= c.x) {
							if(90 === d || 270 === d) k = new G(Math.min((a.x + c.x) / 2, a.x), a.y), l = new G(k.x, c.y)
						} else k.y = 270 === d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 180 === d ? g.top : Math.min(g.top, h.top)) : Math.max(c.y, 180 === d ? g.bottom : Math.max(g.bottom, h.bottom)), l.x = c.x, l.y = k.y
				}
			else if(90 === b)
				if(c.y > a.y || 180 === d && c.x < a.x && h.bottom > a.y || 0 === d && c.x > a.x && h.bottom > a.y) k = new G(a.x, c.y), l = new G((a.x + c.x) / 2, c.y), 270 === d ? (k.y = this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !0), l.x = c.x, l.y = k.y) : 180 ===
					d && c.x < a.x || 0 === d && c.x > a.x ? (k.y = a.y < h.top ? this.computeMidOrthoPosition(a.x, a.y, c.x, h.top, !0) : a.y < h.bottom && (180 === d && a.x < h.left || 0 === d && a.x > h.right) ? this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !0) : h.bottom, l.x = c.x, l.y = k.y) : 90 === d && a.y < h.top && a.x > h.left && a.x < h.right && (k.x = a.x < c.x ? Math.min(c.x, h.left) : Math.max(c.x, h.right), k.y = a.y, l.x = k.x);
				else {
					k = new G(c.x, a.y);
					l = new G(c.x, (a.y + c.y) / 2);
					if(270 === d || 0 === d && c.x < g.left || 180 === d && c.x > g.right) 270 === d && (h.ea(a) || g.ea(c)) ? k.x = this.computeMidOrthoPosition(a.x,
						a.y, c.x, c.y, !1) : c.x < a.x && (270 === d || 0 === d) ? k.x = this.computeMidOrthoPosition(g.left, a.y, Math.max(c.x, h.right), c.y, !1) : c.x > a.x && (270 === d || 180 === d) && (k.x = this.computeMidOrthoPosition(g.right, a.y, Math.min(c.x, h.left), c.y, !1)), l.x = k.x, l.y = c.y;
					if(k.x > g.left && k.x < g.right)
						if(c.y >= g.top && c.y <= a.y || a.y <= h.bottom && a.y >= c.y) {
							if(0 === d || 180 === d) k = new G(a.x, Math.max((a.y + c.y) / 2, a.y)), l = new G(c.x, k.y)
						} else k.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 90 === d ? g.left : Math.min(g.left, h.left)) : Math.max(c.x, 90 ===
							d ? g.right : Math.max(g.right, h.right)), l.x = k.x, l.y = c.y
				}
			else if(c.y < a.y || 180 === d && c.x < a.x && h.top < a.y || 0 === d && c.x > a.x && h.top < a.y) k = new G(a.x, c.y), l = new G((a.x + c.x) / 2, c.y), 90 === d ? (k.y = this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !0), l.x = c.x, l.y = k.y) : 180 === d && c.x < a.x || 0 === d && c.x >= a.x ? (k.y = a.y > h.bottom ? this.computeMidOrthoPosition(a.x, a.y, c.x, h.bottom, !0) : a.y > h.top && (180 === d && a.x < h.left || 0 === d && a.x > h.right) ? this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !0) : h.top, l.x = c.x, l.y = k.y) : 270 === d && a.y > h.bottom && a.x >
				h.left && a.x < h.right && (k.x = a.x < c.x ? Math.min(c.x, h.left) : Math.max(c.x, h.right), k.y = a.y, l.x = k.x);
			else {
				k = new G(c.x, a.y);
				l = new G(c.x, (a.y + c.y) / 2);
				if(90 === d || 0 === d && c.x < g.left || 180 === d && c.x > g.right) 90 === d && (h.ea(a) || g.ea(c)) ? k.x = this.computeMidOrthoPosition(a.x, a.y, c.x, c.y, !1) : c.x < a.x && (90 === d || 0 === d) ? k.x = this.computeMidOrthoPosition(g.left, a.y, Math.max(c.x, h.right), c.y, !1) : c.x > a.x && (90 === d || 180 === d) && (k.x = this.computeMidOrthoPosition(g.right, a.y, Math.min(c.x, h.left), c.y, !1)), l.x = k.x, l.y = c.y;
				if(k.x > g.left &&
					k.x < g.right)
					if(c.y <= g.bottom && c.y >= a.y || a.y >= h.top && a.y <= c.y) {
						if(0 === d || 180 === d) k = new G(a.x, Math.min((a.y + c.y) / 2, a.y)), l = new G(c.x, k.y)
					} else k.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 270 === d ? g.left : Math.min(g.left, h.left)) : Math.max(c.x, 270 === d ? g.right : Math.max(g.right, h.right)), l.x = k.x, l.y = c.y
			}
			var m = k,
				n = l,
				p = c;
			if(this.isAvoiding) {
				var q = this.diagram;
				if(null === q || !Xj(q) || g.ea(p) && !f.Ee(e) || h.ea(a) && !e.Ee(f) || e === f || this.layer.isTemporary) b = !1;
				else {
					var r = Yj(q, !0, this.containingGroup, null);
					if(r.Zj(Math.min(a.x, m.x), Math.min(a.y, m.y), Math.abs(a.x - m.x), Math.abs(a.y - m.y)) && r.Zj(Math.min(m.x, n.x), Math.min(m.y, n.y), Math.abs(m.x - n.x), Math.abs(m.y - n.y)) && r.Zj(Math.min(n.x, p.x), Math.min(n.y, p.y), Math.abs(n.x - p.x), Math.abs(n.y - p.y))) b = !1;
					else {
						e = a;
						f = p;
						var u = c = null;
						if(q.isVirtualized) {
							q = r.bounds.copy();
							q.gd(-r.Pl, -r.Ol);
							var v = G.alloc();
							cp(r, a.x, a.y) || (H.Vc(q.x, q.y, q.x + q.width, q.y + q.height, a.x, a.y, m.x, m.y, v) ? (c = a = v.copy(), b = v.Na(m)) : H.Vc(q.x, q.y, q.x + q.width, q.y + q.height, m.x, m.y, n.x, n.y, v) ? (c = a =
								v.copy(), b = v.Na(n)) : H.Vc(q.x, q.y, q.x + q.width, q.y + q.height, n.x, n.y, p.x, p.y, v) && (c = a = v.copy(), b = v.Na(p)));
							cp(r, p.x, p.y) || (H.Vc(q.x, q.y, q.x + q.width, q.y + q.height, p.x, p.y, n.x, n.y, v) ? (u = p = v.copy(), d = n.Na(v)) : H.Vc(q.x, q.y, q.x + q.width, q.y + q.height, n.x, n.y, m.x, m.y, v) ? (u = p = v.copy(), d = m.Na(v)) : H.Vc(q.x, q.y, q.x + q.width, q.y + q.height, m.x, m.y, a.x, a.y, v) && (u = p = v.copy(), d = a.Na(v)));
							G.free(v)
						}
						g = g.copy().Wc(h);
						h = r.Ez;
						g.gd(r.Pl * h, r.Ol * h);
						dp(r, a, b, p, d, g);
						h = ep(r, p.x, p.y);
						!r.abort && h >= fp && (ik(r), h = r.pz, g.gd(r.Pl * h, r.Ol *
							h), dp(r, a, b, p, d, g), h = ep(r, p.x, p.y));
						!r.abort && h >= fp && r.Kz && (ik(r), dp(r, a, b, p, d, r.bounds), h = ep(r, p.x, p.y));
						if(!r.abort && h < fp && ep(r, p.x, p.y) !== gp) {
							hp(this, r, p.x, p.y, d, !0);
							g = this.i(2);
							if(4 > this.pointsCount) 0 === b || 180 === b ? (g.x = a.x, g.y = p.y) : (g.x = p.x, g.y = a.y), this.M(2, g.x, g.y), this.m(3, g.x, g.y);
							else if(p = this.i(3), 0 === b || 180 === b) H.w(g.x, p.x) ? (g = 0 === b ? Math.max(g.x, a.x) : Math.min(g.x, a.x), this.M(2, g, a.y), this.M(3, g, p.y)) : H.w(g.y, p.y) ? (Math.abs(a.y - g.y) <= r.Ol / 2 && (this.M(2, g.x, a.y), this.M(3, p.x, a.y)), this.m(2,
								g.x, a.y)) : this.M(2, a.x, g.y);
							else if(90 === b || 270 === b) H.w(g.y, p.y) ? (g = 90 === b ? Math.max(g.y, a.y) : Math.min(g.y, a.y), this.M(2, a.x, g), this.M(3, p.x, g)) : H.w(g.x, p.x) ? (Math.abs(a.x - g.x) <= r.Pl / 2 && (this.M(2, a.x, g.y), this.M(3, a.x, p.y)), this.m(2, a.x, g.y)) : this.M(2, g.x, a.y);
							null !== c && (a = this.i(1), p = this.i(2), a.x !== p.x && a.y !== p.y ? 0 === b || 180 === b ? this.m(2, a.x, p.y) : this.m(2, p.x, a.y) : 0 === b || 180 === b ? this.m(2, e.x, c.y) : this.m(2, c.x, e.y));
							null !== u && (0 === d || 180 === d ? this.hf(f.x, u.y) : this.hf(u.x, f.y));
							b = !0
						} else b = !1
					}
				}
			} else b = !1;
			b || (this.xe(k), this.xe(l))
		}
	};
	S.prototype.computeMidOrthoPosition = function(a, b, c, d, e) {
		var f = 0;
		this.hasCurviness() && (f = this.computeCurviness());
		return e ? (b + d) / 2 + f : (a + c) / 2 + f
	};

	function Hj(a) {
		if(null === a.diagram || !a.isAvoiding || !Xj(a.diagram)) return !1;
		var b = a.points.j,
			c = b.length;
		if(4 > c) return !1;
		a = Yj(a.diagram, !0, a.containingGroup, null);
		for(var d = 1; d < c - 2; d++) {
			var e = b[d],
				f = b[d + 1];
			if(!a.Zj(Math.min(e.x, f.x), Math.min(e.y, f.y), Math.abs(e.x - f.x), Math.abs(e.y - f.y))) return !0
		}
		return !1
	}

	function hp(a, b, c, d, e, f) {
		var g = b.Pl,
			h = b.Ol,
			k = ep(b, c, d),
			l = c,
			m = d;
		for(0 === e ? l += g : 90 === e ? m += h : 180 === e ? l -= g : m -= h; k > ip && ep(b, l, m) === k - 1;) c = l, d = m, 0 === e ? l += g : 90 === e ? m += h : 180 === e ? l -= g : m -= h, --k;
		if(f) {
			if(k > ip)
				if(180 === e || 0 === e) c = Math.floor(c / g) * g + g / 2;
				else if(90 === e || 270 === e) d = Math.floor(d / h) * h + h / 2
		} else c = Math.floor(c / g) * g + g / 2, d = Math.floor(d / h) * h + h / 2;
		k > ip && (f = e, l = c, m = d, 0 === e ? (f = 90, m += h) : 90 === e ? (f = 180, l -= g) : 180 === e ? (f = 270, m -= h) : 270 === e && (f = 0, l += g), ep(b, l, m) === k - 1 ? hp(a, b, l, m, f, !1) : (l = c, m = d, 0 === e ? (f = 270, m -= h) : 90 ===
			e ? (f = 0, l += g) : 180 === e ? (f = 90, m += h) : 270 === e && (f = 180, l -= g), ep(b, l, m) === k - 1 && hp(a, b, l, m, f, !1)));
		a.hf(c, d)
	}
	S.prototype.Dy = function(a) {
		var b = a.x;
		a = a.y;
		for(var c = this.i(0), d = this.i(1), e = Yb(b, a, c.x, c.y, d.x, d.y), f = 0, g = 1; g < this.pointsCount - 1; g++) {
			c = this.i(g + 1);
			var h = Yb(b, a, d.x, d.y, c.x, c.y);
			d = c;
			h < e && (f = g, e = h)
		}
		return f
	};
	S.prototype.$b = function() {
		this.ur = !0
	};
	S.prototype.ak = function(a) {
		if(!a) {
			if(!1 === this.Mc) return;
			a = this.Db();
			if(!this.ur && (null === a || null !== a.geometry)) return
		}
		this.pa = this.makeGeometry();
		a = this.path;
		if(null !== a) {
			a.pa = this.pa;
			for(var b = this.W.j, c = b.length, d = 0; d < c; d++) {
				var e = b[d];
				e !== a && e.isPanelMain && e instanceof qg && (e.pa = this.pa)
			}
		}
	};
	S.prototype.makeGeometry = function() {
		var a = this.pa,
			b = this.pointsCount;
		if(2 > b) return a.type = he, a;
		var c = !1,
			d = this.diagram;
		null !== d && So(this) && d.Sh.contains(this) && null !== this.Ko && (c = !0);
		var e = this.i(0).copy(),
			f = e.copy();
		d = this.Bb.j;
		var g = this.computeCurve();
		if(g === Wg && 3 <= b && !H.ba(this.smoothness, 0))
			if(3 === b) {
				var h = this.i(1);
				d = Math.min(e.x, h.x);
				var k = Math.min(e.y, h.y);
				h = this.i(2);
				d = Math.min(d, h.x);
				k = Math.min(k, h.y)
			} else {
				if(this.isOrthogonal)
					for(k = 0; k < b; k++) h = d[k], f.x = Math.min(h.x, f.x), f.y = Math.min(h.y,
						f.y);
				else
					for(d = 3; d < b; d += 3) d + 3 >= b && (d = b - 1), k = this.i(d), f.x = Math.min(k.x, f.x), f.y = Math.min(k.y, f.y);
				d = f.x;
				k = f.y
			}
		else {
			for(k = 0; k < b; k++) h = d[k], f.x = Math.min(h.x, f.x), f.y = Math.min(h.y, f.y);
			d = f.x;
			k = f.y
		}
		d -= this.ru.x;
		k -= this.ru.y;
		e.x -= d;
		e.y -= k;
		if(2 !== b || So(this)) {
			a.type = fe;
			h = se(a);
			0 !== this.computeShortLength(!0) && (e = jp(this, e, !0, f));
			te(h, e.x, e.y, !1);
			if(g === Wg && 3 <= b && !H.ba(this.smoothness, 0))
				if(3 === b) c = this.i(1), b = c.x - d, c = c.y - k, e = this.i(2).copy(), e.x -= d, e.y -= k, 0 !== this.computeShortLength(!1) && (e = jp(this, e, !1, f)), ue(h, b, c, b, c, e.x, e.y);
				else if(this.isOrthogonal) {
				f = new G(d, k);
				e = this.i(1).copy();
				g = new G(d, k);
				b = new G(d, k);
				c = this.i(0);
				for(var l, m = this.smoothness / 3, n = 1; n < this.pointsCount - 1; n++) {
					l = this.i(n);
					var p = c,
						q = l,
						r = this.i(kp(this, l, n, !1));
					if(!H.ba(p.x, q.x) || !H.ba(q.x, r.x))
						if(!H.ba(p.y, q.y) || !H.ba(q.y, r.y)) {
							var u = m;
							isNaN(u) && (u = this.smoothness / 3);
							var v = p.x;
							p = p.y;
							var x = q.x;
							q = q.y;
							var y = r.x;
							r = r.y;
							var z = u * lp(v, p, x, q);
							u *= lp(x, q, y, r);
							H.ba(p, q) && H.ba(x, y) && (x > v ? r > q ? (g.x = x - z, g.y = q - z, b.x = x + u, b.y = q + u) : (g.x = x - z,
								g.y = q + z, b.x = x + u, b.y = q - u) : r > q ? (g.x = x + z, g.y = q - z, b.x = x - u, b.y = q + u) : (g.x = x + z, g.y = q + z, b.x = x - u, b.y = q - u));
							H.ba(v, x) && H.ba(q, r) && (q > p ? (y > x ? (g.x = x - z, g.y = q - z, b.x = x + u) : (g.x = x + z, g.y = q - z, b.x = x - u), b.y = q + u) : (y > x ? (g.x = x - z, g.y = q + z, b.x = x + u) : (g.x = x + z, g.y = q + z, b.x = x - u), b.y = q - u));
							if(H.ba(v, x) && H.ba(x, y) || H.ba(p, q) && H.ba(q, r)) v = .5 * (v + y), p = .5 * (p + r), g.x = v, g.y = p, b.x = v, b.y = p;
							1 === n ? (e.x = .5 * (c.x + l.x), e.y = .5 * (c.y + l.y)) : 2 === n && H.ba(c.x, this.i(0).x) && H.ba(c.y, this.i(0).y) && (e.x = .5 * (c.x + l.x), e.y = .5 * (c.y + l.y));
							ue(h, e.x - d, e.y - k, g.x -
								d, g.y - k, l.x - d, l.y - k);
							f.set(g);
							e.set(b);
							c = l
						}
				}
				f = c.x;
				c = c.y;
				e = this.i(this.pointsCount - 1);
				0 !== this.computeShortLength(!1) && (e = jp(this, e.copy(), !1, bc));
				f = .5 * (f + e.x);
				c = .5 * (c + e.y);
				ue(h, b.x - d, b.y - k, f - d, c - k, e.x - d, e.y - k)
			} else
				for(c = 3; c < b; c += 3) f = this.i(c - 2), c + 3 >= b && (c = b - 1), e = this.i(c - 1), g = this.i(c), c === b - 1 && 0 !== this.computeShortLength(!1) && (g = jp(this, g.copy(), !1, bc)), ue(h, f.x - d, f.y - k, e.x - d, e.y - k, g.x - d, g.y - k);
			else {
				f = G.alloc();
				f.assign(this.i(0));
				g = 1;
				for(e = 0; g < b;) {
					g = kp(this, f, g, 1 < g);
					m = this.i(g);
					if(g >= b - 1) {
						if(!f.A(m)) 0 !==
							this.computeShortLength(!1) && (m = jp(this, m.copy(), !1, bc)), mp(this, h, -d, -k, f, m, c);
						else if(0 === e)
							for(g = 1; g < b;) m = this.i(g++), mp(this, h, -d, -k, f, m, c), f.assign(m);
						break
					}
					e = kp(this, m, g + 1, g < b - 3);
					g = -d;
					l = -k;
					n = this.i(e);
					v = c;
					H.w(f.y, m.y) && H.w(m.x, n.x) ? (p = this.computeCorner(), p = Math.min(p, Math.abs(m.x - f.x) / 2), p = u = Math.min(p, Math.abs(n.y - m.y) / 2), H.w(p, 0) ? (mp(this, h, g, l, f, m, v), f.assign(m)) : (x = m.x, q = m.y, y = x, r = q, m.x > f.x ? x = m.x - p : x = m.x + p, n.y > m.y ? r = m.y + u : r = m.y - u, mp(this, h, g, l, f, new G(x, q), v), ve(h, m.x + g, m.y + l, y + g, r + l),
						f.h(y, r))) : H.w(f.x, m.x) && H.w(m.y, n.y) ? (p = this.computeCorner(), p = Math.min(p, Math.abs(m.y - f.y) / 2), p = u = Math.min(p, Math.abs(n.x - m.x) / 2), H.w(u, 0) ? (mp(this, h, g, l, f, m, v), f.assign(m)) : (x = m.x, q = m.y, y = x, r = q, m.y > f.y ? q = m.y - p : q = m.y + p, n.x > m.x ? y = m.x + u : y = m.x - u, mp(this, h, g, l, f, new G(x, q), v), ve(h, m.x + g, m.y + l, y + g, r + l), f.h(y, r))) : (mp(this, h, g, l, f, m, v), f.assign(m));
					g = e
				}
				G.free(f)
			}
			ye = h
		} else h = this.i(1).copy(), h.x -= d, h.y -= k, 0 !== this.computeShortLength(!0) && (e = jp(this, e, !0, f)), 0 !== this.computeShortLength(!1) && (h = jp(this,
			h, !1, f)), a.type = he, a.startX = e.x, a.startY = e.y, a.endX = h.x, a.endY = h.y;
		return a
	};

	function lp(a, b, c, d) {
		a = c - a;
		if(isNaN(a) || Infinity === a || -Infinity === a) return NaN;
		0 > a && (a = -a);
		b = d - b;
		if(isNaN(b) || Infinity === b || -Infinity === b) return NaN;
		0 > b && (b = -b);
		return H.ba(a, 0) ? b : H.ba(b, 0) ? a : Math.sqrt(a * a + b * b)
	}

	function jp(a, b, c, d) {
		var e = a.pointsCount;
		if(2 > e) return b;
		if(c) {
			var f = a.i(1);
			c = f.x - d.x;
			f = f.y - d.y;
			d = lp(b.x, b.y, c, f);
			if(0 === d) return b;
			e = 2 === e ? .5 * d : d;
			a = a.computeShortLength(!0);
			a > e && (a = e);
			e = a * (f - b.y) / d;
			b.x += a * (c - b.x) / d;
			b.y += e
		} else {
			f = a.i(e - 2);
			c = f.x - d.x;
			f = f.y - d.y;
			d = lp(b.x, b.y, c, f);
			if(0 === d) return b;
			e = 2 === e ? .5 * d : d;
			a = a.computeShortLength(!1);
			a > e && (a = e);
			e = a * (b.y - f) / d;
			b.x -= a * (b.x - c) / d;
			b.y -= e
		}
		return b
	}

	function kp(a, b, c, d) {
		for(var e = a.pointsCount, f = b; H.ba(b.x, f.x) && H.ba(b.y, f.y);) {
			if(c >= e) return e - 1;
			f = a.i(c++)
		}
		if(!H.ba(b.x, f.x) && !H.ba(b.y, f.y)) return c - 1;
		for(var g = f; H.ba(b.x, f.x) && H.ba(f.x, g.x) && (!d || (b.y >= f.y ? f.y >= g.y : f.y <= g.y)) || H.ba(b.y, f.y) && H.ba(f.y, g.y) && (!d || (b.x >= f.x ? f.x >= g.x : f.x <= g.x));) {
			if(c >= e) return e - 1;
			g = a.i(c++)
		}
		return c - 2
	}

	function mp(a, b, c, d, e, f, g) {
		if(!g && So(a)) {
			g = [];
			var h = 0;
			a.isVisible() && (h = np(a, e, f, g));
			if(0 < h)
				if(H.w(e.y, f.y))
					if(e.x < f.x)
						for(var k = 0; k < h;) {
							var l = Math.max(e.x, Math.min(g[k++] - 5, f.x - 10));
							b.lineTo(l + c, f.y + d);
							var m = l + c;
							for(var n = Math.min(l + 10, f.x); k < h;)
								if(l = g[k], l < n + 10) k++, n = Math.min(l + 5, f.x);
								else break;
							l = f.y - 10 + d;
							n += c;
							var p = f.y + d;
							a.curve === Sg ? te(b, n, p, !1) : ue(b, m, l, n, l, n, p)
						} else
							for(--h; 0 <= h;) {
								k = Math.min(e.x, Math.max(g[h--] + 5, f.x + 10));
								b.lineTo(k + c, f.y + d);
								m = k + c;
								for(l = Math.max(k - 10, f.x); 0 <= h;)
									if(k = g[h], k >
										l - 10) h--, l = Math.max(k - 5, f.x);
									else break;
								k = f.y - 10 + d;
								l += c;
								n = f.y + d;
								a.curve === Sg ? te(b, l, n, !1) : ue(b, m, k, l, k, l, n)
							} else if(H.w(e.x, f.x))
								if(e.y < f.y)
									for(k = 0; k < h;) {
										l = Math.max(e.y, Math.min(g[k++] - 5, f.y - 10));
										b.lineTo(f.x + c, l + d);
										m = l + d;
										for(l = Math.min(l + 10, f.y); k < h;)
											if(n = g[k], n < l + 10) k++, l = Math.min(n + 5, f.y);
											else break;
										n = f.x - 10 + c;
										p = f.x + c;
										l += d;
										a.curve === Sg ? te(b, p, l, !1) : ue(b, n, m, n, l, p, l)
									} else
										for(--h; 0 <= h;) {
											k = Math.min(e.y, Math.max(g[h--] + 5, f.y + 10));
											b.lineTo(f.x + c, k + d);
											m = k + d;
											for(k = Math.max(k - 10, f.y); 0 <= h;)
												if(l = g[h],
													l > k - 10) h--, k = Math.max(l - 5, f.y);
												else break;
											l = f.x - 10 + c;
											n = f.x + c;
											k += d;
											a.curve === Sg ? te(b, n, k, !1) : ue(b, l, m, l, k, n, k)
										}
		}
		b.lineTo(f.x + c, f.y + d)
	}

	function np(a, b, c, d) {
		var e = a.diagram;
		if(null === e || b.A(c)) return 0;
		for(e = e.layers; e.next();) {
			var f = e.value;
			if(null !== f && f.visible) {
				f = f.Fa.j;
				for(var g = f.length, h = 0; h < g; h++) {
					var k = f[h];
					if(k instanceof S) {
						if(k === a) return 0 < d.length && d.sort(function(a, b) {
							return a - b
						}), d.length;
						if(k.isVisible() && So(k)) {
							var l = k.routeBounds;
							l.s() && a.routeBounds.Kc(l) && !a.usesSamePort(k) && (l = k.path, null !== l && l.rf() && op(b, c, d, k))
						}
					}
				}
			}
		}
		0 < d.length && d.sort(function(a, b) {
			return a - b
		});
		return d.length
	}

	function op(a, b, c, d) {
		for(var e = H.w(a.y, b.y), f = d.pointsCount, g = d.i(0), h = G.alloc(), k = 1; k < f; k++) {
			var l = d.i(k);
			if(k < f - 1) {
				var m = d.i(k + 1);
				if(g.y === l.y && l.y === m.y) {
					if(l.x > g.x && m.x >= l.x || l.x < g.x && m.x <= l.x) continue
				} else if(g.x === l.x && l.x === m.x && (l.y > g.y && m.y >= l.y || l.y < g.y && m.y <= l.y)) continue
			}
			a: {
				m = a.x;
				var n = a.y,
					p = b.x,
					q = b.y,
					r = g.x;g = g.y;
				var u = l.x,
					v = l.y;
				if(!H.w(m, p)) {
					if(H.w(n, q) && H.w(r, u) && Math.min(m, p) < r && Math.max(m, p) > r && Math.min(g, v) < n && Math.max(g, v) > n && !H.w(g, v)) {
						h.x = r;
						h.y = n;
						m = !0;
						break a
					}
				} else if(!H.w(n, q) &&
					H.w(g, v) && Math.min(n, q) < g && Math.max(n, q) > g && Math.min(r, u) < m && Math.max(r, u) > m && !H.w(r, u)) {
					h.x = m;
					h.y = g;
					m = !0;
					break a
				}
				h.x = 0;h.y = 0;m = !1
			}
			m && (e ? c.push(h.x) : c.push(h.y));
			g = l
		}
		G.free(h)
	}

	function So(a) {
		a = a.curve;
		return a === Rg || a === Sg
	}

	function Wo(a, b) {
		if(b || So(a)) b = a.diagram, null === b || b.Sh.contains(a) || null === a.Ko || b.Sh.add(a, a.Ko)
	}
	S.prototype.Tp = function(a) {
		var b = this.layer;
		if(null !== b && b.visible && !b.isTemporary) {
			var c = b.diagram;
			if(null !== c) {
				var d = !1;
				for(c = c.layers; c.next();) {
					var e = c.value;
					if(e.visible)
						if(e === b) {
							d = !0;
							var f = !1;
							e = e.Fa.j;
							for(var g = e.length, h = 0; h < g; h++) {
								var k = e[h];
								k instanceof S && (k === this ? f = !0 : f && pp(this, k, a))
							}
						} else if(d)
						for(f = e.Fa.j, e = f.length, g = 0; g < e; g++) h = f[g], h instanceof S && pp(this, h, a)
				}
			}
		}
	};

	function pp(a, b, c) {
		if(null !== b && null !== b.pa && So(b)) {
			var d = b.routeBounds;
			d.s() && (a.routeBounds.Kc(d) || c.Kc(d)) && (a.usesSamePort(b) || b.$b())
		}
	}
	S.prototype.usesSamePort = function(a) {
		var b = this.pointsCount,
			c = a.pointsCount;
		if(0 < b && 0 < c) {
			var d = this.i(0),
				e = a.i(0);
			if(d.Oa(e)) return !0;
			b = this.i(b - 1);
			a = a.i(c - 1);
			if(b.Oa(a) || d.Oa(a) || b.Oa(e)) return !0
		} else if(this.fromNode === a.fromNode || this.toNode === a.toNode || this.fromNode === a.toNode || this.toNode === a.fromNode) return !0;
		return !1
	};
	S.prototype.isVisible = function() {
		if(!U.prototype.isVisible.call(this)) return !1;
		var a = this.containingGroup,
			b = !0,
			c = this.diagram;
		null !== c && (b = c.isTreePathToChildren);
		c = this.fromNode;
		if(null !== c) {
			if(this.isTreeLink && b && !c.isTreeExpanded) return !1;
			if(c === a) return !0;
			for(var d = c; null !== d;) {
				if(d.labeledLink === this) return !0;
				d = d.containingGroup
			}
			c = c.findVisibleNode();
			if(null === c || c === a) return !1
		}
		c = this.toNode;
		if(null !== c) {
			if(this.isTreeLink && !b && !c.isTreeExpanded) return !1;
			if(c === a) return !0;
			for(b = c; null !== b;) {
				if(b.labeledLink ===
					this) return !0;
				b = b.containingGroup
			}
			b = c.findVisibleNode();
			if(null === b || b === a) return !1
		}
		return !0
	};
	S.prototype.Pb = function(a) {
		U.prototype.Pb.call(this, a);
		null !== this.xf && this.xf.Yl();
		if(null !== this.bd)
			for(var b = this.bd.iterator; b.next();) b.value.Pb(a)
	};

	function To(a) {
		var b = a.Oe;
		if(null !== b) {
			var c = a.ef;
			if(null !== c) {
				for(var d = a.Pe, e = a.ff, f = a = null, g = b.$a.j, h = g.length, k = 0; k < h; k++) {
					var l = g[k];
					if(l.Oe === b && l.Pe === d && l.ef === c && l.ff === e || l.Oe === c && l.Pe === e && l.ef === b && l.ff === d) null === f ? f = l : (null === a && (a = [], a.push(f)), a.push(l))
				}
				if(null !== a) {
					d = xo(b, c, d, e);
					null === d && (d = new qp(b, c), wo(b, d), wo(c, d));
					d.links = a;
					for(b = 0; b < a.length; b++) a[b].xf = d;
					d.Yl()
				}
			}
		}
	}

	function Uo(a) {
		var b = a.xf;
		null !== b && (a.xf = null, a = b.links.indexOf(a), 0 <= a && (Ka(b.links, a), b.Yl()))
	}
	S.prototype.wh = function() {
		return !0
	};
	oa.Object.defineProperties(S.prototype, {
		fromNode: {
			get: function() {
				return this.Oe
			},
			set: function(a) {
				var b = this.Oe;
				if(b !== a) {
					var c = this.fromPort;
					null !== b && (this.ef !== b && Ao(b, this, c), Uo(this), this.B(2));
					this.Oe = a;
					null !== a && this.Pb(a.isVisible());
					this.Hf = null;
					this.Pa();
					var d = this.diagram;
					null !== d && d.partManager.setFromNodeForLink(this, a, b);
					var e = this.fromPort,
						f = this.fromPortChanged;
					if(null !== f) {
						var g = !0;
						null !== d && (g = d.ca, d.ca = !0);
						f(this, c, e);
						null !== d && (d.ca = g)
					}
					null !== a && (this.ef !==
						a && zo(a, this, e), To(this), this.B(1));
					this.g("fromNode", b, a);
					uo(this)
				}
			}
		},
		fromPortId: {
			get: function() {
				return this.Pe
			},
			set: function(a) {
				var b = this.Pe;
				if(b !== a) {
					var c = this.fromPort;
					null !== c && yo(this.fromNode, c);
					Uo(this);
					this.Pe = a;
					var d = this.fromPort;
					null !== d && yo(this.fromNode, d);
					var e = this.diagram;
					if(null !== e) {
						var f = this.data,
							g = e.model;
						null !== f && Ho(g) && g.Av(f, a)
					}
					c !== d && (this.Hf = null, this.Pa(), f = this.fromPortChanged, null !== f && (g = !0, null !== e && (g = e.ca, e.ca = !0), f(this, c, d), null !==
						e && (e.ca = g)));
					To(this);
					this.g("fromPortId", b, a)
				}
			}
		},
		fromPort: {
			get: function() {
				var a = this.Oe;
				return null === a ? null : a.Qs(this.Pe)
			}
		},
		fromPortChanged: {
			get: function() {
				return this.xn
			},
			set: function(a) {
				var b = this.xn;
				b !== a && (this.xn = a, this.g("fromPortChanged", b, a))
			}
		},
		toNode: {
			get: function() {
				return this.ef
			},
			set: function(a) {
				var b = this.ef;
				if(b !== a) {
					var c = this.toPort;
					null !== b && (this.Oe !== b && Ao(b, this, c), Uo(this), this.B(2));
					this.ef =
						a;
					null !== a && this.Pb(a.isVisible());
					this.Hf = null;
					this.Pa();
					var d = this.diagram;
					null !== d && d.partManager.setToNodeForLink(this, a, b);
					var e = this.toPort,
						f = this.toPortChanged;
					if(null !== f) {
						var g = !0;
						null !== d && (g = d.ca, d.ca = !0);
						f(this, c, e);
						null !== d && (d.ca = g)
					}
					null !== a && (this.Oe !== a && zo(a, this, e), To(this), this.B(1));
					this.g("toNode", b, a);
					uo(this)
				}
			}
		},
		toPortId: {
			get: function() {
				return this.ff
			},
			set: function(a) {
				var b = this.ff;
				if(b !== a) {
					var c = this.toPort;
					null !== c && yo(this.toNode, c);
					Uo(this);
					this.ff = a;
					var d = this.toPort;
					null !== d && yo(this.toNode, d);
					var e = this.diagram;
					if(null !== e) {
						var f = this.data,
							g = e.model;
						null !== f && Ho(g) && g.Jv(f, a)
					}
					c !== d && (this.Hf = null, this.Pa(), f = this.toPortChanged, null !== f && (g = !0, null !== e && (g = e.ca, e.ca = !0), f(this, c, d), null !== e && (e.ca = g)));
					To(this);
					this.g("toPortId", b, a)
				}
			}
		},
		toPort: {
			get: function() {
				var a = this.ef;
				return null === a ? null : a.Qs(this.ff)
			}
		},
		toPortChanged: {
			get: function() {
				return this.vp
			},
			set: function(a) {
				var b =
					this.vp;
				b !== a && (this.vp = a, this.g("toPortChanged", b, a))
			}
		},
		fromSpot: {
			get: function() {
				return null !== this.P ? this.P.Ig : Hd
			},
			set: function(a) {
				this.Jc();
				var b = this.P.Ig;
				b.A(a) || (a = a.I(), this.P.Ig = a, this.g("fromSpot", b, a), this.Pa())
			}
		},
		fromEndSegmentLength: {
			get: function() {
				return null !== this.P ? this.P.Gg : NaN
			},
			set: function(a) {
				this.Jc();
				var b = this.P.Gg;
				b !== a && (0 > a && Aa(a, ">= 0", S, "fromEndSegmentLength"), this.P.Gg = a, this.g("fromEndSegmentLength", b, a), this.Pa())
			}
		},
		fromShortLength: {
			get: function() {
				return null !== this.P ? this.P.Hg : NaN
			},
			set: function(a) {
				this.Jc();
				var b = this.P.Hg;
				b !== a && (this.P.Hg = a, this.g("fromShortLength", b, a), this.Pa(), this.$b())
			}
		},
		toSpot: {
			get: function() {
				return null !== this.P ? this.P.gh : Hd
			},
			set: function(a) {
				this.Jc();
				var b = this.P.gh;
				b.A(a) || (a = a.I(), this.P.gh = a, this.g("toSpot", b, a), this.Pa())
			}
		},
		toEndSegmentLength: {
			get: function() {
				return null !== this.P ? this.P.eh :
					NaN
			},
			set: function(a) {
				this.Jc();
				var b = this.P.eh;
				b !== a && (0 > a && Aa(a, ">= 0", S, "toEndSegmentLength"), this.P.eh = a, this.g("toEndSegmentLength", b, a), this.Pa())
			}
		},
		toShortLength: {
			get: function() {
				return null !== this.P ? this.P.fh : NaN
			},
			set: function(a) {
				this.Jc();
				var b = this.P.fh;
				b !== a && (this.P.fh = a, this.g("toShortLength", b, a), this.Pa(), this.$b())
			}
		},
		isLabeledLink: {
			get: function() {
				return null === this.bd ? !1 : 0 < this.bd.count
			}
		},
		labelNodes: {
			get: function() {
				return null === this.bd ? xb : this.bd.iterator
			}
		},
		relinkableFrom: {
			get: function() {
				return 0 !== (this.Sa & 1)
			},
			set: function(a) {
				var b = 0 !== (this.Sa & 1);
				b !== a && (this.Sa ^= 1, this.g("relinkableFrom", b, a), this.Ob())
			}
		},
		relinkableTo: {
			get: function() {
				return 0 !== (this.Sa & 2)
			},
			set: function(a) {
				var b = 0 !== (this.Sa & 2);
				b !== a && (this.Sa ^= 2, this.g("relinkableTo", b, a), this.Ob())
			}
		},
		resegmentable: {
			get: function() {
				return 0 !== (this.Sa &
					4)
			},
			set: function(a) {
				var b = 0 !== (this.Sa & 4);
				b !== a && (this.Sa ^= 4, this.g("resegmentable", b, a), this.Ob())
			}
		},
		isTreeLink: {
			get: function() {
				return 0 !== (this.Sa & 8)
			},
			set: function(a) {
				var b = 0 !== (this.Sa & 8);
				b !== a && (this.Sa ^= 8, this.g("isTreeLink", b, a), null !== this.fromNode && qk(this.fromNode), null !== this.toNode && qk(this.toNode))
			}
		},
		path: {
			get: function() {
				var a = this.Db();
				return a instanceof qg ? a : null
			}
		},
		routeBounds: {
			get: function() {
				this.Pi();
				var a = this.Ko,
					b = Infinity,
					c = Infinity,
					d = this.pointsCount;
				if(0 === d) a.h(NaN, NaN, 0, 0);
				else {
					if(1 === d) d = this.i(0), b = Math.min(d.x, b), c = Math.min(d.y, c), a.h(d.x, d.y, 0, 0);
					else if(2 === d) {
						d = this.i(0);
						var e = this.i(1);
						b = Math.min(d.x, e.x);
						c = Math.min(d.y, e.y);
						a.h(d.x, d.y, 0, 0);
						a.Je(e)
					} else if(this.computeCurve() === Wg && 3 <= d && !this.isOrthogonal)
						if(e = this.i(0), b = e.x, c = e.y, a.h(b, c, 0, 0), 3 === d) {
							d = this.i(1);
							b = Math.min(d.x, b);
							c = Math.min(d.y, c);
							var f = this.i(2);
							b = Math.min(f.x, b);
							c = Math.min(f.y, c);
							H.Nl(e.x, e.y, d.x, d.y, d.x, d.y,
								f.x, f.y, .5, a)
						} else
							for(f = 3; f < d; f += 3) {
								var g = this.i(f - 2);
								f + 3 >= d && (f = d - 1);
								var h = this.i(f - 1),
									k = this.i(f);
								H.Nl(e.x, e.y, g.x, g.y, h.x, h.y, k.x, k.y, .5, a);
								b = Math.min(k.x, b);
								c = Math.min(k.y, c);
								e = k
							} else
								for(e = this.i(0), f = this.i(1), b = Math.min(e.x, f.x), c = Math.min(e.y, f.y), a.h(e.x, e.y, 0, 0), a.Je(f), e = 2; e < d; e++) f = this.i(e), b = Math.min(f.x, b), c = Math.min(f.y, c), a.Je(f);
					this.ru.h(b - a.x, c - a.y)
				}
				return this.Ko
			}
		},
		midPoint: {
			get: function() {
				this.Pi();
				return this.computeMidPoint(new G)
			}
		},
		midAngle: {
			get: function() {
				this.Pi();
				return this.computeMidAngle()
			}
		},
		flattenedLengths: {
			get: function() {
				if(null === this.gr) {
					this.Mc || Vo(this);
					for(var a = this.gr = [], b = this.pointsCount, c = 0; c < b - 1; c++) {
						var d = this.i(c);
						var e = this.i(c + 1);
						H.ba(d.x, e.x) ? (d = e.y - d.y, 0 > d && (d = -d)) : H.ba(d.y, e.y) ? (d = e.x - d.x, 0 > d && (d = -d)) : d = Math.sqrt(d.Be(e));
						a.push(d)
					}
				}
				return this.gr
			}
		},
		flattenedTotalLength: {
			get: function() {
				var a = this.Wt;
				if(isNaN(a)) {
					for(var b = this.flattenedLengths,
							c = b.length, d = a = 0; d < c; d++) a += b[d];
					this.Wt = a
				}
				return a
			}
		},
		points: {
			get: function() {
				return this.Bb
			},
			set: function(a) {
				var b = this.Bb;
				if(b !== a) {
					var c = null;
					if(Array.isArray(a)) {
						var d = 0 === a.length % 2;
						if(d)
							for(var e = 0; e < a.length; e++)
								if("number" !== typeof a[e] || isNaN(a[e])) {
									d = !1;
									break
								}
						if(d)
							for(c = new E, d = 0; d < a.length / 2; d++) e = (new G(a[2 * d], a[2 * d + 1])).freeze(), c.add(e);
						else {
							d = !0;
							for(e = 0; e < a.length; e++) {
								var f = a[e];
								if(!Ea(f) || "number" !== typeof f.x || isNaN(f.x) || "number" !== typeof f.y || isNaN(f.y)) {
									d = !1;
									break
								}
							}
							if(d)
								for(c = new E, d = 0; d < a.length; d++) e = a[d], c.add((new G(e.x, e.y)).freeze())
						}
					} else if(a instanceof E)
						for(c = a.copy(), a = c.iterator; a.next();) a.value.freeze();
					else A("Link.points value is not an instance of List or Array: " + a);
					c.freeze();
					this.Bb = c;
					this.$b();
					this.o();
					Vo(this);
					a = this.diagram;
					null !== a && (a.Yj || a.undoManager.isUndoingRedoing || a.bt.add(this), a.animationManager.ab && (this.pl = c));
					this.g("points", b, c)
				}
			}
		},
		pointsCount: {
			get: function() {
				return this.Bb.count
			}
		},
		Mc: {
			get: function() {
				return 0 !== (this.Sa & 16)
			},
			set: function(a) {
				0 !== (this.Sa & 16) !== a && (this.Sa ^= 16)
			}
		},
		suspendsRouting: {
			get: function() {
				return 0 !== (this.Sa & 32)
			},
			set: function(a) {
				0 !== (this.Sa & 32) !== a && (this.Sa ^= 32)
			}
		},
		Fu: {
			get: function() {
				return 0 !== (this.Sa & 64)
			},
			set: function(a) {
				0 !== (this.Sa & 64) !== a && (this.Sa ^= 64)
			}
		},
		defaultFromPoint: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K = a.copy()
			}
		},
		defaultToPoint: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da = a.copy()
			}
		},
		isOrthogonal: {
			get: function() {
				return 2 === (this.yj.value & 2)
			}
		},
		isAvoiding: {
			get: function() {
				return 4 === (this.yj.value & 4)
			}
		},
		geometry: {
			get: function() {
				this.ur && (this.Pi(), this.pa = this.makeGeometry(), this.ur = !1);
				return this.pa
			}
		},
		firstPickIndex: {
			get: function() {
				return 2 >= this.pointsCount ?
					0 : this.isOrthogonal || !Xo(this.computeSpot(!0)) ? 1 : 0
			}
		},
		lastPickIndex: {
			get: function() {
				var a = this.pointsCount;
				return 0 === a ? 0 : 2 >= a ? a - 1 : this.isOrthogonal || !Xo(this.computeSpot(!1)) ? a - 2 : a - 1
			}
		},
		adjusting: {
			get: function() {
				return this.Em
			},
			set: function(a) {
				var b = this.Em;
				b !== a && (this.Em = a, this.g("adjusting", b, a))
			}
		},
		corner: {
			get: function() {
				return this.Ym
			},
			set: function(a) {
				var b = this.Ym;
				b !== a && (this.Ym = a, this.$b(), this.g("corner",
					b, a))
			}
		},
		curve: {
			get: function() {
				return this.an
			},
			set: function(a) {
				var b = this.an;
				b !== a && (this.an = a, this.Pa(), this.$b(), Wo(this, b === Sg || b === Rg || a === Sg || a === Rg), this.g("curve", b, a))
			}
		},
		curviness: {
			get: function() {
				return this.bn
			},
			set: function(a) {
				var b = this.bn;
				b !== a && (this.bn = a, this.Pa(), this.$b(), this.g("curviness", b, a))
			}
		},
		routing: {
			get: function() {
				return this.yj
			},
			set: function(a) {
				var b = this.yj;
				b !== a && (this.yj = a, this.Hf = null,
					this.Pa(), Wo(this, 2 === (b.value & 2) || 2 === (a.value & 2)), this.g("routing", b, a))
			}
		},
		smoothness: {
			get: function() {
				return this.jp
			},
			set: function(a) {
				var b = this.jp;
				b !== a && (this.jp = a, this.$b(), this.g("smoothness", b, a))
			}
		},
		key: {
			get: function() {
				var a = this.diagram;
				if(null !== a && Ho(a.model)) return a.model.xc(this.data)
			}
		}
	});
	S.prototype.invalidateOtherJumpOvers = S.prototype.Tp;
	S.prototype.findClosestSegment = S.prototype.Dy;
	S.prototype.updateRoute = S.prototype.Pi;
	S.prototype.invalidateRoute = S.prototype.Pa;
	S.prototype.rollbackRoute = S.prototype.Ix;
	S.prototype.commitRoute = S.prototype.jf;
	S.prototype.startRoute = S.prototype.yh;
	S.prototype.clearPoints = S.prototype.Mj;
	S.prototype.removePoint = S.prototype.rv;
	S.prototype.addPointAt = S.prototype.hf;
	S.prototype.addPoint = S.prototype.xe;
	S.prototype.insertPointAt = S.prototype.m;
	S.prototype.insertPoint = S.prototype.hz;
	S.prototype.setPointAt = S.prototype.M;
	S.prototype.setPoint = S.prototype.md;
	S.prototype.getPoint = S.prototype.i;
	S.prototype.getOtherPort = S.prototype.Yy;
	S.prototype.getOtherNode = S.prototype.Us;
	var Mo = new D(S, "Normal", 1),
		rp = new D(S, "Orthogonal", 2),
		sp = new D(S, "AvoidsNodes", 6),
		bp = new D(S, "AvoidsNodesStraight", 7),
		Tg = new D(S, "None", 0),
		Wg = new D(S, "Bezier", 9),
		Sg = new D(S, "JumpGap", 10),
		Rg = new D(S, "JumpOver", 11),
		No = new D(S, "End", 17),
		Oo = new D(S, "Scale", 18),
		Po = new D(S, "Stretch", 19),
		rn = new D(S, "OrientAlong", 21),
		Bm = new D(S, "OrientPlus90", 22),
		Dm = new D(S, "OrientMinus90", 23),
		Qo = new D(S, "OrientOpposite", 24),
		Ro = new D(S, "OrientUpright", 25),
		Cm = new D(S, "OrientPlus90Upright", 26),
		Em = new D(S, "OrientMinus90Upright",
			27),
		Fm = new D(S, "OrientUpright45", 28);
	S.className = "Link";
	S.Normal = Mo;
	S.Orthogonal = rp;
	S.AvoidsNodes = sp;
	S.AvoidsNodesStraight = bp;
	S.None = Tg;
	S.Bezier = Wg;
	S.JumpGap = Sg;
	S.JumpOver = Rg;
	S.End = No;
	S.Scale = Oo;
	S.Stretch = Po;
	S.OrientAlong = rn;
	S.OrientPlus90 = Bm;
	S.OrientMinus90 = Dm;
	S.OrientOpposite = Qo;
	S.OrientUpright = Ro;
	S.OrientPlus90Upright = Cm;
	S.OrientMinus90Upright = Em;
	S.OrientUpright45 = Fm;

	function qp(a, b) {
		rb(this);
		this.ie = this.tr = !1;
		this.et = a;
		this.Ex = null;
		this.fv = b;
		this.Fx = null;
		this.links = []
	}
	qp.prototype.Yl = function() {
		if(!this.tr) {
			var a = this.links;
			0 < a.length && (a = a[0].diagram, null !== a && (a.xw.add(this), this.ie = a.undoManager.isUndoingRedoing))
		}
		this.tr = !0
	};
	qp.prototype.Vv = function() {
		if(this.tr) {
			this.tr = !1;
			var a = this.links;
			if(0 < a.length) {
				var b = a[0],
					c = b.diagram;
				c = null === c || c.Yj && !this.ie;
				this.ie = !1;
				b.arrangeBundledLinks(a, c);
				1 === a.length && (b.xf = null, a.length = 0)
			}
			0 === a.length && (a = this.et, null !== this && null !== a.Me && a.Me.remove(this), a = this.fv, null !== this && null !== a.Me && a.Me.remove(this))
		}
	};
	qp.className = "LinkBundle";

	function Zj() {
		rb(this);
		this.Mx = this.group = null;
		this.Ys = !0;
		this.abort = !1;
		this.Md = this.Ld = 1;
		this.co = this.bo = -1;
		this.oc = this.nc = 8;
		this.Fb = [
			[]
		];
		this.Fj = this.Ej = 0;
		this.Kz = !1;
		this.Ez = 22;
		this.pz = 111
	}
	Zj.prototype.initialize = function(a) {
		if(!(0 >= a.width || 0 >= a.height)) {
			var b = a.y,
				c = a.x + a.width,
				d = a.y + a.height;
			this.Ld = Math.floor((a.x - this.nc) / this.nc) * this.nc;
			this.Md = Math.floor((b - this.oc) / this.oc) * this.oc;
			this.bo = Math.ceil((c + 2 * this.nc) / this.nc) * this.nc;
			this.co = Math.ceil((d + 2 * this.oc) / this.oc) * this.oc;
			a = 1 + (Math.ceil((this.bo - this.Ld) / this.nc) | 0);
			b = 1 + (Math.ceil((this.co - this.Md) / this.oc) | 0);
			if(null === this.Fb || this.Ej < a - 1 || this.Fj < b - 1) {
				c = [];
				for(d = 0; d <= a; d++) c[d] = [];
				this.Fb = c;
				this.Ej = a - 1;
				this.Fj = b - 1
			}
			a =
				tp;
			if(null !== this.Fb)
				for(b = 0; b <= this.Ej; b++)
					for(c = 0; c <= this.Fj; c++) this.Fb[b][c] = a
		}
	};

	function cp(a, b, c) {
		return a.Ld <= b && b <= a.bo && a.Md <= c && c <= a.co
	}

	function ep(a, b, c) {
		if(!cp(a, b, c)) return tp;
		b -= a.Ld;
		b /= a.nc;
		c -= a.Md;
		c /= a.oc;
		return a.Fb[b | 0][c | 0]
	}

	function jk(a, b, c) {
		cp(a, b, c) && (b -= a.Ld, b /= a.nc, c -= a.Md, c /= a.oc, a.Fb[b | 0][c | 0] = gp)
	}

	function ik(a) {
		if(null !== a.Fb)
			for(var b = 0; b <= a.Ej; b++)
				for(var c = 0; c <= a.Fj; c++) a.Fb[b][c] >= ip && (a.Fb[b][c] = tp)
	}
	Zj.prototype.Zj = function(a, b, c, d) {
		if(a > this.bo || a + c < this.Ld || b > this.co || b + d < this.Md) return !0;
		a = (a - this.Ld) / this.nc | 0;
		b = (b - this.Md) / this.oc | 0;
		c = Math.max(0, c) / this.nc + 1 | 0;
		var e = Math.max(0, d) / this.oc + 1 | 0;
		0 > a && (c += a, a = 0);
		0 > b && (e += b, b = 0);
		if(0 > c || 0 > e) return !0;
		d = Math.min(a + c - 1, this.Ej) | 0;
		for(c = Math.min(b + e - 1, this.Fj) | 0; a <= d; a++)
			for(e = b; e <= c; e++)
				if(this.Fb[a][e] === gp) return !1;
		return !0
	};

	function up(a, b, c, d, e, f, g, h, k) {
		if(!(b < f || b > g || c < h || c > k)) {
			var l = b | 0;
			var m = c | 0;
			var n = a.Fb[l][m];
			if(n >= ip && n < fp)
				for(e ? m += d : l += d, n += 1; f <= l && l <= g && h <= m && m <= k && !(n >= a.Fb[l][m]);) a.Fb[l][m] = n, n += 1, e ? m += d : l += d;
			l = e ? m : l;
			if(e)
				if(0 < d)
					for(c += d; c < l; c += d) up(a, b, c, 1, !e, f, g, h, k), up(a, b, c, -1, !e, f, g, h, k);
				else
					for(c += d; c > l; c += d) up(a, b, c, 1, !e, f, g, h, k), up(a, b, c, -1, !e, f, g, h, k);
			else if(0 < d)
				for(b += d; b < l; b += d) up(a, b, c, 1, !e, f, g, h, k), up(a, b, c, -1, !e, f, g, h, k);
			else
				for(b += d; b > l; b += d) up(a, b, c, 1, !e, f, g, h, k), up(a, b, c, -1, !e, f, g, h,
					k)
		}
	}

	function vp(a, b, c, d, e, f, g, h, k) {
		b |= 0;
		c |= 0;
		var l = gp,
			m = ip;
		for(a.Fb[b][c] = m; l === gp && b > f && b < g && c > h && c < k;) m += 1, a.Fb[b][c] = m, e ? c += d : b += d, l = a.Fb[b][c]
	}

	function wp(a, b, c, d, e, f, g, h, k) {
		b |= 0;
		c |= 0;
		var l = gp,
			m = fp;
		for(a.Fb[b][c] = m; l === gp && b > f && b < g && c > h && c < k;) a.Fb[b][c] = m, e ? c += d : b += d, l = a.Fb[b][c]
	}

	function dp(a, b, c, d, e, f) {
		if(null !== a.Fb) {
			a.abort = !1;
			var g = b.x,
				h = b.y;
			if(cp(a, g, h) && (g -= a.Ld, g /= a.nc, h -= a.Md, h /= a.oc, b = d.x, d = d.y, cp(a, b, d)))
				if(b -= a.Ld, b /= a.nc, d -= a.Md, d /= a.oc, 1 >= Math.abs(g - b) && 1 >= Math.abs(h - d)) a.abort = !0;
				else {
					var k = f.x,
						l = f.y,
						m = f.x + f.width,
						n = f.y + f.height;
					k -= a.Ld;
					k /= a.nc;
					l -= a.Md;
					l /= a.oc;
					m -= a.Ld;
					m /= a.nc;
					n -= a.Md;
					n /= a.oc;
					f = Math.max(0, Math.min(a.Ej, k | 0));
					m = Math.min(a.Ej, Math.max(0, m | 0));
					l = Math.max(0, Math.min(a.Fj, l | 0));
					n = Math.min(a.Fj, Math.max(0, n | 0));
					g |= 0;
					h |= 0;
					b |= 0;
					d |= 0;
					k = 0 === c || 90 === c ?
						1 : -1;
					c = 90 === c || 270 === c;
					a.Fb[g][h] === gp ? (vp(a, g, h, k, c, f, m, l, n), vp(a, g, h, 1, !c, f, m, l, n), vp(a, g, h, -1, !c, f, m, l, n)) : vp(a, g, h, k, c, g, h, g, h);
					a.Fb[b][d] === gp ? (wp(a, b, d, 0 === e || 90 === e ? 1 : -1, 90 === e || 270 === e, f, m, l, n), wp(a, b, d, 1, !(90 === e || 270 === e), f, m, l, n), wp(a, b, d, -1, !(90 === e || 270 === e), f, m, l, n)) : wp(a, b, d, k, c, b, d, b, d);
					a.abort || (up(a, g, h, 1, !1, f, m, l, n), up(a, g, h, -1, !1, f, m, l, n), up(a, g, h, 1, !0, f, m, l, n), up(a, g, h, -1, !0, f, m, l, n))
				}
		}
	}
	oa.Object.defineProperties(Zj.prototype, {
		bounds: {
			get: function() {
				return new M(this.Ld, this.Md, this.bo - this.Ld, this.co - this.Md)
			}
		},
		Pl: {
			get: function() {
				return this.nc
			},
			set: function(a) {
				0 < a && a !== this.nc && (this.nc = a, this.initialize(this.bounds))
			}
		},
		Ol: {
			get: function() {
				return this.oc
			},
			set: function(a) {
				0 < a && a !== this.oc && (this.oc = a, this.initialize(this.bounds))
			}
		}
	});
	var gp = 0,
		ip = 1,
		fp = 999999,
		tp = fp + 1;
	Zj.className = "PositionArray";

	function $o() {
		rb(this);
		this.port = this.node = null;
		this.Xd = [];
		this.Xp = !1
	}
	$o.prototype.toString = function() {
		for(var a = this.Xd, b = this.node.toString() + " " + a.length.toString() + ":", c = 0; c < a.length; c++) {
			var d = a[c];
			null !== d && (b += "\n  " + d.toString())
		}
		return b
	};

	function xp(a, b, c, d) {
		b = b.offsetY;
		switch(b) {
			case 8:
				return 90;
			case 2:
				return 180;
			case 1:
				return 270;
			case 4:
				return 0
		}
		switch(b) {
			case 9:
				return 180 < c ? 270 : 90;
			case 6:
				return 90 < c && 270 >= c ? 180 : 0
		}
		a = 180 * Math.atan2(a.height, a.width) / Math.PI;
		switch(b) {
			case 3:
				return c > a && c <= 180 + a ? 180 : 270;
			case 5:
				return c > 180 - a && c <= 360 - a ? 270 : 0;
			case 12:
				return c > a && c <= 180 + a ? 90 : 0;
			case 10:
				return c > 180 - a && c <= 360 - a ? 180 : 90;
			case 7:
				return 90 < c && c <= 180 + a ? 180 : c > 180 + a && c <= 360 - a ? 270 : 0;
			case 13:
				return 180 < c && c <= 360 - a ? 270 : c > a && 180 >= c ? 90 : 0;
			case 14:
				return c >
					a && c <= 180 - a ? 90 : c > 180 - a && 270 >= c ? 180 : 0;
			case 11:
				return c > 180 - a && c <= 180 + a ? 180 : c > 180 + a ? 270 : 90
		}
		d && 15 !== b && (c -= 15, 0 > c && (c += 360));
		return c > a && c < 180 - a ? 90 : c >= 180 - a && c <= 180 + a ? 180 : c > 180 + a && c < 360 - a ? 270 : 0
	}
	$o.prototype.Yl = function() {
		this.Xd.length = 0
	};

	function ap(a, b) {
		var c = a.Xd;
		if(0 === c.length) {
			a: if(!a.Xp) {
				c = a.Xp;
				a.Xp = !0;
				var d = null,
					e = a.node;
				e = e instanceof V ? e : null;
				if(null === e || e.isSubGraphExpanded) var f = a.node.Lu(a.port.portId);
				else {
					if(!e.actualBounds.s()) {
						a.Xp = c;
						break a
					}
					d = e;
					f = d.Ku()
				}
				var g = a.Xd.length = 0,
					h = a.port.ka(ed, G.alloc()),
					k = a.port.ka(od, G.alloc());
				e = M.allocAt(h.x, h.y, 0, 0);
				e.Je(k);
				G.free(h);
				G.free(k);
				h = G.allocAt(e.x + e.width / 2, e.y + e.height / 2);
				k = a.port.Di();
				for(f = f.iterator; f.next();) {
					var l = f.value;
					if(l.isVisible() && l.fromPort !== l.toPort) {
						var m =
							l.fromPort === a.port || null !== l.fromNode && l.fromNode.Ee(d),
							n = l.computeSpot(m, a.port);
						if(n.qf() && (m = m ? l.toPort : l.fromPort, null !== m)) {
							var p = m.part;
							if(null !== p) {
								var q = p.findVisibleNode();
								null !== q && q !== p && (p = q, m = p.port);
								m = l.computeOtherPoint(p, m);
								p = h.Na(m);
								p -= k;
								0 > p && (p += 360);
								n = xp(e, n, p, l.isOrthogonal);
								0 === n ? (n = 4, 180 < p && (p -= 360)) : n = 90 === n ? 8 : 180 === n ? 2 : 1;
								q = a.Xd[g];
								void 0 === q ? (q = new yp(l, p, n), a.Xd[g] = q) : (q.link = l, q.angle = p, q.Ac = n);
								q.jv.set(m);
								g++
							}
						}
					}
				}
				G.free(h);
				a.Xd.sort($o.prototype.l);
				k = a.Xd.length;
				d = -1;
				for(g =
					h = 0; g < k; g++) f = a.Xd[g], void 0 !== f && (f.Ac !== d && (d = f.Ac, h = 0), f.Qp = h, h++);
				d = -1;
				h = 0;
				for(g = k - 1; 0 <= g; g--) k = a.Xd[g], void 0 !== k && (k.Ac !== d && (d = k.Ac, h = k.Qp + 1), k.Rl = h);
				g = a.Xd;
				n = a.port;
				d = a.node.portSpreading;
				h = G.alloc();
				k = G.alloc();
				f = G.alloc();
				l = G.alloc();
				n.ka(ed, h);
				n.ka(gd, k);
				n.ka(od, f);
				n.ka(kd, l);
				q = p = m = n = 0;
				if(d === Jo)
					for(var r = 0; r < g.length; r++) {
						var u = g[r];
						if(null !== u) {
							var v = u.link.computeThickness();
							switch(u.Ac) {
								case 8:
									p += v;
									break;
								case 2:
									q += v;
									break;
								case 1:
									n += v;
									break;
								default:
								case 4:
									m += v
							}
						}
					}
				var x = r = 0,
					y = 1,
					z = u = 0;
				for(v = 0; v < g.length; v++) {
					var B = g[v];
					if(null !== B) {
						if(r !== B.Ac) {
							r = B.Ac;
							switch(r) {
								case 8:
									var C = f;
									x = l;
									break;
								case 2:
									C = l;
									x = h;
									break;
								case 1:
									C = h;
									x = k;
									break;
								default:
								case 4:
									C = k, x = f
							}
							u = x.x - C.x;
							z = x.y - C.y;
							switch(r) {
								case 8:
									p > Math.abs(u) ? (y = Math.abs(u) / p, p = Math.abs(u)) : y = 1;
									break;
								case 2:
									q > Math.abs(z) ? (y = Math.abs(z) / q, q = Math.abs(z)) : y = 1;
									break;
								case 1:
									n > Math.abs(u) ? (y = Math.abs(u) / n, n = Math.abs(u)) : y = 1;
									break;
								default:
								case 4:
									m > Math.abs(z) ? (y = Math.abs(z) / m, m = Math.abs(z)) : y = 1
							}
							x = 0
						}
						var I = B.Wp;
						if(d === Jo) {
							B = B.link.computeThickness();
							B *= y;
							I.set(C);
							switch(r) {
								case 8:
									I.x = C.x + u / 2 + p / 2 - x - B / 2;
									break;
								case 2:
									I.y = C.y + z / 2 + q / 2 - x - B / 2;
									break;
								case 1:
									I.x = C.x + u / 2 - n / 2 + x + B / 2;
									break;
								default:
								case 4:
									I.y = C.y + z / 2 - m / 2 + x + B / 2
							}
							x += B
						} else {
							var J = .5;
							d === vo && (J = (B.Qp + 1) / (B.Rl + 1));
							I.x = C.x + u * J;
							I.y = C.y + z * J
						}
					}
				}
				G.free(h);
				G.free(k);
				G.free(f);
				G.free(l);
				C = a.Xd;
				for(g = 0; g < C.length; g++) d = C[g], null !== d && (d.Ju = a.computeEndSegmentLength(d));
				a.Xp = c;
				M.free(e)
			}c = a.Xd
		}
		for(a = 0; a < c.length; a++)
			if(e = c[a], null !== e && e.link === b) return e;
		return null
	}
	$o.prototype.l = function(a, b) {
		return a === b ? 0 : null === a ? -1 : null === b ? 1 : a.Ac < b.Ac ? -1 : a.Ac > b.Ac ? 1 : a.angle < b.angle ? -1 : a.angle > b.angle ? 1 : 0
	};
	$o.prototype.computeEndSegmentLength = function(a) {
		var b = a.link,
			c = b.computeEndSegmentLength(this.node, this.port, dd, b.fromPort === this.port),
			d = a.Qp;
		if(0 > d) return c;
		var e = a.Rl;
		if(1 >= e || !b.isOrthogonal) return c;
		b = a.jv;
		var f = a.Wp;
		if(2 === a.Ac || 8 === a.Ac) d = e - 1 - d;
		return((a = 2 === a.Ac || 4 === a.Ac) ? b.y < f.y : b.x < f.x) ? c + 8 * d : (a ? b.y === f.y : b.x === f.x) ? c : c + 8 * (e - 1 - d)
	};
	$o.className = "Knot";

	function yp(a, b, c) {
		this.link = a;
		this.angle = b;
		this.Ac = c;
		this.jv = new G;
		this.Rl = this.Qp = 0;
		this.Wp = new G;
		this.Ju = 0
	}
	yp.prototype.toString = function() {
		return this.link.toString() + " " + this.angle.toString() + " " + this.Ac.toString() + ":" + this.Qp.toString() + "/" + this.Rl.toString() + " " + this.Wp.toString() + " " + this.Ju.toString() + " " + this.jv.toString()
	};
	yp.className = "LinkInfo";

	function Uk() {
		this.gh = this.Ig = Hd;
		this.fh = this.Hg = this.eh = this.Gg = NaN;
		this.sp = this.vn = null;
		this.tp = this.wn = Infinity
	}
	Uk.prototype.copy = function() {
		var a = new Uk;
		a.Ig = this.Ig.I();
		a.gh = this.gh.I();
		a.Gg = this.Gg;
		a.eh = this.eh;
		a.Hg = this.Hg;
		a.fh = this.fh;
		a.vn = this.vn;
		a.sp = this.sp;
		a.wn = this.wn;
		a.tp = this.tp;
		return a
	};
	Uk.className = "LinkSettings";

	function vi() {
		rb(this);
		this.K = this.F = null;
		this.$h = this.Kn = !0;
		this.Qn = !1;
		this.Im = (new G(0, 0)).freeze();
		this.Nn = !0;
		this.Mn = null;
		this.rw = "";
		this.u = null;
		this.Pn = !1;
		this.l = null
	}
	vi.prototype.cloneProtected = function(a) {
		a.Kn = this.Kn;
		a.$h = this.$h;
		a.Qn = this.Qn;
		a.Im.assign(this.Im);
		a.Nn = this.Nn;
		a.Mn = this.Mn;
		a.rw = this.rw;
		a.Pn = !0
	};
	vi.prototype.copy = function() {
		var a = new this.constructor;
		this.cloneProtected(a);
		return a
	};
	vi.prototype.ib = function() {};
	vi.prototype.toString = function() {
		var a = Oa(this.constructor);
		a += "(";
		null !== this.group && (a += " in " + this.group);
		null !== this.diagram && (a += " for " + this.diagram);
		return a + ")"
	};
	vi.prototype.B = function() {
		if(this.isValidLayout) {
			var a = this.diagram;
			if(null !== a && !a.undoManager.isUndoingRedoing) {
				var b = a.animationManager;
				!b.isTicking && (b.isAnimating && b.Yd(), this.isOngoing && a.Yj || this.isInitial && !a.Yj) && (this.isValidLayout = !1, a.cc())
			}
		}
	};
	vi.prototype.createNetwork = function() {
		return new zp(this)
	};
	vi.prototype.makeNetwork = function(a) {
		var b = this.createNetwork();
		a instanceof Q ? (b.kg(a.nodes, !0), b.kg(a.links, !0)) : a instanceof V ? b.kg(a.memberParts) : b.kg(a.iterator);
		return b
	};
	vi.prototype.updateParts = function() {
		var a = this.diagram;
		if(null === a && null !== this.network)
			for(var b = this.network.vertexes.iterator; b.next();) {
				var c = b.value.node;
				if(null !== c && (a = c.diagram, null !== a)) break
			}
		this.isValidLayout = !0;
		try {
			null !== a && a.Aa("Layout"), this.commitLayout()
		} finally {
			null !== a && a.bb("Layout")
		}
	};
	vi.prototype.commitLayout = function() {
		if(null !== this.network) {
			for(var a = this.network.vertexes.iterator; a.next();) a.value.commit();
			if(this.isRouting)
				for(a = this.network.edges.iterator; a.next();) a.value.commit()
		}
	};
	vi.prototype.doLayout = function(a) {
		var b = new F;
		a instanceof Q ? (Ap(this, b, a.nodes, !0, this.gk, !0, !1, !0), Ap(this, b, a.parts, !0, this.gk, !0, !1, !0)) : a instanceof V ? Ap(this, b, a.memberParts, !1, this.gk, !0, !1, !0) : b.addAll(a.iterator);
		var c = b.count;
		if(0 < c) {
			a = this.diagram;
			null !== a && a.Aa("Layout");
			c = Math.ceil(Math.sqrt(c));
			this.arrangementOrigin = this.initialOrigin(this.arrangementOrigin);
			var d = this.arrangementOrigin.x,
				e = d,
				f = this.arrangementOrigin.y,
				g = 0,
				h = 0;
			for(b = b.iterator; b.next();) {
				var k = b.value;
				Bp(k);
				var l = k.measuredBounds,
					m = l.width;
				l = l.height;
				k.moveTo(e, f);
				k instanceof V && (k.gk = !1);
				e += Math.max(m, 50) + 20;
				h = Math.max(h, Math.max(l, 50));
				g >= c - 1 ? (g = 0, e = d, f += h + 20, h = 0) : g++
			}
			null !== a && a.bb("Layout")
		}
		this.isValidLayout = !0
	};
	vi.prototype.gk = function(a) {
		return !a.location.s() || a instanceof V && a.gk ? !0 : !1
	};

	function Ap(a, b, c, d, e, f, g, h) {
		for(c = c.iterator; c.next();) {
			var k = c.value;
			d && !k.isTopLevel || null !== e && !e(k) || !k.canLayout() || (f && k instanceof W ? k.isLinkLabel || (k instanceof V ? null === k.layout ? Ap(a, b, k.memberParts, !1, e, f, g, h) : (Bp(k), b.add(k)) : (Bp(k), b.add(k))) : g && k instanceof S ? b.add(k) : !h || !k.ac() || k instanceof W || (Bp(k), b.add(k)))
		}
	}

	function Bp(a) {
		var b = a.actualBounds;
		(0 === b.width || 0 === b.height || isNaN(b.width) || isNaN(b.height)) && a.kc()
	}
	vi.prototype.Ei = function(a, b) {
		var c = this.boundsComputation;
		if(null !== c) return b || (b = new M), c(a, this, b);
		if(!b) return a.actualBounds;
		b.set(a.actualBounds);
		return b
	};
	vi.prototype.Vw = function(a) {
		var b = new F;
		a instanceof Q ? (Ap(this, b, a.nodes, !0, null, !0, !0, !0), Ap(this, b, a.links, !0, null, !0, !0, !0), Ap(this, b, a.parts, !0, null, !0, !0, !0)) : a instanceof V ? Ap(this, b, a.memberParts, !1, null, !0, !0, !0) : Ap(this, b, a.iterator, !1, null, !0, !0, !0);
		return b
	};
	vi.prototype.initialOrigin = function(a) {
		var b = this.group;
		if(null !== b) {
			var c = b.position.copy();
			(isNaN(c.x) || isNaN(c.y)) && c.set(a);
			b = b.placeholder;
			null !== b && (c = b.ka(ed), (isNaN(c.x) || isNaN(c.y)) && c.set(a), a = b.padding, c.x += a.left, c.y += a.top);
			return c
		}
		return a
	};
	oa.Object.defineProperties(vi.prototype, {
		diagram: {
			get: function() {
				return this.F
			},
			set: function(a) {
				this.F = a
			}
		},
		group: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K !== a && (this.K = a, null !== a && (this.F = a.diagram))
			}
		},
		isOngoing: {
			get: function() {
				return this.Kn
			},
			set: function(a) {
				this.Kn !== a && (this.Kn = a)
			}
		},
		isInitial: {
			get: function() {
				return this.$h
			},
			set: function(a) {
				this.$h = a;
				a || (this.Pn = !0)
			}
		},
		isViewportSized: {
			get: function() {
				return this.Qn
			},
			set: function(a) {
				this.Qn !== a && (this.Qn = a) && this.B()
			}
		},
		isRouting: {
			get: function() {
				return this.Nn
			},
			set: function(a) {
				this.Nn !== a && (this.Nn = a)
			}
		},
		isRealtime: {
			get: function() {
				return this.Mn
			},
			set: function(a) {
				this.Mn !== a && (this.Mn = a)
			}
		},
		isValidLayout: {
			get: function() {
				return this.Pn
			},
			set: function(a) {
				this.Pn !== a && (this.Pn = a, a || (a = this.diagram, null !==
					a && (a.wg = !0)))
			}
		},
		network: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l !== a && (this.l = a, null !== a && (a.layout = this))
			}
		},
		boundsComputation: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u !== a && (this.u = a, this.B())
			}
		},
		arrangementOrigin: {
			get: function() {
				return this.Im
			},
			set: function(a) {
				this.Im.A(a) || (this.Im.assign(a), this.B())
			}
		}
	});
	vi.prototype.collectParts = vi.prototype.Vw;
	vi.prototype.getLayoutBounds = vi.prototype.Ei;
	vi.prototype.invalidateLayout = vi.prototype.B;
	vi.className = "Layout";

	function zp(a) {
		rb(this);
		this.gc = a;
		this.gf = new F;
		this.de = new F;
		this.ft = new Nb;
		this.at = new Nb
	}
	zp.prototype.clear = function() {
		if(this.gf)
			for(var a = this.gf.iterator; a.next();) a.value.clear();
		if(this.de)
			for(a = this.de.iterator; a.next();) a.value.clear();
		this.gf = new F;
		this.de = new F;
		this.ft = new Nb;
		this.at = new Nb
	};
	zp.prototype.toString = function(a) {
		void 0 === a && (a = 0);
		var b = "LayoutNetwork" + (null !== this.layout ? "(" + this.layout.toString() + ")" : "");
		if(0 >= a) return b;
		b += " vertexes: " + this.gf.count + " edges: " + this.de.count;
		if(1 < a) {
			for(var c = this.gf.iterator; c.next();) b += "\n    " + c.value.toString(a - 1);
			for(c = this.de.iterator; c.next();) b += "\n    " + c.value.toString(a - 1)
		}
		return b
	};
	zp.prototype.createVertex = function() {
		return new Cp(this)
	};
	zp.prototype.createEdge = function() {
		return new Dp(this)
	};
	zp.prototype.kg = function(a, b, c) {
		if(null !== a) {
			void 0 === b && (b = !1);
			void 0 === c && (c = null);
			null === c && (c = function(a) {
				if(a instanceof W) return !a.isLinkLabel;
				if(a instanceof S) {
					var b = a.fromNode;
					if(null === b || b.isLinkLabel) return !1;
					a = a.toNode;
					return null === a || a.isLinkLabel ? !1 : !0
				}
				return !1
			});
			for(a = a.iterator; a.next();) {
				var d = a.value;
				if(d instanceof W && (!b || d.isTopLevel) && d.canLayout() && c(d))
					if(d instanceof V && null === d.layout) this.kg(d.memberParts, !1);
					else if(null === this.Ci(d)) {
					var e = this.createVertex();
					e.node =
						d;
					this.mh(e)
				}
			}
			for(a.reset(); a.next();)
				if(d = a.value, d instanceof S && (!b || d.isTopLevel) && d.canLayout() && c(d) && null === this.Lp(d)) {
					var f = d.fromNode;
					e = d.toNode;
					null !== f && null !== e && f !== e && (f = this.findGroupVertex(f), e = this.findGroupVertex(e), null !== f && null !== e && this.$j(f, e, d))
				}
		}
	};
	zp.prototype.findGroupVertex = function(a) {
		if(null === a) return null;
		var b = a.findVisibleNode();
		if(null === b) return null;
		a = this.Ci(b);
		if(null !== a) return a;
		for(b = b.containingGroup; null !== b;) {
			a = this.Ci(b);
			if(null !== a) return a;
			b = b.containingGroup
		}
		return null
	};
	t = zp.prototype;
	t.mh = function(a) {
		if(null !== a) {
			this.gf.add(a);
			var b = a.node;
			null !== b && this.ft.add(b, a);
			a.network = this
		}
	};
	t.Ll = function(a) {
		if(null === a) return null;
		var b = this.Ci(a);
		null === b && (b = this.createVertex(), b.node = a, this.mh(b));
		return b
	};
	t.Iu = function(a) {
		if(null !== a && Ep(this, a)) {
			for(var b = a.sg, c = b.count - 1; 0 <= c; c--) {
				var d = b.N(c);
				this.Sj(d)
			}
			b = a.lg;
			for(a = b.count - 1; 0 <= a; a--) c = b.N(a), this.Sj(c)
		}
	};

	function Ep(a, b) {
		if(null === b) return !1;
		var c = a.gf.remove(b);
		c && a.ft.remove(b.node);
		return c
	}
	t.xy = function(a) {
		null !== a && (a = this.Ci(a), null !== a && this.Iu(a))
	};
	t.Ci = function(a) {
		return null === a ? null : this.ft.J(a)
	};
	t.Hj = function(a) {
		if(null !== a) {
			this.de.add(a);
			var b = a.link;
			null !== b && null === this.Lp(b) && this.at.add(b, a);
			b = a.toVertex;
			null !== b && b.yu(a);
			b = a.fromVertex;
			null !== b && b.xu(a);
			a.network = this
		}
	};
	t.iy = function(a) {
		if(null === a) return null;
		var b = a.fromNode,
			c = a.toNode,
			d = this.Lp(a);
		null === d ? (d = this.createEdge(), d.link = a, null !== b && (d.fromVertex = this.Ll(b)), null !== c && (d.toVertex = this.Ll(c)), this.Hj(d)) : (null !== b ? d.fromVertex = this.Ll(b) : d.fromVertex = null, null !== c ? d.toVertex = this.Ll(c) : d.toVertex = null);
		return d
	};
	t.Sj = function(a) {
		if(null !== a) {
			var b = a.toVertex;
			null !== b && b.Hu(a);
			b = a.fromVertex;
			null !== b && b.Gu(a);
			Fp(this, a)
		}
	};

	function Fp(a, b) {
		null !== b && a.de.remove(b) && a.at.remove(b.link)
	}
	t.wy = function(a) {
		null !== a && (a = this.Lp(a), null !== a && this.Sj(a))
	};
	t.Lp = function(a) {
		return null === a ? null : this.at.J(a)
	};
	t.$j = function(a, b, c) {
		if(null === a || null === b) return null;
		if(a.network === this && b.network === this) {
			var d = this.createEdge();
			d.link = c;
			d.fromVertex = a;
			d.toVertex = b;
			this.Hj(d);
			return d
		}
		return null
	};
	t.hq = function(a) {
		if(null !== a) {
			var b = a.fromVertex,
				c = a.toVertex;
			null !== b && null !== c && (b.Gu(a), c.Hu(a), a.hq(), b.yu(a), c.xu(a))
		}
	};
	t.Jp = function() {
		for(var a = La(), b = this.de.iterator; b.next();) {
			var c = b.value;
			c.fromVertex === c.toVertex && a.push(c)
		}
		b = a.length;
		for(c = 0; c < b; c++) this.Sj(a[c]);
		Na(a)
	};
	zp.prototype.deleteArtificialVertexes = function() {
		for(var a = La(), b = this.gf.iterator; b.next();) {
			var c = b.value;
			null === c.node && a.push(c)
		}
		c = a.length;
		for(b = 0; b < c; b++) this.Iu(a[b]);
		b = La();
		for(c = this.de.iterator; c.next();) {
			var d = c.value;
			null === d.link && b.push(d)
		}
		c = b.length;
		for(d = 0; d < c; d++) this.Sj(b[d]);
		Na(a);
		Na(b)
	};

	function Gp(a) {
		for(var b = La(), c = a.de.iterator; c.next();) {
			var d = c.value;
			null !== d.fromVertex && null !== d.toVertex || b.push(d)
		}
		c = b.length;
		for(d = 0; d < c; d++) a.Sj(b[d]);
		Na(b)
	}
	zp.prototype.Nx = function() {
		this.deleteArtificialVertexes();
		Gp(this);
		this.Jp();
		for(var a = new E, b = !0; b;) {
			b = !1;
			for(var c = this.gf.iterator; c.next();) {
				var d = c.value;
				if(0 < d.sg.count || 0 < d.lg.count) {
					b = this.layout.createNetwork();
					a.add(b);
					Hp(this, b, d);
					b = !0;
					break
				}
			}
		}
		a.sort(function(a, b) {
			return null === a || null === b || a === b ? 0 : b.vertexes.count - a.vertexes.count
		});
		return a
	};

	function Hp(a, b, c) {
		if(null !== c && c.network !== b) {
			Ep(a, c);
			b.mh(c);
			for(var d = c.sourceEdges; d.next();) {
				var e = d.value;
				e.network !== b && (Fp(a, e), b.Hj(e), Hp(a, b, e.fromVertex))
			}
			for(d = c.destinationEdges; d.next();) c = d.value, c.network !== b && (Fp(a, c), b.Hj(c), Hp(a, b, c.toVertex))
		}
	}
	zp.prototype.Cy = function() {
		for(var a = new F, b = this.gf.iterator; b.next();) a.add(b.value.node);
		for(b = this.de.iterator; b.next();) a.add(b.value.link);
		return a
	};
	oa.Object.defineProperties(zp.prototype, {
		layout: {
			get: function() {
				return this.gc
			},
			set: function(a) {
				null !== a && (this.gc = a)
			}
		},
		vertexes: {
			get: function() {
				return this.gf
			}
		},
		edges: {
			get: function() {
				return this.de
			}
		}
	});
	zp.prototype.findAllParts = zp.prototype.Cy;
	zp.prototype.splitIntoSubNetworks = zp.prototype.Nx;
	zp.prototype.deleteSelfEdges = zp.prototype.Jp;
	zp.prototype.reverseEdge = zp.prototype.hq;
	zp.prototype.linkVertexes = zp.prototype.$j;
	zp.prototype.findEdge = zp.prototype.Lp;
	zp.prototype.deleteLink = zp.prototype.wy;
	zp.prototype.deleteEdge = zp.prototype.Sj;
	zp.prototype.addLink = zp.prototype.iy;
	zp.prototype.addEdge = zp.prototype.Hj;
	zp.prototype.findVertex = zp.prototype.Ci;
	zp.prototype.deleteNode = zp.prototype.xy;
	zp.prototype.deleteVertex = zp.prototype.Iu;
	zp.prototype.addNode = zp.prototype.Ll;
	zp.prototype.addVertex = zp.prototype.mh;
	zp.prototype.addParts = zp.prototype.kg;
	zp.className = "LayoutNetwork";

	function Cp(a) {
		rb(this);
		this.Xc = a;
		this.l = (new M(0, 0, 10, 10)).freeze();
		this.u = (new G(5, 5)).freeze();
		this.hi = this.lb = null;
		this.sg = new E;
		this.lg = new E
	}
	Cp.prototype.clear = function() {
		this.hi = this.lb = null;
		this.sg = new E;
		this.lg = new E
	};
	Cp.prototype.toString = function(a) {
		void 0 === a && (a = 0);
		var b = "LayoutVertex#" + Bb(this);
		if(0 < a && (b += null !== this.node ? "(" + this.node.toString() + ")" : "", 1 < a)) {
			a = "";
			for(var c = !0, d = this.sg.iterator; d.next();) {
				var e = d.value;
				c ? c = !1 : a += ",";
				a += e.toString(0)
			}
			e = "";
			c = !0;
			for(d = this.lg.iterator; d.next();) {
				var f = d.value;
				c ? c = !1 : e += ",";
				e += f.toString(0)
			}
			b += " sources: " + a + " destinations: " + e
		}
		return b
	};
	Cp.prototype.commit = function() {
		var a = this.lb;
		if(null !== a) {
			var b = this.bounds,
				c = a.bounds;
			Ea(c) ? (c.x = b.x, c.y = b.y, c.width = b.width, c.height = b.height) : a.bounds = b.copy()
		} else if(a = this.node, null !== a) {
			b = this.bounds;
			if(!(a instanceof V)) {
				c = M.alloc();
				var d = this.network.layout.Ei(a, c),
					e = a.locationObject.ka(id);
				if(d.s() && e.s()) {
					a.moveTo(b.x + this.focusX - (e.x - d.x), b.y + this.focusY - (e.y - d.y));
					M.free(c);
					return
				}
				M.free(c)
			}
			a.moveTo(b.x, b.y)
		}
	};
	Cp.prototype.yu = function(a) {
		null !== a && (this.sg.contains(a) || this.sg.add(a))
	};
	Cp.prototype.Hu = function(a) {
		null !== a && this.sg.remove(a)
	};
	Cp.prototype.xu = function(a) {
		null !== a && (this.lg.contains(a) || this.lg.add(a))
	};
	Cp.prototype.Gu = function(a) {
		null !== a && this.lg.remove(a)
	};

	function Ip(a, b) {
		a = a.hi;
		b = b.hi;
		return a ? b ? (a = a.text, b = b.text, a < b ? -1 : a > b ? 1 : 0) : 1 : null !== b ? -1 : 0
	}
	oa.Object.defineProperties(Cp.prototype, {
		sourceEdgesArrayAccess: {
			get: function() {
				return this.sg._dataArray
			}
		},
		destinationEdgesArrayAccess: {
			get: function() {
				return this.lg._dataArray
			}
		},
		data: {
			get: function() {
				return this.lb
			},
			set: function(a) {
				this.lb = a;
				if(null !== a) {
					var b = a.bounds;
					a = b.x;
					var c = b.y,
						d = b.width;
					b = b.height;
					this.u.h(d / 2, b / 2);
					this.l.h(a, c, d, b)
				}
			}
		},
		node: {
			get: function() {
				return this.hi
			},
			set: function(a) {
				if(this.hi !== a) {
					this.hi = a;
					a.kc();
					var b = this.network.layout,
						c = M.alloc(),
						d = b.Ei(a, c);
					b = d.x;
					var e = d.y,
						f = d.width;
					d = d.height;
					isNaN(b) && (b = 0);
					isNaN(e) && (e = 0);
					this.l.h(b, e, f, d);
					M.free(c);
					if(!(a instanceof V) && (a = a.locationObject.ka(id), a.s())) {
						this.u.h(a.x - b, a.y - e);
						return
					}
					this.u.h(f / 2, d / 2)
				}
			}
		},
		bounds: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l.A(a) || this.l.assign(a)
			}
		},
		focus: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u.A(a) ||
					this.u.assign(a)
			}
		},
		centerX: {
			get: function() {
				return this.l.x + this.u.x
			},
			set: function(a) {
				var b = this.l;
				b.x + this.u.x !== a && (b.ha(), b.x = a - this.u.x, b.freeze())
			}
		},
		centerY: {
			get: function() {
				return this.l.y + this.u.y
			},
			set: function(a) {
				var b = this.l;
				b.y + this.u.y !== a && (b.ha(), b.y = a - this.u.y, b.freeze())
			}
		},
		focusX: {
			get: function() {
				return this.u.x
			},
			set: function(a) {
				var b = this.u;
				b.x !== a && (b.ha(), b.x = a, b.freeze())
			}
		},
		focusY: {
			get: function() {
				return this.u.y
			},
			set: function(a) {
				var b = this.u;
				b.y !== a && (b.ha(), b.y = a, b.freeze())
			}
		},
		x: {
			get: function() {
				return this.l.x
			},
			set: function(a) {
				var b = this.l;
				b.x !== a && (b.ha(), b.x = a, b.freeze())
			}
		},
		y: {
			get: function() {
				return this.l.y
			},
			set: function(a) {
				var b = this.l;
				b.y !== a && (b.ha(), b.y = a, b.freeze())
			}
		},
		width: {
			get: function() {
				return this.l.width
			},
			set: function(a) {
				var b = this.l;
				b.width !== a && (b.ha(), b.width =
					a, b.freeze())
			}
		},
		height: {
			get: function() {
				return this.l.height
			},
			set: function(a) {
				var b = this.l;
				b.height !== a && (b.ha(), b.height = a, b.freeze())
			}
		},
		network: {
			get: function() {
				return this.Xc
			},
			set: function(a) {
				this.Xc = a
			}
		},
		sourceVertexes: {
			get: function() {
				for(var a = new F, b = this.sourceEdges; b.next();) a.add(b.value.fromVertex);
				return a.iterator
			}
		},
		destinationVertexes: {
			get: function() {
				for(var a = new F, b =
						this.destinationEdges; b.next();) a.add(b.value.toVertex);
				return a.iterator
			}
		},
		vertexes: {
			get: function() {
				for(var a = new F, b = this.sourceEdges; b.next();) a.add(b.value.fromVertex);
				for(b = this.destinationEdges; b.next();) a.add(b.value.toVertex);
				return a.iterator
			}
		},
		sourceEdges: {
			get: function() {
				return this.sg.iterator
			}
		},
		destinationEdges: {
			get: function() {
				return this.lg.iterator
			}
		},
		edges: {
			get: function() {
				for(var a =
						new E, b = this.sourceEdges; b.next();) a.add(b.value);
				for(b = this.destinationEdges; b.next();) a.add(b.value);
				return a.iterator
			}
		},
		edgesCount: {
			get: function() {
				return this.sg.count + this.lg.count
			}
		}
	});
	Cp.prototype.deleteDestinationEdge = Cp.prototype.Gu;
	Cp.prototype.addDestinationEdge = Cp.prototype.xu;
	Cp.prototype.deleteSourceEdge = Cp.prototype.Hu;
	Cp.prototype.addSourceEdge = Cp.prototype.yu;
	Cp.className = "LayoutVertex";
	Cp.standardComparer = Ip;
	Cp.smartComparer = function(a, b) {
		if(null !== a) {
			if(null !== b) {
				a = a.hi;
				var c = b.hi;
				if(null !== a) {
					if(null !== c) {
						b = a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);
						a = c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);
						for(c = 0; c < b.length; c++)
							if("" !== a[c] && void 0 !== a[c]) {
								var d = parseFloat(b[c]),
									e = parseFloat(a[c]);
								if(isNaN(d))
									if(isNaN(e)) {
										if(0 !== b[c].localeCompare(a[c])) return b[c].localeCompare(a[c])
									} else return 1;
								else {
									if(isNaN(e)) return -1;
									if(0 !== d - e) return d -
										e
								}
							} else if("" !== b[c]) return 1;
						return "" !== a[c] && void 0 !== a[c] ? -1 : 0
					}
					return 1
				}
				return null !== c ? -1 : 0
			}
			return 1
		}
		return null !== b ? -1 : 0
	};

	function Dp(a) {
		rb(this);
		this.nd = a;
		this.fg = this.Jf = this.el = this.lb = null
	}
	Dp.prototype.clear = function() {
		this.fg = this.Jf = this.el = this.lb = null
	};
	Dp.prototype.toString = function(a) {
		void 0 === a && (a = 0);
		var b = "LayoutEdge#" + Bb(this);
		0 < a && (b += null !== this.el ? "(" + this.el.toString() + ")" : "", 1 < a && (b += " " + (this.Jf ? this.Jf.toString() : "null") + " --\x3e " + (this.fg ? this.fg.toString() : "null")));
		return b
	};
	Dp.prototype.hq = function() {
		var a = this.Jf;
		this.Jf = this.fg;
		this.fg = a
	};
	Dp.prototype.commit = function() {};
	Dp.prototype.ox = function(a) {
		return this.fg === a ? this.Jf : this.Jf === a ? this.fg : null
	};
	oa.Object.defineProperties(Dp.prototype, {
		network: {
			get: function() {
				return this.nd
			},
			set: function(a) {
				this.nd = a
			}
		},
		data: {
			get: function() {
				return this.lb
			},
			set: function(a) {
				this.lb !== a && (this.lb = a)
			}
		},
		link: {
			get: function() {
				return this.el
			},
			set: function(a) {
				this.el !== a && (this.el = a)
			}
		},
		fromVertex: {
			get: function() {
				return this.Jf
			},
			set: function(a) {
				this.Jf !== a && (this.Jf = a)
			}
		},
		toVertex: {
			get: function() {
				return this.fg
			},
			set: function(a) {
				this.fg !== a && (this.fg = a)
			}
		}
	});
	Dp.prototype.getOtherVertex = Dp.prototype.ox;
	Dp.className = "LayoutEdge";

	function Bk() {
		vi.call(this);
		this.isViewportSized = !0;
		this.Ap = this.Bp = NaN;
		this.yg = (new L(NaN, NaN)).freeze();
		this.Ze = (new L(10, 10)).freeze();
		this.zb = Jp;
		this.Eb = Kp;
		this.Sc = Lp;
		this.Nc = Mp
	}
	na(Bk, vi);
	Bk.prototype.cloneProtected = function(a) {
		vi.prototype.cloneProtected.call(this, a);
		a.Bp = this.Bp;
		a.Ap = this.Ap;
		a.yg.assign(this.yg);
		a.Ze.assign(this.Ze);
		a.zb = this.zb;
		a.Eb = this.Eb;
		a.Sc = this.Sc;
		a.Nc = this.Nc
	};
	Bk.prototype.ib = function(a) {
		a.classType === Bk ? a === Lp || a === Np || a === Op || a === Pp ? this.sorting = a : a === Kp || a === Qp ? this.arrangement = a : a === Jp || a === Rp ? this.alignment = a : A("Unknown enum value: " + a) : vi.prototype.ib.call(this, a)
	};
	Bk.prototype.doLayout = function(a) {
		this.arrangementOrigin = this.initialOrigin(this.arrangementOrigin);
		var b = this.Vw(a);
		a = this.diagram;
		for(var c = b.copy().iterator; c.next();) {
			var d = c.value;
			if(!d.wh() || null === d.fromNode && null === d.toNode) {
				if(d.kc(), d instanceof V)
					for(d = d.memberParts; d.next();) b.remove(d.value)
			} else b.remove(d)
		}
		var e = b.La();
		if(0 !== e.length) {
			switch(this.sorting) {
				case Pp:
					e.reverse();
					break;
				case Lp:
					e.sort(this.comparer);
					break;
				case Np:
					e.sort(this.comparer), e.reverse()
			}
			var f = this.wrappingColumn;
			isNaN(f) && (f = 0);
			var g = this.wrappingWidth;
			isNaN(g) && null !== a ? (b = a.padding, g = Math.max(a.viewportBounds.width - b.left - b.right, 0)) : g = Math.max(this.wrappingWidth, 0);
			0 >= f && 0 >= g && (f = 1);
			b = this.spacing.width;
			isFinite(b) || (b = 0);
			c = this.spacing.height;
			isFinite(c) || (c = 0);
			null !== a && a.Aa("Layout");
			d = [];
			switch(this.alignment) {
				case Rp:
					var h = b,
						k = c,
						l = M.alloc(),
						m = Math.max(this.cellSize.width, 1);
					if(!isFinite(m))
						for(var n = m = 0; n < e.length; n++) {
							var p = this.Ei(e[n], l);
							m = Math.max(m, p.width)
						}
					m = Math.max(m + h, 1);
					n = Math.max(this.cellSize.height,
						1);
					if(!isFinite(n))
						for(p = n = 0; p < e.length; p++) {
							var q = this.Ei(e[p], l);
							n = Math.max(n, q.height)
						}
					n = Math.max(n + k, 1);
					p = this.arrangement;
					for(var r = q = this.arrangementOrigin.x, u = this.arrangementOrigin.y, v = 0, x = 0, y = 0; y < e.length; y++) {
						var z = e[y],
							B = this.Ei(z, l),
							C = Math.ceil((B.width + h) / m) * m,
							I = Math.ceil((B.height + k) / n) * n;
						switch(p) {
							case Qp:
								var J = Math.abs(r - B.width);
								break;
							default:
								J = r + B.width
						}
						if(0 < f && v > f - 1 || 0 < g && 0 < v && J > g) d.push(new M(0, u, g + h, x)), v = 0, r = q, u += x, x = 0;
						x = Math.max(x, I);
						switch(p) {
							case Qp:
								B = -B.width;
								break;
							default:
								B =
									0
						}
						z.moveTo(r + B, u);
						switch(p) {
							case Qp:
								r -= C;
								break;
							default:
								r += C
						}
						v++
					}
					d.push(new M(0, u, g + h, x));
					M.free(l);
					break;
				case Jp:
					k = g;
					m = f;
					n = b;
					p = c;
					g = M.alloc();
					q = Math.max(this.cellSize.width, 1);
					f = u = l = 0;
					h = G.alloc();
					for(r = 0; r < e.length; r++) x = e[r], v = this.Ei(x, g), x = x.sh(x.locationObject, x.locationSpot, h), l = Math.max(l, x.x), u = Math.max(u, v.width - x.x), f = Math.max(f, x.y);
					r = this.arrangement;
					switch(r) {
						case Qp:
							l += n;
							break;
						default:
							u += n
					}
					q = isFinite(q) ? Math.max(q + n, 1) : Math.max(l + u, 1);
					var K = x = this.arrangementOrigin.x;
					y = this.arrangementOrigin.y;
					u = 0;
					k >= l && (k -= l);
					l = z = 0;
					C = Math.max(this.cellSize.height, 1);
					B = f = 0;
					I = !0;
					v = G.alloc();
					for(J = 0; J < e.length; J++) {
						var X = e[J],
							R = this.Ei(X, g),
							la = X.sh(X.locationObject, X.locationSpot, h);
						if(0 < u) switch(r) {
							case Qp:
								K = (K - x - (R.width - la.x)) / q;
								K = H.ba(Math.round(K), K) ? Math.round(K) : Math.floor(K);
								K = K * q + x;
								break;
							default:
								K = (K - x + la.x) / q, K = H.ba(Math.round(K), K) ? Math.round(K) : Math.ceil(K), K = K * q + x
						} else switch(r) {
							case Qp:
								z = K + la.x + R.width;
								break;
							default:
								z = K - la.x
						}
						switch(r) {
							case Qp:
								var qa = -(K + la.x) + z;
								break;
							default:
								qa = K + R.width - la.x -
									z
						}
						if(0 < m && u > m - 1 || 0 < k && 0 < u && qa > k) {
							d.push(new M(0, I ? y - f : y, k + n, B + f + p));
							for(K = 0; K < u && J !== u; K++) {
								qa = e[J - u + K];
								var O = qa.sh(qa.locationObject, qa.locationSpot, v);
								qa.moveTo(qa.position.x, qa.position.y + f - O.y)
							}
							B += p;
							y = I ? y + B : y + (B + f);
							u = B = f = 0;
							K = x;
							I = !1
						}
						K === x && (l = r === Qp ? Math.max(l, R.width - la.x) : Math.min(l, -la.x));
						f = Math.max(f, la.y);
						B = Math.max(B, R.height - la.y);
						isFinite(C) && (B = Math.max(B, Math.max(R.height, C) - la.y));
						I ? X.moveTo(K - la.x, y - la.y) : X.moveTo(K - la.x, y);
						switch(r) {
							case Qp:
								K -= la.x + n;
								break;
							default:
								K += R.width - la.x +
									n
						}
						u++
					}
					d.push(new M(0, y, k + n, (I ? B : B + f) + p));
					if(e.length !== u)
						for(k = 0; k < u; k++) m = e[e.length - u + k], n = m.sh(m.locationObject, m.locationSpot, h), m.moveTo(m.position.x, m.position.y + f - n.y);
					G.free(h);
					G.free(v);
					if(r === Qp)
						for(e = 0; e < d.length; e++) f = d[e], f.width += l, f.x -= l;
					else
						for(e = 0; e < d.length; e++) f = d[e], f.x > l && (f.width += f.x - l, f.x = l);
					M.free(g)
			}
			for(h = f = g = e = 0; h < d.length; h++) k = d[h], e = Math.min(e, k.x), g = Math.min(g, k.y), f = Math.max(f, k.x + k.width);
			this.arrangement === Qp ? this.commitLayers(d, new G(e + b / 2 - (f + e), g - c / 2)) : this.commitLayers(d,
				new G(e - b / 2, g - c / 2));
			null !== a && a.bb("Layout");
			this.isValidLayout = !0
		}
	};
	Bk.prototype.commitLayers = function() {};

	function Mp(a, b) {
		a = a.text;
		b = b.text;
		return a < b ? -1 : a > b ? 1 : 0
	}
	oa.Object.defineProperties(Bk.prototype, {
		wrappingWidth: {
			get: function() {
				return this.Bp
			},
			set: function(a) {
				this.Bp !== a && (0 < a || isNaN(a)) && (this.Bp = a, this.isViewportSized = isNaN(a), this.B())
			}
		},
		wrappingColumn: {
			get: function() {
				return this.Ap
			},
			set: function(a) {
				this.Ap !== a && (0 < a || isNaN(a)) && (this.Ap = a, this.B())
			}
		},
		cellSize: {
			get: function() {
				return this.yg
			},
			set: function(a) {
				this.yg.A(a) || (this.yg.assign(a), this.B())
			}
		},
		spacing: {
			get: function() {
				return this.Ze
			},
			set: function(a) {
				this.Ze.A(a) || (this.Ze.assign(a), this.B())
			}
		},
		alignment: {
			get: function() {
				return this.zb
			},
			set: function(a) {
				this.zb === a || a !== Jp && a !== Rp || (this.zb = a, this.B())
			}
		},
		arrangement: {
			get: function() {
				return this.Eb
			},
			set: function(a) {
				this.Eb === a || a !== Kp && a !== Qp || (this.Eb = a, this.B())
			}
		},
		sorting: {
			get: function() {
				return this.Sc
			},
			set: function(a) {
				this.Sc === a || a !== Op && a !== Pp &&
					a !== Lp && a !== Np || (this.Sc = a, this.B())
			}
		},
		comparer: {
			get: function() {
				return this.Nc
			},
			set: function(a) {
				this.Nc !== a && (this.Nc = a, this.B())
			}
		}
	});
	var Rp = new D(Bk, "Position", 0),
		Jp = new D(Bk, "Location", 1),
		Kp = new D(Bk, "LeftToRight", 2),
		Qp = new D(Bk, "RightToLeft", 3),
		Op = new D(Bk, "Forward", 4),
		Pp = new D(Bk, "Reverse", 5),
		Lp = new D(Bk, "Ascending", 6),
		Np = new D(Bk, "Descending", 7);
	Bk.className = "GridLayout";
	Bk.standardComparer = Mp;
	Bk.smartComparer = function(a, b) {
		if(null !== a) {
			if(null !== b) {
				a = a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);
				b = b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);
				for(var c = 0; c < a.length; c++)
					if("" !== b[c] && void 0 !== b[c]) {
						var d = parseFloat(a[c]),
							e = parseFloat(b[c]);
						if(isNaN(d))
							if(isNaN(e)) {
								if(0 !== a[c].localeCompare(b[c])) return a[c].localeCompare(b[c])
							} else return 1;
						else {
							if(isNaN(e)) return -1;
							if(0 !== d - e) return d - e
						}
					} else if("" !== a[c]) return 1;
				return "" !==
					b[c] && void 0 !== b[c] ? -1 : 0
			}
			return 1
		}
		return null !== b ? -1 : 0
	};
	Bk.Position = Rp;
	Bk.Location = Jp;
	Bk.LeftToRight = Kp;
	Bk.RightToLeft = Qp;
	Bk.Forward = Op;
	Bk.Reverse = Pp;
	Bk.Ascending = Lp;
	Bk.Descending = Np;

	function ri() {
		this.uo = new F;
		this.Yn = new F;
		this.Fa = new F;
		this.Ne = new Nb;
		this.Ag = new Nb;
		this.ij = new Nb;
		this.F = null;
		this.Dm = !1
	}
	t = ri.prototype;
	t.clear = function() {
		this.uo.clear();
		this.Yn.clear();
		this.Fa.clear();
		this.Ne.clear();
		this.Ag.clear();
		this.ij.clear()
	};
	t.rb = function(a) {
		this.F = a
	};
	t.Gi = function(a) {
		if(a instanceof W) {
			if(this.uo.add(a), a instanceof V) {
				var b = a.containingGroup;
				null === b ? this.F.ui.add(a) : b.jl.add(a);
				b = a.layout;
				null !== b && (b.diagram = this.F)
			}
		} else a instanceof S ? this.Yn.add(a) : a instanceof pf || this.Fa.add(a);
		b = a.data;
		null === b || a instanceof pf || (a instanceof S ? this.Ag.add(b, a) : this.Ne.add(b, a))
	};
	t.zc = function(a) {
		a.Lj();
		if(a instanceof W) {
			if(this.uo.remove(a), a instanceof V) {
				var b = a.containingGroup;
				null === b ? this.F.ui.remove(a) : b.jl.remove(a);
				b = a.layout;
				null !== b && (b.diagram = null)
			}
		} else a instanceof S ? this.Yn.remove(a) : a instanceof pf || this.Fa.remove(a);
		b = a.data;
		null === b || a instanceof pf || (a instanceof S ? this.Ag.remove(b) : this.Ne.remove(b))
	};
	t.xd = function() {
		for(var a = this.F.nodeTemplateMap.iterator; a.next();) {
			var b = a.value,
				c = a.key;
			(!b.ac() || b instanceof V) && A('Invalid node template in Diagram.nodeTemplateMap: template for "' + c + '" must be a Node or a simple Part, not a Group or Link: ' + b)
		}
		for(a = this.F.groupTemplateMap.iterator; a.next();) b = a.value, c = a.key, b instanceof V || A('Invalid group template in Diagram.groupTemplateMap: template for "' + c + '" must be a Group, not a normal Node or Link: ' + b);
		for(a = this.F.linkTemplateMap.iterator; a.next();) b =
			a.value, c = a.key, b instanceof S || A('Invalid link template in Diagram.linkTemplateMap: template for "' + c + '" must be a Link, not a normal Node or simple Part: ' + b);
		a = La();
		for(b = this.F.selection.iterator; b.next();)(c = b.value.data) && a.push(c);
		b = La();
		for(c = this.F.highlighteds.iterator; c.next();) {
			var d = c.value.data;
			d && b.push(d)
		}
		c = La();
		for(d = this.nodes.iterator; d.next();) {
			var e = d.value;
			null !== e.data && (c.push(e.data), c.push(e.location))
		}
		for(d = this.links.iterator; d.next();) e = d.value, null !== e.data && (c.push(e.data),
			c.push(e.location));
		for(d = this.parts.iterator; d.next();) e = d.value, null !== e.data && (c.push(e.data), c.push(e.location));
		this.removeAllModeledParts();
		this.addAllModeledParts();
		for(d = 0; d < a.length; d++) e = this.wc(a[d]), null !== e && (e.isSelected = !0);
		for(d = 0; d < b.length; d++) e = this.wc(b[d]), null !== e && (e.isHighlighted = !0);
		for(d = 0; d < c.length; d += 2) e = this.wc(c[d]), null !== e && (e.location = c[d + 1]);
		Na(a);
		Na(b);
		Na(c)
	};
	ri.prototype.addAllModeledParts = function() {
		this.addModeledParts(this.diagram.model.nodeDataArray)
	};
	ri.prototype.addModeledParts = function(a, b) {
		var c = this,
			d = this.diagram.model;
		a.forEach(function(a) {
			d.ic(a) && Sp(c, a, !1)
		});
		a.forEach(function(a) {
			d.ic(a) && c.resolveReferencesForData(a)
		});
		!1 !== b && Tj(this.diagram, !1)
	};

	function Sp(a, b, c) {
		if(void 0 !== b && null !== b && !a.diagram.undoManager.isUndoingRedoing && !a.Ne.contains(b)) {
			void 0 === c && (c = !0);
			a: {
				if(void 0 !== b && null !== b && !a.F.undoManager.isUndoingRedoing && !a.Ne.contains(b)) {
					var d = a.Ts(b);
					var e = to(a, b, d);
					if(null !== e && (ch(e), e = e.copy(), null !== e)) {
						var f = a.diagram.skipsModelSourceBindings;
						a.diagram.skipsModelSourceBindings = !0;
						e.yf = d;
						e.lb = b;
						a.Dm && (e.Pg = "Tool");
						a.diagram.add(e);
						e.lb = null;
						e.data = b;
						a.diagram.skipsModelSourceBindings = f;
						d = e;
						break a
					}
				}
				d = null
			}
			null !== d && c && a.resolveReferencesForData(b)
		}
	}
	ri.prototype.insertLink = function() {
		return null
	};
	ri.prototype.resolveReferencesForData = function() {};
	ri.prototype.Ts = function(a) {
		return this.F.model.Ts(a)
	};

	function to(a, b, c) {
		a = a.F;
		var d = a.model;
		Jk(d) && d.bv(b) ? (b = a.groupTemplateMap.J(c), null === b && (b = a.groupTemplateMap.J(""), null === b && (Tp || (Tp = !0, Ba('No Group template found for category "' + c + '"'), Ba("  Using default group template")), b = a.ow))) : (b = a.nodeTemplateMap.J(c), null === b && (b = a.nodeTemplateMap.J(""), null === b && (Up || (Up = !0, Ba('No Node template found for category "' + c + '"'), Ba("  Using default node template")), b = a.qw)));
		return b
	}
	ri.prototype.getLinkCategoryForData = function() {
		return ""
	};
	ri.prototype.setLinkCategoryForData = function() {};
	ri.prototype.setFromNodeForLink = function() {};
	ri.prototype.setToNodeForLink = function() {};
	ri.prototype.findLinkTemplateForCategory = function(a) {
		var b = this.F.linkTemplateMap.J(a);
		null === b && (b = this.F.linkTemplateMap.J(""), null === b && (Vp || (Vp = !0, Ba('No Link template found for category "' + a + '"'), Ba("  Using default link template")), b = this.F.pw));
		return b
	};
	ri.prototype.removeAllModeledParts = function() {
		this.lt(this.diagram.model.nodeDataArray)
	};
	ri.prototype.lt = function(a) {
		var b = this;
		a.forEach(function(a) {
			b.eq(a)
		})
	};
	ri.prototype.eq = function(a) {
		a = this.wc(a);
		null !== a && (Cj(this.diagram, a, !1), this.unresolveReferencesForPart(a))
	};
	ri.prototype.unresolveReferencesForPart = function() {};
	ri.prototype.removeDataForLink = function() {};
	ri.prototype.findPartForKey = function(a) {
		if(null === a || void 0 === a) return null;
		a = this.F.model.lc(a);
		return null !== a ? this.Ne.J(a) : null
	};
	t = ri.prototype;
	t.Mb = function(a) {
		if(null === a || void 0 === a) return null;
		a = this.F.model.lc(a);
		if(null === a) return null;
		a = this.Ne.J(a);
		return a instanceof W ? a : null
	};
	t.wc = function(a) {
		if(null === a) return null;
		var b = this.Ne.J(a);
		return null !== b ? b : b = this.Ag.J(a)
	};
	t.Ai = function(a) {
		if(null === a) return null;
		a = this.Ne.J(a);
		return a instanceof W ? a : null
	};
	t.Ic = function(a) {
		return null === a ? null : this.Ag.J(a)
	};
	t.Ps = function(a) {
		for(var b = 0; b < arguments.length; ++b);
		b = new F;
		for(var c = this.uo.iterator; c.next();) {
			var d = c.value,
				e = d.data;
			if(null !== e)
				for(var f = 0; f < arguments.length; f++) {
					var g = arguments[f];
					if(Ea(g) && Wp(this, e, g)) {
						b.add(d);
						break
					}
				}
		}
		return b.iterator
	};
	t.Os = function(a) {
		for(var b = 0; b < arguments.length; ++b);
		b = new F;
		for(var c = this.Yn.iterator; c.next();) {
			var d = c.value,
				e = d.data;
			if(null !== e)
				for(var f = 0; f < arguments.length; f++) {
					var g = arguments[f];
					if(Ea(g) && Wp(this, e, g)) {
						b.add(d);
						break
					}
				}
		}
		return b.iterator
	};

	function Wp(a, b, c) {
		for(var d in c) {
			var e = b[d],
				f = c[d];
			if(Ga(f)) {
				if(!Ga(e) || e.length < f.length) return !1;
				for(var g = 0; g < e.length; g++) {
					var h = f[g];
					if(void 0 !== h && !Xp(a, e[g], h)) return !1
				}
			} else if(!Xp(a, e, f)) return !1
		}
		return !0
	}

	function Xp(a, b, c) {
		if("function" === typeof c) {
			if(!c(b)) return !1
		} else if(c instanceof RegExp) {
			if(!b || !c.test(b.toString())) return !1
		} else if(Ea(b) && Ea(c)) {
			if(!Wp(a, b, c)) return !1
		} else if(b !== c) return !1;
		return !0
	}
	ri.prototype.doModelChanged = function(a) {
		if(this.F) {
			var b = this.F;
			if(a.model === b.model) {
				var c = a.change;
				b.doModelChanged(a);
				if(b.ca) {
					b.ca = !1;
					try {
						var d = a.modelChange;
						if("" !== d)
							if(c === Ze) {
								if("nodeCategory" === d) {
									var e = this.wc(a.object),
										f = a.newValue;
									null !== e && "string" === typeof f && (e.category = f)
								} else "nodeDataArray" === d && (this.lt(a.oldValue), this.addModeledParts(a.newValue));
								b.isModified = !0
							} else if(c === af) {
							var g = a.newValue;
							"nodeDataArray" === d && Ea(g) && Sp(this, g);
							b.isModified = !0
						} else if(c === ff) {
							var h = a.oldValue;
							"nodeDataArray" === d && Ea(h) && this.eq(h);
							b.isModified = !0
						} else c === $e && ("SourceChanged" === d ? null !== a.object ? this.updateDataBindings(a.object, a.propertyName) : (this.qq(), this.updateAllTargetBindings()) : "ModelDisplaced" === d && this.xd());
						else if(c === Ze) {
							var k = a.propertyName,
								l = a.object;
							if(l === b.model) {
								if("nodeKeyProperty" === k || "nodeCategoryProperty" === k) b.undoManager.isUndoingRedoing || this.xd()
							} else this.updateDataBindings(l, k);
							b.isModified = !0
						} else if(c === af || c === ff) {
							var m = a.change === af,
								n = m ? a.newParam : a.oldParam,
								p = m ? a.newValue : a.oldValue,
								q = this.ij.J(a.object);
							if(Array.isArray(q))
								for(a = 0; a < q.length; a++) {
									var r = q[a];
									m ? Ym(r, p, n) : 0 > n || (c = n, Sm(r) && c++, r.zc(c, !0), bn(r, c, n))
								}
							b.isModified = !0
						}
					} finally {
						b.ca = !0
					}
				}
			}
		}
	};
	ri.prototype.updateAllTargetBindings = function(a) {
		void 0 === a && (a = "");
		for(var b = this.parts.iterator; b.next();) b.value.Da(a);
		for(b = this.nodes.iterator; b.next();) b.value.Da(a);
		for(b = this.links.iterator; b.next();) b.value.Da(a)
	};
	ri.prototype.qq = function() {
		for(var a = this.F.model, b = new F, c = a.nodeDataArray, d = 0; d < c.length; d++) b.add(c[d]);
		var e = [];
		this.nodes.each(function(a) {
			null === a.data || b.contains(a.data) || e.push(a.data)
		});
		this.parts.each(function(a) {
			null === a.data || b.contains(a.data) || e.push(a.data)
		});
		e.forEach(function(b) {
			Yp(a, b, !1)
		});
		for(d = 0; d < c.length; d++) {
			var f = c[d];
			null === this.wc(f) && Zp(a, f, !1)
		}
		this.refreshDataBoundLinks();
		for(c = this.parts.iterator; c.next();) c.value.updateRelationshipsFromData();
		for(c = this.nodes.iterator; c.next();) c.value.updateRelationshipsFromData();
		for(c = this.links.iterator; c.next();) c.value.updateRelationshipsFromData()
	};
	ri.prototype.refreshDataBoundLinks = function() {};
	ri.prototype.updateRelationshipsFromData = function() {};
	ri.prototype.updateDataBindings = function(a, b) {
		if("string" === typeof b) {
			var c = this.wc(a);
			if(null !== c) c.Da(b);
			else {
				c = null;
				for(var d = this.ij.iterator; d.next();) {
					for(var e = d.value, f = 0; f < e.length; f++) {
						var g = e[f].hx(a);
						null !== g && (null === c && (c = La()), c.push(g))
					}
					if(null !== c) break
				}
				if(null !== c) {
					for(d = 0; d < c.length; d++) c[d].Da(b);
					Na(c)
				}
			}
			a === this.diagram.model.modelData && this.updateAllTargetBindings(b)
		}
	};

	function xj(a, b) {
		var c = b.Ng;
		if(Ga(c)) {
			var d = a.ij.J(c);
			if(null === d) d = [], d.push(b), a.ij.add(c, d);
			else {
				for(a = 0; a < d.length; a++)
					if(d[a] === b) return;
				d.push(b)
			}
		}
	}

	function Bj(a, b) {
		var c = b.Ng;
		if(Ga(c)) {
			var d = a.ij.J(c);
			if(null !== d)
				for(var e = 0; e < d.length; e++)
					if(d[e] === b) {
						d.splice(e, 1);
						0 === d.length && a.ij.remove(c);
						break
					}
		}
	}
	ri.prototype.Qj = function(a, b, c) {
		var d = new Nb;
		if(Ga(a))
			for(var e = 0; e < a.length; e++) $p(this, a[e], b, d, c);
		else
			for(a = a.iterator; a.next();) $p(this, a.value, b, d, c);
		if(null !== b) {
			c = b.model;
			a = b.toolManager.findTool("Dragging");
			a = null !== a ? a.dragOptions.dragsLink : b.Fk.dragsLink;
			e = new F;
			for(var f = new Nb, g = d.iterator; g.next();) {
				var h = g.value;
				if(h instanceof S) a || null !== h.fromNode && null !== h.toNode || e.add(h);
				else if(h instanceof W && null !== h.data && c.$l()) {
					var k = h;
					h = g.key;
					var l = h.og();
					null !== l && (l = d.J(l), null !== l ? (c.He(k.data,
						c.sa(l.data)), k = b.Ic(k.data), h = h.Bi(), null !== h && null !== k && f.add(h, k)) : c.He(k.data, void 0))
				}
			}
			0 < e.count && b.mt(e, !1);
			if(0 < f.count)
				for(c = f.iterator; c.next();) d.add(c.key, c.value)
		}
		if(null !== b && null !== this.F && (b = b.model, c = b.afterCopyFunction, null !== c)) {
			var m = new Nb;
			d.each(function(a) {
				null !== a.key.data && m.add(a.key.data, a.value.data)
			});
			c(m, b, this.F.model)
		}
		for(b = d.iterator; b.next();) b.value.Da();
		return d
	};

	function $p(a, b, c, d, e) {
		if(null === b || e && !b.canCopy()) return null;
		if(d.contains(b)) return d.J(b);
		var f = a.copyPartData(b, c);
		if(!(f instanceof U)) return null;
		f.isSelected = !1;
		f.isHighlighted = !1;
		d.add(b, f);
		if(b instanceof W) {
			for(var g = b.linksConnected; g.next();) {
				var h = g.value;
				if(h.fromNode === b) {
					var k = d.J(h);
					null !== k && (k.fromNode = f)
				}
				h.toNode === b && (h = d.J(h), null !== h && (h.toNode = f))
			}
			if(b instanceof V && f instanceof V)
				for(b = b.memberParts; b.next();) g = $p(a, b.value, c, d, e), g instanceof S || null === g || (g.containingGroup =
					f)
		} else if(b instanceof S && f instanceof S)
			for(g = b.fromNode, null !== g && (g = d.J(g), null !== g && (f.fromNode = g)), g = b.toNode, null !== g && (g = d.J(g), null !== g && (f.toNode = g)), b = b.labelNodes; b.next();) g = $p(a, b.value, c, d, e), null !== g && g instanceof W && (g.labeledLink = f);
		return f
	}
	ri.prototype.copyPartData = function(a, b) {
		var c = null,
			d = a.data;
		if(null !== d && null !== b) {
			var e = b.model;
			a instanceof S || (d = e.copyNodeData(d), Ea(d) && (e.lh(d), c = b.wc(d)))
		} else ch(a), c = a.copy(), null !== c && (e = this.F, null !== b ? b.add(c) : null !== d && null !== e && null !== e.commandHandler && e.commandHandler.copiesClipboardData && (b = e.model, e = null, c instanceof S || (e = b.copyNodeData(d)), Ea(e) && (c.data = e)));
		return c
	};
	oa.Object.defineProperties(ri.prototype, {
		nodes: {
			get: function() {
				return this.uo
			}
		},
		links: {
			get: function() {
				return this.Yn
			}
		},
		parts: {
			get: function() {
				return this.Fa
			}
		},
		diagram: {
			get: function() {
				return this.F
			}
		}
	});
	ri.prototype.updateAllRelationshipsFromData = ri.prototype.qq;
	ri.prototype.findLinksByExample = ri.prototype.Os;
	ri.prototype.findNodesByExample = ri.prototype.Ps;
	ri.prototype.findLinkForData = ri.prototype.Ic;
	ri.prototype.findNodeForData = ri.prototype.Ai;
	ri.prototype.findPartForData = ri.prototype.wc;
	ri.prototype.findNodeForKey = ri.prototype.Mb;
	ri.prototype.removeModeledPart = ri.prototype.eq;
	ri.prototype.removeModeledParts = ri.prototype.lt;
	ri.prototype.rebuildParts = ri.prototype.xd;
	var Up = !1,
		Tp = !1,
		Vp = !1;
	ri.className = "PartManager";

	function aq(a) {
		ri.apply(this, arguments)
	}
	na(aq, ri);
	aq.prototype.addAllModeledParts = function() {
		var a = this.diagram.model;
		this.addModeledParts(a.nodeDataArray);
		bq(this, a.linkDataArray)
	};
	aq.prototype.addModeledParts = function(a) {
		ri.prototype.addModeledParts.call(this, a, !1);
		for(a = this.links.iterator; a.next();) uo(a.value);
		Tj(this.diagram, !1)
	};

	function bq(a, b) {
		b.forEach(function(b) {
			cq(a, b)
		});
		Tj(a.diagram, !1)
	}

	function cq(a, b) {
		if(void 0 !== b && null !== b && !a.diagram.undoManager.isUndoingRedoing && !a.Ag.contains(b)) {
			var c = a.getLinkCategoryForData(b),
				d = a.findLinkTemplateForCategory(c);
			if(null !== d) {
				ch(d);
				var e = d.copy();
				if(null !== e) {
					d = a.diagram.skipsModelSourceBindings;
					a.diagram.skipsModelSourceBindings = !0;
					e.yf = c;
					e.lb = b;
					c = a.diagram.model;
					var f = dq(c, b, !0);
					"" !== f && (e.fromPortId = f);
					f = eq(c, b, !0);
					void 0 !== f && (f = a.Mb(f), f instanceof W && (e.fromNode = f));
					f = dq(c, b, !1);
					"" !== f && (e.toPortId = f);
					f = eq(c, b, !1);
					void 0 !== f && (f = a.Mb(f),
						f instanceof W && (e.toNode = f));
					c = c.nf(b);
					Array.isArray(c) && c.forEach(function(b) {
						b = a.Mb(b);
						null !== b && (b.labeledLink = e)
					});
					a.Dm && (e.Pg = "Tool");
					a.diagram.add(e);
					e.lb = null;
					e.data = b;
					a.diagram.skipsModelSourceBindings = d
				}
			}
		}
	}
	aq.prototype.removeAllModeledParts = function() {
		var a = this.diagram.model;
		fq(this, a.linkDataArray);
		this.lt(a.nodeDataArray)
	};

	function fq(a, b) {
		b.forEach(function(b) {
			a.eq(b)
		})
	}
	aq.prototype.getLinkCategoryForData = function(a) {
		return this.diagram.model.Ss(a)
	};
	aq.prototype.setLinkCategoryForData = function(a, b) {
		return this.diagram.model.jq(a, b)
	};
	aq.prototype.setFromNodeForLink = function(a, b) {
		var c = this.diagram.model;
		c.zv(a.data, c.sa(null !== b ? b.data : null))
	};
	aq.prototype.setToNodeForLink = function(a, b) {
		var c = this.diagram.model;
		c.Iv(a.data, c.sa(null !== b ? b.data : null))
	};
	aq.prototype.removeDataForLink = function(a) {
		this.diagram.model.im(a.data)
	};
	aq.prototype.findPartForKey = function(a) {
		var b = ri.prototype.findPartForKey.call(this, a);
		return null === b && (a = this.diagram.model.zi(a), null !== a) ? this.Ag.J(a) : b
	};
	aq.prototype.doModelChanged = function(a) {
		var b = this;
		ri.prototype.doModelChanged.call(this, a);
		if(this.diagram) {
			var c = this.diagram;
			if(a.model === c.model) {
				var d = a.change;
				if(c.ca) {
					c.ca = !1;
					try {
						var e = a.modelChange;
						if("" !== e)
							if(d === Ze) {
								if("linkFromKey" === e) {
									var f = this.Ic(a.object);
									if(null !== f) {
										var g = this.Mb(a.newValue);
										f.fromNode = g
									}
								} else if("linkToKey" === e) {
									var h = this.Ic(a.object);
									if(null !== h) {
										var k = this.Mb(a.newValue);
										h.toNode = k
									}
								} else if("linkFromPortId" === e) {
									var l = this.Ic(a.object);
									if(null !== l) {
										var m = a.newValue;
										"string" === typeof m && (l.fromPortId = m)
									}
								} else if("linkToPortId" === e) {
									var n = this.Ic(a.object);
									if(null !== n) {
										var p = a.newValue;
										"string" === typeof p && (n.toPortId = p)
									}
								} else if("nodeGroupKey" === e) {
									var q = this.wc(a.object);
									if(null !== q) {
										var r = a.newValue;
										if(void 0 !== r) {
											var u = this.Mb(r);
											u instanceof V ? q.containingGroup = u : q.containingGroup = null
										} else q.containingGroup = null
									}
								} else if("linkLabelKeys" === e) {
									var v = this.Ic(a.object);
									if(null !== v) {
										var x = a.oldValue,
											y = a.newValue;
										Array.isArray(x) && x.forEach(function(a) {
											a = b.Mb(a);
											null !== a && (a.labeledLink = null)
										});
										Array.isArray(y) && y.forEach(function(a) {
											a = b.Mb(a);
											null !== a && (a.labeledLink = v)
										})
									}
								} else "linkDataArray" === e && (fq(this, a.oldValue), bq(this, a.newValue));
								c.isModified = !0
							} else if(d === af) {
							var z = a.newValue;
							if("linkDataArray" === e && "object" === typeof z && null !== z) cq(this, z);
							else if("linkLabelKeys" === e && gq(z)) {
								var B = this.Ic(a.object),
									C = this.Mb(z);
								null !== B && null !== C && (C.labeledLink = B)
							}
							c.isModified = !0
						} else {
							if(d === ff) {
								var I = a.oldValue;
								if("linkDataArray" === e && "object" === typeof I && null !==
									I) this.eq(I);
								else if("linkLabelKeys" === e && gq(I)) {
									var J = this.Mb(I);
									null !== J && (J.labeledLink = null)
								}
								c.isModified = !0
							}
						} else if(d === Ze) {
							var K = a.propertyName,
								X = a.object;
							if(X === c.model) {
								if("linkFromKeyProperty" === K || "linkToKeyProperty" === K || "linkFromPortIdProperty" === K || "linkToPortIdProperty" === K || "linkLabelKeysProperty" === K || "nodeIsGroupProperty" === K || "nodeGroupKeyProperty" === K || "linkCategoryProperty" === K) c.undoManager.isUndoingRedoing || this.xd()
							} else this.updateDataBindings(X, K);
							c.isModified = !0
						}
					} finally {
						c.ca = !0
					}
				}
			}
		}
	};
	aq.prototype.refreshDataBoundLinks = function() {
		var a = this,
			b = this.diagram.model,
			c = new F,
			d = b.linkDataArray;
		d.forEach(function(a) {
			c.add(a)
		});
		var e = [];
		this.links.each(function(a) {
			null === a.data || c.contains(a.data) || e.push(a.data)
		});
		e.forEach(function(a) {
			hq(b, a, !1)
		});
		d.forEach(function(c) {
			null === a.Ic(c) && iq(b, c, !1)
		})
	};
	aq.prototype.updateRelationshipsFromData = function(a) {
		var b = a.data;
		if(null !== b) {
			var c = a.diagram;
			if(null !== c) {
				var d = c.model;
				if(a instanceof S) {
					var e = eq(d, b, !0);
					e = c.Mb(e);
					a.fromNode = e;
					e = eq(d, b, !1);
					e = c.Mb(e);
					a.toNode = e;
					b = d.nf(b);
					if(0 < b.length || 0 < a.labelNodes.count) {
						if(1 === b.length && 1 === a.labelNodes.count) {
							e = b[0];
							var f = a.labelNodes.first();
							if(d.sa(f.data) === e) return
						}
						e = (new F).addAll(b);
						var g = new F;
						a.labelNodes.each(function(a) {
							null !== a.data && (a = d.sa(a.data), void 0 !== a && g.add(a))
						});
						b = g.copy();
						b.cq(e);
						e =
							e.copy();
						e.cq(g);
						if(0 < b.count || 0 < e.count) b.each(function(b) {
							b = c.Mb(b);
							null !== b && b.labeledLink === a && (b.labeledLink = null)
						}), e.each(function(b) {
							b = c.Mb(b);
							null !== b && b.labeledLink !== a && (b.labeledLink = a)
						})
					}
				} else !(a instanceof pf) && (b = d.rh(b), b = c.findPartForKey(b), null === b || b instanceof V) && (a.containingGroup = b)
			}
		}
	};
	aq.prototype.resolveReferencesForData = function(a) {
		var b = this.diagram.model,
			c = b.sa(a);
		if(void 0 !== c) {
			var d = jq(b, c),
				e = this.wc(a);
			if(null !== d && null !== e) {
				d = d.iterator;
				for(var f = {}; d.next();) {
					var g = d.value;
					b.ic(g) ? e instanceof V && b.rh(g) === c && (g = this.wc(g), null !== g && (g.containingGroup = e)) : (f.link = this.Ic(g), null !== f.link && e instanceof W && (eq(b, g, !0) === c && (f.link.fromNode = e), eq(b, g, !1) === c && (f.link.toNode = e), g = b.nf(g), Array.isArray(g) && g.some(function(a) {
						return function(b) {
							return b === c ? (e.labeledLink = a.link, !0) : !1
						}
					}(f))));
					f = {
						link: f.link
					}
				}
				kq(b, c)
			}
			a = b.rh(a);
			void 0 !== a && (a = this.Mb(a), a instanceof V && (e.containingGroup = a))
		}
	};
	aq.prototype.unresolveReferencesForPart = function(a) {
		var b = this.diagram.model;
		if(a instanceof W) {
			var c = b.sa(a.data);
			if(void 0 !== c) {
				for(var d = a.linksConnected; d.next();) lq(b, c, d.value.data);
				a.isLinkLabel && (d = a.labeledLink, null !== d && lq(b, c, d.data));
				if(a instanceof V)
					for(a = a.memberParts; a.next();) d = a.value.data, b.ic(d) && lq(b, c, d)
			}
		}
	};
	aq.prototype.copyPartData = function(a, b) {
		var c = ri.prototype.copyPartData.call(this, a, b);
		if(a instanceof S)
			if(a = a.data, null !== a && null !== b) {
				var d = b.model;
				a = d.Ip(a);
				"object" === typeof a && null !== a && (d.Ij(a), c = b.Ic(a))
			} else null !== c && (b = this.diagram, null !== a && null !== b && null !== b.commandHandler && b.commandHandler.copiesClipboardData && (b = b.model.Ip(a), "object" === typeof b && null !== b && (c.data = b)));
		return c
	};
	aq.prototype.insertLink = function(a, b, c, d) {
		var e = this.diagram,
			f = e.model,
			g = e.toolManager.findTool("Linking"),
			h = "";
		null !== a && (null === b && (b = a), h = b.portId, null === h && (h = ""));
		b = "";
		null !== c && (null === d && (d = c), b = d.portId, null === b && (b = ""));
		d = g.archetypeLinkData;
		if(d instanceof S) {
			if(ch(d), f = d.copy(), null !== f) return f.fromNode = a, f.fromPortId = h, f.toNode = c, f.toPortId = b, e.add(f), a = g.archetypeLabelNodeData, a instanceof W && (ch(a), a = a.copy(), null !== a && (a.labeledLink = f, e.add(a))), f
		} else if(null !== d && (d = f.Ip(d), "object" ===
				typeof d && null !== d)) return null !== a && mq(f, d, f.sa(a.data), !0), nq(f, d, h, !0), null !== c && mq(f, d, f.sa(c.data), !1), nq(f, d, b, !1), f.Ij(d), a = g.archetypeLabelNodeData, null === a || a instanceof W || (a = f.copyNodeData(a), "object" === typeof a && null !== a && (f.lh(a), a = f.sa(a), void 0 !== a && f.Ds(d, a))), e.Ic(d);
		return null
	};
	aq.prototype.findPartForKey = aq.prototype.findPartForKey;
	aq.prototype.removeAllModeledParts = aq.prototype.removeAllModeledParts;
	aq.prototype.addModeledParts = aq.prototype.addModeledParts;
	aq.prototype.addAllModeledParts = aq.prototype.addAllModeledParts;
	aq.className = "GraphLinksPartManager";

	function oq() {
		ri.apply(this, arguments);
		this.Yg = null
	}
	na(oq, ri);

	function pq(a, b, c) {
		if(null !== b && null !== c) {
			var d = a.diagram.toolManager.findTool("Linking"),
				e = b,
				f = c;
			if(a.diagram.isTreePathToChildren)
				for(b = f.linksConnected; b.next();) {
					if(b.value.toNode === f) return
				} else
					for(e = c, f = b, b = e.linksConnected; b.next();)
						if(b.value.fromNode === e) return;
			if(null === d || !ug(d, e, f, null, !0))
				if(d = a.getLinkCategoryForData(c.data), b = a.findLinkTemplateForCategory(d), null !== b && (ch(b), b = b.copy(), null !== b)) {
					var g = a.diagram.skipsModelSourceBindings;
					a.diagram.skipsModelSourceBindings = !0;
					b.yf = d;
					b.lb = c.data;
					b.fromNode = e;
					b.toNode = f;
					a.diagram.add(b);
					b.lb = null;
					b.data = c.data;
					a.diagram.skipsModelSourceBindings = g
				}
		}
	}
	oq.prototype.getLinkCategoryForData = function(a) {
		return this.diagram.model.Su(a)
	};
	oq.prototype.setLinkCategoryForData = function(a, b) {
		this.diagram.model.Dv(a, b)
	};
	oq.prototype.setFromNodeForLink = function(a, b, c) {
		var d = this.diagram.model;
		void 0 === c && (c = null);
		b = null !== b ? b.data : null;
		if(this.diagram.isTreePathToChildren) d.He(a.data, d.sa(b));
		else {
			var e = this.Yg;
			this.Yg = a;
			null !== c && d.He(c.data, void 0);
			d.He(b, d.sa(null !== a.toNode ? a.toNode.data : null));
			this.Yg = e
		}
	};
	oq.prototype.setToNodeForLink = function(a, b, c) {
		var d = this.diagram.model;
		void 0 === c && (c = null);
		b = null !== b ? b.data : null;
		if(this.diagram.isTreePathToChildren) {
			var e = this.Yg;
			this.Yg = a;
			null !== c && d.He(c.data, void 0);
			d.He(b, d.sa(null !== a.fromNode ? a.fromNode.data : null));
			this.Yg = e
		} else d.He(a.data, d.sa(b))
	};
	oq.prototype.removeDataForLink = function(a) {
		this.diagram.model.He(a.data, void 0)
	};
	oq.prototype.doModelChanged = function(a) {
		ri.prototype.doModelChanged.call(this, a);
		if(this.diagram) {
			var b = this.diagram;
			if(a.model === b.model) {
				var c = a.change;
				if(b.ca) {
					b.ca = !1;
					try {
						var d = a.modelChange;
						if("" !== d) {
							if(c === Ze) {
								if("nodeParentKey" === d) {
									var e = a.object,
										f = this.Mb(a.newValue),
										g = this.Ai(e);
									if(null !== this.Yg) null !== f && (this.Yg.data = e, this.Yg.category = this.getLinkCategoryForData(e));
									else if(null !== g) {
										var h = g.Bi();
										null !== h ? null === f ? b.remove(h) : b.isTreePathToChildren ? h.fromNode = f : h.toNode = f : pq(this, f,
											g)
									}
								} else if("parentLinkCategory" === d) {
									var k = this.Ai(a.object),
										l = a.newValue;
									if(null !== k && "string" === typeof l) {
										var m = k.Bi();
										null !== m && (m.category = l)
									}
								}
								b.isModified = !0
							}
						} else if(c === Ze) {
							var n = a.propertyName,
								p = a.object;
							p === b.model ? "nodeParentKeyProperty" === n && (b.undoManager.isUndoingRedoing || this.xd()) : this.updateDataBindings(p, n);
							b.isModified = !0
						}
					} finally {
						b.ca = !0
					}
				}
			}
		}
	};
	oq.prototype.updateRelationshipsFromData = function(a) {
		var b = a.data;
		if(null !== b) {
			var c = a.diagram;
			if(null !== c) {
				var d = c.model;
				a instanceof W && (b = d.Fi(b), b = c.Mb(b), d = a.og(), b !== d && (d = a.Bi(), null !== b ? null !== d ? c.isTreePathToChildren ? d.fromNode = b : d.toNode = b : pq(this, b, a) : null !== d && Cj(c, d, !1)))
			}
		}
	};
	oq.prototype.updateDataBindings = function(a, b) {
		ri.prototype.updateDataBindings.call(this, a, b);
		"string" === typeof b && null !== this.wc(a) && (a = this.Ic(a), null !== a && a.Da(b))
	};
	oq.prototype.resolveReferencesForData = function(a) {
		var b = this.diagram.model,
			c = b.sa(a);
		if(void 0 !== c) {
			var d = jq(b, c),
				e = this.wc(a);
			if(null !== d && null !== e) {
				for(d = d.iterator; d.next();) {
					var f = d.value;
					b.ic(f) && e instanceof W && b.Fi(f) === c && pq(this, e, this.Ai(f))
				}
				kq(b, c)
			}
			a = b.Fi(a);
			void 0 !== a && e instanceof W && (a = this.Mb(a), pq(this, a, e))
		}
	};
	oq.prototype.unresolveReferencesForPart = function(a) {
		var b = this.diagram.model;
		if(a instanceof W) {
			var c = b.sa(a.data),
				d = this.Ic(a.data);
			if(null !== d) {
				d.isSelected = !1;
				d.isHighlighted = !1;
				var e = d.layer;
				if(null !== e) {
					var f = e.zc(-1, d, !1);
					0 <= f && this.diagram.cb(ff, "parts", e, d, null, f, null);
					f = d.layerChanged;
					null !== f && f(d, e, null)
				}
			}
			d = this.diagram.isTreePathToChildren;
			for(a = a.linksConnected; a.next();) e = a.value, e = (d ? e.toNode : e.fromNode).data, b.ic(e) && lq(b, c, e)
		}
	};
	oq.prototype.insertLink = function(a, b, c) {
		b = this.diagram.model;
		var d = a,
			e = c;
		this.diagram.isTreePathToChildren || (d = c, e = a);
		return null !== d && null !== e ? (b.He(e.data, b.sa(d.data)), e.Bi()) : null
	};
	oq.className = "TreePartManager";

	function Z(a) {
		this.yt = ',\n  "insertedNodeKeys": ';
		this.ew = ',\n  "modifiedNodeData": ';
		this.At = ',\n  "removedNodeKeys": ';
		rb(this);
		this.cn = this.Ta = "";
		this.Lf = !1;
		this.l = {};
		this.Gc = [];
		this.mb = new Nb;
		this.ii = "key";
		this.Ck = this.gl = null;
		this.Um = this.Vm = !1;
		this.Fm = null;
		this.qj = "category";
		this.Ef = new Nb;
		this.au = new E;
		this.$g = !1;
		this.u = null;
		this.undoManager = new hf;
		void 0 !== a && (this.nodeDataArray = a)
	}
	Z.prototype.cloneProtected = function(a) {
		a.Ta = this.Ta;
		a.cn = this.cn;
		a.Lf = this.Lf;
		a.ii = this.ii;
		a.gl = this.gl;
		a.Ck = this.Ck;
		a.Vm = this.Vm;
		a.Um = this.Um;
		a.Fm = this.Fm;
		a.qj = this.qj
	};
	Z.prototype.copy = function() {
		var a = new this.constructor;
		this.cloneProtected(a);
		return a
	};
	t = Z.prototype;
	t.clear = function() {
		this.Gc = [];
		this.mb.clear();
		this.Ef.clear();
		this.undoManager.clear()
	};
	t.toString = function(a) {
		void 0 === a && (a = 0);
		if(1 < a) return this.oq();
		var b = ("" !== this.name ? this.name : "") + " Model";
		if(0 < a) {
			b += "\n node data:";
			a = this.nodeDataArray;
			for(var c = a.length, d = 0; d < c; d++) {
				var e = a[d];
				b += " " + this.sa(e) + ":" + Qa(e)
			}
		}
		return b
	};
	t.nk = function() {
		var a = "";
		"" !== this.name && (a += ',\n  "name": ' + this.quote(this.name));
		"" !== this.dataFormat && (a += ',\n  "dataFormat": ' + this.quote(this.dataFormat));
		this.isReadOnly && (a += ',\n  "isReadOnly": ' + this.isReadOnly);
		"key" !== this.nodeKeyProperty && "string" === typeof this.nodeKeyProperty && (a += ',\n  "nodeKeyProperty": ' + this.quote(this.nodeKeyProperty));
		this.copiesArrays && (a += ',\n  "copiesArrays": true');
		this.copiesArrayObjects && (a += ',\n  "copiesArrayObjects": true');
		"category" !== this.nodeCategoryProperty &&
			"string" === typeof this.nodeCategoryProperty && (a += ',\n  "nodeCategoryProperty": ' + this.quote(this.nodeCategoryProperty));
		return a
	};
	t.bq = function(a) {
		a.name && (this.name = a.name);
		a.dataFormat && (this.dataFormat = a.dataFormat);
		a.isReadOnly && (this.isReadOnly = a.isReadOnly);
		a.nodeKeyProperty && (this.nodeKeyProperty = a.nodeKeyProperty);
		a.copiesArrays && (this.copiesArrays = a.copiesArrays);
		a.copiesArrayObjects && (this.copiesArrayObjects = a.copiesArrayObjects);
		a.nodeCategoryProperty && (this.nodeCategoryProperty = a.nodeCategoryProperty)
	};

	function qq(a) {
		return ',\n  "modelData": ' + rq(a, a.modelData)
	}

	function sq(a, b) {
		b = b.modelData;
		Ea(b) && (a.jm(b), a.modelData = b)
	}
	t.Yv = function() {
		var a = this.modelData,
			b = !1,
			c;
		for(c in a)
			if(!tq(c, a[c])) {
				b = !0;
				break
			}
		a = "";
		b && (a = qq(this));
		return a + ',\n  "nodeDataArray": ' + uq(this, this.nodeDataArray, !0)
	};
	t.nv = function(a) {
		sq(this, a);
		a = a.nodeDataArray;
		Ga(a) && (this.jm(a), this.nodeDataArray = a)
	};

	function vq(a, b, c, d) {
		if(b === c) return !0;
		if(typeof b !== typeof c || "function" === typeof b || "function" === typeof c) return !1;
		if(Array.isArray(b) && Array.isArray(c)) {
			if(d.J(b) === c) return !0;
			d.add(b, c);
			if(b.length !== c.length) return !1;
			for(var e = 0; e < b.length; e++)
				if(!vq(a, b[e], c[e], d)) return !1;
			return !0
		}
		if(Ea(b) && Ea(c)) {
			if(d.J(b) === c) return !0;
			d.add(b, c);
			for(var f in b) {
				var g = b[f];
				if(!tq(f, g)) {
					var h = c[f];
					if(void 0 === h || !vq(a, g, h, d)) return !1
				}
			}
			for(e in c)
				if(f = c[e], !tq(e, f) && (g = b[e], void 0 === g || !vq(a, g, f, d))) return !1;
			return !0
		}
		return !1
	}

	function wq(a, b, c) {
		a[c] !== b[c] && A("Model.computeJsonDifference: Model." + c + ' is not the same in both models: "' + a[c] + '" and "' + b[c] + '"')
	}
	t.sq = function(a) {
		wq(this, a, "nodeKeyProperty");
		for(var b = new F, c = new F, d = (new F).addAll(this.mb.iteratorKeys), e = new Nb, f = a.nodeDataArray, g = 0; g < f.length; g++) {
			var h = f[g],
				k = a.sa(h);
			if(void 0 !== k) {
				d.remove(k);
				var l = this.lc(k);
				null === l ? (b.add(k), c.add(h)) : vq(this, l, h, e) || c.add(h)
			} else this.ct(h), k = this.sa(h), b.add(k), c.add(h)
		}
		f = "";
		vq(this, this.modelData, a.modelData, e) || (f += qq(this));
		0 < b.count && (f += this.yt + uq(this, b.La(), !0));
		0 < c.count && (f += this.ew + uq(this, c.La(), !0));
		0 < d.count && (f += this.At + uq(this, d.La(), !0));
		return f
	};
	t.Zw = function(a, b) {
		void 0 === b && (this.constructor === Z ? b = "go.Model" : b = xq(this, this));
		return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.nk() + this.sq(a) + "}"
	};
	t.oy = function(a, b) {
		return this.Zw(a, b)
	};
	t.Xv = function(a, b) {
		var c = this,
			d = !1,
			e = new F,
			f = new F,
			g = new F;
		a.changes.each(function(a) {
			a.model === c && ("nodeDataArray" === a.modelChange ? a.change === af ? e.add(a.newValue) : a.change === ff && g.add(a.oldValue) : c.ic(a.object) ? f.add(a.object) : c.modelData === a.object && a.change === Ze && (d = !0))
		});
		var h = new F;
		e.each(function(a) {
			h.add(c.sa(a));
			b || f.add(a)
		});
		var k = new F;
		g.each(function(a) {
			k.add(c.sa(a));
			b && f.add(a)
		});
		a = "";
		d && (a += qq(this));
		0 < h.count && (a += (b ? this.At : this.yt) + uq(this, h.La(), !0));
		0 < f.count && (a += this.ew + uq(this,
			f.La(), !0));
		0 < k.count && (a += (b ? this.yt : this.At) + uq(this, k.La(), !0));
		return a
	};
	t.mv = function(a) {
		sq(this, a);
		var b = a.insertedNodeKeys,
			c = a.modifiedNodeData,
			d = new Nb;
		if(Ga(c))
			for(var e = 0; e < c.length; e++) {
				var f = c[e],
					g = this.sa(f);
				void 0 !== g && null !== g && d.set(g, f)
			}
		if(Ga(b))
			for(e = b.length, f = 0; f < e; f++) {
				g = b[f];
				var h = this.lc(g);
				null === h && (h = (h = d.get(g)) ? h : this.copyNodeData({}), this.lq(h, g), this.lh(h))
			}
		if(Ga(c))
			for(b = c.length, d = 0; d < b; d++)
				if(e = c[d], f = this.sa(e), f = this.lc(f), null !== f)
					for(var k in e) "__gohashid" === k || k === this.nodeKeyProperty || this.Xj() && k === this.nodeIsGroupProperty || this.setDataProperty(f,
						k, e[k]);
		a = a.removedNodeKeys;
		if(Ga(a))
			for(c = a.length, k = 0; k < c; k++) b = this.lc(a[k]), null !== b && this.fq(b)
	};
	t.Ox = function(a, b) {
		a.change !== $e && A("Model.toIncrementalJson argument is not a Transaction ChangedEvent:" + a.toString());
		var c = a.object;
		if(!(a.isTransactionFinished && c instanceof gf)) return '{ "incremental": 0 }';
		void 0 === b && (this.constructor === Z ? b = "go.Model" : b = xq(this, this));
		return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.nk() + this.Xv(c, "FinishedUndo" === a.propertyName) + "}"
	};
	t.Iz = function(a, b) {
		return this.Ox(a, b)
	};
	t.oq = function(a) {
		void 0 === a && (this.constructor === Z ? a = "go.Model" : a = xq(this, this));
		return '{ "class": ' + this.quote(a) + this.nk() + this.Yv() + "}"
	};
	t.toJSON = function(a) {
		return this.oq(a)
	};
	t.Tw = function(a) {
		var b = null;
		if("string" === typeof a) try {
			b = w.JSON.parse(a)
		} catch(d) {} else "object" === typeof a ? b = a : A("Unable to modify a Model from: " + a);
		var c = b.incremental;
		"number" !== typeof c && A("Unable to apply non-incremental changes to Model: " + a);
		0 !== c && (this.Aa("applyIncrementalJson"), this.mv(b), this.bb("applyIncrementalJson"))
	};
	t.ly = function(a) {
		return this.Tw(a)
	};
	Z.constructGraphLinksModel = function() {
		A("Unable to construct a Model. Provided JSON requires GraphLinksModel, which is not loaded.");
		return new Z
	};
	t = Z.prototype;
	t.jm = function(a) {
		if(Ga(a))
			for(var b = a.length, c = 0; c < b; c++) {
				var d = a[c];
				if(Ea(d)) {
					var e = c;
					d = this.jm(d);
					Array.isArray(a) ? a[e] = d : A("Cannot replace an object in an HTMLCollection or NodeList at " + e)
				}
			} else if(Ea(a)) {
				for(c in a)
					if(e = a[c], Ea(e) && (e = this.jm(e), a[c] = e, "points" === c && Array.isArray(e))) {
						d = 0 === e.length % 2;
						for(var f = 0; f < e.length; f++)
							if("number" !== typeof e[f]) {
								d = !1;
								break
							}
						if(d) {
							d = new E;
							for(f = 0; f < e.length / 2; f++) d.add(new G(e[2 * f], e[2 * f + 1]));
							d.freeze();
							a[c] = d
						}
					}
				if("object" === typeof a) {
					c = a;
					e = a["class"];
					if("NaN" === e) c = NaN;
					else if("Date" === e) c = new Date(a.value);
					else if("go.Point" === e) c = new G(yq(a.x), yq(a.y));
					else if("go.Size" === e) c = new L(yq(a.width), yq(a.height));
					else if("go.Rect" === e) c = new M(yq(a.x), yq(a.y), yq(a.width), yq(a.height));
					else if("go.Margin" === e) c = new Pc(yq(a.top), yq(a.right), yq(a.bottom), yq(a.left));
					else if("go.Spot" === e) "string" === typeof a["enum"] ? c = Zd(a["enum"]) : c = new N(yq(a.x), yq(a.y), yq(a.offsetX), yq(a.offsetY));
					else if("go.Brush" === e) {
						if(c = new jl, c.type = sb(jl, a.type), "string" ===
							typeof a.color && (c.color = a.color), a.start instanceof N && (c.start = a.start), a.end instanceof N && (c.end = a.end), "number" === typeof a.startRadius && (c.startRadius = yq(a.startRadius)), "number" === typeof a.endRadius && (c.endRadius = yq(a.endRadius)), a = a.colorStops, Ea(a))
							for(b in a) c.addColorStop(parseFloat(b), a[b])
					} else "go.Geometry" === e ? (b = null, "string" === typeof a.path ? b = re(a.path) : b = new ee, b.type = sb(ee, a.type), "number" === typeof a.startX && (b.startX = yq(a.startX)), "number" === typeof a.startY && (b.startY = yq(a.startY)),
						"number" === typeof a.endX && (b.endX = yq(a.endX)), "number" === typeof a.endY && (b.endY = yq(a.endY)), a.spot1 instanceof N && (b.spot1 = a.spot1), a.spot2 instanceof N && (b.spot2 = a.spot2), c = b) : "go.EnumValue" === e && (b = a.classType, 0 === b.indexOf("go.") && (b = b.substr(3)), c = sb(zq[b] ? zq[b] : null, a.name));
					a = c
				}
			}
		return a
	};
	t.quote = function(a) {
		for(var b = "", c = a.length, d = 0; d < c; d++) {
			var e = a[d];
			if('"' === e || "\\" === e) b += "\\" + e;
			else if("\b" === e) b += "\\b";
			else if("\f" === e) b += "\\f";
			else if("\n" === e) b += "\\n";
			else if("\r" === e) b += "\\r";
			else if("\t" === e) b += "\\t";
			else {
				var f = a.charCodeAt(d);
				b = 16 > f ? b + ("\\u000" + a.charCodeAt(d).toString(16)) : 32 > f ? b + ("\\u00" + a.charCodeAt(d).toString(16)) : 8232 === f ? b + "\\u2028" : 8233 === f ? b + "\\u2029" : b + e
			}
		}
		return '"' + b + '"'
	};
	t.rm = function(a) {
		return void 0 === a ? "undefined" : null === a ? "null" : !0 === a ? "true" : !1 === a ? "false" : "string" === typeof a ? this.quote(a) : "number" === typeof a ? Infinity === a ? "9e9999" : -Infinity === a ? "-9e9999" : isNaN(a) ? '{"class":"NaN"}' : a.toString() : a instanceof Date ? '{"class":"Date", "value":"' + a.toJSON() + '"}' : a instanceof Number ? this.rm(a.valueOf()) : Ga(a) ? uq(this, a) : Ea(a) ? rq(this, a) : "function" === typeof a ? "null" : a.toString()
	};

	function uq(a, b, c) {
		void 0 === c && (c = !1);
		var d = b.length;
		if(0 >= d) return "[]";
		var e = new tb;
		e.add("[ ");
		c && 1 < d && e.add("\n");
		for(var f = 0; f < d; f++) {
			var g = b[f];
			void 0 !== g && (0 < f && (e.add(","), c && e.add("\n")), e.add(a.rm(g)))
		}
		c && 1 < d && e.add("\n");
		e.add(" ]");
		return e.toString()
	}

	function tq(a, b) {
		return void 0 === b || "__gohashid" === a || "_" === a[0] || "function" === typeof b ? !0 : !1
	}

	function Aq(a) {
		return isNaN(a) ? "NaN" : Infinity === a ? "9e9999" : -Infinity === a ? "-9e9999" : a
	}

	function rq(a, b) {
		var c = b;
		if(c instanceof G) b = {
			"class": "go.Point",
			x: Aq(c.x),
			y: Aq(c.y)
		};
		else if(c instanceof L) b = {
			"class": "go.Size",
			width: Aq(c.width),
			height: Aq(c.height)
		};
		else if(c instanceof M) b = {
			"class": "go.Rect",
			x: Aq(c.x),
			y: Aq(c.y),
			width: Aq(c.width),
			height: Aq(c.height)
		};
		else if(c instanceof Pc) b = {
			"class": "go.Margin",
			top: Aq(c.top),
			right: Aq(c.right),
			bottom: Aq(c.bottom),
			left: Aq(c.left)
		};
		else if(c instanceof N) c.pb() ? b = {
				"class": "go.Spot",
				x: Aq(c.x),
				y: Aq(c.y),
				offsetX: Aq(c.offsetX),
				offsetY: Aq(c.offsetY)
			} :
			b = {
				"class": "go.Spot",
				"enum": c.toString()
			};
		else if(c instanceof jl) {
			b = {
				"class": "go.Brush",
				type: c.type.name
			};
			if(c.type === ml) b.color = c.color;
			else if(c.type === pl || c.type === kl) b.start = c.start, b.end = c.end, c.type === kl && (0 !== c.startRadius && (b.startRadius = Aq(c.startRadius)), isNaN(c.endRadius) || (b.endRadius = Aq(c.endRadius)));
			if(null !== c.colorStops) {
				var d = {};
				for(c = c.colorStops.iterator; c.next();) d[c.key] = c.value;
				b.colorStops = d
			}
		} else c instanceof ee ? (b = {
			"class": "go.Geometry",
			type: c.type.name
		}, 0 !== c.startX && (b.startX =
			Aq(c.startX)), 0 !== c.startY && (b.startY = Aq(c.startY)), 0 !== c.endX && (b.endX = Aq(c.endX)), 0 !== c.endY && (b.endY = Aq(c.endY)), c.spot1.A(ed) || (b.spot1 = c.spot1), c.spot2.A(od) || (b.spot2 = c.spot2), c.type === fe && (b.path = ke(c))) : c instanceof D && (b = {
			"class": "go.EnumValue",
			classType: xq(a, c.classType),
			name: c.name
		});
		d = "{";
		c = !0;
		for(var e in b) {
			var f = cn(b, e);
			if(!tq(e, f))
				if(c ? c = !1 : d += ", ", d += '"' + e + '":', "points" === e && f instanceof E) {
					var g = "[";
					for(f = f.iterator; f.next();) {
						var h = f.value;
						1 < g.length && (g += ",");
						g += a.rm(h.x);
						g += ",";
						g += a.rm(h.y)
					}
					g += "]";
					d += g
				} else d += a.rm(f)
		}
		return d + "}"
	}

	function yq(a) {
		return "number" === typeof a ? a : "NaN" === a ? NaN : "9e9999" === a ? Infinity : "-9e9999" === a ? -Infinity : parseFloat(a)
	}
	t.kh = function(a) {
		this.au.add(a)
	};
	t.jk = function(a) {
		this.au.remove(a)
	};
	t.Fs = function(a) {
		this.skipsUndoManager || this.undoManager.Vu(a);
		for(var b = this.au, c = b.length, d = 0; d < c; d++) b.N(d)(a)
	};
	t.cb = function(a, b, c, d, e, f, g) {
		Bq(this, "", a, b, c, d, e, f, g)
	};
	t.g = function(a, b, c, d, e) {
		Bq(this, "", Ze, a, this, b, c, d, e)
	};
	t.ht = function(a, b, c, d, e, f) {
		Bq(this, "", Ze, b, a, c, d, e, f)
	};

	function Bq(a, b, c, d, e, f, g, h, k) {
		void 0 === h && (h = null);
		void 0 === k && (k = null);
		var l = new Ye;
		l.model = a;
		l.change = c;
		l.modelChange = b;
		l.propertyName = d;
		l.object = e;
		l.oldValue = f;
		l.oldParam = h;
		l.newValue = g;
		l.newParam = k;
		a.Fs(l)
	}
	t.Kj = function(a, b) {
		if(null !== a && a.model === this)
			if(a.change === Ze) Jj(a.object, a.propertyName, a.J(b));
			else if(a.change === af) {
			var c = a.newParam;
			if("nodeDataArray" === a.modelChange) {
				if(a = a.newValue, Ea(a) && "number" === typeof c) {
					var d = this.sa(a);
					b ? (this.Gc[c] === a && Ka(this.Gc, c), void 0 !== d && this.mb.remove(d)) : (this.Gc[c] !== a && Ia(this.Gc, c, a), void 0 !== d && this.mb.add(d, a))
				}
			} else "" === a.modelChange ? ((d = a.object) && !Ga(d) && a.propertyName && (d = cn(a.object, a.propertyName)), Ga(d) && "number" === typeof c && (a = a.newValue, b ?
				Ka(d, c) : Ia(d, c, a))) : A("unknown ChangedEvent.Insert modelChange: " + a.toString())
		} else a.change === ff ? (c = a.oldParam, "nodeDataArray" === a.modelChange ? (a = a.oldValue, Ea(a) && "number" === typeof c && (d = this.sa(a), b ? (this.Gc[c] !== a && Ia(this.Gc, c, a), void 0 !== d && this.mb.add(d, a)) : (this.Gc[c] === a && Ka(this.Gc, c), void 0 !== d && this.mb.remove(d)))) : "" === a.modelChange ? ((d = a.object) && !Ga(d) && a.propertyName && (d = cn(a.object, a.propertyName)), Ga(d) && "number" === typeof c && (a = a.oldValue, b ? Ia(d, c, a) : Ka(d, c))) : A("unknown ChangedEvent.Remove modelChange: " +
			a.toString())) : a.change !== $e && A("unknown ChangedEvent: " + a.toString())
	};
	t.Aa = function(a) {
		return this.undoManager.Aa(a)
	};
	t.bb = function(a) {
		return this.undoManager.bb(a)
	};
	t.tf = function() {
		return this.undoManager.tf()
	};
	Z.prototype.commit = function(a, b) {
		void 0 === b && (b = "");
		var c = this.skipsUndoManager;
		null === b && (this.skipsUndoManager = !0, b = "");
		this.undoManager.Aa(b);
		var d = !1;
		try {
			a(this), d = !0
		} finally {
			d ? this.undoManager.bb(b) : this.undoManager.tf(), this.skipsUndoManager = c
		}
	};
	t = Z.prototype;
	t.Da = function(a, b) {
		void 0 === b && (b = "");
		Bq(this, "SourceChanged", $e, b, a, null, null)
	};
	t.sa = function(a) {
		if(null !== a) {
			var b = this.ii;
			if("" !== b && (b = cn(a, b), void 0 !== b)) {
				if(gq(b)) return b;
				A("Key value for node data " + a + " is not a number or a string: " + b)
			}
		}
	};
	t.lq = function(a, b) {
		if(null !== a) {
			var c = this.ii;
			if("" !== c)
				if(this.ic(a)) {
					var d = cn(a, c);
					d !== b && null === this.lc(b) && (Jj(a, c, b), void 0 !== d && this.mb.remove(d), this.mb.add(b, a), Bq(this, "nodeKey", Ze, c, a, d, b), "string" === typeof c && this.Da(a, c), this.gq(d, b))
				} else Jj(a, c, b)
		}
	};

	function gq(a) {
		return "number" === typeof a || "string" === typeof a
	}
	t.ic = function(a) {
		var b = this.sa(a);
		return void 0 === b ? !1 : this.mb.J(b) === a
	};
	t.lc = function(a) {
		null === a && A("Model.findNodeDataForKey:key must not be null");
		return void 0 !== a && gq(a) ? this.mb.J(a) : null
	};
	t.ct = function(a) {
		if(null !== a) {
			var b = this.ii;
			if("" !== b) {
				var c = this.sa(a);
				if(void 0 === c || this.mb.contains(c)) {
					var d = this.gl;
					if(null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.mb.contains(c))) {
						Jj(a, b, c);
						return
					}
					if("string" === typeof c) {
						for(d = 2; this.mb.contains(c + d);) d++;
						Jj(a, b, c + d)
					} else if(void 0 === c || "number" === typeof c) {
						for(c = -this.mb.count - 1; this.mb.contains(c);) c--;
						Jj(a, b, c)
					}
				}
			}
		}
	};
	t.lh = function(a) {
		null !== a && (Fb(a), this.ic(a) || Zp(this, a, !0))
	};

	function Zp(a, b, c) {
		var d = a.sa(b);
		if(void 0 === d || a.mb.J(d) !== b) a.ct(b), d = a.sa(b), void 0 === d ? A("Model.makeNodeDataKeyUnique failed on " + b + ".  Data not added to Model.") : (a.mb.add(d, b), d = null, c && (d = a.Gc.length, Ia(a.Gc, d, b)), Bq(a, "nodeDataArray", af, "nodeDataArray", a, null, b, null, d), a.lm(b), a.km(b))
	}
	t.jy = function(a) {
		if(Ga(a))
			for(var b = a.length, c = 0; c < b; c++) this.lh(a[c]);
		else
			for(a = a.iterator; a.next();) this.lh(a.value)
	};
	t.fq = function(a) {
		null !== a && Yp(this, a, !0)
	};

	function Yp(a, b, c) {
		var d = a.sa(b);
		void 0 !== d && a.mb.remove(d);
		d = null;
		if(c) {
			a: if(c = a.Gc, Array.isArray(c)) d = c.indexOf(b);
				else {
					d = c.length;
					for(var e = 0; e < d; e++)
						if(c[e] === b) {
							d = e;
							break a
						}
					d = -1
				}if(0 > d) return;Ka(a.Gc, d)
		}
		Bq(a, "nodeDataArray", ff, "nodeDataArray", a, b, null, d, null);
		a.pq(b)
	}
	t.zz = function(a) {
		if(Ga(a))
			for(var b = a.length, c = 0; c < b; c++) this.fq(a[c]);
		else
			for(a = a.iterator; a.next();) this.fq(a.value)
	};
	t.gq = function(a, b) {
		void 0 !== b && (a = jq(this, a), a instanceof F && this.Ef.add(b, a))
	};
	t.Tv = function() {};
	t.lm = function() {};
	t.km = function() {};
	t.pq = function() {};

	function lq(a, b, c) {
		if(void 0 !== b) {
			var d = a.Ef.J(b);
			null === d && (d = new F, a.Ef.add(b, d));
			d.add(c)
		}
	}

	function kq(a, b, c) {
		if(void 0 !== b) {
			var d = a.Ef.J(b);
			d instanceof F && (void 0 === c || null === c ? a.Ef.remove(b) : (d.remove(c), 0 === d.count && a.Ef.remove(b)))
		}
	}

	function jq(a, b) {
		if(void 0 === b) return null;
		a = a.Ef.J(b);
		return a instanceof F ? a : null
	}
	t.Cu = function(a) {
		void 0 === a ? this.Ef.clear() : this.Ef.remove(a)
	};
	Z.prototype.copyNodeData = function(a) {
		if(null === a) return null;
		var b = this.Ck;
		a = null !== b ? b(a, this) : Cq(this, a, !0);
		Ea(a) && rb(a);
		return a
	};

	function Cq(a, b, c) {
		if(a.copiesArrays && Array.isArray(b)) {
			var d = [];
			for(c = 0; c < b.length; c++) {
				var e = Cq(a, b[c], a.copiesArrayObjects);
				d.push(e)
			}
			rb(d);
			return d
		}
		if(c && Ea(b)) {
			c = (c = b.constructor) ? new c : {};
			for(d in b)
				if("__gohashid" !== d) {
					e = cn(b, d);
					var f = xq(a, e);
					"GraphObject" === f || "Diagram" === f || "Layer" === f || "RowColumnDefinition" === f || "AnimationManager" === f || "Tool" === f || "CommandHandler" === f || "Layout" === f || "InputEvent" === f || "DiagramEvent" === f || e instanceof Z || e instanceof hf || e instanceof gf || e instanceof Ye ? Jj(c,
						d, e) : (e = Cq(a, e, !1), Jj(c, d, e))
				}
			rb(c);
			return c
		}
		return b instanceof G ? b.copy() : b instanceof L ? b.copy() : b instanceof M ? b.copy() : b instanceof N ? b.copy() : b instanceof Pc ? b.copy() : b
	}
	Z.prototype.setDataProperty = function(a, b, c) {
		if(this.ic(a))
			if(b === this.nodeKeyProperty) this.lq(a, c);
			else {
				if(b === this.nodeCategoryProperty) {
					this.kq(a, c);
					return
				}
			}
		else !Dq && a instanceof P && (Dq = !0, Ba('Model.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), Ba("  Is that really your intent?"));
		var d = cn(a, b);
		d !== c && (Jj(a, b, c), this.ht(a, b, d, c))
	};
	t = Z.prototype;
	t.set = function(a, b, c) {
		this.setDataProperty(a, b, c)
	};
	t.gy = function(a, b) {
		this.Vs(a, -1, b)
	};
	t.Vs = function(a, b, c) {
		0 > b && (b = a.length);
		Ia(a, b, c);
		Bq(this, "", af, "", a, null, c, null, b)
	};
	t.ov = function(a, b) {
		void 0 === b && (b = -1);
		a === this.Gc && A("Model.removeArrayItem should not be called on the Model.nodeDataArray"); - 1 === b && (b = a.length - 1);
		var c = a[b];
		Ka(a, b);
		Bq(this, "", ff, "", a, c, null, b, null)
	};
	t.Ts = function(a) {
		if(null === a) return "";
		var b = this.qj;
		if("" === b) return "";
		b = cn(a, b);
		if(void 0 === b) return "";
		if("string" === typeof b) return b;
		A("getCategoryForNodeData found a non-string category for " + a + ": " + b);
		return ""
	};
	t.kq = function(a, b) {
		if(null !== a) {
			var c = this.qj;
			if("" !== c)
				if(this.ic(a)) {
					var d = cn(a, c);
					void 0 === d && (d = "");
					d !== b && (Jj(a, c, b), Bq(this, "nodeCategory", Ze, c, a, d, b))
				} else Jj(a, c, b)
		}
	};
	t.$l = function() {
		return !1
	};
	t.Xj = function() {
		return !1
	};

	function Ho(a) {
		return void 0 !== a.linkFromKeyProperty && void 0 !== a.mx && void 0 !== a.zv && void 0 !== a.linkToKeyProperty && void 0 !== a.px && void 0 !== a.Iv && void 0 !== a.linkFromPortIdProperty && void 0 !== a.nx && void 0 !== a.Av && void 0 !== a.linkToPortIdProperty && void 0 !== a.qx && void 0 !== a.Jv && void 0 !== a.linkLabelKeysProperty && void 0 !== a.nf && void 0 !== a.qt && void 0 !== a.Ds && void 0 !== a.qv && void 0 !== a.linkDataArray && void 0 !== a.linkKeyProperty && void 0 !== a.xc && void 0 !== a.pt && void 0 !== a.zi && void 0 !== a.am && void 0 !== a.ze && void 0 !==
			a.Ij && void 0 !== a.Pw && void 0 !== a.im && void 0 !== a.Gx && void 0 !== a.linkCategoryProperty && void 0 !== a.Ss && void 0 !== a.jq
	}

	function Og(a) {
		return void 0 !== a.linkCategoryProperty && void 0 !== a.getLinkCategoryForData && void 0 !== a.setLinkCategoryForData
	}

	function Jk(a) {
		return void 0 !== a.bv && void 0 !== a.Wy && void 0 !== a.Bv
	}
	Z.initDiagramModel = function() {
		return new Z
	};

	function xq(a, b) {
		if("function" === typeof b) {
			if(b.className) return b.className;
			if(b.name) return b.name
		} else if("object" === typeof b && null !== b && b.constructor) return xq(a, b.constructor);
		return typeof b
	}

	function cn(a, b) {
		if(!a || !b) return null;
		try {
			if("function" === typeof b) var c = b(a);
			else "function" === typeof a.getAttribute ? (c = a.getAttribute(b), null === c && (c = void 0)) : c = a[b]
		} catch(d) {}
		return c
	}

	function Jj(a, b, c) {
		if(a && b) try {
			"function" === typeof b ? b(a, c) : "function" === typeof a.setAttribute ? a.setAttribute(b, c) : a[b] = c
		} catch(d) {}
	}
	oa.Object.defineProperties(Z.prototype, {
		name: {
			get: function() {
				return this.Ta
			},
			set: function(a) {
				var b = this.Ta;
				b !== a && (this.Ta = a, this.g("name", b, a))
			}
		},
		dataFormat: {
			get: function() {
				return this.cn
			},
			set: function(a) {
				var b = this.cn;
				b !== a && (this.cn = a, this.g("dataFormat", b, a))
			}
		},
		isReadOnly: {
			get: function() {
				return this.Lf
			},
			set: function(a) {
				var b = this.Lf;
				b !== a && (this.Lf = a, this.g("isReadOnly", b, a))
			}
		},
		modelData: {
			get: function() {
				return this.l
			},
			set: function(a) {
				var b = this.l;
				b !== a && (this.l = a, this.g("modelData", b, a), this.Da(a))
			}
		},
		undoManager: {
			get: function() {
				return this.u
			},
			set: function(a) {
				var b = this.u;
				b !== a && (null !== b && b.Hx(this), this.u = a, null !== a && a.Qw(this))
			}
		},
		skipsUndoManager: {
			get: function() {
				return this.$g
			},
			set: function(a) {
				this.$g = a
			}
		},
		nodeKeyProperty: {
			get: function() {
				return this.ii
			},
			set: function(a) {
				var b = this.ii;
				b !== a && ("" === a && A("Model.nodeKeyProperty may not be the empty string"), 0 < this.mb.count && A("Cannot set Model.nodeKeyProperty when there is existing node data"), this.ii = a, this.g("nodeKeyProperty", b, a))
			}
		},
		makeUniqueKeyFunction: {
			get: function() {
				return this.gl
			},
			set: function(a) {
				var b = this.gl;
				b !== a && (this.gl = a, this.g("makeUniqueKeyFunction", b, a))
			}
		},
		nodeDataArray: {
			get: function() {
				return this.Gc
			},
			set: function(a) {
				var b = this.Gc;
				if(b !== a) {
					this.mb.clear();
					this.Tv();
					for(var c = a.length, d = 0; d < c; d++) {
						var e = a[d];
						if(!Ea(e)) {
							A("Model.nodeDataArray must only contain Objects, not: " + e);
							return
						}
						Fb(e)
					}
					this.Gc = a;
					d = new E;
					for(e = 0; e < c; e++) {
						var f = a[e],
							g = this.sa(f);
						void 0 === g ? d.add(f) : null !== this.mb.J(g) ? d.add(f) : this.mb.add(g, f)
					}
					for(d = d.iterator; d.next();) e = d.value, this.ct(e), f = this.sa(e), void 0 !== f && this.mb.add(f, e);
					Bq(this, "nodeDataArray", Ze, "nodeDataArray", this, b, a);
					for(b = 0; b < c; b++) d = a[b], this.lm(d), this.km(d);
					this.Cu();
					Array.isArray(a) || (this.isReadOnly = !0)
				}
			}
		},
		copyNodeDataFunction: {
			get: function() {
				return this.Ck
			},
			set: function(a) {
				var b = this.Ck;
				b !== a && (this.Ck = a, this.g("copyNodeDataFunction", b, a))
			}
		},
		copiesArrays: {
			get: function() {
				return this.Vm
			},
			set: function(a) {
				var b = this.Vm;
				b !== a && (this.Vm = a, this.g("copiesArrays", b, a))
			}
		},
		copiesArrayObjects: {
			get: function() {
				return this.Um
			},
			set: function(a) {
				var b = this.Um;
				b !== a && (this.Um = a, this.g("copiesArrayObjects", b, a))
			}
		},
		afterCopyFunction: {
			get: function() {
				return this.Fm
			},
			set: function(a) {
				var b = this.Fm;
				b !== a && (this.Fm = a, this.g("afterCopyFunction", b, a))
			}
		},
		nodeCategoryProperty: {
			get: function() {
				return this.qj
			},
			set: function(a) {
				var b = this.qj;
				b !== a && (this.qj = a, this.g("nodeCategoryProperty", b, a))
			}
		}
	});
	oa.Object.defineProperties(Z, {
		type: {
			get: function() {
				return "Model"
			}
		}
	});
	Z.prototype.setCategoryForNodeData = Z.prototype.kq;
	Z.prototype.getCategoryForNodeData = Z.prototype.Ts;
	Z.prototype.removeArrayItem = Z.prototype.ov;
	Z.prototype.insertArrayItem = Z.prototype.Vs;
	Z.prototype.addArrayItem = Z.prototype.gy;
	Z.prototype.set = Z.prototype.set;
	Z.prototype.clearUnresolvedReferences = Z.prototype.Cu;
	Z.prototype.removeNodeDataCollection = Z.prototype.zz;
	Z.prototype.removeNodeData = Z.prototype.fq;
	Z.prototype.addNodeDataCollection = Z.prototype.jy;
	Z.prototype.addNodeData = Z.prototype.lh;
	Z.prototype.makeNodeDataKeyUnique = Z.prototype.ct;
	Z.prototype.findNodeDataForKey = Z.prototype.lc;
	Z.prototype.containsNodeData = Z.prototype.ic;
	Z.prototype.setKeyForNodeData = Z.prototype.lq;
	Z.prototype.getKeyForNodeData = Z.prototype.sa;
	Z.prototype.updateTargetBindings = Z.prototype.Da;
	Z.prototype.commit = Z.prototype.commit;
	Z.prototype.rollbackTransaction = Z.prototype.tf;
	Z.prototype.commitTransaction = Z.prototype.bb;
	Z.prototype.startTransaction = Z.prototype.Aa;
	Z.prototype.raiseDataChanged = Z.prototype.ht;
	Z.prototype.raiseChanged = Z.prototype.g;
	Z.prototype.raiseChangedEvent = Z.prototype.cb;
	Z.prototype.removeChangedListener = Z.prototype.jk;
	Z.prototype.addChangedListener = Z.prototype.kh;
	Z.prototype.writeJsonValue = Z.prototype.rm;
	Z.prototype.replaceJsonObjects = Z.prototype.jm;
	Z.prototype.applyIncrementalJSON = Z.prototype.ly;
	Z.prototype.applyIncrementalJson = Z.prototype.Tw;
	Z.prototype.toJSON = Z.prototype.toJSON;
	Z.prototype.toJson = Z.prototype.oq;
	Z.prototype.toIncrementalJSON = Z.prototype.Iz;
	Z.prototype.toIncrementalJson = Z.prototype.Ox;
	Z.prototype.computeJSONDifference = Z.prototype.oy;
	Z.prototype.computeJsonDifference = Z.prototype.Zw;
	Z.prototype.clear = Z.prototype.clear;
	var Dq = !1,
		zq = {};
	Z.className = "Model";
	Z.fromJSON = Z.fromJson = function(a, b) {
		void 0 === b && (b = null);
		var c = null;
		if("string" === typeof a) try {
			c = w.JSON.parse(a)
		} catch(f) {} else "object" === typeof a ? c = a : A("Unable to construct a Model from: " + a);
		if(null === b) {
			a = null;
			var d = c["class"];
			if("string" === typeof d) try {
				var e = null;
				0 === d.indexOf("go.") ? (d = d.substr(3), e = zq[d] ? zq[d] : null) : (e = zq[d] ? zq[d] : null, void 0 === e && (e = w[d]));
				"function" === typeof e && (a = new e)
			} catch(f) {}
			null === a || a instanceof Z ? b = a : A("Unable to construct a Model of declared class: " + c["class"])
		}
		null ===
			b && (b = Z.constructGraphLinksModel());
		b.bq(c);
		b.nv(c);
		return b
	};
	Z.safePropertyValue = cn;
	Z.safePropertySet = Jj;
	zq.Brush = jl;
	zq.ChangedEvent = Ye;
	zq.Geometry = ee;
	zq.GraphObject = P;
	zq.Margin = Pc;
	zq.Panel = Y;
	zq.Point = G;
	zq.Rect = M;
	zq.Size = L;
	zq.Spot = N;
	zq.Transaction = gf;
	zq.UndoManager = hf;

	function Bi(a, b, c) {
		rb(this);
		this.v = !1;
		void 0 === a && (a = "");
		void 0 === b && (b = a);
		void 0 === c && (c = null);
		this.l = -1;
		this.Sd = null;
		this.Il = a;
		this.Hl = this.pp = 0;
		this.rs = null;
		this.On = !1;
		this.wl = b;
		this.Tm = c;
		this.ko = Eq;
		this.Nm = null;
		this.Ut = new F
	}
	Bi.prototype.copy = function() {
		var a = new Bi;
		a.Il = this.Il;
		a.pp = this.pp;
		a.Hl = this.Hl;
		a.rs = this.rs;
		a.On = this.On;
		a.wl = this.wl;
		a.Tm = this.Tm;
		a.ko = this.ko;
		a.Nm = this.Nm;
		return a
	};
	t = Bi.prototype;
	t.ib = function(a) {
		a.classType === Bi && (this.mode = a)
	};
	t.toString = function() {
		return "Binding(" + this.targetProperty + ":" + this.sourceProperty + (-1 !== this.Oi ? " " + this.Oi : "") + " " + this.mode.name + ")"
	};
	t.freeze = function() {
		this.v = !0;
		return this
	};
	t.ha = function() {
		this.v = !1;
		return this
	};
	t.yx = function(a) {
		void 0 === a && (a = null);
		this.mode = Xm;
		this.backConverter = a;
		return this
	};
	t.Zp = function(a) {
		void 0 === a && (a = "");
		this.sourceName = a;
		this.isToModel = !1;
		return this
	};
	t.uz = function() {
		this.sourceName = null;
		this.isToModel = !0;
		return this
	};

	function Xk(a, b, c) {
		a = a.sourceName;
		return null === a || "" === a ? b : "/" === a ? c.part : "." === a ? c : ".." === a ? c.panel : b.Ya(a)
	}
	t.Uv = function(a, b, c) {
		var d = this.wl;
		if(void 0 === c || "" === d || d === c) {
			c = this.Il;
			var e = this.Tm;
			if(null === e && "" === c) Ba("Binding error: target property is the empty string: " + this.toString());
			else {
				var f = b;
				"" !== d && (f = cn(b, d));
				if(void 0 !== f)
					if(null === e) "" !== c && Jj(a, c, f);
					else try {
						if("" !== c) {
							var g = e(f, a);
							Jj(a, c, g)
						} else e(f, a)
					} catch(h) {}
			}
		}
	};
	t.rq = function(a, b, c, d) {
		if(this.ko === Xm) {
			var e = this.Il;
			if(void 0 === c || e === c) {
				c = this.wl;
				var f = this.Nm,
					g = a;
				"" !== e && (g = cn(a, e));
				if(void 0 !== g && !this.Ut.contains(a)) try {
					this.Ut.add(a);
					var h = null !== d ? d.diagram : null,
						k = null !== h ? h.model : null;
					if(null === f)
						if("" !== c) null !== k ? k.setDataProperty(b, c, g) : Jj(b, c, g);
						else {
							if(null !== k && null !== d && 0 <= d.itemIndex && null !== d.panel && Array.isArray(d.panel.itemArray)) {
								var l = d.itemIndex,
									m = d.panel.itemArray;
								k.ov(m, l);
								k.Vs(m, l, g)
							}
						}
					else try {
						if("" !== c) {
							var n = f(g, b, k);
							null !== k ? k.setDataProperty(b,
								c, n) : Jj(b, c, n)
						} else {
							var p = f(g, b, k);
							if(void 0 !== p && null !== k && null !== d && 0 <= d.itemIndex && null !== d.panel && Array.isArray(d.panel.itemArray)) {
								var q = d.itemIndex,
									r = d.panel.itemArray;
								k.ov(r, q);
								k.Vs(r, q, p)
							}
						}
					} catch(u) {}
				} finally {
					this.Ut.remove(a)
				}
			}
		}
	};
	oa.Object.defineProperties(Bi.prototype, {
		Oi: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.v && za(this);
				this.l = a
			}
		},
		targetProperty: {
			get: function() {
				return this.Il
			},
			set: function(a) {
				this.v && za(this);
				this.Il = a
			}
		},
		sourceName: {
			get: function() {
				return this.rs
			},
			set: function(a) {
				this.v && za(this);
				this.rs = a;
				null !== a && (this.On = !1)
			}
		},
		isToModel: {
			get: function() {
				return this.On
			},
			set: function(a) {
				this.v &&
					za(this);
				this.On = a
			}
		},
		sourceProperty: {
			get: function() {
				return this.wl
			},
			set: function(a) {
				this.v && za(this);
				this.wl = a
			}
		},
		converter: {
			get: function() {
				return this.Tm
			},
			set: function(a) {
				this.v && za(this);
				this.Tm = a
			}
		},
		backConverter: {
			get: function() {
				return this.Nm
			},
			set: function(a) {
				this.v && za(this);
				this.Nm = a
			}
		},
		mode: {
			get: function() {
				return this.ko
			},
			set: function(a) {
				this.v && za(this);
				this.ko = a
			}
		}
	});
	Bi.prototype.updateSource = Bi.prototype.rq;
	Bi.prototype.updateTarget = Bi.prototype.Uv;
	Bi.prototype.ofModel = Bi.prototype.uz;
	Bi.prototype.ofObject = Bi.prototype.Zp;
	Bi.prototype.makeTwoWay = Bi.prototype.yx;
	var Eq = new D(Bi, "OneWay", 1),
		Xm = new D(Bi, "TwoWay", 2);
	Bi.className = "Binding";
	Bi.parseEnum = function(a, b) {
		return function(c) {
			c = sb(a, c);
			return null === c ? b : c
		}
	};
	Bi.toString = Qa;
	Bi.OneWay = Eq;
	Bi.TwoWay = Xm;

	function Fq(a, b) {
		Z.call(this);
		this.xt = ',\n  "insertedLinkKeys": ';
		this.dw = ',\n  "modifiedLinkData": ';
		this.zt = ',\n  "removedLinkKeys": ';
		this.Qc = [];
		this.Mf = new F;
		this.Ab = new Nb;
		this.ei = "";
		this.Si = this.Bk = this.hl = null;
		this.Te = "from";
		this.Ue = "to";
		this.nj = this.mj = "";
		this.lj = "category";
		this.Kd = "";
		this.ll = "isGroup";
		this.pe = "group";
		this.Wm = !1;
		void 0 !== a && (this.nodeDataArray = a);
		void 0 !== b && (this.linkDataArray = b)
	}
	na(Fq, Z);
	Fq.initDiagramModel = Z.initDiagramModel;
	Fq.constructGraphLinksModel = Z.constructGraphLinksModel;
	Fq.prototype.cloneProtected = function(a) {
		Z.prototype.cloneProtected.call(this, a);
		a.ei = this.ei;
		a.hl = this.hl;
		a.Bk = this.Bk;
		a.Te = this.Te;
		a.Ue = this.Ue;
		a.mj = this.mj;
		a.nj = this.nj;
		a.lj = this.lj;
		a.Kd = this.Kd;
		a.ll = this.ll;
		a.pe = this.pe;
		a.Wm = this.Wm
	};
	t = Fq.prototype;
	t.clear = function() {
		Z.prototype.clear.call(this);
		this.Qc = [];
		this.Ab.clear();
		this.Mf.clear()
	};
	t.toString = function(a) {
		void 0 === a && (a = 0);
		if(2 <= a) return this.oq();
		var b = ("" !== this.name ? this.name : "") + " GraphLinksModel";
		if(0 < a) {
			b += "\n node data:";
			a = this.nodeDataArray;
			var c = a.length,
				d;
			for(d = 0; d < c; d++) {
				var e = a[d];
				b += " " + this.sa(e) + ":" + Qa(e)
			}
			b += "\n link data:";
			a = this.linkDataArray;
			c = a.length;
			for(d = 0; d < c; d++) e = a[d], b += " " + eq(this, e, !0) + "--\x3e" + eq(this, e, !1)
		}
		return b
	};
	t.nk = function() {
		var a = Z.prototype.nk.call(this),
			b = "";
		"category" !== this.linkCategoryProperty && "string" === typeof this.linkCategoryProperty && (b += ',\n  "linkCategoryProperty": ' + this.quote(this.linkCategoryProperty));
		"" !== this.linkKeyProperty && "string" === typeof this.linkKeyProperty && (b += ',\n  "linkKeyProperty": ' + this.quote(this.linkKeyProperty));
		"from" !== this.linkFromKeyProperty && "string" === typeof this.linkFromKeyProperty && (b += ',\n  "linkFromKeyProperty": ' + this.quote(this.linkFromKeyProperty));
		"to" !==
		this.linkToKeyProperty && "string" === typeof this.linkToKeyProperty && (b += ',\n  "linkToKeyProperty": ' + this.quote(this.linkToKeyProperty));
		"" !== this.linkFromPortIdProperty && "string" === typeof this.linkFromPortIdProperty && (b += ',\n  "linkFromPortIdProperty": ' + this.quote(this.linkFromPortIdProperty));
		"" !== this.linkToPortIdProperty && "string" === typeof this.linkToPortIdProperty && (b += ',\n  "linkToPortIdProperty": ' + this.quote(this.linkToPortIdProperty));
		"" !== this.linkLabelKeysProperty && "string" === typeof this.linkLabelKeysProperty &&
			(b += ',\n  "linkLabelKeysProperty": ' + this.quote(this.linkLabelKeysProperty));
		"isGroup" !== this.nodeIsGroupProperty && "string" === typeof this.nodeIsGroupProperty && (b += ',\n  "nodeIsGroupProperty": ' + this.quote(this.nodeIsGroupProperty));
		"group" !== this.nodeGroupKeyProperty && "string" === typeof this.nodeGroupKeyProperty && (b += ',\n  "nodeGroupKeyProperty": ' + this.quote(this.nodeGroupKeyProperty));
		return a + b
	};
	t.bq = function(a) {
		Z.prototype.bq.call(this, a);
		a.linkKeyProperty && (this.linkKeyProperty = a.linkKeyProperty);
		a.linkFromKeyProperty && (this.linkFromKeyProperty = a.linkFromKeyProperty);
		a.linkToKeyProperty && (this.linkToKeyProperty = a.linkToKeyProperty);
		a.linkFromPortIdProperty && (this.linkFromPortIdProperty = a.linkFromPortIdProperty);
		a.linkToPortIdProperty && (this.linkToPortIdProperty = a.linkToPortIdProperty);
		a.linkCategoryProperty && (this.linkCategoryProperty = a.linkCategoryProperty);
		a.linkLabelKeysProperty && (this.linkLabelKeysProperty =
			a.linkLabelKeysProperty);
		a.nodeIsGroupProperty && (this.nodeIsGroupProperty = a.nodeIsGroupProperty);
		a.nodeGroupKeyProperty && (this.nodeGroupKeyProperty = a.nodeGroupKeyProperty)
	};
	t.Yv = function() {
		var a = Z.prototype.Yv.call(this),
			b = ',\n  "linkDataArray": ' + uq(this, this.linkDataArray, !0);
		return a + b
	};
	t.nv = function(a) {
		Z.prototype.nv.call(this, a);
		a = a.linkDataArray;
		Array.isArray(a) && (this.jm(a), this.linkDataArray = a)
	};
	t.sq = function(a) {
		if(!(a instanceof Fq)) return A("Model.computeJsonDifference: newmodel must be a GraphLinksModel"), "";
		var b = Z.prototype.sq.call(this, a);
		wq(this, a, "linkKeyProperty");
		wq(this, a, "linkFromKeyProperty");
		wq(this, a, "linkToKeyProperty");
		wq(this, a, "linkLabelKeysProperty");
		wq(this, a, "nodeIsGroupProperty");
		wq(this, a, "nodeGroupKeyProperty");
		for(var c = new F, d = new F, e = (new F).addAll(this.Ab.iteratorKeys), f = new Nb, g = a.linkDataArray, h = 0; h < g.length; h++) {
			var k = g[h],
				l = a.xc(k);
			if(void 0 !== l) {
				e.remove(l);
				var m = this.zi(l);
				null === m ? (c.add(l), d.add(k)) : vq(this, m, k, f) || d.add(k)
			} else this.am(k), l = this.xc(k), c.add(l), d.add(k)
		}
		a = b;
		0 < c.count && (a += this.xt + uq(this, c.La(), !0));
		0 < d.count && (a += this.dw + uq(this, d.La(), !0));
		0 < e.count && (a += this.zt + uq(this, e.La(), !0));
		return a
	};
	t.Xv = function(a, b) {
		var c = Z.prototype.Xv.call(this, a, b),
			d = this,
			e = new F,
			f = new F,
			g = new F;
		a.changes.each(function(a) {
			a.model === d && ("linkDataArray" === a.modelChange ? a.change === af ? e.add(a.newValue) : a.change === ff && g.add(a.oldValue) : d.ze(a.object) && f.add(a.object))
		});
		var h = new F;
		e.each(function(a) {
			h.add(d.xc(a));
			b || f.add(a)
		});
		var k = new F;
		g.each(function(a) {
			k.add(d.xc(a));
			b && f.add(a)
		});
		a = c;
		0 < h.count && (a += (b ? this.zt : this.xt) + uq(this, h.La(), !0));
		0 < f.count && (a += this.dw + uq(this, f.La(), !0));
		0 < k.count && (a += (b ? this.xt :
			this.zt) + uq(this, k.La(), !0));
		return a
	};
	t.mv = function(a) {
		Z.prototype.mv.call(this, a);
		var b = a.insertedLinkKeys;
		if(Array.isArray(b))
			for(var c = b.length, d = 0; d < c; d++) {
				var e = b[d],
					f = this.zi(e);
				null === f && (f = this.Ip({}), this.pt(f, e), this.Ij(f))
			}
		b = a.modifiedLinkData;
		if(Array.isArray(b))
			for(c = b.length, d = 0; d < c; d++)
				if(e = b[d], f = this.xc(e), f = this.zi(f), null !== f)
					for(var g in e) "__gohashid" !== g && g !== this.linkKeyProperty && this.setDataProperty(f, g, e[g]);
		a = a.removedLinkKeys;
		if(Array.isArray(a))
			for(g = a.length, b = 0; b < g; b++) c = this.zi(a[b]), null !== c && this.im(c)
	};
	t.Kj = function(a, b) {
		if(a.change === af) {
			var c = a.newParam;
			if("linkDataArray" === a.modelChange) {
				a = a.newValue;
				if(Ea(a) && "number" === typeof c) {
					var d = this.xc(a);
					b ? (this.Mf.remove(a), this.Qc[c] === a && this.Qc.splice(c, 1), void 0 !== d && this.Ab.remove(d)) : (this.Mf.add(a), this.Qc[c] !== a && this.Qc.splice(c, 0, a), void 0 !== d && this.Ab.add(d, a))
				}
				return
			}
			if("linkLabelKeys" === a.modelChange) {
				d = this.nf(a.object);
				Array.isArray(d) && "number" === typeof c && (b ? (c = d.indexOf(a.newValue), 0 <= c && d.splice(c, 1)) : 0 > d.indexOf(a.newValue) && d.splice(c,
					0, a.newValue));
				return
			}
		} else if(a.change === ff) {
			c = a.oldParam;
			if("linkDataArray" === a.modelChange) {
				a = a.oldValue;
				Ea(a) && "number" === typeof c && (d = this.xc(a), b ? (this.Mf.add(a), this.Qc[c] !== a && this.Qc.splice(c, 0, a), void 0 !== d && this.Ab.add(d, a)) : (this.Mf.remove(a), this.Qc[c] === a && this.Qc.splice(c, 1), void 0 !== d && this.Ab.remove(d)));
				return
			}
			if("linkLabelKeys" === a.modelChange) {
				d = this.nf(a.object);
				Array.isArray(d) && "number" === typeof c && (b ? 0 > d.indexOf(a.newValue) && d.splice(c, 0, a.newValue) : (c = d.indexOf(a.newValue),
					0 <= c && d.splice(c, 1)));
				return
			}
		}
		Z.prototype.Kj.call(this, a, b)
	};
	t.bm = function(a) {
		if(void 0 !== a) {
			var b = this.Si;
			if(null !== b) {
				var c = this.lc(a);
				null === c && (c = this.copyNodeData(b), Jj(c, this.nodeKeyProperty, a), this.lh(c))
			}
			return a
		}
	};
	t.mx = function(a) {
		return eq(this, a, !0)
	};
	t.zv = function(a, b) {
		mq(this, a, b, !0)
	};
	t.px = function(a) {
		return eq(this, a, !1)
	};
	t.Iv = function(a, b) {
		mq(this, a, b, !1)
	};

	function eq(a, b, c) {
		if(null !== b && (a = c ? a.Te : a.Ue, "" !== a && (a = cn(b, a), void 0 !== a))) {
			if(gq(a)) return a;
			A((c ? "FromKey" : "ToKey") + " value for link data " + b + " is not a number or a string: " + a)
		}
	}

	function mq(a, b, c, d) {
		null === c && (c = void 0);
		if(null !== b) {
			var e = d ? a.Te : a.Ue;
			if("" !== e)
				if(c = a.bm(c), a.ze(b)) {
					var f = cn(b, e);
					f !== c && (kq(a, f, b), Jj(b, e, c), null === a.lc(c) && lq(a, c, b), Bq(a, d ? "linkFromKey" : "linkToKey", Ze, e, b, f, c), "string" === typeof e && a.Da(b, e))
				} else Jj(b, e, c)
		}
	}
	t.nx = function(a) {
		return dq(this, a, !0)
	};
	t.Av = function(a, b) {
		nq(this, a, b, !0)
	};
	t.qx = function(a) {
		return dq(this, a, !1)
	};
	t.Jv = function(a, b) {
		nq(this, a, b, !1)
	};

	function dq(a, b, c) {
		if(null === b) return "";
		a = c ? a.mj : a.nj;
		if("" === a) return "";
		b = cn(b, a);
		return void 0 === b ? "" : b
	}

	function nq(a, b, c, d) {
		if(null !== b) {
			var e = d ? a.mj : a.nj;
			if("" !== e)
				if(a.ze(b)) {
					var f = cn(b, e);
					void 0 === f && (f = "");
					f !== c && (Jj(b, e, c), Bq(a, d ? "linkFromPortId" : "linkToPortId", Ze, e, b, f, c), "string" === typeof e && a.Da(b, e))
				} else Jj(b, e, c)
		}
	}
	t.nf = function(a) {
		if(null === a) return Gq;
		var b = this.Kd;
		if("" === b) return Gq;
		a = cn(a, b);
		return void 0 === a ? Gq : a
	};
	t.qt = function(a, b) {
		if(null !== a) {
			var c = this.Kd;
			if("" !== c)
				if(this.ze(a)) {
					var d = cn(a, c);
					void 0 === d && (d = Gq);
					if(d !== b) {
						if(Array.isArray(d))
							for(var e = d.length, f = 0; f < e; f++) kq(this, d[f], a);
						Jj(a, c, b);
						e = b.length;
						for(f = 0; f < e; f++) {
							var g = b[f];
							null === this.lc(g) && lq(this, g, a)
						}
						Bq(this, "linkLabelKeys", Ze, c, a, d, b);
						"string" === typeof c && this.Da(a, c)
					}
				} else Jj(a, c, b)
		}
	};
	t.Ds = function(a, b) {
		if(null !== b && void 0 !== b && null !== a) {
			var c = this.Kd;
			if("" !== c) {
				var d = cn(a, c);
				if(void 0 === d) c = [], c.push(b), this.qt(a, c);
				else if(Array.isArray(d)) {
					var e = d.indexOf(b);
					0 <= e || (e = d.length, d.push(b), this.ze(a) && (null === this.lc(b) && lq(this, b, a), Bq(this, "linkLabelKeys", af, c, a, null, b, null, e)))
				} else A(c + " property is not an Array; cannot addLabelKeyForLinkData: " + a)
			}
		}
	};
	t.qv = function(a, b) {
		if(null !== b && void 0 !== b && null !== a) {
			var c = this.Kd;
			if("" !== c) {
				var d = cn(a, c);
				if(Array.isArray(d)) {
					var e = d.indexOf(b);
					0 > e || (d.splice(e, 1), this.ze(a) && (kq(this, b, a), Bq(this, "linkLabelKeys", ff, c, a, b, null, e, null)))
				} else void 0 !== d && A(c + " property is not an Array; cannot removeLabelKeyforLinkData: " + a)
			}
		}
	};
	t.xc = function(a) {
		if(null !== a) {
			var b = this.ei;
			if("" !== b && (b = cn(a, b), void 0 !== b)) {
				if(gq(b)) return b;
				A("Key value for link data " + a + " is not a number or a string: " + b)
			}
		}
	};
	t.pt = function(a, b) {
		if(null !== a) {
			var c = this.ei;
			if("" !== c)
				if(this.ze(a)) {
					var d = cn(a, c);
					d !== b && null === this.zi(b) && (Jj(a, c, b), void 0 !== d && this.Ab.remove(d), this.Ab.add(b, a), Bq(this, "linkKey", Ze, c, a, d, b), "string" === typeof c && this.Da(a, c))
				} else Jj(a, c, b)
		}
	};
	t.zi = function(a) {
		null === a && A("GraphLinksModel.findLinkDataForKey:key must not be null");
		return void 0 !== a && gq(a) ? this.Ab.J(a) : null
	};
	t.am = function(a) {
		if(null !== a) {
			var b = this.ei;
			if("" !== b) {
				var c = this.xc(a);
				if(void 0 === c || this.Ab.contains(c)) {
					var d = this.hl;
					if(null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.Ab.contains(c))) {
						Jj(a, b, c);
						return
					}
					if("string" === typeof c) {
						for(d = 2; this.Ab.contains(c + d);) d++;
						Jj(a, b, c + d)
					} else if(void 0 === c || "number" === typeof c) {
						for(c = -this.Ab.count - 1; this.Ab.contains(c);) c--;
						Jj(a, b, c)
					}
				}
			}
		}
	};
	t.ze = function(a) {
		return null === a ? !1 : this.Mf.contains(a)
	};
	t.Ij = function(a) {
		null !== a && (Fb(a), this.ze(a) || iq(this, a, !0))
	};

	function iq(a, b, c) {
		if("" !== a.linkKeyProperty) {
			var d = a.xc(b);
			if(void 0 !== d && a.Ab.J(d) === b) return;
			a.am(b);
			d = a.xc(b);
			if(void 0 === d) {
				A("GraphLinksModel.makeLinkDataKeyUnique failed on " + b + ". Data not added to model.");
				return
			}
			a.Ab.add(d, b)
		}
		a.Mf.add(b);
		d = null;
		c && (d = a.Qc.length, a.Qc.splice(d, 0, b));
		Bq(a, "linkDataArray", af, "linkDataArray", a, null, b, null, d);
		Hq(a, b)
	}
	t.Pw = function(a) {
		if(Array.isArray(a))
			for(var b = a.length, c = 0; c < b; c++) this.Ij(a[c]);
		else
			for(a = a.iterator; a.next();) this.Ij(a.value)
	};
	t.im = function(a) {
		null !== a && hq(this, a, !0)
	};

	function hq(a, b, c) {
		a.Mf.remove(b);
		var d = a.xc(b);
		void 0 !== d && a.Ab.remove(d);
		d = null;
		if(c) {
			d = a.Qc.indexOf(b);
			if(0 > d) return;
			a.Qc.splice(d, 1)
		}
		Bq(a, "linkDataArray", ff, "linkDataArray", a, b, null, d, null);
		c = eq(a, b, !0);
		kq(a, c, b);
		c = eq(a, b, !1);
		kq(a, c, b);
		d = a.nf(b);
		if(Array.isArray(d))
			for(var e = d.length, f = 0; f < e; f++) c = d[f], kq(a, c, b)
	}
	t.Gx = function(a) {
		if(Array.isArray(a))
			for(var b = a.length, c = 0; c < b; c++) this.im(a[c]);
		else
			for(a = a.iterator; a.next();) this.im(a.value)
	};

	function Hq(a, b) {
		var c = eq(a, b, !0);
		c = a.bm(c);
		null === a.lc(c) && lq(a, c, b);
		c = eq(a, b, !1);
		c = a.bm(c);
		null === a.lc(c) && lq(a, c, b);
		var d = a.nf(b);
		if(Array.isArray(d))
			for(var e = d.length, f = 0; f < e; f++) c = d[f], null === a.lc(c) && lq(a, c, b)
	}
	t.Ip = function(a) {
		if(null === a) return null;
		var b = this.Bk;
		a = null !== b ? b(a, this) : Cq(this, a, !0);
		Ea(a) && (rb(a), "" !== this.Te && Jj(a, this.Te, void 0), "" !== this.Ue && Jj(a, this.Ue, void 0), "" !== this.Kd && Jj(a, this.Kd, []));
		return a
	};
	t.ux = function(a) {
		if(null === a) return !1;
		var b = this.ll;
		return "" === b ? !1 : cn(a, b) ? !0 : !1
	};
	t.bv = function(a) {
		return this.ux(a)
	};
	t.rh = function(a) {
		if(null !== a) {
			var b = this.pe;
			if("" !== b && (b = cn(a, b), void 0 !== b)) {
				if(gq(b)) return b;
				A("GroupKey value for node data " + a + " is not a number or a string: " + b)
			}
		}
	};
	t.Wy = function(a) {
		return this.rh(a)
	};
	t.Cv = function(a, b) {
		null === b && (b = void 0);
		if(null !== a) {
			var c = this.pe;
			if("" !== c)
				if(this.ic(a)) {
					var d = cn(a, c);
					d !== b && (kq(this, d, a), Jj(a, c, b), null === this.lc(b) && lq(this, b, a), Bq(this, "nodeGroupKey", Ze, c, a, d, b), "string" === typeof c && this.Da(a, c))
				} else Jj(a, c, b)
		}
	};
	t.Bv = function(a, b) {
		this.Cv(a, b)
	};
	Fq.prototype.copyNodeData = function(a) {
		if(null === a) return null;
		a = Z.prototype.copyNodeData.call(this, a);
		this.Oj || "" === this.pe || void 0 === cn(a, this.pe) || Jj(a, this.pe, void 0);
		return a
	};
	Fq.prototype.setDataProperty = function(a, b, c) {
		if(this.ic(a))
			if(b === this.nodeKeyProperty) this.lq(a, c);
			else {
				if(b === this.nodeCategoryProperty) {
					this.kq(a, c);
					return
				}
				if(b === this.nodeGroupKeyProperty) {
					this.Cv(a, c);
					return
				}
			}
		else if(this.ze(a)) {
			if(b === this.linkFromKeyProperty) {
				mq(this, a, c, !0);
				return
			}
			if(b === this.linkToKeyProperty) {
				mq(this, a, c, !1);
				return
			}
			if(b === this.linkFromPortIdProperty) {
				nq(this, a, c, !0);
				return
			}
			if(b === this.linkToPortIdProperty) {
				nq(this, a, c, !1);
				return
			}
			if(b === this.linkKeyProperty) {
				this.pt(a, c);
				return
			}
			if(b === this.linkCategoryProperty) {
				this.jq(a, c);
				return
			}
			if(b === this.linkLabelKeysProperty) {
				this.qt(a, c);
				return
			}
		}
		var d = cn(a, b);
		d !== c && (Jj(a, b, c), this.ht(a, b, d, c))
	};
	t = Fq.prototype;
	t.gq = function(a, b) {
		Z.prototype.gq.call(this, a, b);
		for(var c = this.mb.iterator; c.next();) this.tv(c.value, a, b);
		for(c = this.Mf.iterator; c.next();) {
			var d = c.value,
				e = a,
				f = b;
			if(eq(this, d, !0) === e) {
				var g = this.Te;
				Jj(d, g, f);
				Bq(this, "linkFromKey", Ze, g, d, e, f);
				"string" === typeof g && this.Da(d, g)
			}
			eq(this, d, !1) === e && (g = this.Ue, Jj(d, g, f), Bq(this, "linkToKey", Ze, g, d, e, f), "string" === typeof g && this.Da(d, g));
			g = this.nf(d);
			if(Array.isArray(g))
				for(var h = g.length, k = this.Kd, l = 0; l < h; l++) g[l] === e && (g[l] = f, Bq(this, "linkLabelKeys", af,
					k, d, e, f, l, l))
		}
	};
	t.tv = function(a, b, c) {
		if(this.rh(a) === b) {
			var d = this.pe;
			Jj(a, d, c);
			Bq(this, "nodeGroupKey", Ze, d, a, b, c);
			"string" === typeof d && this.Da(a, d)
		}
	};
	t.Tv = function() {
		Z.prototype.Tv.call(this);
		for(var a = this.linkDataArray, b = a.length, c = 0; c < b; c++) Hq(this, a[c])
	};
	t.lm = function(a) {
		Z.prototype.lm.call(this, a);
		a = this.sa(a);
		var b = jq(this, a);
		if(null !== b) {
			var c = new E;
			for(b = b.iterator; b.next();) {
				var d = b.value;
				if(this.ic(d)) {
					if(this.rh(d) === a) {
						var e = this.pe;
						Bq(this, "nodeGroupKey", Ze, e, d, a, a);
						"string" === typeof e && this.Da(d, e);
						c.add(d)
					}
				} else if(eq(this, d, !0) === a && (e = this.Te, Bq(this, "linkFromKey", Ze, e, d, a, a), "string" === typeof e && this.Da(d, e), c.add(d)), eq(this, d, !1) === a && (e = this.Ue, Bq(this, "linkToKey", Ze, e, d, a, a), "string" === typeof e && this.Da(d, e), c.add(d)), e = this.nf(d),
					Array.isArray(e))
					for(var f = e.length, g = this.Kd, h = 0; h < f; h++) e[h] === a && (Bq(this, "linkLabelKeys", af, g, d, a, a, h, h), c.add(d))
			}
			for(c = c.iterator; c.next();) kq(this, a, c.value)
		}
	};
	t.km = function(a) {
		Z.prototype.km.call(this, a);
		var b = this.rh(a);
		null === this.lc(b) && lq(this, b, a)
	};
	t.pq = function(a) {
		Z.prototype.pq.call(this, a);
		var b = this.rh(a);
		kq(this, b, a)
	};
	t.Ss = function(a) {
		if(null === a) return "";
		var b = this.lj;
		if("" === b) return "";
		b = cn(a, b);
		if(void 0 === b) return "";
		if("string" === typeof b) return b;
		A("getCategoryForLinkData found a non-string category for " + a + ": " + b);
		return ""
	};
	Fq.prototype.getLinkCategoryForData = function(a) {
		return this.Ss(a)
	};
	Fq.prototype.jq = function(a, b) {
		if(null !== a) {
			var c = this.lj;
			if("" !== c)
				if(this.ze(a)) {
					var d = cn(a, c);
					void 0 === d && (d = "");
					d !== b && (Jj(a, c, b), Bq(this, "linkCategory", Ze, c, a, d, b), "string" === typeof c && this.Da(a, c))
				} else Jj(a, c, b)
		}
	};
	Fq.prototype.setLinkCategoryForData = function(a, b) {
		this.jq(a, b)
	};
	Fq.prototype.Xj = function() {
		return !0
	};
	oa.Object.defineProperties(Fq.prototype, {
		archetypeNodeData: {
			get: function() {
				return this.Si
			},
			set: function(a) {
				var b = this.Si;
				b !== a && (this.Si = a, this.g("archetypeNodeData", b, a))
			}
		},
		linkFromKeyProperty: {
			get: function() {
				return this.Te
			},
			set: function(a) {
				var b = this.Te;
				b !== a && (this.Te = a, this.g("linkFromKeyProperty", b, a))
			}
		},
		linkToKeyProperty: {
			get: function() {
				return this.Ue
			},
			set: function(a) {
				var b = this.Ue;
				b !== a && (this.Ue = a, this.g("linkToKeyProperty",
					b, a))
			}
		},
		linkFromPortIdProperty: {
			get: function() {
				return this.mj
			},
			set: function(a) {
				var b = this.mj;
				b !== a && (this.mj = a, this.g("linkFromPortIdProperty", b, a))
			}
		},
		linkToPortIdProperty: {
			get: function() {
				return this.nj
			},
			set: function(a) {
				var b = this.nj;
				b !== a && (this.nj = a, this.g("linkToPortIdProperty", b, a))
			}
		},
		linkLabelKeysProperty: {
			get: function() {
				return this.Kd
			},
			set: function(a) {
				var b = this.Kd;
				b !== a && (this.Kd = a, this.g("linkLabelKeysProperty",
					b, a))
			}
		},
		linkDataArray: {
			get: function() {
				return this.Qc
			},
			set: function(a) {
				var b = this.Qc;
				if(b !== a) {
					this.Ab.clear();
					for(var c = a.length, d = 0; d < c; d++) {
						var e = a[d];
						if(!Ea(e)) {
							A("GraphLinksModel.linkDataArray must only contain Objects, not: " + e);
							return
						}
						Fb(e)
					}
					this.Qc = a;
					if("" !== this.linkKeyProperty) {
						d = new E;
						for(e = 0; e < c; e++) {
							var f = a[e],
								g = this.xc(f);
							void 0 === g ? d.add(f) : null !== this.Ab.J(g) ? d.add(f) : this.Ab.add(g, f)
						}
						for(d = d.iterator; d.next();) e = d.value, this.am(e), f = this.xc(e), void 0 !==
							f && this.Ab.add(f, e)
					}
					d = new F;
					for(e = 0; e < c; e++) d.add(a[e]);
					this.Mf = d;
					Bq(this, "linkDataArray", Ze, "linkDataArray", this, b, a);
					for(b = 0; b < c; b++) Hq(this, a[b])
				}
			}
		},
		linkKeyProperty: {
			get: function() {
				return this.ei
			},
			set: function(a) {
				var b = this.ei;
				if(b !== a) {
					this.ei = a;
					this.Ab.clear();
					for(var c = this.linkDataArray.length, d = 0; d < c; d++) {
						var e = this.linkDataArray[d],
							f = this.xc(e);
						void 0 === f && (this.am(e), f = this.xc(e));
						void 0 !== f && this.Ab.add(f, e)
					}
					this.g("linkKeyProperty", b, a)
				}
			}
		},
		makeUniqueLinkKeyFunction: {
			get: function() {
				return this.hl
			},
			set: function(a) {
				var b = this.hl;
				b !== a && (this.hl = a, this.g("makeUniqueLinkKeyFunction", b, a))
			}
		},
		copyLinkDataFunction: {
			get: function() {
				return this.Bk
			},
			set: function(a) {
				var b = this.Bk;
				b !== a && (this.Bk = a, this.g("copyLinkDataFunction", b, a))
			}
		},
		nodeIsGroupProperty: {
			get: function() {
				return this.ll
			},
			set: function(a) {
				var b = this.ll;
				b !== a && (this.ll = a, this.g("nodeIsGroupProperty", b, a))
			}
		},
		nodeGroupKeyProperty: {
			get: function() {
				return this.pe
			},
			set: function(a) {
				var b = this.pe;
				b !== a && (this.pe = a, this.g("nodeGroupKeyProperty", b, a))
			}
		},
		Oj: {
			get: function() {
				return this.Wm
			},
			set: function(a) {
				this.Wm !== a && (this.Wm = a)
			}
		},
		linkCategoryProperty: {
			get: function() {
				return this.lj
			},
			set: function(a) {
				var b = this.lj;
				b !== a && (this.lj = a, this.g("linkCategoryProperty", b, a))
			}
		}
	});
	oa.Object.defineProperties(Fq, {
		type: {
			get: function() {
				return "GraphLinksModel"
			}
		}
	});
	Fq.prototype.setCategoryForLinkData = Fq.prototype.jq;
	Fq.prototype.getCategoryForLinkData = Fq.prototype.Ss;
	Fq.prototype.setGroupKeyForNodeData = Fq.prototype.Cv;
	Fq.prototype.getGroupKeyForNodeData = Fq.prototype.rh;
	Fq.prototype.isGroupForNodeData = Fq.prototype.ux;
	Fq.prototype.copyLinkData = Fq.prototype.Ip;
	Fq.prototype.removeLinkDataCollection = Fq.prototype.Gx;
	Fq.prototype.removeLinkData = Fq.prototype.im;
	Fq.prototype.addLinkDataCollection = Fq.prototype.Pw;
	Fq.prototype.addLinkData = Fq.prototype.Ij;
	Fq.prototype.containsLinkData = Fq.prototype.ze;
	Fq.prototype.makeLinkDataKeyUnique = Fq.prototype.am;
	Fq.prototype.findLinkDataForKey = Fq.prototype.zi;
	Fq.prototype.setKeyForLinkData = Fq.prototype.pt;
	Fq.prototype.getKeyForLinkData = Fq.prototype.xc;
	Fq.prototype.removeLabelKeyForLinkData = Fq.prototype.qv;
	Fq.prototype.addLabelKeyForLinkData = Fq.prototype.Ds;
	Fq.prototype.setLabelKeysForLinkData = Fq.prototype.qt;
	Fq.prototype.getLabelKeysForLinkData = Fq.prototype.nf;
	Fq.prototype.setToPortIdForLinkData = Fq.prototype.Jv;
	Fq.prototype.getToPortIdForLinkData = Fq.prototype.qx;
	Fq.prototype.setFromPortIdForLinkData = Fq.prototype.Av;
	Fq.prototype.getFromPortIdForLinkData = Fq.prototype.nx;
	Fq.prototype.setToKeyForLinkData = Fq.prototype.Iv;
	Fq.prototype.getToKeyForLinkData = Fq.prototype.px;
	Fq.prototype.setFromKeyForLinkData = Fq.prototype.zv;
	Fq.prototype.getFromKeyForLinkData = Fq.prototype.mx;
	Fq.prototype.clear = Fq.prototype.clear;
	var Gq = Object.freeze([]);
	Fq.className = "GraphLinksModel";
	zq.GraphLinksModel = Fq;
	Z.constructGraphLinksModel = Z.constructGraphLinksModel = function() {
		return new Fq
	};
	Z.initDiagramModel = Z.initDiagramModel = function() {
		return new Fq
	};

	function Iq(a) {
		Z.call(this);
		this.qe = "parent";
		this.Xm = !1;
		this.tj = "parentLinkCategory";
		void 0 !== a && (this.nodeDataArray = a)
	}
	na(Iq, Z);
	Iq.initDiagramModel = Z.initDiagramModel;
	Iq.constructGraphLinksModel = Z.constructGraphLinksModel;
	Iq.prototype.cloneProtected = function(a) {
		Z.prototype.cloneProtected.call(this, a);
		a.qe = this.qe;
		a.Xm = this.Xm;
		a.tj = this.tj
	};
	t = Iq.prototype;
	t.toString = function(a) {
		void 0 === a && (a = 0);
		if(2 <= a) return this.oq();
		var b = ("" !== this.name ? this.name : "") + " TreeModel";
		if(0 < a) {
			b += "\n node data:";
			a = this.nodeDataArray;
			for(var c = a.length, d = 0; d < c; d++) {
				var e = a[d];
				b += " " + this.sa(e) + ":" + Qa(e)
			}
		}
		return b
	};
	t.nk = function() {
		var a = Z.prototype.nk.call(this),
			b = "";
		"parent" !== this.nodeParentKeyProperty && "string" === typeof this.nodeParentKeyProperty && (b += ',\n  "nodeParentKeyProperty": ' + this.quote(this.nodeParentKeyProperty));
		return a + b
	};
	t.bq = function(a) {
		Z.prototype.bq.call(this, a);
		a.nodeParentKeyProperty && (this.nodeParentKeyProperty = a.nodeParentKeyProperty)
	};
	t.sq = function(a) {
		wq(this, a, "nodeParentKeyProperty");
		return Z.prototype.sq.call(this, a)
	};
	t.bm = function(a) {
		return a
	};
	t.Fi = function(a) {
		if(null !== a) {
			var b = this.qe;
			if("" !== b && (b = cn(a, b), void 0 !== b)) {
				if(gq(b)) return b;
				A("ParentKey value for node data " + a + " is not a number or a string: " + b)
			}
		}
	};
	t.He = function(a, b) {
		null === b && (b = void 0);
		if(null !== a) {
			var c = this.qe;
			if("" !== c)
				if(b = this.bm(b), this.ic(a)) {
					var d = cn(a, c);
					d !== b && (kq(this, d, a), Jj(a, c, b), null === this.lc(b) && lq(this, b, a), Bq(this, "nodeParentKey", Ze, c, a, d, b), "string" === typeof c && this.Da(a, c))
				} else Jj(a, c, b)
		}
	};
	t.Su = function(a) {
		if(null === a) return "";
		var b = this.tj;
		if("" === b) return "";
		b = cn(a, b);
		if(void 0 === b) return "";
		if("string" === typeof b) return b;
		A("getParentLinkCategoryForNodeData found a non-string category for " + a + ": " + b);
		return ""
	};
	Iq.prototype.getLinkCategoryForData = function(a) {
		return this.Su(a)
	};
	Iq.prototype.Dv = function(a, b) {
		if(null !== a) {
			var c = this.tj;
			if("" !== c)
				if(this.ic(a)) {
					var d = cn(a, c);
					void 0 === d && (d = "");
					d !== b && (Jj(a, c, b), Bq(this, "parentLinkCategory", Ze, c, a, d, b), "string" === typeof c && this.Da(a, c))
				} else Jj(a, c, b)
		}
	};
	Iq.prototype.setLinkCategoryForData = function(a, b) {
		this.Dv(a, b)
	};
	Iq.prototype.copyNodeData = function(a) {
		if(null === a) return null;
		a = Z.prototype.copyNodeData.call(this, a);
		this.Pj || "" === this.qe || void 0 === cn(a, this.qe) || Jj(a, this.qe, void 0);
		return a
	};
	Iq.prototype.setDataProperty = function(a, b, c) {
		if(this.ic(a))
			if(b === this.nodeKeyProperty) this.lq(a, c);
			else {
				if(b === this.nodeCategoryProperty) {
					this.kq(a, c);
					return
				}
				if(b === this.nodeParentKeyProperty) {
					this.He(a, c);
					return
				}
			}
		var d = cn(a, b);
		d !== c && (Jj(a, b, c), this.ht(a, b, d, c))
	};
	t = Iq.prototype;
	t.gq = function(a, b) {
		Z.prototype.gq.call(this, a, b);
		for(var c = this.mb.iterator; c.next();) this.tv(c.value, a, b)
	};
	t.tv = function(a, b, c) {
		if(this.Fi(a) === b) {
			var d = this.qe;
			Jj(a, d, c);
			Bq(this, "nodeParentKey", Ze, d, a, b, c);
			"string" === typeof d && this.Da(a, d)
		}
	};
	t.lm = function(a) {
		Z.prototype.lm.call(this, a);
		a = this.sa(a);
		var b = jq(this, a);
		if(null !== b) {
			var c = new E;
			for(b = b.iterator; b.next();) {
				var d = b.value;
				if(this.ic(d) && this.Fi(d) === a) {
					var e = this.qe;
					Bq(this, "nodeParentKey", Ze, e, d, a, a);
					"string" === typeof e && this.Da(d, e);
					c.add(d)
				}
			}
			for(c = c.iterator; c.next();) kq(this, a, c.value)
		}
	};
	t.km = function(a) {
		Z.prototype.km.call(this, a);
		var b = this.Fi(a);
		b = this.bm(b);
		null === this.lc(b) && lq(this, b, a)
	};
	t.pq = function(a) {
		Z.prototype.pq.call(this, a);
		var b = this.Fi(a);
		kq(this, b, a)
	};
	t.$l = function() {
		return !0
	};
	oa.Object.defineProperties(Iq.prototype, {
		nodeParentKeyProperty: {
			get: function() {
				return this.qe
			},
			set: function(a) {
				var b = this.qe;
				b !== a && (this.qe = a, this.g("nodeParentKeyProperty", b, a))
			}
		},
		Pj: {
			get: function() {
				return this.Xm
			},
			set: function(a) {
				this.Xm !== a && (this.Xm = a)
			}
		},
		parentLinkCategoryProperty: {
			get: function() {
				return this.tj
			},
			set: function(a) {
				var b = this.tj;
				b !== a && (this.tj = a, this.g("parentLinkCategoryProperty", b, a))
			}
		},
		linkCategoryProperty: {
			get: function() {
				return this.parentLinkCategoryProperty
			},
			set: function(a) {
				this.parentLinkCategoryProperty = a
			}
		}
	});
	oa.Object.defineProperties(Iq, {
		type: {
			get: function() {
				return "TreeModel"
			}
		}
	});
	Iq.prototype.setParentLinkCategoryForNodeData = Iq.prototype.Dv;
	Iq.prototype.getParentLinkCategoryForNodeData = Iq.prototype.Su;
	Iq.prototype.setParentKeyForNodeData = Iq.prototype.He;
	Iq.prototype.getParentKeyForNodeData = Iq.prototype.Fi;
	Iq.className = "TreeModel";
	zq.TreeModel = Iq;

	function Jq() {
		vi.call(this);
		this.uw = this.rn = this.Xb = 0;
		this.ar = 360;
		this.tw = Kq;
		this.Zi = 0;
		this.fw = new G;
		this.Oq = this.Td = 0;
		this.As = new Lq;
		this.Ht = this.sj = 0;
		this.Xx = 600;
		this.Lo = NaN;
		this.Km = 1;
		this.mp = 0;
		this.El = 360;
		this.Eb = Kq;
		this.L = Mq;
		this.Sc = Nq;
		this.Nc = Ip;
		this.Ze = 6;
		this.to = Oq
	}
	na(Jq, vi);
	Jq.prototype.cloneProtected = function(a) {
		vi.prototype.cloneProtected.call(this, a);
		a.Lo = this.Lo;
		a.Km = this.Km;
		a.mp = this.mp;
		a.El = this.El;
		a.Eb = this.Eb;
		a.L = this.L;
		a.Sc = this.Sc;
		a.Nc = this.Nc;
		a.Ze = this.Ze;
		a.to = this.to
	};
	Jq.prototype.ib = function(a) {
		if(a.classType === Jq)
			if(a === Pq || a === Qq || a === Rq || a === Sq || a === Nq) this.sorting = a;
			else if(a === Uq || a === Vq || a === Mq || a === Wq) this.direction = a;
		else if(a === Xq || a === Yq || a === Kq || a === Zq) this.arrangement = a;
		else {
			if(a === $q || a === Oq) this.nodeDiameterFormula = a
		} else vi.prototype.ib.call(this, a)
	};
	Jq.prototype.createNetwork = function() {
		return new ar(this)
	};
	Jq.prototype.doLayout = function(a) {
		null === this.network && (this.network = this.makeNetwork(a));
		this.arrangementOrigin = this.initialOrigin(this.arrangementOrigin);
		a = this.network.vertexes;
		if(1 >= a.count) 1 === a.count && (a = a.first(), a.centerX = 0, a.centerY = 0);
		else {
			var b = new E;
			b.addAll(a.iterator);
			a = new E;
			var c = new E;
			var d = this.sort(b);
			var e, f, g = this.Oq;
			var h = this.arrangement;
			var k = this.nodeDiameterFormula;
			var l = this.radius;
			if(!isFinite(l) || 0 >= l) l = NaN;
			var m = this.aspectRatio;
			if(!isFinite(m) || 0 >= m) m = 1;
			var n = this.startAngle;
			isFinite(n) || (n = 0);
			var p = this.sweepAngle;
			if(!isFinite(p) || 360 < p || 1 > p) p = 360;
			b = this.spacing;
			isFinite(b) || (b = NaN);
			h === Zq && k === $q ? h = Kq : h === Zq && k !== $q && (h = this.arrangement);
			if((this.direction === Uq || this.direction === Vq) && this.sorting !== Nq) {
				for(k = 0; !(k >= d.length); k += 2) {
					a.add(d.N(k));
					if(k + 1 >= d.length) break;
					c.add(d.N(k + 1))
				}
				this.direction === Uq ? (this.arrangement === Zq && a.reverse(), d = new E, d.addAll(a), d.addAll(c)) : (this.arrangement === Zq && c.reverse(), d = new E, d.addAll(c), d.addAll(a))
			}
			k = d.length;
			for(var q = f = e = 0; q <
				d.length; q++) {
				var r = n + p * f * (this.direction === Mq ? 1 : -1) / k,
					u = d.N(q).diameter;
				isNaN(u) && (u = br(d.N(q), r));
				360 > p && (0 === q || q === d.length - 1) && (u /= 2);
				e += u;
				f++
			}
			if(isNaN(l) || h === Zq) {
				isNaN(b) && (b = 6);
				if(h !== Kq && h !== Zq) {
					f = -Infinity;
					for(g = 0; g < k; g++) q = d.N(g), e = d.N(g === k - 1 ? 0 : g + 1), isNaN(q.diameter) && br(q, 0), isNaN(e.diameter) && br(e, 0), f = Math.max(f, (q.diameter + e.diameter) / 2);
					g = f + b;
					h === Xq ? l = (f + b) / (2 * Math.PI / k) : l = cr(this, g * (360 <= p ? k : k - 1), m, n * Math.PI / 180, p * Math.PI / 180)
				} else l = cr(this, e + (360 <= p ? k : k - 1) * (h !== Zq ? b : 1.6 * b), m, n *
					Math.PI / 180, p * Math.PI / 180);
				f = l * m
			} else if(f = l * m, q = dr(this, l, f, n * Math.PI / 180, p * Math.PI / 180), isNaN(b)) {
				if(h === Kq || h === Zq) b = (q - e) / (360 <= p ? k : k - 1)
			} else if(h === Kq || h === Zq) q = (q - e) / (360 <= p ? k : k - 1), q < b ? (l = cr(this, e + b * (360 <= p ? k : k - 1), m, n * Math.PI / 180, p * Math.PI / 180), f = l * m) : b = q;
			else {
				g = -Infinity;
				for(e = 0; e < k; e++) r = d.N(e), u = d.N(e === k - 1 ? 0 : e + 1), isNaN(r.diameter) && br(r, 0), isNaN(u.diameter) && br(u, 0), g = Math.max(g, (r.diameter + u.diameter) / 2);
				g += b;
				e = cr(this, g * (360 <= p ? k : k - 1), m, n * Math.PI / 180, p * Math.PI / 180);
				e > l ? (l = e, f = l * m) : g =
					q / (360 <= p ? k : k - 1)
			}
			this.tw = h;
			this.Xb = l;
			this.rn = m;
			this.uw = n;
			this.ar = p;
			this.Zi = b;
			this.Td = f;
			this.Oq = g;
			b = d;
			d = this.tw;
			h = this.Xb;
			l = this.uw;
			m = this.ar;
			n = this.Zi;
			p = this.Td;
			k = this.Oq;
			if(this.direction !== Uq && this.direction !== Vq || d !== Zq)
				if(this.direction === Uq || this.direction === Vq) {
					g = 0;
					switch(d) {
						case Yq:
							g = 180 * er(this, h, p, l, k) / Math.PI;
							break;
						case Kq:
							k = b = 0;
							g = a.first();
							null !== g && (b = br(g, Math.PI / 2));
							g = c.first();
							null !== g && (k = br(g, Math.PI / 2));
							g = 180 * er(this, h, p, l, n + (b + k) / 2) / Math.PI;
							break;
						case Xq:
							g = m / b.length
					}
					if(this.direction ===
						Uq) {
						switch(d) {
							case Yq:
								fr(this, a, l, Wq);
								break;
							case Kq:
								gr(this, a, l, Wq);
								break;
							case Xq:
								hr(this, a, m / 2, l, Wq)
						}
						switch(d) {
							case Yq:
								fr(this, c, l + g, Mq);
								break;
							case Kq:
								gr(this, c, l + g, Mq);
								break;
							case Xq:
								hr(this, c, m / 2, l + g, Mq)
						}
					} else {
						switch(d) {
							case Yq:
								fr(this, c, l, Wq);
								break;
							case Kq:
								gr(this, c, l, Wq);
								break;
							case Xq:
								hr(this, c, m / 2, l, Wq)
						}
						switch(d) {
							case Yq:
								fr(this, a, l + g, Mq);
								break;
							case Kq:
								gr(this, a, l + g, Mq);
								break;
							case Xq:
								hr(this, a, m / 2, l + g, Mq)
						}
					}
				} else switch(d) {
					case Yq:
						fr(this, b, l, this.direction);
						break;
					case Kq:
						gr(this, b, l, this.direction);
						break;
					case Xq:
						hr(this, b, m, l, this.direction);
						break;
					case Zq:
						ir(this, b, m, l, this.direction)
				} else ir(this, b, m, l - m / 2, Mq)
		}
		this.updateParts();
		this.network = null;
		this.isValidLayout = !0
	};

	function hr(a, b, c, d, e) {
		var f = a.ar,
			g = a.Xb;
		a = a.Td;
		d = d * Math.PI / 180;
		c = c * Math.PI / 180;
		for(var h = b.length, k = 0; k < h; k++) {
			var l = d + (e === Mq ? k * c / (360 <= f ? h : h - 1) : -(k * c) / h),
				m = b.N(k),
				n = g * Math.tan(l) / a;
			n = Math.sqrt((g * g + a * a * n * n) / (1 + n * n));
			m.centerX = n * Math.cos(l);
			m.centerY = n * Math.sin(l);
			m.actualAngle = 180 * l / Math.PI
		}
	}

	function gr(a, b, c, d) {
		var e = a.Xb,
			f = a.Td,
			g = a.Zi;
		c = c * Math.PI / 180;
		for(var h = b.length, k = 0; k < h; k++) {
			var l = b.N(k),
				m = b.N(k === h - 1 ? 0 : k + 1),
				n = f * Math.sin(c);
			l.centerX = e * Math.cos(c);
			l.centerY = n;
			l.actualAngle = 180 * c / Math.PI;
			isNaN(l.diameter) && br(l, 0);
			isNaN(m.diameter) && br(m, 0);
			l = er(a, e, f, d === Mq ? c : -c, (l.diameter + m.diameter) / 2 + g);
			c += d === Mq ? l : -l
		}
	}

	function fr(a, b, c, d) {
		var e = a.Xb,
			f = a.Td,
			g = a.Oq;
		c = c * Math.PI / 180;
		for(var h = b.length, k = 0; k < h; k++) {
			var l = b.N(k);
			l.centerX = e * Math.cos(c);
			l.centerY = f * Math.sin(c);
			l.actualAngle = 180 * c / Math.PI;
			l = er(a, e, f, d === Mq ? c : -c, g);
			c += d === Mq ? l : -l
		}
	}

	function ir(a, b, c, d, e) {
		var f = a.ar;
		a.sj = 0;
		a.As = new Lq;
		if(360 > c) {
			for(f = d + (e === Mq ? f : -f); 0 > f;) f += 360;
			f %= 360;
			180 < f && (f -= 360);
			f *= Math.PI / 180;
			a.Ht = f;
			jr(a, b, c, d, e)
		} else kr(a, b, c, d, e);
		a.As.commit(b)
	}

	function kr(a, b, c, d, e) {
		var f = a.Xb,
			g = a.Zi,
			h = a.rn,
			k = f * Math.cos(d * Math.PI / 180),
			l = a.Td * Math.sin(d * Math.PI / 180),
			m = b.La();
		if(3 === m.length) m[0].centerX = f, m[0].centerY = 0, m[1].centerX = m[0].centerX - m[0].width / 2 - m[1].width / 2 - g, m[1].y = m[0].y, m[2].centerX = (m[0].centerX + m[1].centerX) / 2, m[2].y = m[0].y - m[2].height - g;
		else if(4 === m.length) m[0].centerX = f, m[0].centerY = 0, m[2].centerX = -m[0].centerX, m[2].centerY = m[0].centerY, m[1].centerX = 0, m[1].y = Math.min(m[0].y, m[2].y) - m[1].height - g, m[3].centerX = 0, m[3].y = Math.max(m[0].y +
			m[0].height + g, m[2].y + m[2].height + g);
		else {
			f = G.alloc();
			for(var n = 0; n < m.length; n++) {
				m[n].centerX = k;
				m[n].centerY = l;
				if(n >= m.length - 1) break;
				lr(a, k, l, m, n, e, f) || mr(a, k, l, m, n, e, f);
				k = f.x;
				l = f.y
			}
			G.free(f);
			a.sj++;
			if(!(23 < a.sj)) {
				k = m[0].centerX;
				l = m[0].centerY;
				f = m[m.length - 1].centerX;
				n = m[m.length - 1].centerY;
				var p = Math.abs(k - f) - ((m[0].width + m[m.length - 1].width) / 2 + g),
					q = Math.abs(l - n) - ((m[0].height + m[m.length - 1].height) / 2 + g);
				g = 0;
				1 > Math.abs(q) ? Math.abs(k - f) < (m[0].width + m[m.length - 1].width) / 2 && (g = 0) : g = 0 < q ? q : 1 > Math.abs(p) ?
					0 : p;
				k = Math.abs(f) > Math.abs(n) ? 0 < f !== l > n : 0 < n !== k < f;
				if(k = e === Mq ? k : !k) g = -Math.abs(g), g = Math.min(g, -m[m.length - 1].width), g = Math.min(g, -m[m.length - 1].height);
				a.As.compare(g, m);
				1 < Math.abs(g) && (a.Xb = 8 > a.sj ? a.Xb - g / (2 * Math.PI) : 5 > m.length && 10 < g ? a.Xb / 2 : a.Xb - (0 < g ? 1.7 : -2.3), a.Td = a.Xb * h, kr(a, b, c, d, e))
			}
		}
	}

	function jr(a, b, c, d, e) {
		for(var f = a.Xb, g = a.Td, h = a.rn, k = f * Math.cos(d * Math.PI / 180), l = g * Math.sin(d * Math.PI / 180), m = G.alloc(), n = b.La(), p = 0; p < n.length; p++) {
			n[p].centerX = k;
			n[p].centerY = l;
			if(p >= n.length - 1) break;
			lr(a, k, l, n, p, e, m) || mr(a, k, l, n, p, e, m);
			k = m.x;
			l = m.y
		}
		G.free(m);
		a.sj++;
		if(!(23 < a.sj)) {
			k = Math.atan2(l, k);
			k = e === Mq ? a.Ht - k : k - a.Ht;
			k = Math.abs(k) < Math.abs(k - 2 * Math.PI) ? k : k - 2 * Math.PI;
			f = k * (f + g) / 2;
			g = a.As;
			if(Math.abs(f) < Math.abs(g.Wl))
				for(g.Wl = f, g.pk = [], g.sm = [], k = 0; k < n.length; k++) g.pk[k] = n[k].bounds.x, g.sm[k] = n[k].bounds.y;
			1 < Math.abs(f) && (a.Xb = 8 > a.sj ? a.Xb - f / (2 * Math.PI) : a.Xb - (0 < f ? 1.7 : -2.3), a.Td = a.Xb * h, jr(a, b, c, d, e))
		}
	}

	function lr(a, b, c, d, e, f, g) {
		var h = a.Xb,
			k = a.Td,
			l = 0;
		a = (d[e].width + d[e + 1].width) / 2 + a.Zi;
		var m = !1;
		if(0 <= c !== (f === Mq)) {
			if(f = b + a, f > h) {
				f = b - a;
				if(f < -h) return g.x = f, g.y = l, !1;
				m = !0
			}
		} else if(f = b - a, f < -h) {
			f = b + a;
			if(f > h) return g.x = f, g.y = l, !1;
			m = !0
		}
		l = Math.sqrt(1 - Math.min(1, f * f / (h * h))) * k;
		0 > c !== m && (l = -l);
		if(Math.abs(c - l) > (d[e].height + d[e + 1].height) / 2) return g.x = f, g.y = l, !1;
		g.x = f;
		g.y = l;
		return !0
	}

	function mr(a, b, c, d, e, f, g) {
		var h = a.Xb,
			k = a.Td,
			l = 0;
		a = (d[e].height + d[e + 1].height) / 2 + a.Zi;
		d = !1;
		if(0 <= b !== (f === Mq)) {
			if(f = c - a, f < -k) {
				f = c + a;
				if(f > k) {
					g.x = l;
					g.y = f;
					return
				}
				d = !0
			}
		} else if(f = c + a, f > k) {
			f = c - a;
			if(f < -k) {
				g.x = l;
				g.y = f;
				return
			}
			d = !0
		}
		l = Math.sqrt(1 - Math.min(1, f * f / (k * k))) * h;
		0 > b !== d && (l = -l);
		g.x = l;
		g.y = f
	}
	Jq.prototype.commitLayout = function() {
		this.commitNodes();
		this.isRouting && this.commitLinks()
	};
	Jq.prototype.commitNodes = function() {
		var a = null !== this.group && null !== this.group.placeholder && this.group.isSubGraphExpanded,
			b = a ? this.group.location.copy() : null,
			c = this.actualCenter;
		a ? c = new G(0, 0) : (c.x = this.arrangementOrigin.x + this.Xb, c.y = this.arrangementOrigin.y + this.Td);
		for(var d = this.network.vertexes.iterator; d.next();) {
			var e = d.value;
			e.x += c.x;
			e.y += c.y;
			e.commit()
		}
		a && (this.group.kc(), a = this.group.position.copy(), c = this.group.location.copy(), b = b.Ie(c.Ie(a)), this.group.move(b), this.fw = b.Ie(a))
	};
	Jq.prototype.commitLinks = function() {
		for(var a = this.network.edges.iterator; a.next();) a.value.commit()
	};

	function dr(a, b, c, d, e) {
		var f = a.Xx;
		if(.001 > Math.abs(a.rn - 1)) return void 0 !== d && void 0 !== e ? e * b : 2 * Math.PI * b;
		a = b > c ? Math.sqrt(b * b - c * c) / b : Math.sqrt(c * c - b * b) / c;
		var g = 0;
		var h = void 0 !== d && void 0 !== e ? e / (f + 1) : Math.PI / (2 * (f + 1));
		for(var k = 0, l = 0; l <= f; l++) {
			void 0 !== d && void 0 !== e ? k = d + l * e / f : k = l * Math.PI / (2 * f);
			var m = Math.sin(k);
			g += Math.sqrt(1 - a * a * m * m) * h
		}
		return void 0 !== d && void 0 !== e ? (b > c ? b : c) * g : 4 * (b > c ? b : c) * g
	}

	function cr(a, b, c, d, e) {
		return b / (void 0 !== d && void 0 !== e ? dr(a, 1, c, d, e) : dr(a, 1, c))
	}

	function er(a, b, c, d, e) {
		if(.001 > Math.abs(a.rn - 1)) return e / b;
		var f = b > c ? Math.sqrt(b * b - c * c) / b : Math.sqrt(c * c - b * b) / c,
			g = 0;
		a = 2 * Math.PI / (700 * a.network.vertexes.count);
		b > c && (d += Math.PI / 2);
		for(var h = 0;; h++) {
			var k = Math.sin(d + h * a);
			g += (b > c ? b : c) * Math.sqrt(1 - f * f * k * k) * a;
			if(g >= e) return h * a
		}
	}
	Jq.prototype.sort = function(a) {
		switch(this.sorting) {
			case Rq:
				break;
			case Sq:
				a.reverse();
				break;
			case Pq:
				a.sort(this.comparer);
				break;
			case Qq:
				a.sort(this.comparer);
				a.reverse();
				break;
			case Nq:
				for(var b = [], c = 0; c < a.length; c++) b.push(0);
				c = new E;
				for(var d = 0; d < a.length; d++) {
					var e = -1,
						f = -1;
					if(0 === d)
						for(var g = 0; g < a.length; g++) {
							var h = a.N(g).edgesCount;
							h > e && (e = h, f = g)
						} else
							for(g = 0; g < a.length; g++) h = b[g], h > e && (e = h, f = g);
					c.add(a.N(f));
					b[f] = -1;
					f = a.N(f);
					for(g = f.sourceEdges; g.next();) e = a.indexOf(g.value.fromVertex), 0 > e || 0 <=
						b[e] && b[e]++;
					for(f = f.destinationEdges; f.next();) e = a.indexOf(f.value.toVertex), 0 > e || 0 <= b[e] && b[e]++
				}
				a = [];
				for(b = 0; b < c.length; b++) {
					e = c.N(b);
					a[b] = [];
					for(f = e.destinationEdges; f.next();) d = c.indexOf(f.value.toVertex), d !== b && 0 > a[b].indexOf(d) && a[b].push(d);
					for(e = e.sourceEdges; e.next();) d = c.indexOf(e.value.fromVertex), d !== b && 0 > a[b].indexOf(d) && a[b].push(d)
				}
				f = [];
				for(b = 0; b < a.length; b++) f[b] = 0;
				b = [];
				g = [];
				h = [];
				e = [];
				d = new E;
				for(var k = 0, l = 0; l < a.length; l++) {
					var m = a[l].length;
					if(1 === m) e.push(l);
					else if(0 === m) d.add(c.N(l));
					else {
						if(0 === k) b.push(l);
						else {
							for(var n = m = Infinity, p = -1, q = [], r = 0; r < b.length; r++) 0 > a[b[r]].indexOf(b[r === b.length - 1 ? 0 : r + 1]) && q.push(r === b.length - 1 ? 0 : r + 1);
							if(0 === q.length)
								for(r = 0; r < b.length; r++) q.push(r);
							for(r = 0; r < q.length; r++) {
								for(var u = q[r], v = a[l], x = 0, y = 0; y < g.length; y++) {
									var z = f[g[y]],
										B = f[h[y]];
									if(z < B) {
										var C = z;
										z = B
									} else C = B;
									if(C < u && u <= z)
										for(B = 0; B < v.length; B++) {
											var I = v[B];
											0 > b.indexOf(I) || C < f[I] && f[I] < z || C === f[I] || z === f[I] || x++
										} else
											for(B = 0; B < v.length; B++) I = v[B], 0 > b.indexOf(I) || C < f[I] && f[I] < z && C !== f[I] &&
												z !== f[I] && x++
								}
								v = x;
								for(y = x = 0; y < a[l].length; y++) C = b.indexOf(a[l][y]), 0 <= C && (C = Math.abs(u - (C >= u ? C + 1 : C)), x += C < b.length + 1 - C ? C : b.length + 1 - C);
								for(y = 0; y < g.length; y++) C = f[g[y]], z = f[h[y]], C >= u && C++, z >= u && z++, C > z && (B = z, z = C, C = B), z - C < (b.length + 2) / 2 === (C < u && u <= z) && x++;
								if(v < m || v === m && x < n) m = v, n = x, p = u
							}
							b.splice(p, 0, l);
							for(m = 0; m < b.length; m++) f[b[m]] = m;
							for(m = 0; m < a[l].length; m++) n = a[l][m], 0 <= b.indexOf(n) && (g.push(l), h.push(n))
						}
						k++
					}
				}
				for(g = b.length;;) {
					f = !0;
					for(h = 0; h < e.length; h++)
						if(k = e[h], l = a[k][0], m = b.indexOf(l), 0 <= m) {
							for(p =
								n = 0; p < a[l].length; p++) q = b.indexOf(a[l][p]), 0 > q || q === m || (r = q > m ? q - m : m - q, n += q < m !== r > g - r ? 1 : -1);
							b.splice(0 > n ? m : m + 1, 0, k);
							e.splice(h, 1);
							h--
						} else f = !1;
					if(f) break;
					else b.push(e[0]), e.splice(0, 1)
				}
				for(a = 0; a < b.length; a++) d.add(c.N(b[a]));
				return d;
			default:
				A("Invalid sorting type.")
		}
		return a
	};
	oa.Object.defineProperties(Jq.prototype, {
		radius: {
			get: function() {
				return this.Lo
			},
			set: function(a) {
				this.Lo !== a && (0 < a || isNaN(a)) && (this.Lo = a, this.B())
			}
		},
		aspectRatio: {
			get: function() {
				return this.Km
			},
			set: function(a) {
				this.Km !== a && 0 < a && (this.Km = a, this.B())
			}
		},
		startAngle: {
			get: function() {
				return this.mp
			},
			set: function(a) {
				this.mp !== a && (this.mp = a, this.B())
			}
		},
		sweepAngle: {
			get: function() {
				return this.El
			},
			set: function(a) {
				this.El !== a && (0 < a && 360 >= a ? this.El = a : this.El = 360, this.B())
			}
		},
		arrangement: {
			get: function() {
				return this.Eb
			},
			set: function(a) {
				this.Eb === a || a !== Zq && a !== Kq && a !== Yq && a !== Xq || (this.Eb = a, this.B())
			}
		},
		direction: {
			get: function() {
				return this.L
			},
			set: function(a) {
				this.L === a || a !== Mq && a !== Wq && a !== Uq && a !== Vq || (this.L = a, this.B())
			}
		},
		sorting: {
			get: function() {
				return this.Sc
			},
			set: function(a) {
				this.Sc === a || a !== Rq && a !== Sq &&
					a !== Pq && !Qq && a !== Nq || (this.Sc = a, this.B())
			}
		},
		comparer: {
			get: function() {
				return this.Nc
			},
			set: function(a) {
				this.Nc !== a && (this.Nc = a, this.B())
			}
		},
		spacing: {
			get: function() {
				return this.Ze
			},
			set: function(a) {
				this.Ze !== a && (this.Ze = a, this.B())
			}
		},
		nodeDiameterFormula: {
			get: function() {
				return this.to
			},
			set: function(a) {
				this.to === a || a !== Oq && a !== $q || (this.to = a, this.B())
			}
		},
		actualXRadius: {
			get: function() {
				return this.Xb
			}
		},
		actualYRadius: {
			get: function() {
				return this.Td
			}
		},
		actualSpacing: {
			get: function() {
				return this.Zi
			}
		},
		actualCenter: {
			get: function() {
				return this.fw
			}
		}
	});
	var Kq = new D(Jq, "ConstantSpacing", 0),
		Yq = new D(Jq, "ConstantDistance", 1),
		Xq = new D(Jq, "ConstantAngle", 2),
		Zq = new D(Jq, "Packed", 3),
		Mq = new D(Jq, "Clockwise", 4),
		Wq = new D(Jq, "Counterclockwise", 5),
		Uq = new D(Jq, "BidirectionalLeft", 6),
		Vq = new D(Jq, "BidirectionalRight", 7),
		Rq = new D(Jq, "Forwards", 8),
		Sq = new D(Jq, "Reverse", 9),
		Pq = new D(Jq, "Ascending", 10),
		Qq = new D(Jq, "Descending", 11),
		Nq = new D(Jq, "Optimized", 12),
		Oq = new D(Jq, "Pythagorean", 13),
		$q = new D(Jq, "Circular", 14);
	Jq.className = "CircularLayout";
	Jq.ConstantSpacing = Kq;
	Jq.ConstantDistance = Yq;
	Jq.ConstantAngle = Xq;
	Jq.Packed = Zq;
	Jq.Clockwise = Mq;
	Jq.Counterclockwise = Wq;
	Jq.BidirectionalLeft = Uq;
	Jq.BidirectionalRight = Vq;
	Jq.Forwards = Rq;
	Jq.Reverse = Sq;
	Jq.Ascending = Pq;
	Jq.Descending = Qq;
	Jq.Optimized = Nq;
	Jq.Pythagorean = Oq;
	Jq.Circular = $q;

	function Lq() {
		this.Wl = -Infinity;
		this.sm = this.pk = null
	}
	Lq.prototype.compare = function(a, b) {
		if(0 < a && 0 > this.Wl || Math.abs(a) < Math.abs(this.Wl) && !(0 > a && 0 < this.Wl))
			for(this.Wl = a, this.pk = [], this.sm = [], a = 0; a < b.length; a++) this.pk[a] = b[a].bounds.x, this.sm[a] = b[a].bounds.y
	};
	Lq.prototype.commit = function(a) {
		if(null !== this.pk && null !== this.sm)
			for(var b = 0; b < this.pk.length; b++) {
				var c = a.N(b);
				c.x = this.pk[b];
				c.y = this.sm[b]
			}
	};
	Lq.className = "VertexArrangement";

	function ar(a) {
		zp.call(this, a)
	}
	na(ar, zp);
	ar.prototype.createVertex = function() {
		return new nr(this)
	};
	ar.prototype.createEdge = function() {
		return new or(this)
	};
	ar.className = "CircularNetwork";

	function nr(a) {
		Cp.call(this, a);
		this.K = this.Yi = NaN
	}
	na(nr, Cp);

	function br(a, b) {
		var c = a.network;
		if(null === c) return NaN;
		c = c.layout;
		if(null === c) return NaN;
		if(c.arrangement === Zq)
			if(c.nodeDiameterFormula === $q) a.Yi = Math.max(a.width, a.height);
			else {
				c = Math.abs(Math.sin(b));
				b = Math.abs(Math.cos(b));
				if(0 === c) return a.width;
				if(0 === b) return a.height;
				a.Yi = Math.min(a.height / c, a.width / b)
			}
		else a.Yi = c.nodeDiameterFormula === $q ? Math.max(a.width, a.height) : Math.sqrt(a.width * a.width + a.height * a.height);
		return a.Yi
	}
	oa.Object.defineProperties(nr.prototype, {
		diameter: {
			get: function() {
				return this.Yi
			},
			set: function(a) {
				this.Yi !== a && (this.Yi = a)
			}
		},
		actualAngle: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K !== a && (this.K = a)
			}
		}
	});
	nr.className = "CircularVertex";

	function or(a) {
		Dp.call(this, a)
	}
	na(or, Dp);
	or.className = "CircularEdge";

	function pr() {
		vi.call(this);
		this.ih = null;
		this.Sn = 0;
		this.yd = (new L(100, 100)).freeze();
		this.Jm = !1;
		this.Ye = !0;
		this.Zc = !1;
		this.il = 100;
		this.un = 1;
		this.Kf = 1E3;
		this.no = 10;
		this.Mo = Math;
		this.Jk = .05;
		this.Ik = 50;
		this.Gk = 150;
		this.Hk = 0;
		this.fn = 10;
		this.en = 5
	}
	na(pr, vi);
	pr.prototype.cloneProtected = function(a) {
		vi.prototype.cloneProtected.call(this, a);
		a.yd.assign(this.yd);
		a.Jm = this.Jm;
		a.Ye = this.Ye;
		a.Zc = this.Zc;
		a.il = this.il;
		a.un = this.un;
		a.Kf = this.Kf;
		a.no = this.no;
		a.Mo = this.Mo;
		a.Jk = this.Jk;
		a.Ik = this.Ik;
		a.Gk = this.Gk;
		a.Hk = this.Hk;
		a.fn = this.fn;
		a.en = this.en
	};
	pr.prototype.createNetwork = function() {
		return new qr(this)
	};
	pr.prototype.doLayout = function(a) {
		null === this.network && (this.network = this.makeNetwork(a));
		a = this.maxIterations;
		if(0 < this.network.vertexes.count) {
			this.network.Jp();
			for(var b = this.network.vertexes.iterator; b.next();) {
				var c = b.value;
				c.charge = this.electricalCharge(c);
				c.mass = this.gravitationalMass(c)
			}
			for(b = this.network.edges.iterator; b.next();) c = b.value, c.stiffness = this.springStiffness(c), c.length = this.springLength(c);
			this.zu();
			this.Sn = 0;
			if(this.needsClusterLayout()) {
				b = this.network;
				for(c = b.Nx().iterator; c.next();) {
					this.network =
						c.value;
					for(var d = this.network.vertexes.iterator; d.next();) {
						var e = d.value;
						e.wd = e.vertexes.count;
						e.xh = 1;
						e.Nj = null;
						e.Ge = null
					}
					rr(this, 0, a)
				}
				this.network = b;
				c.reset();
				d = this.arrangementSpacing;
				for(var f = c.count, g = !0, h = e = 0, k = La(), l = 0; l < f + b.vertexes.count + 2; l++) k[l] = null;
				f = 0;
				c.reset();
				for(var m = M.alloc(); c.next();)
					if(l = c.value, this.computeBounds(l, m), g) g = !1, e = m.x + m.width / 2, h = m.y + m.height / 2, k[0] = new G(m.x + m.width + d.width, m.y), k[1] = new G(m.x, m.y + m.height + d.height), f = 2;
					else {
						var n = sr(k, f, e, h, m.width, m.height,
								d),
							p = k[n],
							q = new G(p.x + m.width + d.width, p.y),
							r = new G(p.x, p.y + m.height + d.height);
						n + 1 < f && k.splice(n + 1, 0, null);
						k[n] = q;
						k[n + 1] = r;
						f++;
						n = p.x - m.x;
						p = p.y - m.y;
						for(l = l.vertexes.iterator; l.next();) q = l.value, q.centerX += n, q.centerY += p
					}
				M.free(m);
				for(l = b.vertexes.iterator; l.next();) g = l.value, q = g.bounds, 2 > f ? (e = q.x + q.width / 2, h = q.y + q.height / 2, k[0] = new G(q.x + q.width + d.width, q.y), k[1] = new G(q.x, q.y + q.height + d.height), f = 2) : (m = sr(k, f, e, h, q.width, q.height, d), p = k[m], n = new G(p.x + q.width + d.width, p.y), q = new G(p.x, p.y + q.height +
					d.height), m + 1 < f && k.splice(m + 1, 0, null), k[m] = n, k[m + 1] = q, f++, g.centerX = p.x + g.width / 2, g.centerY = p.y + g.height / 2);
				Na(k);
				for(c.reset(); c.next();) {
					d = c.value;
					for(e = d.vertexes.iterator; e.next();) b.mh(e.value);
					for(d = d.edges.iterator; d.next();) b.Hj(d.value)
				}
			}
			tr(this, a);
			this.updateParts()
		}
		this.il = a;
		this.network = null;
		this.isValidLayout = !0
	};
	pr.prototype.needsClusterLayout = function() {
		if(3 > this.network.vertexes.count) return !1;
		for(var a = 0, b = 0, c = this.network.vertexes.first().bounds, d = this.network.vertexes.iterator; d.next();) {
			if(d.value.bounds.Kc(c) && (a++, 2 < a)) return !0;
			if(10 < b) break;
			b++
		}
		return !1
	};
	pr.prototype.computeBounds = function(a, b) {
		var c = !0;
		for(a = a.vertexes.iterator; a.next();) {
			var d = a.value;
			c ? (c = !1, b.set(d.bounds)) : b.Wc(d.bounds)
		}
		return b
	};

	function rr(a, b, c) {
		if(ur(a, b)) {
			var d = a.Kf;
			a.Kf *= 1 + 1 / (b + 1);
			var e = vr(a, b),
				f = Math.max(0, Math.max(Math.min(a.network.vertexes.count, c * (b + 1) / 11), 10));
			a.maxIterations += f;
			rr(a, b + 1, c);
			tr(a, f);
			wr(a, e);
			b = e.vertexes.La();
			b.sort(function(a, b) {
				return null === a || null === b || a === b ? 0 : b.wd - a.wd
			});
			for(c = 0; c < b.length; c++) xr(a, b[c]);
			a.Kf = d
		}
	}

	function ur(a, b) {
		if(10 < b || 3 > a.network.vertexes.count) return !1;
		a.ih = a.network.vertexes.La();
		a = a.ih;
		a.sort(function(a, b) {
			return null === a || null === b || a === b ? 0 : b.wd - a.wd
		});
		for(b = a.length - 1; 0 <= b && 1 >= a[b].wd;) b--;
		return 1 < a.length - b
	}

	function vr(a, b) {
		for(var c = a.network, d = new qr(a), e = 0; e < a.ih.length; e++) {
			var f = a.ih[e];
			if(1 < f.wd) {
				d.mh(f);
				var g = new yr;
				g.vt = f.wd;
				g.wt = f.width;
				g.ut = f.height;
				g.Zv = f.focus.x;
				g.$v = f.focus.y;
				null === f.Ge && (f.Ge = new E);
				f.Ge.add(g);
				f.wv = f.Ge.count - 1
			} else break
		}
		for(f = c.edges.iterator; f.next();) {
			var h = f.value;
			e = h.fromVertex;
			g = h.toVertex;
			e.network === d && g.network === d ? d.Hj(h) : e.network === d ? (h = e.Nj, null === h && (h = new E, e.Nj = h), h.add(g), e.wd--, e.xh += g.xh) : g.network === d && (h = g.Nj, null === h && (h = new E, g.Nj = h), h.add(e),
				g.wd--, g.xh += e.xh)
		}
		for(e = d.edges.iterator; e.next();) f = e.value, f.length *= Math.max(1, H.sqrt((f.fromVertex.xh + f.toVertex.xh) / (4 * b + 1)));
		for(b = d.vertexes.iterator; b.next();) {
			e = b.value;
			var k = e.Nj;
			if(null !== k && 0 < k.count && (g = e.Ge.N(e.Ge.count - 1).vt - e.wd, !(0 >= g))) {
				for(var l = h = 0, m = k.count - g; m < k.count; m++) {
					var n = k.N(m),
						p = null;
					for(f = n.edges.iterator; f.next();) {
						var q = f.value;
						if(q.ox(n) === e) {
							p = q;
							break
						}
					}
					null !== p && (l += p.length, h += n.width * n.height)
				}
				f = e.centerX;
				k = e.centerY;
				m = e.width;
				n = e.height;
				p = e.focus;
				q = m * n;
				1 > q &&
					(q = 1);
				h = H.sqrt((h + q + l * l * 4 / (g * g)) / q);
				g = (h - 1) * m / 2;
				h = (h - 1) * n / 2;
				e.bounds = new M(f - p.x - g, k - p.y - h, m + 2 * g, n + 2 * h);
				e.focus = new G(p.x + g, p.y + h)
			}
		}
		a.network = d;
		return c
	}

	function wr(a, b) {
		for(var c = a.network.vertexes.iterator; c.next();) {
			var d = c.value;
			d.network = b;
			if(null !== d.Ge) {
				var e = d.Ge.N(d.wv);
				d.wd = e.vt;
				var f = e.Zv,
					g = e.$v;
				d.bounds = new M(d.centerX - f, d.centerY - g, e.wt, e.ut);
				d.focus = new G(f, g);
				d.wv--
			}
		}
		for(c = a.network.edges.iterator; c.next();) c.value.network = b;
		a.network = b
	}

	function xr(a, b) {
		var c = b.Nj;
		if(null !== c && 0 !== c.count) {
			var d = b.centerX,
				e = b.centerY,
				f = b.width,
				g = b.height;
			null !== b.Ge && 0 < b.Ge.count && (g = b.Ge.N(0), f = g.wt, g = g.ut);
			f = H.sqrt(f * f + g * g) / 2;
			for(var h = !1, k = g = 0, l = 0, m = b.vertexes.iterator; m.next();) {
				var n = m.value;
				1 >= n.wd ? k++ : (h = !0, l++, g += Math.atan2(b.centerY - n.centerY, b.centerX - n.centerX))
			}
			if(0 !== k)
				for(0 < l && (g /= l), l = b = 0, b = h ? 2 * Math.PI / (k + 1) : 2 * Math.PI / k, 0 === k % 2 && (l = b / 2), 1 < c.count && c.sort(function(a, b) {
						return null === a || null === b || a === b ? 0 : b.width * b.height - a.width * a.height
					}),
					h = 0 === k % 2 ? 0 : 1, c = c.iterator; c.next();)
					if(k = c.value, !(1 < k.wd || a.isFixed(k))) {
						m = null;
						for(n = k.edges.iterator; n.next();) {
							m = n.value;
							break
						}
						n = k.width;
						var p = k.height;
						n = H.sqrt(n * n + p * p) / 2;
						m = f + m.length + n;
						n = g + (b * (h / 2 >> 1) + l) * (0 === h % 2 ? 1 : -1);
						k.centerX = d + m * Math.cos(n);
						k.centerY = e + m * Math.sin(n);
						h++
					}
		}
	}

	function sr(a, b, c, d, e, f, g) {
		var h = 9E19,
			k = -1,
			l = 0;
		a: for(; l < b; l++) {
			var m = a[l],
				n = m.x - c,
				p = m.y - d;
			n = n * n + p * p;
			if(n < h) {
				for(p = l - 1; 0 <= p; p--)
					if(a[p].y > m.y && a[p].x - m.x < e + g.width) continue a;
				for(p = l + 1; p < b; p++)
					if(a[p].x > m.x && a[p].y - m.y < f + g.height) continue a;
				k = l;
				h = n
			}
		}
		return k
	}
	pr.prototype.zu = function() {
		if(this.comments)
			for(var a = this.network.vertexes.iterator; a.next();) this.addComments(a.value)
	};
	pr.prototype.addComments = function(a) {
		var b = a.node;
		if(null !== b)
			for(b = b.Mu(); b.next();) {
				var c = b.value;
				if("Comment" === c.category && c.isVisible()) {
					var d = this.network.Ci(c);
					null === d && (d = this.network.Ll(c));
					d.charge = this.defaultCommentElectricalCharge;
					c = null;
					for(var e = d.destinationEdges; e.next();) {
						var f = e.value;
						if(f.toVertex === a) {
							c = f;
							break
						}
					}
					if(null === c)
						for(e = d.sourceEdges; e.next();)
							if(f = e.value, f.fromVertex === a) {
								c = f;
								break
							}
					null === c && (c = this.network.$j(a, d, null));
					c.length = this.defaultCommentSpringLength
				}
			}
	};

	function zr(a, b) {
		var c = a.bounds,
			d = c.x;
		a = c.y;
		var e = c.width;
		c = c.height;
		var f = b.bounds,
			g = f.x;
		b = f.y;
		var h = f.width;
		f = f.height;
		return d + e < g ? a > b + f ? (c = d + e - g, a = a - b - f, H.sqrt(c * c + a * a)) : a + c < b ? (d = d + e - g, a = a + c - b, H.sqrt(d * d + a * a)) : g - (d + e) : d > g + h ? a > b + f ? (c = d - g - h, a = a - b - f, H.sqrt(c * c + a * a)) : a + c < b ? (d = d - g - h, a = a + c - b, H.sqrt(d * d + a * a)) : d - (g + h) : a > b + f ? a - (b + f) : a + c < b ? b - (a + c) : .1
	}

	function tr(a, b) {
		a.ih = null;
		for(b = a.Sn + b; a.Sn < b && (a.Sn++, Ar(a)););
		a.ih = null
	}

	function Ar(a) {
		null === a.ih && (a.ih = a.network.vertexes.La());
		var b = a.ih;
		if(0 >= b.length) return !1;
		var c = b[0];
		c.forceX = 0;
		c.forceY = 0;
		for(var d = c.centerX, e = d, f = c = c.centerY, g = 1; g < b.length; g++) {
			var h = b[g];
			h.forceX = 0;
			h.forceY = 0;
			var k = h.centerX;
			h = h.centerY;
			d = Math.min(d, k);
			e = Math.max(e, k);
			c = Math.min(c, h);
			f = Math.max(f, h)
		}(e = e - d > f - c) ? b.sort(function(a, b) {
			return null === a || null === b || a === b ? 0 : a.centerX - b.centerX
		}): b.sort(function(a, b) {
			return null === a || null === b || a === b ? 0 : a.centerY - b.centerY
		});
		c = a.Kf;
		var l = d = h = 0;
		for(f =
			0; f < b.length; f++) {
			g = b[f];
			d = g.bounds;
			h = g.focus;
			k = d.x + h.x;
			var m = d.y + h.y;
			d = g.charge * a.electricalFieldX(k, m);
			l = g.charge * a.electricalFieldY(k, m);
			d += g.mass * a.gravitationalFieldX(k, m);
			l += g.mass * a.gravitationalFieldY(k, m);
			g.forceX += d;
			g.forceY += l;
			for(var n = f + 1; n < b.length; n++) {
				var p = b[n];
				if(p !== g) {
					d = p.bounds;
					h = p.focus;
					l = d.x + h.x;
					var q = d.y + h.y;
					if(k - l > c || l - k > c) {
						if(e) break
					} else if(m - q > c || q - m > c) {
						if(!e) break
					} else {
						var r = zr(g, p);
						1 > r ? (d = a.randomNumberGenerator, null === d && (a.randomNumberGenerator = d = new Br), r = d.random(),
							h = d.random(), k > l ? (d = Math.abs(p.bounds.right - g.bounds.x), d = (1 + d) * r) : k < l ? (d = Math.abs(p.bounds.x - g.bounds.right), d = -(1 + d) * r) : (d = Math.max(p.width, g.width), d = (1 + d) * r - d / 2), m > q ? (l = Math.abs(p.bounds.bottom - g.bounds.y), l = (1 + l) * h) : k < l ? (l = Math.abs(p.bounds.y - g.bounds.bottom), l = -(1 + l) * h) : (l = Math.max(p.height, g.height), l = (1 + l) * h - l / 2)) : (h = -(g.charge * p.charge) / (r * r), d = (l - k) / r * h, l = (q - m) / r * h);
						g.forceX += d;
						g.forceY += l;
						p.forceX -= d;
						p.forceY -= l
					}
				}
			}
		}
		for(e = a.network.edges.iterator; e.next();) h = e.value, c = h.fromVertex, f = h.toVertex,
			g = c.bounds, k = c.focus, d = g.x + k.x, g = g.y + k.y, m = f.bounds, n = f.focus, k = m.x + n.x, m = m.y + n.y, n = zr(c, f), 1 > n ? (n = a.randomNumberGenerator, null === n && (a.randomNumberGenerator = n = new Br), h = n.random(), n = n.random(), d = (d > k ? 1 : -1) * (1 + (f.width > c.width ? f.width : c.width)) * h, l = (g > m ? 1 : -1) * (1 + (f.height > c.height ? f.height : c.height)) * n) : (h = h.stiffness * (n - h.length), d = (k - d) / n * h, l = (m - g) / n * h), c.forceX += d, c.forceY += l, f.forceX -= d, f.forceY -= l;
		d = 0;
		e = a.moveLimit;
		for(c = 0; c < b.length; c++) f = b[c], a.isFixed(f) ? a.moveFixedVertex(f) : (g = f.forceX, k =
			f.forceY, g < -e ? g = -e : g > e && (g = e), k < -e ? k = -e : k > e && (k = e), f.centerX += g, f.centerY += k, d = Math.max(d, g * g + k * k));
		return d > a.epsilonDistance * a.epsilonDistance
	}
	pr.prototype.moveFixedVertex = function() {};
	pr.prototype.commitLayout = function() {
		this.Ev();
		this.commitNodes();
		this.isRouting && this.commitLinks()
	};
	pr.prototype.Ev = function() {
		if(this.setsPortSpots)
			for(var a = this.network.edges.iterator; a.next();) {
				var b = a.value.link;
				null !== b && (b.fromSpot = Hd, b.toSpot = Hd)
			}
	};
	pr.prototype.commitNodes = function() {
		var a = 0,
			b = 0;
		if(this.arrangesToOrigin) {
			var c = M.alloc();
			this.computeBounds(this.network, c);
			b = this.arrangementOrigin;
			a = b.x - c.x;
			b = b.y - c.y;
			M.free(c)
		}
		c = M.alloc();
		for(var d = this.network.vertexes.iterator; d.next();) {
			var e = d.value;
			if(0 !== a || 0 !== b) c.assign(e.bounds), c.x += a, c.y += b, e.bounds = c;
			e.commit()
		}
		M.free(c)
	};
	pr.prototype.commitLinks = function() {
		for(var a = this.network.edges.iterator; a.next();) a.value.commit()
	};
	pr.prototype.springStiffness = function(a) {
		a = a.stiffness;
		return isNaN(a) ? this.Jk : a
	};
	pr.prototype.springLength = function(a) {
		a = a.length;
		return isNaN(a) ? this.Ik : a
	};
	pr.prototype.electricalCharge = function(a) {
		a = a.charge;
		return isNaN(a) ? this.Gk : a
	};
	pr.prototype.electricalFieldX = function() {
		return 0
	};
	pr.prototype.electricalFieldY = function() {
		return 0
	};
	pr.prototype.gravitationalMass = function(a) {
		a = a.mass;
		return isNaN(a) ? this.Hk : a
	};
	pr.prototype.gravitationalFieldX = function() {
		return 0
	};
	pr.prototype.gravitationalFieldY = function() {
		return 0
	};
	pr.prototype.isFixed = function(a) {
		return a.isFixed
	};
	oa.Object.defineProperties(pr.prototype, {
		currentIteration: {
			get: function() {
				return this.Sn
			}
		},
		arrangementSpacing: {
			get: function() {
				return this.yd
			},
			set: function(a) {
				this.yd.A(a) || (this.yd.assign(a), this.B())
			}
		},
		arrangesToOrigin: {
			get: function() {
				return this.Jm
			},
			set: function(a) {
				this.Jm !== a && (this.Jm = a, this.B())
			}
		},
		setsPortSpots: {
			get: function() {
				return this.Ye
			},
			set: function(a) {
				this.Ye !== a && (this.Ye =
					a, this.B())
			}
		},
		comments: {
			get: function() {
				return this.Zc
			},
			set: function(a) {
				this.Zc !== a && (this.Zc = a, this.B())
			}
		},
		maxIterations: {
			get: function() {
				return this.il
			},
			set: function(a) {
				this.il !== a && 0 <= a && (this.il = a, this.B())
			}
		},
		epsilonDistance: {
			get: function() {
				return this.un
			},
			set: function(a) {
				this.un !== a && 0 < a && (this.un = a, this.B())
			}
		},
		infinityDistance: {
			get: function() {
				return this.Kf
			},
			set: function(a) {
				this.Kf !==
					a && 1 < a && (this.Kf = a, this.B())
			}
		},
		moveLimit: {
			get: function() {
				return this.no
			},
			set: function(a) {
				this.no !== a && 1 < a && (this.no = a, this.B())
			}
		},
		randomNumberGenerator: {
			get: function() {
				return this.Mo
			},
			set: function(a) {
				this.Mo !== a && (null !== a && "function" !== typeof a.random && A('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: ' + a), this.Mo = a)
			}
		},
		defaultSpringStiffness: {
			get: function() {
				return this.Jk
			},
			set: function(a) {
				this.Jk !== a && (this.Jk = a, this.B())
			}
		},
		defaultSpringLength: {
			get: function() {
				return this.Ik
			},
			set: function(a) {
				this.Ik !== a && (this.Ik = a, this.B())
			}
		},
		defaultElectricalCharge: {
			get: function() {
				return this.Gk
			},
			set: function(a) {
				this.Gk !== a && (this.Gk = a, this.B())
			}
		},
		defaultGravitationalMass: {
			get: function() {
				return this.Hk
			},
			set: function(a) {
				this.Hk !== a && (this.Hk = a, this.B())
			}
		},
		defaultCommentSpringLength: {
			get: function() {
				return this.fn
			},
			set: function(a) {
				this.fn !== a && (this.fn = a, this.B())
			}
		},
		defaultCommentElectricalCharge: {
			get: function() {
				return this.en
			},
			set: function(a) {
				this.en !== a && (this.en = a, this.B())
			}
		}
	});
	pr.className = "ForceDirectedLayout";

	function yr() {
		this.$v = this.Zv = this.ut = this.wt = this.vt = 0
	}
	yr.className = "ForceDirectedSubnet";

	function qr(a) {
		zp.call(this, a)
	}
	na(qr, zp);
	qr.prototype.createVertex = function() {
		return new Cr(this)
	};
	qr.prototype.createEdge = function() {
		return new Dr(this)
	};
	qr.className = "ForceDirectedNetwork";

	function Cr(a) {
		Cp.call(this, a);
		this.Wa = !1;
		this.eb = this.K = NaN;
		this.xh = this.wd = this.Va = this.da = 0;
		this.Ge = this.Nj = null;
		this.wv = 0
	}
	na(Cr, Cp);
	oa.Object.defineProperties(Cr.prototype, {
		isFixed: {
			get: function() {
				return this.Wa
			},
			set: function(a) {
				this.Wa !== a && (this.Wa = a)
			}
		},
		charge: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K !== a && (this.K = a)
			}
		},
		mass: {
			get: function() {
				return this.eb
			},
			set: function(a) {
				this.eb !== a && (this.eb = a)
			}
		},
		forceX: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da !== a && (this.da = a)
			}
		},
		forceY: {
			get: function() {
				return this.Va
			},
			set: function(a) {
				this.Va !== a && (this.Va = a)
			}
		}
	});
	Cr.className = "ForceDirectedVertex";

	function Dr(a) {
		Dp.call(this, a);
		this.l = this.u = NaN
	}
	na(Dr, Dp);
	oa.Object.defineProperties(Dr.prototype, {
		stiffness: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u !== a && (this.u = a)
			}
		},
		length: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l !== a && (this.l = a)
			}
		}
	});
	Dr.className = "ForceDirectedEdge";

	function Br() {
		var a = 0;
		void 0 === a && (a = 42);
		this.seed = a;
		this.Px = 48271;
		this.Rx = 2147483647;
		this.Q = 44488.07041494893;
		this.Tx = 3399;
		this.Qx = 1 / 2147483647;
		this.random()
	}
	Br.prototype.random = function() {
		var a = this.seed % this.Q * this.Px - this.seed / this.Q * this.Tx;
		0 < a ? this.seed = a : this.seed = a + this.Rx;
		return this.seed * this.Qx
	};
	Br.className = "RandomNumberGenerator";

	function Er() {
		vi.call(this);
		this.Wb = this.je = 25;
		this.L = 0;
		this.Ek = Fr;
		this.dl = Gr;
		this.Uk = Hr;
		this.jj = 4;
		this.rk = Ir;
		this.$f = 7;
		this.Ye = !0;
		this.Xn = 4;
		this.Ga = this.Ir = this.ya = -1;
		this.sd = this.io = 0;
		this.Ka = this.pd = this.qd = this.Jd = this.fc = null;
		this.po = 0;
		this.oo = this.oj = null;
		this.Nd = 0;
		this.qo = null;
		this.hw = new G;
		this.ne = [];
		this.ne.length = 100
	}
	na(Er, vi);
	Er.prototype.cloneProtected = function(a) {
		vi.prototype.cloneProtected.call(this, a);
		a.je = this.je;
		a.Wb = this.Wb;
		a.L = this.L;
		a.Ek = this.Ek;
		a.dl = this.dl;
		a.Uk = this.Uk;
		a.jj = this.jj;
		a.rk = this.rk;
		a.$f = this.$f;
		a.Ye = this.Ye;
		a.Xn = this.Xn
	};
	Er.prototype.ib = function(a) {
		a.classType === Er ? 0 === a.name.indexOf("Aggressive") ? this.aggressiveOption = a : 0 === a.name.indexOf("Cycle") ? this.cycleRemoveOption = a : 0 === a.name.indexOf("Init") ? this.initializeOption = a : 0 === a.name.indexOf("Layer") ? this.layeringOption = a : A("Unknown enum value: " + a) : vi.prototype.ib.call(this, a)
	};
	Er.prototype.createNetwork = function() {
		return new Jr(this)
	};
	Er.prototype.doLayout = function(a) {
		null === this.network && (this.network = this.makeNetwork(a));
		this.arrangementOrigin = this.initialOrigin(this.arrangementOrigin);
		this.Ir = -1;
		this.sd = this.io = 0;
		this.qo = this.oo = this.oj = null;
		for(a = 0; a < this.ne.length; a++) this.ne[a] = null;
		if(0 < this.network.vertexes.count) {
			this.network.Jp();
			for(a = this.network.edges.iterator; a.next();) a.value.rev = !1;
			switch(this.Ek) {
				default:
					case Kr:
					a = this.network;
				var b = 0,
					c = a.vertexes.count - 1,
					d = [];d.length = c + 1;
				for(var e = a.vertexes.iterator; e.next();) e.value.valid = !0;
				for(; null !== Lr(a);) {
					for(e = Mr(a); null !== e;) d[c] = e, c--, e.valid = !1, e = Mr(a);
					for(e = Nr(a); null !== e;) d[b] = e, b++, e.valid = !1, e = Nr(a);
					e = null;
					for(var f = 0, g = this.network.vertexes.iterator; g.next();) {
						var h = g.value;
						if(h.valid) {
							for(var k = 0, l = h.destinationEdges; l.next();) l.value.toVertex.valid && k++;
							l = 0;
							for(var m = h.sourceEdges; m.next();) m.value.fromVertex.valid && l++;
							if(null === e || f < k - l) e = h, f = k - l
						}
					}
					null !== e && (d[b] = e, b++, e.valid = !1)
				}
				for(b = 0; b < a.vertexes.count; b++) d[b].index = b;
				for(d = a.edges.iterator; d.next();) b = d.value,
				b.fromVertex.index > b.toVertex.index && (a.hq(b), b.rev = !0);
				break;
				case Fr:
						for(d = this.network.vertexes.iterator; d.next();) a = d.value, a.Sl = -1, a.finish = -1;
					for(a = this.network.edges.iterator; a.next();) a.value.forest = !1;this.po = 0;
					for(d.reset(); d.next();) b = d.value,
					0 === b.sourceEdges.count && Or(this, b);
					for(d.reset(); d.next();) b = d.value,
					-1 === b.Sl && Or(this, b);
					for(a.reset(); a.next();) d = a.value,
					d.forest || (b = d.fromVertex, c = b.finish, e = d.toVertex, f = e.finish, e.Sl < b.Sl && c < f && (this.network.hq(d), d.rev = !0))
			}
			for(a = this.network.vertexes.iterator; a.next();) a.value.layer = -1;
			this.ya = -1;
			this.assignLayers();
			for(a.reset(); a.next();) this.ya = Math.max(this.ya, a.value.layer);
			a = this.network;
			d = [];
			for(b = a.edges.iterator; b.next();) c = b.value, c.valid = !1, d.push(c);
			for(b = 0; b < d.length; b++)
				if(c = d[b], f = c.fromVertex, e = c.toVertex, !c.valid && (null !== f.node && null !== e.node || f.layer !== e.layer)) {
					l = h = k = g = 0;
					if(null !== c.link) {
						k = c.link;
						if(null === k) continue;
						var n = f.node;
						g = e.node;
						if(null === n || null === g) continue;
						var p = k.fromNode;
						h = k.toNode;
						var q = k.fromPort;
						k = k.toPort;
						c.rev && (l = p, m = q, p = h, q = k, h = l, k =
							m);
						var r = f.focus;
						l = e.focus;
						var u = c.rev ? e.bounds : f.bounds;
						m = G.alloc();
						n !== p ? u.s() && p.isVisible() && p.actualBounds.s() ? (p.sh(q, id, m), m.x += p.actualBounds.x - u.x, m.y += p.actualBounds.y - u.y) : m.assign(r) : u.s() ? (p.sh(q, id, m), m.s() || m.assign(r)) : m.assign(r);
						p = c.rev ? f.bounds : e.bounds;
						n = G.alloc();
						g !== h ? p.s() && h.isVisible() && h.actualBounds.s() ? (h.sh(k, id, n), n.x += h.actualBounds.x - p.x, n.y += h.actualBounds.y - p.y) : n.assign(l) : p.s() ? (h.sh(k, id, n), n.s() || n.assign(l)) : n.assign(l);
						90 === this.L || 270 === this.L ? (g = Math.round((m.x -
							r.x) / this.Wb), h = m.x, k = Math.round((n.x - l.x) / this.Wb), l = n.x) : (g = Math.round((m.y - r.y) / this.Wb), h = m.y, k = Math.round((n.y - l.y) / this.Wb), l = n.y);
						G.free(m);
						G.free(n);
						c.portFromColOffset = g;
						c.portFromPos = h;
						c.portToColOffset = k;
						c.portToPos = l
					} else c.portFromColOffset = 0, c.portFromPos = 0, c.portToColOffset = 0, c.portToPos = 0;
					m = f.layer;
					n = e.layer;
					p = 0;
					r = c.link;
					if(null !== r) {
						u = r.fromPort;
						var v = r.toPort;
						if(null !== u && null !== v) {
							var x = r.fromNode;
							q = r.toNode;
							if(null !== x && null !== q) {
								var y = u.fromSpot,
									z = v.toSpot;
								this.setsPortSpots ||
									(r.fromSpot.jb() || (y = r.fromSpot), r.toSpot.jb() || (z = r.toSpot));
								var B = r.isOrthogonal,
									C = Pr(this, !0);
								if(y.jb() || y === dd) y = C;
								var I = Pr(this, !1);
								if(z.jb() || z === dd) z = I;
								y.qf() && y.pf(I) && z.qf() && z.pf(C) ? p = 0 : (C = r.getLinkPoint(x, u, y, !0, B, q, v, G.alloc()), y = r.getLinkDirection(x, u, C, y, !0, B, q, v), G.free(C), y === Qr(this, c, !0) ? p += 1 : this.setsPortSpots && null !== x && 1 === x.ports.count && c.rev && (p += 1), y = r.getLinkPoint(q, v, z, !1, B, x, u, G.alloc()), r = r.getLinkDirection(q, v, y, z, !1, B, x, u), G.free(y), r === Qr(this, c, !1) ? p += 2 : this.setsPortSpots &&
									null !== q && 1 === q.ports.count && c.rev && (p += 2))
							}
						}
					}
					q = p;
					p = 1 === q || 3 === q ? !0 : !1;
					if(q = 2 === q || 3 === q ? !0 : !1) r = a.createVertex(), r.node = null, r.Jj = 1, r.layer = m, r.near = f, a.mh(r), f = a.$j(f, r, c.link), f.valid = !1, f.rev = c.rev, f.portFromColOffset = g, f.portToColOffset = 0, f.portFromPos = h, f.portToPos = 0, f = r;
					u = 1;
					p && u--;
					if(m - n > u && 0 < m) {
						c.valid = !1;
						r = a.createVertex();
						r.node = null;
						r.Jj = 2;
						r.layer = m - 1;
						a.mh(r);
						f = a.$j(f, r, c.link);
						f.valid = !0;
						f.rev = c.rev;
						f.portFromColOffset = q ? 0 : g;
						f.portToColOffset = 0;
						f.portFromPos = q ? 0 : h;
						f.portToPos = 0;
						f = r;
						for(m--; m -
							n > u && 0 < m;) r = a.createVertex(), r.node = null, r.Jj = 3, r.layer = m - 1, a.mh(r), f = a.$j(f, r, c.link), f.valid = !0, f.rev = c.rev, f.portFromColOffset = 0, f.portToColOffset = 0, f.portFromPos = 0, f.portToPos = 0, f = r, m--;
						f = a.$j(r, e, c.link);
						f.valid = !p;
						p && (r.near = e);
						f.rev = c.rev;
						f.portFromColOffset = 0;
						f.portToColOffset = k;
						f.portFromPos = 0;
						f.portToPos = l
					} else c.valid = !0
				}
			a = this.fc = [];
			for(d = 0; d <= this.ya; d++) a[d] = 0;
			for(d = this.network.vertexes.iterator; d.next();) d.value.index = -1;
			this.initializeIndices();
			this.Ir = -1;
			for(b = this.sd = this.io = 0; b <=
				this.ya; b++) a[b] > a[this.sd] && (this.Ir = a[b] - 1, this.sd = b), a[b] < a[this.io] && (this.io = b);
			this.qo = [];
			for(b = 0; b < a.length; b++) this.qo[b] = [];
			for(d.reset(); d.next();) a = d.value, this.qo[a.layer][a.index] = a;
			this.Ga = -1;
			for(a = 0; a <= this.ya; a++) {
				d = Rr(this, a);
				b = 0;
				c = this.fc[a];
				for(e = 0; e < c; e++) f = d[e], b += this.nodeMinColumnSpace(f, !0), f.column = b, b += 1, b += this.nodeMinColumnSpace(f, !1);
				this.Ga = Math.max(this.Ga, b - 1);
				Sr(this, a, d)
			}
			this.reduceCrossings();
			this.straightenAndPack();
			this.updateParts()
		}
		this.network = null;
		this.isValidLayout = !0
	};
	Er.prototype.linkMinLength = function() {
		return 1
	};

	function Tr(a) {
		var b = a.fromVertex.node;
		a = a.toVertex.node;
		return null === b && null === a ? 8 : null === b || null === a ? 4 : 1
	}
	Er.prototype.nodeMinLayerSpace = function(a, b) {
		return null === a.node ? 0 : 90 === this.L || 270 === this.L ? b ? a.focus.y + 10 : a.bounds.height - a.focus.y + 10 : b ? a.focus.x + 10 : a.bounds.width - a.focus.x + 10
	};
	Er.prototype.nodeMinColumnSpace = function(a, b) {
		if(null === a.node) return 0;
		var c = b ? a.hv : a.gv;
		if(null !== c) return c;
		c = this.L;
		return 90 === c || 270 === c ? b ? a.hv = a.focus.x / this.Wb + 1 | 0 : a.gv = (a.bounds.width - a.focus.x) / this.Wb + 1 | 0 : b ? a.hv = a.focus.y / this.Wb + 1 | 0 : a.gv = (a.bounds.height - a.focus.y) / this.Wb + 1 | 0
	};

	function Ur(a) {
		null === a.oj && (a.oj = []);
		for(var b = 0, c = a.network.vertexes.iterator; c.next();) {
			var d = c.value;
			a.oj[b] = d.layer;
			b++;
			a.oj[b] = d.column;
			b++;
			a.oj[b] = d.index;
			b++
		}
		return a.oj
	}

	function Vr(a, b) {
		var c = 0;
		for(a = a.network.vertexes.iterator; a.next();) {
			var d = a.value;
			d.layer = b[c];
			c++;
			d.column = b[c];
			c++;
			d.index = b[c];
			c++
		}
	}

	function Wr(a, b, c) {
		var d = Rr(a, b),
			e = a.fc[b];
		if(null === a.oo || a.oo.length < e * e) a.oo = [];
		for(var f = a.oo, g = 0; g < e; g++) {
			var h = 0,
				k = d[g],
				l = k.near;
			if(null !== l && l.layer === k.layer)
				if(k = l.index, k > g)
					for(var m = g + 1; m < k; m++) {
						var n = d[m];
						n.near === l && n.Jj === l.Jj || h++
					} else
						for(m = g - 1; m > k; m--) n = d[m], n.near === l && n.Jj === l.Jj || h++;
			var p;
			if(0 <= c)
				for(k = d[g].sourceEdgesArrayAccess, l = 0; l < k.length; l++) {
					var q = k[l];
					if(q.valid && q.fromVertex.layer !== b)
						for(n = q.fromVertex.index, m = q.portToPos, q = q.portFromPos, p = l + 1; p < k.length; p++) {
							var r =
								k[p];
							if(r.valid && r.fromVertex.layer !== b) {
								var u = r.fromVertex.index;
								var v = r.portToPos;
								r = r.portFromPos;
								m < v && (n > u || n === u && q > r) && h++;
								v < m && (u > n || u === n && r > q) && h++
							}
						}
				}
			if(0 >= c)
				for(k = d[g].destinationEdgesArrayAccess, l = 0; l < k.length; l++)
					if(q = k[l], q.valid && q.toVertex.layer !== b)
						for(n = q.toVertex.index, m = q.portToPos, q = q.portFromPos, p = l + 1; p < k.length; p++) r = k[p], r.valid && r.toVertex.layer !== b && (u = r.toVertex.index, v = r.portToPos, r = r.portFromPos, q < r && (n > u || n === u && m > v) && h++, r < q && (u > n || u === n && v > m) && h++);
			f[g * e + g] = h;
			for(k = g +
				1; k < e; k++) {
				var x = 0,
					y = 0;
				if(0 <= c) {
					h = d[g].sourceEdgesArrayAccess;
					var z = d[k].sourceEdgesArrayAccess;
					for(l = 0; l < h.length; l++)
						if(q = h[l], q.valid && q.fromVertex.layer !== b)
							for(n = q.fromVertex.index, q = q.portFromPos, p = 0; p < z.length; p++) r = z[p], r.valid && r.fromVertex.layer !== b && (u = r.fromVertex.index, r = r.portFromPos, (n < u || n === u && q < r) && y++, (u < n || u === n && r < q) && x++)
				}
				if(0 >= c)
					for(h = d[g].destinationEdgesArrayAccess, z = d[k].destinationEdgesArrayAccess, l = 0; l < h.length; l++)
						if(q = h[l], q.valid && q.toVertex.layer !== b)
							for(n = q.toVertex.index,
								m = q.portToPos, p = 0; p < z.length; p++) r = z[p], r.valid && r.toVertex.layer !== b && (u = r.toVertex.index, v = r.portToPos, (n < u || n === u && m < v) && y++, (u < n || u === n && v < m) && x++);
				f[g * e + k] = x;
				f[k * e + g] = y
			}
		}
		Sr(a, b, d);
		return f
	}
	Er.prototype.countCrossings = function() {
		for(var a = 0, b = 0; b <= this.ya; b++)
			for(var c = Wr(this, b, 1), d = this.fc[b], e = 0; e < d; e++)
				for(var f = e; f < d; f++) a += c[e * d + f];
		return a
	};

	function Xr(a) {
		for(var b = 0, c = 0; c <= a.ya; c++) {
			for(var d = a, e = c, f = Rr(d, e), g = d.fc[e], h = 0, k = 0; k < g; k++) {
				var l = f[k].destinationEdgesArrayAccess;
				if(null !== l)
					for(var m = 0; m < l.length; m++) {
						var n = l[m];
						if(n.valid && n.toVertex.layer !== e) {
							var p = n.fromVertex.column + n.portFromColOffset;
							var q = n.toVertex.column + n.portToColOffset;
							h += (Math.abs(p - q) + 1) * Tr(n)
						}
					}
			}
			Sr(d, e, f);
			b += h
		}
		return b
	}
	Er.prototype.normalize = function() {
		var a = Infinity;
		this.Ga = -1;
		for(var b = this.network.vertexes.iterator; b.next();) {
			var c = b.value;
			a = Math.min(a, c.column - this.nodeMinColumnSpace(c, !0));
			this.Ga = Math.max(this.Ga, c.column + this.nodeMinColumnSpace(c, !1))
		}
		for(b.reset(); b.next();) b.value.column -= a;
		this.Ga -= a
	};

	function Yr(a, b, c) {
		for(var d = Rr(a, b), e = a.fc[b], f = [], g = 0; g < e; g++) {
			var h = d[g],
				k = null;
			0 >= c && (k = h.sourceEdgesArrayAccess);
			var l = null;
			0 <= c && (l = h.destinationEdgesArrayAccess);
			var m = 0,
				n = 0,
				p = h.near;
			null !== p && p.layer === h.layer && (m += p.column - 1, n++);
			if(null !== k)
				for(p = 0; p < k.length; p++) {
					h = k[p];
					var q = h.fromVertex;
					h.valid && !h.rev && q.layer !== b && (m += q.column, n++)
				}
			if(null !== l)
				for(k = 0; k < l.length; k++) h = l[k], p = h.toVertex, h.valid && !h.rev && p.layer !== b && (m += p.column, n++);
			f[g] = 0 === n ? -1 : m / n
		}
		Sr(a, b, d);
		return f
	}

	function Zr(a, b, c) {
		for(var d = Rr(a, b), e = a.fc[b], f = [], g = 0; g < e; g++) {
			var h = d[g],
				k = null;
			0 >= c && (k = h.sourceEdgesArrayAccess);
			var l = null;
			0 <= c && (l = h.destinationEdgesArrayAccess);
			var m = 0,
				n = [],
				p = h.near;
			null !== p && p.layer === h.layer && (n[m] = p.column - 1, m++);
			h = void 0;
			if(null !== k)
				for(p = 0; p < k.length; p++) {
					h = k[p];
					var q = h.fromVertex;
					h.valid && !h.rev && q.layer !== b && (n[m] = q.column + h.portFromColOffset, m++)
				}
			if(null !== l)
				for(k = 0; k < l.length; k++) h = l[k], p = h.toVertex, h.valid && !h.rev && p.layer !== b && (n[m] = p.column + h.portToColOffset,
					m++);
			0 === m ? f[g] = -1 : (n.sort(function(a, b) {
				return a - b
			}), l = m >> 1, f[g] = 0 !== (m & 1) ? n[l] : n[l - 1] + n[l] >> 1)
		}
		Sr(a, b, d);
		return f
	}

	function $r(a, b, c, d, e, f) {
		if(b.component === d) {
			b.component = c;
			if(e)
				for(var g = b.destinationEdges; g.next();) {
					var h = g.value;
					var k = h.toVertex;
					var l = b.layer - k.layer;
					h = a.linkMinLength(h);
					l === h && $r(a, k, c, d, e, f)
				}
			if(f)
				for(g = b.sourceEdges; g.next();) h = g.value, k = h.fromVertex, l = k.layer - b.layer, h = a.linkMinLength(h), l === h && $r(a, k, c, d, e, f)
		}
	}

	function as(a, b, c, d, e, f) {
		if(b.component === d) {
			b.component = c;
			if(e)
				for(var g = b.destinationEdges; g.next();) as(a, g.value.toVertex, c, d, e, f);
			if(f)
				for(b = b.sourceEdges; b.next();) as(a, b.value.fromVertex, c, d, e, f)
		}
	}

	function Lr(a) {
		for(a = a.vertexes.iterator; a.next();) {
			var b = a.value;
			if(b.valid) return b
		}
		return null
	}

	function Mr(a) {
		for(a = a.vertexes.iterator; a.next();) {
			var b = a.value;
			if(b.valid) {
				for(var c = !0, d = b.destinationEdges; d.next();)
					if(d.value.toVertex.valid) {
						c = !1;
						break
					}
				if(c) return b
			}
		}
		return null
	}

	function Nr(a) {
		for(a = a.vertexes.iterator; a.next();) {
			var b = a.value;
			if(b.valid) {
				for(var c = !0, d = b.sourceEdges; d.next();)
					if(d.value.fromVertex.valid) {
						c = !1;
						break
					}
				if(c) return b
			}
		}
		return null
	}

	function Or(a, b) {
		b.Sl = a.po;
		a.po++;
		for(var c = b.destinationEdges; c.next();) {
			var d = c.value,
				e = d.toVertex; - 1 === e.Sl && (d.forest = !0, Or(a, e))
		}
		b.finish = a.po;
		a.po++
	}
	Er.prototype.assignLayers = function() {
		switch(this.dl) {
			case bs:
				cs(this);
				break;
			case ds:
				for(var a, b = this.network.vertexes.iterator; b.next();) a = es(this, b.value), this.ya = Math.max(a, this.ya);
				for(b.reset(); b.next();) a = b.value, a.layer = this.ya - a.layer;
				break;
			default:
			case Gr:
				cs(this);
				for(b = this.network.vertexes.iterator; b.next();) b.value.valid = !1;
				for(b.reset(); b.next();) a = b.value, 0 === a.sourceEdges.count && fs(this, a);
				a = Infinity;
				for(b.reset(); b.next();) a = Math.min(a, b.value.layer);
				this.ya = -1;
				for(b.reset(); b.next();) {
					var c =
						b.value;
					c.layer -= a;
					this.ya = Math.max(this.ya, c.layer)
				}
		}
	};

	function cs(a) {
		for(var b = a.network.vertexes.iterator; b.next();) {
			var c = gs(a, b.value);
			a.ya = Math.max(c, a.ya)
		}
	}

	function gs(a, b) {
		var c = 0;
		if(-1 === b.layer) {
			for(var d = b.destinationEdges; d.next();) {
				var e = d.value,
					f = e.toVertex;
				e = a.linkMinLength(e);
				c = Math.max(c, gs(a, f) + e)
			}
			b.layer = c
		} else c = b.layer;
		return c
	}

	function es(a, b) {
		var c = 0;
		if(-1 === b.layer) {
			for(var d = b.sourceEdges; d.next();) {
				var e = d.value,
					f = e.fromVertex;
				e = a.linkMinLength(e);
				c = Math.max(c, es(a, f) + e)
			}
			b.layer = c
		} else c = b.layer;
		return c
	}

	function fs(a, b) {
		if(!b.valid) {
			b.valid = !0;
			for(var c = b.destinationEdges; c.next();) fs(a, c.value.toVertex);
			for(c = a.network.vertexes.iterator; c.next();) c.value.component = -1;
			for(var d = b.sourceEdgesArrayAccess, e = d.length, f = 0; f < e; f++) {
				var g = d[f],
					h = g.fromVertex,
					k = g.toVertex;
				g = a.linkMinLength(g);
				h.layer - k.layer > g && $r(a, h, 0, -1, !0, !1)
			}
			for($r(a, b, 1, -1, !0, !0); 0 !== b.component;) {
				f = 0;
				d = Infinity;
				h = 0;
				k = null;
				for(g = a.network.vertexes.iterator; g.next();) {
					var l = g.value;
					if(1 === l.component) {
						var m = 0,
							n = !1,
							p = l.sourceEdgesArrayAccess;
						e = p.length;
						for(var q = 0; q < e; q++) {
							var r = p[q],
								u = r.fromVertex;
							m += 1;
							1 !== u.component && (f += 1, u = u.layer - l.layer, r = a.linkMinLength(r), d = Math.min(d, u - r))
						}
						p = l.destinationEdgesArrayAccess;
						e = p.length;
						for(q = 0; q < e; q++) r = p[q].toVertex, --m, 1 !== r.component ? --f : n = !0;
						(null === k || m < h) && !n && (k = l, h = m)
					}
				}
				if(0 < f) {
					for(c.reset(); c.next();) e = c.value, 1 === e.component && (e.layer += d);
					b.component = 0
				} else k.component = 0
			}
			for(c = a.network.vertexes.iterator; c.next();) c.value.component = -1;
			for($r(a, b, 1, -1, !0, !1); 0 !== b.component;) {
				d = 0;
				e = Infinity;
				f = 0;
				h = null;
				for(k = a.network.vertexes.iterator; k.next();)
					if(g = k.value, 1 === g.component) {
						l = 0;
						m = !1;
						p = g.sourceEdgesArrayAccess;
						n = p.length;
						for(q = 0; q < n; q++) r = p[q].fromVertex, l += 1, 1 !== r.component ? d += 1 : m = !0;
						p = g.destinationEdgesArrayAccess;
						n = p.length;
						for(q = 0; q < n; q++) r = p[q], u = r.toVertex, --l, 1 !== u.component && (--d, u = g.layer - u.layer, r = a.linkMinLength(r), e = Math.min(e, u - r));
						(null === h || l > f) && !m && (h = g, f = l)
					}
				if(0 > d) {
					for(c.reset(); c.next();) d = c.value, 1 === d.component && (d.layer -= e);
					b.component = 0
				} else h.component = 0
			}
		}
	}

	function Qr(a, b, c) {
		return 90 === a.L ? c && !b.rev || !c && b.rev ? 270 : 90 : 180 === a.L ? c && !b.rev || !c && b.rev ? 0 : 180 : 270 === a.L ? c && !b.rev || !c && b.rev ? 90 : 270 : c && !b.rev || !c && b.rev ? 180 : 0
	}
	Er.prototype.initializeIndices = function() {
		switch(this.Uk) {
			default:
				case hs:
				for(var a = this.network.vertexes.iterator; a.next();) {
				var b = a.value,
					c = b.layer;
				b.index = this.fc[c];
				this.fc[c]++
			}
			break;
			case Hr:
					a = this.network.vertexes.iterator;
				for(b = this.ya; 0 <= b; b--)
					for(a.reset(); a.next();) c = a.value, c.layer === b && -1 === c.index && is(this, c);
				break;
			case js:
					for(a = this.network.vertexes.iterator, b = 0; b <= this.ya; b++)
					for(a.reset(); a.next();) c = a.value, c.layer === b && -1 === c.index && ks(this, c)
		}
	};

	function is(a, b) {
		var c = b.layer;
		b.index = a.fc[c];
		a.fc[c]++;
		b = b.destinationEdgesArrayAccess;
		for(c = !0; c;) {
			c = !1;
			for(var d = 0; d < b.length - 1; d++) {
				var e = b[d],
					f = b[d + 1];
				e.portFromColOffset > f.portFromColOffset && (c = !0, b[d] = f, b[d + 1] = e)
			}
		}
		for(c = 0; c < b.length; c++) d = b[c], d.valid && (d = d.toVertex, -1 === d.index && is(a, d))
	}

	function ks(a, b) {
		var c = b.layer;
		b.index = a.fc[c];
		a.fc[c]++;
		b = b.sourceEdgesArrayAccess;
		for(var d = !0; d;)
			for(d = !1, c = 0; c < b.length - 1; c++) {
				var e = b[c],
					f = b[c + 1];
				e.portToColOffset > f.portToColOffset && (d = !0, b[c] = f, b[c + 1] = e)
			}
		for(c = 0; c < b.length; c++) d = b[c], d.valid && (d = d.fromVertex, -1 === d.index && ks(a, d))
	}
	Er.prototype.reduceCrossings = function() {
		var a = this.countCrossings(),
			b = Ur(this),
			c, d;
		for(c = 0; c < this.jj; c++) {
			for(d = 0; d <= this.ya; d++) ls(this, d, 1), ms(this, d, 1);
			var e = this.countCrossings();
			e < a && (a = e, b = Ur(this));
			for(d = this.ya; 0 <= d; d--) ls(this, d, -1), ms(this, d, -1);
			e = this.countCrossings();
			e < a && (a = e, b = Ur(this))
		}
		Vr(this, b);
		for(c = 0; c < this.jj; c++) {
			for(d = 0; d <= this.ya; d++) ls(this, d, 0), ms(this, d, 0);
			e = this.countCrossings();
			e < a && (a = e, b = Ur(this));
			for(d = this.ya; 0 <= d; d--) ls(this, d, 0), ms(this, d, 0);
			e = this.countCrossings();
			e < a && (a = e, b = Ur(this))
		}
		Vr(this, b);
		var f, g, h;
		switch(this.rk) {
			case ns:
				break;
			case os:
				for(h = a + 1;
					(d = this.countCrossings()) < h;)
					for(h = d, c = this.ya; 0 <= c; c--)
						for(g = 0; g <= c; g++) {
							for(f = !0; f;)
								for(f = !1, d = c; d >= g; d--) f = ms(this, d, -1) || f;
							e = this.countCrossings();
							e >= a ? Vr(this, b) : (a = e, b = Ur(this));
							for(f = !0; f;)
								for(f = !1, d = c; d >= g; d--) f = ms(this, d, 1) || f;
							e = this.countCrossings();
							e >= a ? Vr(this, b) : (a = e, b = Ur(this));
							for(f = !0; f;)
								for(f = !1, d = g; d <= c; d++) f = ms(this, d, 1) || f;
							e >= a ? Vr(this, b) : (a = e, b = Ur(this));
							for(f = !0; f;)
								for(f = !1, d = g; d <= c; d++) f =
									ms(this, d, -1) || f;
							e >= a ? Vr(this, b) : (a = e, b = Ur(this));
							for(f = !0; f;)
								for(f = !1, d = c; d >= g; d--) f = ms(this, d, 0) || f;
							e >= a ? Vr(this, b) : (a = e, b = Ur(this));
							for(f = !0; f;)
								for(f = !1, d = g; d <= c; d++) f = ms(this, d, 0) || f;
							e >= a ? Vr(this, b) : (a = e, b = Ur(this))
						}
				break;
			default:
			case Ir:
				for(c = this.ya, g = 0, h = a + 1;
					(d = this.countCrossings()) < h;) {
					h = d;
					for(f = !0; f;)
						for(f = !1, d = c; d >= g; d--) f = ms(this, d, -1) || f;
					e = this.countCrossings();
					e >= a ? Vr(this, b) : (a = e, b = Ur(this));
					for(f = !0; f;)
						for(f = !1, d = c; d >= g; d--) f = ms(this, d, 1) || f;
					e = this.countCrossings();
					e >= a ? Vr(this, b) :
						(a = e, b = Ur(this));
					for(f = !0; f;)
						for(f = !1, d = g; d <= c; d++) f = ms(this, d, 1) || f;
					e >= a ? Vr(this, b) : (a = e, b = Ur(this));
					for(f = !0; f;)
						for(f = !1, d = g; d <= c; d++) f = ms(this, d, -1) || f;
					e >= a ? Vr(this, b) : (a = e, b = Ur(this));
					for(f = !0; f;)
						for(f = !1, d = c; d >= g; d--) f = ms(this, d, 0) || f;
					e >= a ? Vr(this, b) : (a = e, b = Ur(this));
					for(f = !0; f;)
						for(f = !1, d = g; d <= c; d++) f = ms(this, d, 0) || f;
					e >= a ? Vr(this, b) : (a = e, b = Ur(this))
				}
		}
		Vr(this, b)
	};

	function ls(a, b, c) {
		var d = Rr(a, b),
			e = a.fc[b],
			f = Zr(a, b, c),
			g = Yr(a, b, c);
		for(c = 0; c < e; c++) - 1 === g[c] && (g[c] = d[c].column), -1 === f[c] && (f[c] = d[c].column);
		for(var h = !0, k; h;)
			for(h = !1, c = 0; c < e - 1; c++)
				if(f[c + 1] < f[c] || f[c + 1] === f[c] && g[c + 1] < g[c]) h = !0, k = f[c], f[c] = f[c + 1], f[c + 1] = k, k = g[c], g[c] = g[c + 1], g[c + 1] = k, k = d[c], d[c] = d[c + 1], d[c + 1] = k;
		for(c = f = 0; c < e; c++) k = d[c], k.index = c, f += a.nodeMinColumnSpace(k, !0), k.column = f, f += 1, f += a.nodeMinColumnSpace(k, !1);
		Sr(a, b, d)
	}

	function ms(a, b, c) {
		var d = Rr(a, b),
			e = a.fc[b];
		c = Wr(a, b, c);
		var f;
		var g = [];
		for(f = 0; f < e; f++) g[f] = -1;
		var h = [];
		for(f = 0; f < e; f++) h[f] = -1;
		for(var k = !1, l = !0; l;)
			for(l = !1, f = 0; f < e - 1; f++) {
				var m = c[d[f].index * e + d[f + 1].index],
					n = c[d[f + 1].index * e + d[f].index],
					p = 0,
					q = 0,
					r = d[f].column,
					u = d[f + 1].column,
					v = a.nodeMinColumnSpace(d[f], !0),
					x = a.nodeMinColumnSpace(d[f], !1),
					y = a.nodeMinColumnSpace(d[f + 1], !0),
					z = a.nodeMinColumnSpace(d[f + 1], !1);
				v = r - v + y;
				x = u - x + z;
				var B = d[f].sourceEdges.iterator;
				for(B.reset(); B.next();)
					if(y = B.value, z = y.fromVertex,
						y.valid && z.layer === b) {
						for(y = 0; d[y] !== z;) y++;
						y < f && (p += 2 * (f - y), q += 2 * (f + 1 - y));
						y === f + 1 && (p += 1);
						y > f + 1 && (p += 4 * (y - f), q += 4 * (y - (f + 1)))
					}
				B = d[f].destinationEdges.iterator;
				for(B.reset(); B.next();)
					if(y = B.value, z = y.toVertex, y.valid && z.layer === b) {
						for(y = 0; d[y] !== z;) y++;
						y === f + 1 && (q += 1)
					}
				B = d[f + 1].sourceEdges.iterator;
				for(B.reset(); B.next();)
					if(y = B.value, z = y.fromVertex, y.valid && z.layer === b) {
						for(y = 0; d[y] !== z;) y++;
						y < f && (p += 2 * (f + 1 - y), q += 2 * (f - y));
						y === f && (q += 1);
						y > f + 1 && (p += 4 * (y - (f + 1)), q += 4 * (y - f))
					}
				B = d[f + 1].destinationEdges.iterator;
				for(B.reset(); B.next();)
					if(y = B.value, z = y.toVertex, y.valid && z.layer === b) {
						for(y = 0; d[y] !== z;) y++;
						y === f && (p += 1)
					}
				y = z = 0;
				B = g[d[f].index];
				var C = h[d[f].index],
					I = g[d[f + 1].index],
					J = h[d[f + 1].index]; - 1 !== B && (z += Math.abs(B - r), y += Math.abs(B - x)); - 1 !== C && (z += Math.abs(C - r), y += Math.abs(C - x)); - 1 !== I && (z += Math.abs(I - u), y += Math.abs(I - v)); - 1 !== J && (z += Math.abs(J - u), y += Math.abs(J - v));
				if(q < p - .5 || q === p && n < m - .5 || q === p && n === m && y < z - .5) l = k = !0, d[f].column = x, d[f + 1].column = v, m = d[f], d[f] = d[f + 1], d[f + 1] = m
			}
		for(f = 0; f < e; f++) d[f].index =
			f;
		Sr(a, b, d);
		return k
	}
	Er.prototype.straightenAndPack = function() {
		var a = 0 !== (this.$f & 1);
		var b = 7 === this.$f;
		1E3 < this.network.edges.count && !b && (a = !1);
		if(a) {
			var c = [];
			for(b = 0; b <= this.ya; b++) c[b] = 0;
			for(var d, e = this.network.vertexes.iterator; e.next();) {
				var f = e.value;
				b = f.layer;
				d = f.column;
				f = this.nodeMinColumnSpace(f, !1);
				c[b] = Math.max(c[b], d + f)
			}
			for(e.reset(); e.next();) f = e.value, b = f.layer, d = f.column, f.column = (8 * (this.Ga - c[b]) >> 1) + 8 * d;
			this.Ga *= 8
		}
		if(0 !== (this.$f & 2))
			for(c = !0; c;) {
				c = !1;
				for(b = this.sd + 1; b <= this.ya; b++) c = ps(this, b, 1) || c;
				for(b =
					this.sd - 1; 0 <= b; b--) c = ps(this, b, -1) || c;
				c = ps(this, this.sd, 0) || c
			}
		if(0 !== (this.$f & 4)) {
			for(b = this.sd + 1; b <= this.ya; b++) qs(this, b, 1);
			for(b = this.sd - 1; 0 <= b; b--) qs(this, b, -1);
			qs(this, this.sd, 0)
		}
		a && (rs(this, -1), rs(this, 1));
		if(0 !== (this.$f & 2))
			for(c = !0; c;) {
				c = !1;
				c = ps(this, this.sd, 0) || c;
				for(b = this.sd + 1; b <= this.ya; b++) c = ps(this, b, 0) || c;
				for(b = this.sd - 1; 0 <= b; b--) c = ps(this, b, 0) || c
			}
	};

	function ps(a, b, c) {
		for(var d = !1; ss(a, b, c);) d = !0;
		return d
	}

	function ss(a, b, c) {
		var d, e = Rr(a, b),
			f = a.fc[b],
			g = Yr(a, b, -1);
		if(0 < c)
			for(d = 0; d < f; d++) g[d] = -1;
		var h = Yr(a, b, 1);
		if(0 > c)
			for(d = 0; d < f; d++) h[d] = -1;
		for(var k = !1, l = !0; l;)
			for(l = !1, d = 0; d < f; d++) {
				var m = e[d].column,
					n = a.nodeMinColumnSpace(e[d], !0),
					p = a.nodeMinColumnSpace(e[d], !1),
					q = 0;
				0 > d - 1 || m - e[d - 1].column - 1 > n + a.nodeMinColumnSpace(e[d - 1], !1) ? q = m - 1 : q = m;
				n = d + 1 >= f || e[d + 1].column - m - 1 > p + a.nodeMinColumnSpace(e[d + 1], !0) ? m + 1 : m;
				var r = p = 0,
					u = 0;
				if(0 >= c)
					for(var v = e[d].sourceEdges.iterator; v.next();) {
						var x = v.value;
						var y = x.fromVertex;
						if(x.valid && y.layer !== b) {
							var z = Tr(x);
							var B = x.portFromColOffset;
							x = x.portToColOffset;
							y = y.column;
							p += (Math.abs(m + x - (y + B)) + 1) * z;
							r += (Math.abs(q + x - (y + B)) + 1) * z;
							u += (Math.abs(n + x - (y + B)) + 1) * z
						}
					}
				if(0 <= c)
					for(v = e[d].destinationEdges.iterator; v.next();) x = v.value, y = x.toVertex, x.valid && y.layer !== b && (z = Tr(x), B = x.portFromColOffset, x = x.portToColOffset, y = y.column, p += (Math.abs(m + B - (y + x)) + 1) * z, r += (Math.abs(q + B - (y + x)) + 1) * z, u += (Math.abs(n + B - (y + x)) + 1) * z);
				x = B = z = 0;
				v = g[e[d].index];
				y = h[e[d].index]; - 1 !== v && (z += Math.abs(v - m), B +=
					Math.abs(v - q), x += Math.abs(v - n)); - 1 !== y && (z += Math.abs(y - m), B += Math.abs(y - q), x += Math.abs(y - n));
				if(r < p || r === p && B < z) l = k = !0, e[d].column = q;
				else if(u < p || u === p && x < z) l = k = !0, e[d].column = n
			}
		Sr(a, b, e);
		a.normalize();
		return k
	}

	function qs(a, b, c) {
		var d = Rr(a, b),
			e = a.fc[b],
			f = Zr(a, b, c),
			g = [];
		for(c = 0; c < e; c++) g[c] = f[c];
		for(f = !0; f;)
			for(f = !1, c = 0; c < e; c++) {
				var h = d[c].column,
					k = a.nodeMinColumnSpace(d[c], !0),
					l = a.nodeMinColumnSpace(d[c], !1),
					m = 0;
				if(-1 === g[c])
					if(0 === c && c === e - 1) m = h;
					else if(0 === c) {
					var n = d[c + 1].column;
					n - h === l + a.nodeMinColumnSpace(d[c + 1], !0) ? m = h - 1 : m = h
				} else c === e - 1 ? (n = d[c - 1].column, m = h - n === k + a.nodeMinColumnSpace(d[c - 1], !1) ? h + 1 : h) : (n = d[c - 1].column, k = n + a.nodeMinColumnSpace(d[c - 1], !1) + k + 1, n = d[c + 1].column, l = n - a.nodeMinColumnSpace(d[c +
					1], !0) - l - 1, m = (k + l) / 2 | 0);
				else 0 === c && c === e - 1 ? m = g[c] : 0 === c ? (n = d[c + 1].column, l = n - a.nodeMinColumnSpace(d[c + 1], !0) - l - 1, m = Math.min(g[c], l)) : c === e - 1 ? (n = d[c - 1].column, k = n + a.nodeMinColumnSpace(d[c - 1], !1) + k + 1, m = Math.max(g[c], k)) : (n = d[c - 1].column, k = n + a.nodeMinColumnSpace(d[c - 1], !1) + k + 1, n = d[c + 1].column, l = n - a.nodeMinColumnSpace(d[c + 1], !0) - l - 1, k < g[c] && g[c] < l ? m = g[c] : k >= g[c] ? m = k : l <= g[c] && (m = l));
				m !== h && (f = !0, d[c].column = m)
			}
		Sr(a, b, d);
		a.normalize()
	}

	function ts(a, b) {
		for(var c = !0, d = a.network.vertexes.iterator; d.next();) {
			var e = d.value,
				f = a.nodeMinColumnSpace(e, !0),
				g = a.nodeMinColumnSpace(e, !1);
			if(e.column - f <= b && e.column + g >= b) {
				c = !1;
				break
			}
		}
		a = !1;
		if(c)
			for(d.reset(); d.next();) c = d.value, c.column > b && (--c.column, a = !0);
		return a
	}

	function us(a, b) {
		var c = b + 1;
		var d, e = [],
			f = [];
		for(d = 0; d <= a.ya; d++) e[d] = !1, f[d] = !1;
		for(var g = a.network.vertexes.iterator; g.next();) {
			d = g.value;
			var h = d.column - a.nodeMinColumnSpace(d, !0),
				k = d.column + a.nodeMinColumnSpace(d, !1);
			h <= b && k >= b && (e[d.layer] = !0);
			h <= c && k >= c && (f[d.layer] = !0)
		}
		h = !0;
		c = !1;
		for(d = 0; d <= a.ya; d++) h = h && !(e[d] && f[d]);
		if(h)
			for(g.reset(); g.next();) a = g.value, a.column > b && (--a.column, c = !0);
		return c
	}

	function rs(a, b) {
		for(var c = 0; c <= a.Ga; c++)
			for(; ts(a, c););
		a.normalize();
		for(c = 0; c < a.Ga; c++)
			for(; us(a, c););
		a.normalize();
		var d;
		if(0 < b)
			for(c = 0; c <= a.Ga; c++) {
				var e = Ur(a);
				var f = Xr(a);
				for(d = f + 1; f < d;) {
					d = f;
					vs(a, c, 1);
					var g = Xr(a);
					g > f ? Vr(a, e) : g < f && (f = g, e = Ur(a))
				}
			}
		if(0 > b)
			for(c = a.Ga; 0 <= c; c--)
				for(e = Ur(a), f = Xr(a), d = f + 1; f < d;) d = f, vs(a, c, -1), g = Xr(a), g > f ? Vr(a, e) : g < f && (f = g, e = Ur(a));
		a.normalize()
	}

	function vs(a, b, c) {
		a.Nd = 0;
		for(var d = a.network.vertexes.iterator; d.next();) d.value.component = -1;
		if(0 < c)
			for(d.reset(); d.next();) {
				var e = d.value;
				e.column - a.nodeMinColumnSpace(e, !0) <= b && (e.component = a.Nd)
			}
		if(0 > c)
			for(d.reset(); d.next();) e = d.value, e.column + a.nodeMinColumnSpace(e, !1) >= b && (e.component = a.Nd);
		a.Nd++;
		for(d.reset(); d.next();) b = d.value, -1 === b.component && (as(a, b, a.Nd, -1, !0, !0), a.Nd++);
		var f;
		b = [];
		for(f = 0; f < a.Nd * a.Nd; f++) b[f] = !1;
		e = [];
		for(f = 0; f < (a.ya + 1) * (a.Ga + 1); f++) e[f] = -1;
		for(d.reset(); d.next();) {
			f =
				d.value;
			for(var g = f.layer, h = Math.max(0, f.column - a.nodeMinColumnSpace(f, !0)), k = Math.min(a.Ga, f.column + a.nodeMinColumnSpace(f, !1)); h <= k; h++) e[g * (a.Ga + 1) + h] = f.component
		}
		for(f = 0; f <= a.ya; f++) {
			if(0 < c)
				for(g = 0; g < a.Ga; g++) - 1 !== e[f * (a.Ga + 1) + g] && -1 !== e[f * (a.Ga + 1) + g + 1] && e[f * (a.Ga + 1) + g] !== e[f * (a.Ga + 1) + g + 1] && (b[e[f * (a.Ga + 1) + g] * a.Nd + e[f * (a.Ga + 1) + g + 1]] = !0);
			if(0 > c)
				for(g = a.Ga; 0 < g; g--) - 1 !== e[f * (a.Ga + 1) + g] && -1 !== e[f * (a.Ga + 1) + g - 1] && e[f * (a.Ga + 1) + g] !== e[f * (a.Ga + 1) + g - 1] && (b[e[f * (a.Ga + 1) + g] * a.Nd + e[f * (a.Ga + 1) + g - 1]] = !0)
		}
		e = [];
		for(f = 0; f < a.Nd; f++) e[f] = !0;
		g = [];
		for(g.push(0); 0 !== g.length;)
			if(k = g[g.length - 1], g.pop(), e[k])
				for(e[k] = !1, f = 0; f < a.Nd; f++) b[k * a.Nd + f] && g.splice(0, 0, f);
		if(0 < c)
			for(d.reset(); d.next();) a = d.value, e[a.component] && --a.column;
		if(0 > c)
			for(d.reset(); d.next();) c = d.value, e[c.component] && (c.column += 1)
	}
	Er.prototype.commitLayout = function() {
		if(this.setsPortSpots)
			for(var a = Pr(this, !0), b = Pr(this, !1), c = this.network.edges.iterator; c.next();) {
				var d = c.value.link;
				null !== d && (d.fromSpot = a, d.toSpot = b)
			}
		this.commitNodes();
		this.Du();
		this.isRouting && this.commitLinks()
	};

	function Pr(a, b) {
		return 270 === a.L ? b ? Sd : Vd : 90 === a.L ? b ? Vd : Sd : 180 === a.L ? b ? Td : Ud : b ? Ud : Td
	}
	Er.prototype.commitNodes = function() {
		this.Jd = [];
		this.qd = [];
		this.pd = [];
		this.Ka = [];
		for(var a = 0; a <= this.ya; a++) this.Jd[a] = 0, this.qd[a] = 0, this.pd[a] = 0, this.Ka[a] = 0;
		for(a = this.network.vertexes.iterator; a.next();) {
			var b = a.value,
				c = b.layer;
			this.Jd[c] = Math.max(this.Jd[c], this.nodeMinLayerSpace(b, !0));
			this.qd[c] = Math.max(this.qd[c], this.nodeMinLayerSpace(b, !1))
		}
		b = 0;
		c = this.je;
		for(var d = 0; d <= this.ya; d++) {
			var e = c;
			0 >= this.Jd[d] + this.qd[d] && (e = 0);
			0 < d && (b += e / 2);
			90 === this.L || 0 === this.L ? (b += this.qd[d], this.pd[d] = b,
				b += this.Jd[d]) : (b += this.Jd[d], this.pd[d] = b, b += this.qd[d]);
			d < this.ya && (b += e / 2);
			this.Ka[d] = b
		}
		c = b;
		b = this.arrangementOrigin;
		for(d = 0; d <= this.ya; d++) 270 === this.L ? this.pd[d] = b.y + this.pd[d] : 90 === this.L ? (this.pd[d] = b.y + c - this.pd[d], this.Ka[d] = c - this.Ka[d]) : 180 === this.L ? this.pd[d] = b.x + this.pd[d] : (this.pd[d] = b.x + c - this.pd[d], this.Ka[d] = c - this.Ka[d]);
		a.reset();
		for(c = d = Infinity; a.next();) {
			e = a.value;
			var f = e.layer,
				g = e.column | 0;
			if(270 === this.L || 90 === this.L) {
				var h = b.x + this.Wb * g;
				f = this.pd[f]
			} else h = this.pd[f], f = b.y +
				this.Wb * g;
			e.centerX = h;
			e.centerY = f;
			d = Math.min(e.x, d);
			c = Math.min(e.y, c)
		}
		d = b.x - d;
		b = b.y - c;
		this.hw = new G(d, b);
		for(a.reset(); a.next();) c = a.value, c.x += d, c.y += b, c.commit()
	};
	Er.prototype.Du = function() {
		for(var a = 0, b = this.je, c = 0; c <= this.ya; c++) a += this.Jd[c], a += this.qd[c];
		a += this.ya * b;
		b = [];
		c = this.Wb * this.Ga;
		for(var d = this.maxLayer; 0 <= d; d--) 270 === this.L ? 0 === d ? b.push(new M(0, 0, c, Math.abs(this.Ka[0]))) : b.push(new M(0, this.Ka[d - 1], c, Math.abs(this.Ka[d - 1] - this.Ka[d]))) : 90 === this.L ? 0 === d ? b.push(new M(0, this.Ka[0], c, Math.abs(this.Ka[0] - a))) : b.push(new M(0, this.Ka[d], c, Math.abs(this.Ka[d - 1] - this.Ka[d]))) : 180 === this.L ? 0 === d ? b.push(new M(0, 0, Math.abs(this.Ka[0]), c)) : b.push(new M(this.Ka[d -
			1], 0, Math.abs(this.Ka[d - 1] - this.Ka[d]), c)) : 0 === d ? b.push(new M(this.Ka[0], 0, Math.abs(this.Ka[0] - a), c)) : b.push(new M(this.Ka[d], 0, Math.abs(this.Ka[d - 1] - this.Ka[d]), c));
		this.commitLayers(b, this.hw)
	};
	Er.prototype.commitLayers = function() {};
	Er.prototype.commitLinks = function() {
		for(var a = this.network.edges.iterator, b; a.next();) b = a.value.link, null !== b && (b.yh(), b.Mj(), b.jf());
		for(a.reset(); a.next();) b = a.value.link, null !== b && b.Pi();
		for(a.reset(); a.next();) {
			var c = a.value;
			b = c.link;
			if(null !== b) {
				b.yh();
				var d = b,
					e = d.fromNode,
					f = d.toNode,
					g = d.fromPort,
					h = d.toPort;
				if(null !== e) {
					var k = e.findVisibleNode();
					null !== k && k !== e && (e = k, g = k.port)
				}
				if(null !== f) {
					var l = f.findVisibleNode();
					null !== l && l !== f && (f = l, h = l.port)
				}
				var m = b.computeSpot(!0, g),
					n = b.computeSpot(!1,
						h),
					p = c.fromVertex,
					q = c.toVertex;
				if(c.valid) {
					if(b.curve === Wg && 4 === b.pointsCount) {
						if(c.rev) {
							var r = e;
							e = f;
							f = r;
							var u = g;
							g = h;
							h = u
						}
						if(p.column === q.column) {
							var v = b.getLinkPoint(e, g, m, !0, !1, f, h),
								x = b.getLinkPoint(f, h, n, !1, !1, e, g);
							v.s() || v.set(e.actualBounds.center);
							x.s() || x.set(f.actualBounds.center);
							b.Mj();
							b.hf(v.x, v.y);
							b.hf((2 * v.x + x.x) / 3, (2 * v.y + x.y) / 3);
							b.hf((v.x + 2 * x.x) / 3, (v.y + 2 * x.y) / 3);
							b.hf(x.x, x.y)
						} else {
							var y = !1,
								z = !1;
							null !== g && m === dd && (y = !0);
							null !== h && n === dd && (z = !0);
							if(y || z) {
								var B = b.i(0).x,
									C = b.i(0).y,
									I = b.i(3).x,
									J = b.i(3).y;
								if(y) {
									if(90 === this.L || 270 === this.L) {
										var K = B;
										var X = (C + J) / 2
									} else K = (B + I) / 2, X = C;
									b.M(1, K, X);
									var R = b.getLinkPoint(e, g, m, !0, !1, f, h);
									R.s() || R.set(e.actualBounds.center);
									b.M(0, R.x, R.y)
								}
								if(z) {
									if(90 === this.L || 270 === this.L) {
										var la = I;
										var qa = (C + J) / 2
									} else la = (B + I) / 2, qa = J;
									b.M(2, la, qa);
									var O = b.getLinkPoint(f, h, n, !1, !1, e, g);
									O.s() || O.set(f.actualBounds.center);
									b.M(3, O.x, O.y)
								}
							}
						}
					}
					b.jf()
				} else if(p.layer === q.layer) b.jf();
				else {
					var xa = !1,
						Pa = !1,
						T = b.firstPickIndex + 1;
					if(b.isOrthogonal) {
						Pa = !0;
						var ua = b.pointsCount;
						4 < ua && b.points.removeRange(2, ua - 3)
					} else if(b.curve === Wg) xa = !0, ua = b.pointsCount, 4 < ua && b.points.removeRange(2, ua - 3), T = 2;
					else {
						ua = b.pointsCount;
						var mb = m === dd,
							Rc = n === dd;
						2 < ua && mb && Rc ? b.points.removeRange(1, ua - 2) : 3 < ua && mb && !Rc ? b.points.removeRange(1, ua - 3) : 3 < ua && !mb && Rc ? b.points.removeRange(2, ua - 2) : 4 < ua && !mb && !Rc && b.points.removeRange(2, ua - 3)
					}
					var Fa;
					if(c.rev) {
						for(var ya; null !== q && p !== q;) {
							var Ja = Fa = null;
							for(var wd = q.sourceEdges.iterator; wd.next();) {
								var hc = wd.value;
								if(hc.link === c.link && (Fa = hc.fromVertex, Ja =
										hc.toVertex, null === Fa.node)) break
							}
							if(Fa !== p) {
								var gb = b.i(T - 1).x;
								var cb = b.i(T - 1).y;
								var da = Fa.centerX;
								var fa = Fa.centerY;
								if(Pa)
									if(180 === this.L || 0 === this.L)
										if(2 === T) b.m(T++, gb, cb), b.m(T++, gb, fa);
										else {
											if((null !== Ja ? Ja.centerY : cb) !== fa) {
												var Ra = this.Ka[Fa.layer - 1];
												b.m(T++, Ra, cb);
												b.m(T++, Ra, fa)
											}
										}
								else 2 === T ? (b.m(T++, gb, cb), b.m(T++, da, cb)) : (null !== Ja ? Ja.centerX : gb) !== da && (Ra = this.Ka[Fa.layer - 1], b.m(T++, gb, Ra), b.m(T++, da, Ra));
								else if(2 === T) {
									var db = Math.max(10, this.Jd[q.layer]);
									var Za = Math.max(10, this.qd[q.layer]);
									if(xa) 180 === this.L ? da <= q.bounds.x ? (ya = q.bounds.x, b.m(T++, ya - db, fa), b.m(T++, ya, fa), b.m(T++, ya + Za, fa)) : (b.m(T++, da - db, fa), b.m(T++, da, fa), b.m(T++, da + Za, fa)) : 90 === this.L ? fa >= q.bounds.bottom ? (ya = q.bounds.y + q.bounds.height, b.m(T++, da, ya + Za), b.m(T++, da, ya), b.m(T++, da, ya - db)) : (b.m(T++, da, fa + Za), b.m(T++, da, fa), b.m(T++, da, fa - db)) : 270 === this.L ? fa <= q.bounds.y ? (ya = q.bounds.y, b.m(T++, da, ya - db), b.m(T++, da, ya), b.m(T++, da, ya + Za)) : (b.m(T++, da, fa - db), b.m(T++, da, fa), b.m(T++, da, fa + Za)) : 0 === this.L && (da >= q.bounds.right ?
										(ya = q.bounds.x + q.bounds.width, b.m(T++, ya + Za, fa), b.m(T++, ya, fa), b.m(T++, ya - db, fa)) : (b.m(T++, da + Za, fa), b.m(T++, da, fa), b.m(T++, da - db, fa)));
									else {
										b.m(T++, gb, cb);
										var $c = 0;
										if(180 === this.L || 0 === this.L) {
											if(180 === this.L ? da >= q.bounds.right : da <= q.bounds.x) $c = (0 === this.L ? -db : Za) / 2;
											b.m(T++, gb + $c, fa)
										} else {
											if(270 === this.L ? fa >= q.bounds.bottom : fa <= q.bounds.y) $c = (90 === this.L ? -db : Za) / 2;
											b.m(T++, da, cb + $c)
										}
										b.m(T++, da, fa)
									}
								} else db = Math.max(10, this.Jd[Fa.layer]), Za = Math.max(10, this.qd[Fa.layer]), 180 === this.L ? (xa && b.m(T++,
									da - db, fa), b.m(T++, da, fa), xa && b.m(T++, da + Za, fa)) : 90 === this.L ? (xa && b.m(T++, da, fa + Za), b.m(T++, da, fa), xa && b.m(T++, da, fa - db)) : 270 === this.L ? (xa && b.m(T++, da, fa - db), b.m(T++, da, fa), xa && b.m(T++, da, fa + Za)) : (xa && b.m(T++, da + Za, fa), b.m(T++, da, fa), xa && b.m(T++, da - db, fa))
							}
							q = Fa
						}
						if(null === h || m !== dd || Pa)
							if(gb = b.i(T - 1).x, cb = b.i(T - 1).y, da = b.i(T).x, fa = b.i(T).y, Pa) {
								var vf = this.qd[p.layer];
								if(180 === this.L || 0 === this.L) {
									var Xa = cb;
									Xa >= p.bounds.y && Xa <= p.bounds.bottom && (180 === this.L ? da >= p.bounds.x : da <= p.bounds.right) && (ya = p.centerX +
										(180 === this.L ? -vf : vf), Xa < p.bounds.y + p.bounds.height / 2 ? Xa = p.bounds.y - this.Wb / 2 : Xa = p.bounds.bottom + this.Wb / 2, b.m(T++, ya, cb), b.m(T++, ya, Xa));
									b.m(T++, da, Xa)
								} else Xa = gb, Xa >= p.bounds.x && Xa <= p.bounds.right && (270 === this.L ? fa >= p.bounds.y : fa <= p.bounds.bottom) && (ya = p.centerY + (270 === this.L ? -vf : vf), Xa < p.bounds.x + p.bounds.width / 2 ? Xa = p.bounds.x - this.Wb / 2 : Xa = p.bounds.right + this.Wb / 2, b.m(T++, gb, ya), b.m(T++, Xa, ya)), b.m(T++, Xa, fa);
								b.m(T++, da, fa)
							} else if(xa) db = Math.max(10, this.Jd[p.layer]), Za = Math.max(10, this.qd[p.layer]),
							180 === this.L && da >= p.bounds.x ? (ya = p.bounds.x + p.bounds.width, b.M(T - 2, ya, cb), b.M(T - 1, ya + Za, cb)) : 90 === this.L && fa <= p.bounds.bottom ? (ya = p.bounds.y, b.M(T - 2, gb, ya), b.M(T - 1, gb, ya - db)) : 270 === this.L && fa >= p.bounds.y ? (ya = p.bounds.y + p.bounds.height, b.M(T - 2, gb, ya), b.M(T - 1, gb, ya + Za)) : 0 === this.L && da <= p.bounds.right && (ya = p.bounds.x, b.M(T - 2, ya, cb), b.M(T - 1, ya - db, cb));
						else {
							db = Math.max(10, this.Jd[p.layer]);
							Za = Math.max(10, this.qd[p.layer]);
							var rc = 0;
							if(180 === this.L || 0 === this.L) {
								if(180 === this.L ? da <= p.bounds.x : da >= p.bounds.right) rc =
									(0 === this.L ? Za : -db) / 2;
								b.m(T++, da + rc, cb)
							} else {
								if(270 === this.L ? fa <= p.bounds.y : fa >= p.bounds.bottom) rc = (90 === this.L ? Za : -db) / 2;
								b.m(T++, gb, fa + rc)
							}
							b.m(T++, da, fa)
						}
					} else {
						for(; null !== p && p !== q;) {
							Ja = Fa = null;
							for(var Ag = p.destinationEdges.iterator; Ag.next();) {
								var He = Ag.value;
								if(He.link === c.link && (Fa = He.toVertex, Ja = He.fromVertex, null !== Ja.node && (Ja = null), null === Fa.node)) break
							}
							Fa !== q && (gb = b.i(T - 1).x, cb = b.i(T - 1).y, da = Fa.centerX, fa = Fa.centerY, Pa ? 180 === this.L || 0 === this.L ? (null !== Ja ? Ja.centerY : cb) !== fa && (Ra = this.Ka[Fa.layer],
								2 === T && (Ra = 0 === this.L ? Math.max(Ra, gb) : Math.min(Ra, gb)), b.m(T++, Ra, cb), b.m(T++, Ra, fa)) : (null !== Ja ? Ja.centerX : gb) !== da && (Ra = this.Ka[Fa.layer], 2 === T && (Ra = 90 === this.L ? Math.max(Ra, cb) : Math.min(Ra, cb)), b.m(T++, gb, Ra), b.m(T++, da, Ra)) : (db = Math.max(10, this.Jd[Fa.layer]), Za = Math.max(10, this.qd[Fa.layer]), 180 === this.L ? (b.m(T++, da + Za, fa), xa && b.m(T++, da, fa), b.m(T++, da - db, fa)) : 90 === this.L ? (b.m(T++, da, fa - db), xa && b.m(T++, da, fa), b.m(T++, da, fa + Za)) : 270 === this.L ? (b.m(T++, da, fa + Za), xa && b.m(T++, da, fa), b.m(T++, da, fa - db)) :
								(b.m(T++, da - db, fa), xa && b.m(T++, da, fa), b.m(T++, da + Za, fa))));
							p = Fa
						}
						Pa && (gb = b.i(T - 1).x, cb = b.i(T - 1).y, da = b.i(T).x, fa = b.i(T).y, 180 === this.L || 0 === this.L ? cb !== fa && (Ra = 0 === this.L ? Math.min(Math.max((da + gb) / 2, this.Ka[q.layer]), da) : Math.max(Math.min((da + gb) / 2, this.Ka[q.layer]), da), b.m(T++, Ra, cb), b.m(T++, Ra, fa)) : gb !== da && (Ra = 90 === this.L ? Math.min(Math.max((fa + cb) / 2, this.Ka[q.layer]), fa) : Math.max(Math.min((fa + cb) / 2, this.Ka[q.layer]), fa), b.m(T++, gb, Ra), b.m(T++, da, Ra)))
					}
					if(null !== d && xa) {
						if(null !== g) {
							if(m === dd) {
								var Sc =
									b.i(0),
									Vb = b.i(2);
								Sc.A(Vb) || b.M(1, (Sc.x + Vb.x) / 2, (Sc.y + Vb.y) / 2)
							}
							var ae = b.getLinkPoint(e, g, dd, !0, !1, f, h);
							ae.s() || ae.set(e.actualBounds.center);
							b.M(0, ae.x, ae.y)
						}
						if(null !== h) {
							if(n === dd) {
								var be = b.i(b.pointsCount - 1),
									Bg = b.i(b.pointsCount - 3);
								be.A(Bg) || b.M(b.pointsCount - 2, (be.x + Bg.x) / 2, (be.y + Bg.y) / 2)
							}
							var ne = b.getLinkPoint(f, h, dd, !1, !1, e, g);
							ne.s() || ne.set(f.actualBounds.center);
							b.M(b.pointsCount - 1, ne.x, ne.y)
						}
					}
					b.jf();
					c.commit()
				}
			}
		}
		for(var bf = new E, Wb = this.network.edges.iterator; Wb.next();) {
			var Bc = Wb.value.link;
			null !== Bc && Bc.isOrthogonal && !bf.contains(Bc) && bf.add(Bc)
		}
		if(0 < bf.count)
			if(90 === this.L || 270 === this.L) {
				for(var ic = 0, ub = [], jc, Cc, Zf = bf.iterator; Zf.next();) {
					var Ob = Zf.value;
					if(null !== Ob && Ob.isOrthogonal)
						for(var Kc = 2; Kc < Ob.pointsCount - 3; Kc++)
							if(jc = Ob.i(Kc), Cc = Ob.i(Kc + 1), this.w(jc.y, Cc.y) && !this.w(jc.x, Cc.x)) {
								var nb = new ws;
								nb.layer = Math.floor(jc.y / 2);
								var Cg = Ob.i(0),
									Dg = Ob.i(Ob.pointsCount - 1);
								nb.first = Cg.x * Cg.x + Cg.y;
								nb.bc = Dg.x * Dg.x + Dg.y;
								nb.Uc = Math.min(jc.x, Cc.x);
								nb.uc = Math.max(jc.x, Cc.x);
								nb.index = Kc;
								nb.link =
									Ob;
								if(Kc + 2 < Ob.pointsCount) {
									var cf = Ob.i(Kc - 1),
										Hb = Ob.i(Kc + 2),
										Ie = 0;
									cf.y < jc.y ? Ie = Hb.y < jc.y ? 3 : jc.x < Cc.x ? 2 : 1 : cf.y > jc.y && (Ie = Hb.y > jc.y ? 0 : Cc.x < jc.x ? 2 : 1);
									nb.l = Ie
								}
								ub.push(nb)
							}
				}
				if(1 < ub.length) {
					ub.sort(this.Kx);
					for(var Je = 0; Je < ub.length;) {
						for(var Eg = ub[Je].layer, xd = Je + 1; xd < ub.length && ub[xd].layer === Eg;) xd++;
						if(1 < xd - Je)
							for(var Db = Je; Db < xd;) {
								for(var hb = ub[Db].uc, ad = Je + 1; ad < xd && ub[ad].Uc < hb;) hb = Math.max(hb, ub[ad].uc), ad++;
								var Pb = ad - Db;
								if(1 < Pb) {
									this.Mi(ub, this.nt, Db, Db + Pb);
									for(var sc = 1, Ua = ub[Db].bc, bd = Db; bd < ad; bd++) {
										var ld =
											ub[bd];
										ld.bc !== Ua && (sc++, Ua = ld.bc)
									}
									this.Mi(ub, this.Jx, Db, Db + Pb);
									var md = 1;
									Ua = ub[Db].first;
									for(var Fg = Db; Fg < ad; Fg++) {
										var wf = ub[Fg];
										wf.first !== Ua && (md++, Ua = wf.first)
									}
									var df = !0,
										xf = md;
									sc < md ? (df = !1, xf = sc, Ua = ub[Db].bc, this.Mi(ub, this.nt, Db, Db + Pb)) : Ua = ub[Db].first;
									for(var yf = 0, Ke = Db; Ke < ad; Ke++) {
										var Xb = ub[Ke];
										(df ? Xb.first : Xb.bc) !== Ua && (yf++, Ua = df ? Xb.first : Xb.bc);
										var tc = Xb.link;
										jc = tc.i(Xb.index);
										Cc = tc.i(Xb.index + 1);
										var Kd = this.linkSpacing * (yf - (xf - 1) / 2);
										ic++;
										tc.yh();
										tc.M(Xb.index, jc.x, jc.y + Kd);
										tc.M(Xb.index +
											1, Cc.x, Cc.y + Kd);
										tc.jf()
									}
								}
								Db = ad
							}
						Je = xd
					}
				}
			} else {
				for(var uc = 0, Eb = [], ob, Ld, Md = bf.iterator; Md.next();) {
					var Ca = Md.value;
					if(null !== Ca && Ca.isOrthogonal)
						for(var kc = 2; kc < Ca.pointsCount - 3; kc++)
							if(ob = Ca.i(kc), Ld = Ca.i(kc + 1), this.w(ob.x, Ld.x) && !this.w(ob.y, Ld.y)) {
								var qb = new ws;
								qb.layer = Math.floor(ob.x / 2);
								var Nd = Ca.i(0),
									oe = Ca.i(Ca.pointsCount - 1);
								qb.first = Nd.x + Nd.y * Nd.y;
								qb.bc = oe.x + oe.y * oe.y;
								qb.Uc = Math.min(ob.y, Ld.y);
								qb.uc = Math.max(ob.y, Ld.y);
								qb.index = kc;
								qb.link = Ca;
								if(kc + 2 < Ca.pointsCount) {
									var pe = Ca.i(kc - 1),
										yd = Ca.i(kc +
											2),
										Od = 0;
									pe.x < ob.x ? Od = yd.x < ob.x ? 3 : ob.y < Ld.y ? 2 : 1 : pe.x > ob.x && (Od = yd.x > ob.x ? 0 : Ld.y < ob.y ? 2 : 1);
									qb.l = Od
								}
								Eb.push(qb)
							}
				}
				if(1 < Eb.length) {
					Eb.sort(this.Kx);
					for(var cd = 0; cd < Eb.length;) {
						for(var qe = Eb[cd].layer, Tc = cd + 1; Tc < Eb.length && Eb[Tc].layer === qe;) Tc++;
						if(1 < Tc - cd)
							for(var kb = cd; kb < Tc;) {
								for(var Le = Eb[kb].uc, vc = cd + 1; vc < Tc && Eb[vc].Uc < Le;) Le = Math.max(Le, Eb[vc].uc), vc++;
								var $f = vc - kb;
								if(1 < $f) {
									this.Mi(Eb, this.nt, kb, kb + $f);
									for(var Gg = 1, Qb = Eb[kb].bc, Me = kb; Me < vc; Me++) {
										var Gh = Eb[Me];
										Gh.bc !== Qb && (Gg++, Qb = Gh.bc)
									}
									this.Mi(Eb,
										this.Jx, kb, kb + $f);
									var ef = 1;
									Qb = Eb[kb].first;
									for(var Ne = kb; Ne < vc; Ne++) {
										var Hg = Eb[Ne];
										Hg.first !== Qb && (ef++, Qb = Hg.first)
									}
									var zf = !0,
										ak = ef;
									Gg < ef ? (zf = !1, ak = Gg, Qb = Eb[kb].bc, this.Mi(Eb, this.nt, kb, kb + $f)) : Qb = Eb[kb].first;
									for(var bk = 0, ag = kb; ag < vc; ag++) {
										var ce = Eb[ag];
										(zf ? ce.first : ce.bc) !== Qb && (bk++, Qb = zf ? ce.first : ce.bc);
										var bg = ce.link;
										ob = bg.i(ce.index);
										Ld = bg.i(ce.index + 1);
										var Ig = this.linkSpacing * (bk - (ak - 1) / 2);
										uc++;
										bg.yh();
										bg.M(ce.index, ob.x + Ig, ob.y);
										bg.M(ce.index + 1, Ld.x + Ig, Ld.y);
										bg.jf()
									}
								}
								kb = vc
							}
						cd = Tc
					}
				}
			}
	};
	t = Er.prototype;
	t.Kx = function(a, b) {
		return a instanceof ws && b instanceof ws && a !== b ? a.layer < b.layer ? -1 : a.layer > b.layer ? 1 : a.Uc < b.Uc ? -1 : a.Uc > b.Uc ? 1 : a.uc < b.uc ? -1 : a.uc > b.uc ? 1 : 0 : 0
	};
	t.Jx = function(a, b) {
		return a instanceof ws && b instanceof ws && a !== b ? a.first < b.first ? -1 : a.first > b.first || a.l < b.l ? 1 : a.l > b.l || a.Uc < b.Uc ? -1 : a.Uc > b.Uc ? 1 : a.uc < b.uc ? -1 : a.uc > b.uc ? 1 : 0 : 0
	};
	t.nt = function(a, b) {
		return a instanceof ws && b instanceof ws && a !== b ? a.bc < b.bc ? -1 : a.bc > b.bc || a.l < b.l ? 1 : a.l > b.l || a.Uc < b.Uc ? -1 : a.Uc > b.Uc ? 1 : a.uc < b.uc ? -1 : a.uc > b.uc ? 1 : 0 : 0
	};
	t.w = function(a, b) {
		a -= b;
		return -1 < a && 1 > a
	};
	t.Mi = function(a, b, c, d) {
		var e = a.length,
			f = d - c;
		if(!(1 >= f))
			if((0 > c || c >= e - 1) && A("not in range 0 <= from < length: " + c), 2 === f) d = a[c], e = a[c + 1], 0 < b(d, e) && (a[c] = e, a[c + 1] = d);
			else if(0 === c)
			if(d >= e) a.sort(b);
			else
				for(c = a.slice(0, d), c.sort(b), b = 0; b < d; b++) a[b] = c[b];
		else if(d >= e)
			for(d = a.slice(c), d.sort(b), b = c; b < e; b++) a[b] = d[b - c];
		else
			for(e = a.slice(c, d), e.sort(b), b = c; b < d; b++) a[b] = e[b - c]
	};

	function Rr(a, b) {
		var c = a.fc[b];
		if(c >= a.ne.length) {
			var d = [];
			for(var e = 0; e < a.ne.length; e++) d[e] = a.ne[e];
			a.ne = d
		}
		void 0 === a.ne[c] || null === a.ne[c] ? d = [] : (d = a.ne[c], a.ne[c] = null);
		a = a.qo[b];
		for(b = 0; b < a.length; b++) c = a[b], d[c.index] = c;
		return d
	}

	function Sr(a, b, c) {
		a.ne[a.fc[b]] = c
	}
	oa.Object.defineProperties(Er.prototype, {
		layerSpacing: {
			get: function() {
				return this.je
			},
			set: function(a) {
				this.je !== a && 0 <= a && (this.je = a, this.B())
			}
		},
		columnSpacing: {
			get: function() {
				return this.Wb
			},
			set: function(a) {
				this.Wb !== a && 0 < a && (this.Wb = a, this.B())
			}
		},
		direction: {
			get: function() {
				return this.L
			},
			set: function(a) {
				this.L !== a && (0 === a || 90 === a || 180 === a || 270 === a ? (this.L = a, this.B()) : A("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))
			}
		},
		cycleRemoveOption: {
			get: function() {
				return this.Ek
			},
			set: function(a) {
				this.Ek === a || a !== Kr && a !== Fr || (this.Ek = a, this.B())
			}
		},
		layeringOption: {
			get: function() {
				return this.dl
			},
			set: function(a) {
				this.dl === a || a !== Gr && a !== bs && a !== ds || (this.dl = a, this.B())
			}
		},
		initializeOption: {
			get: function() {
				return this.Uk
			},
			set: function(a) {
				this.Uk === a || a !== Hr && a !== js && a !== hs || (this.Uk = a, this.B())
			}
		},
		iterations: {
			get: function() {
				return this.jj
			},
			set: function(a) {
				this.jj !== a && 0 <= a && (this.jj = a, this.B())
			}
		},
		aggressiveOption: {
			get: function() {
				return this.rk
			},
			set: function(a) {
				this.rk === a || a !== ns && a !== Ir && a !== os || (this.rk = a, this.B())
			}
		},
		packOption: {
			get: function() {
				return this.$f
			},
			set: function(a) {
				this.$f !== a && 0 <= a && 8 > a && (this.$f = a, this.B())
			}
		},
		setsPortSpots: {
			get: function() {
				return this.Ye
			},
			set: function(a) {
				this.Ye !== a && (this.Ye = a, this.B())
			}
		},
		linkSpacing: {
			get: function() {
				return this.Xn
			},
			set: function(a) {
				this.Xn !== a && 0 <= a && (this.Xn = a, this.B())
			}
		},
		maxLayer: {
			get: function() {
				return this.ya
			}
		},
		maxIndex: {
			get: function() {
				return this.Ir
			}
		},
		maxColumn: {
			get: function() {
				return this.Ga
			}
		},
		minIndexLayer: {
			get: function() {
				return this.io
			}
		},
		maxIndexLayer: {
			get: function() {
				return this.sd
			}
		}
	});
	var Fr = new D(Er, "CycleDepthFirst", 0),
		Kr = new D(Er, "CycleGreedy", 1),
		Gr = new D(Er, "LayerOptimalLinkLength", 0),
		bs = new D(Er, "LayerLongestPathSink", 1),
		ds = new D(Er, "LayerLongestPathSource", 2),
		Hr = new D(Er, "InitDepthFirstOut", 0),
		js = new D(Er, "InitDepthFirstIn", 1),
		hs = new D(Er, "InitNaive", 2),
		ns = new D(Er, "AggressiveNone", 0),
		Ir = new D(Er, "AggressiveLess", 1),
		os = new D(Er, "AggressiveMore", 2);
	Er.className = "LayeredDigraphLayout";
	Er.CycleDepthFirst = Fr;
	Er.CycleGreedy = Kr;
	Er.LayerOptimalLinkLength = Gr;
	Er.LayerLongestPathSink = bs;
	Er.LayerLongestPathSource = ds;
	Er.InitDepthFirstOut = Hr;
	Er.InitDepthFirstIn = js;
	Er.InitNaive = hs;
	Er.AggressiveNone = ns;
	Er.AggressiveLess = Ir;
	Er.AggressiveMore = os;
	Er.PackNone = 0;
	Er.PackExpand = 1;
	Er.PackStraighten = 2;
	Er.PackMedian = 4;
	Er.PackAll = 7;

	function ws() {
		this.index = this.uc = this.Uc = this.bc = this.first = this.layer = 0;
		this.link = null;
		this.l = 0
	}
	ws.className = "SegInfo";

	function Jr(a) {
		zp.call(this, a)
	}
	na(Jr, zp);
	Jr.prototype.createVertex = function() {
		return new xs(this)
	};
	Jr.prototype.createEdge = function() {
		return new ys(this)
	};
	Jr.className = "LayeredDigraphNetwork";

	function xs(a) {
		Cp.call(this, a);
		this.Qa = this.zg = this.ci = -1;
		this.K = NaN;
		this.da = null;
		this.valid = !1;
		this.finish = this.Sl = NaN;
		this.Jj = 0;
		this.gv = this.hv = null
	}
	na(xs, Cp);
	oa.Object.defineProperties(xs.prototype, {
		layer: {
			get: function() {
				return this.ci
			},
			set: function(a) {
				this.ci !== a && (this.ci = a)
			}
		},
		column: {
			get: function() {
				return this.zg
			},
			set: function(a) {
				this.zg !== a && (this.zg = a)
			}
		},
		index: {
			get: function() {
				return this.Qa
			},
			set: function(a) {
				this.Qa !== a && (this.Qa = a)
			}
		},
		component: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K !== a && (this.K = a)
			}
		},
		near: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da !== a && (this.da = a)
			}
		}
	});
	xs.className = "LayeredDigraphVertex";

	function ys(a) {
		Dp.call(this, a);
		this.l = this.Wa = this.eb = !1;
		this.Va = this.K = NaN;
		this.da = this.u = 0
	}
	na(ys, Dp);
	oa.Object.defineProperties(ys.prototype, {
		valid: {
			get: function() {
				return this.eb
			},
			set: function(a) {
				this.eb !== a && (this.eb = a)
			}
		},
		rev: {
			get: function() {
				return this.Wa
			},
			set: function(a) {
				this.Wa !== a && (this.Wa = a)
			}
		},
		forest: {
			get: function() {
				return this.l
			},
			set: function(a) {
				this.l !== a && (this.l = a)
			}
		},
		portFromPos: {
			get: function() {
				return this.K
			},
			set: function(a) {
				this.K !== a && (this.K = a)
			}
		},
		portToPos: {
			get: function() {
				return this.Va
			},
			set: function(a) {
				this.Va !== a && (this.Va = a)
			}
		},
		portFromColOffset: {
			get: function() {
				return this.u
			},
			set: function(a) {
				this.u !== a && (this.u = a)
			}
		},
		portToColOffset: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da !== a && (this.da = a)
			}
		}
	});
	ys.className = "LayeredDigraphEdge";

	function zs() {
		vi.call(this);
		this.Kb = new F;
		this.Fo = As;
		this.ad = Bs;
		this.xp = Cs;
		this.Fr = Ds;
		this.gw = [];
		this.Zc = !0;
		this.Eb = Es;
		this.yd = (new L(10, 10)).freeze();
		var a = new Fs(this);
		this.T = new Gs(a);
		this.U = new Gs(a);
		this.pu = []
	}
	na(zs, vi);
	zs.prototype.cloneProtected = function(a) {
		vi.prototype.cloneProtected.call(this, a);
		a.Fo = this.Fo;
		a.xp = this.xp;
		a.Fr = this.Fr;
		a.Zc = this.Zc;
		a.Eb = this.Eb;
		a.yd.assign(this.yd);
		a.T.copyInheritedPropertiesFrom(this.T);
		a.U.copyInheritedPropertiesFrom(this.U)
	};
	zs.prototype.ib = function(a) {
		a.classType === zs ? 0 === a.name.indexOf("Alignment") ? this.alignment = a : 0 === a.name.indexOf("Arrangement") ? this.arrangement = a : 0 === a.name.indexOf("Compaction") ? this.compaction = a : 0 === a.name.indexOf("Path") ? this.path = a : 0 === a.name.indexOf("Sorting") ? this.sorting = a : 0 === a.name.indexOf("Style") ? this.treeStyle = a : A("Unknown enum value: " + a) : vi.prototype.ib.call(this, a)
	};
	zs.prototype.createNetwork = function() {
		return new Fs(this)
	};
	zs.prototype.makeNetwork = function(a) {
		function b(a) {
			if(a instanceof W) return !a.isLinkLabel && "Comment" !== a.category;
			if(a instanceof S) {
				var b = a.fromNode;
				if(null === b || b.isLinkLabel || "Comment" === b.category) return !1;
				a = a.toNode;
				return null === a || a.isLinkLabel || "Comment" === a.category ? !1 : !0
			}
			return !1
		}
		var c = this.createNetwork();
		a instanceof Q ? (c.kg(a.nodes, !0, b), c.kg(a.links, !0, b)) : a instanceof V ? c.kg(a.memberParts, !1, b) : c.kg(a.iterator, !1, b);
		return c
	};
	zs.prototype.doLayout = function(a) {
		null === this.network && (this.network = this.makeNetwork(a));
		this.arrangement !== Hs && (this.arrangementOrigin = this.initialOrigin(this.arrangementOrigin));
		var b = this.diagram;
		null === b && a instanceof Q && (b = a);
		this.path === As && null !== b ? this.ad = b.isTreePathToChildren ? Bs : Is : this.ad = this.path === As ? Bs : this.path;
		if(0 < this.network.vertexes.count) {
			this.network.Jp();
			for(a = this.network.vertexes.iterator; a.next();) b = a.value, b.initialized = !1, b.level = 0, b.parent = null, b.children = [];
			if(0 < this.Kb.count) {
				a =
					new F;
				for(b = this.Kb.iterator; b.next();) {
					var c = b.value;
					c instanceof W ? (c = this.network.Ci(c), null !== c && a.add(c)) : c instanceof Gs && a.add(c)
				}
				this.Kb = a
			}
			0 === this.Kb.count && this.findRoots();
			for(a = this.Kb.copy().iterator; a.next();) b = a.value, b.initialized || (b.initialized = !0, Js(this, b));
			b = this.network.vertexes;
			for(a = null; a = Ks(b), 0 < a.count;) b = Ls(this, a), null !== b && this.Kb.add(b), b.initialized = !0, Js(this, b), b = a;
			for(a = this.Kb.iterator; a.next();) b = a.value, b instanceof Gs && Ms(this, b);
			for(a = this.Kb.iterator; a.next();) b =
				a.value, b instanceof Gs && Ns(this, b);
			for(a = this.Kb.iterator; a.next();) b = a.value, b instanceof Gs && Os(this, b);
			this.zu();
			if(this.layerStyle === Ps) {
				a = [];
				for(b = this.network.vertexes.iterator; b.next();) {
					c = b.value;
					var d = c.parent;
					null === d && (d = c);
					d = 0 === d.angle || 180 === d.angle;
					var e = a[c.level];
					void 0 === e && (e = 0);
					a[c.level] = Math.max(e, d ? c.width : c.height)
				}
				for(b = 0; b < a.length; b++) void 0 === a[b] && (a[b] = 0);
				this.gw = a;
				for(b = this.network.vertexes.iterator; b.next();) c = b.value, d = c.parent, null === d && (d = c), 0 === d.angle || 180 ===
					d.angle ? (180 === d.angle && (c.focusX += a[c.level] - c.width), c.width = a[c.level]) : (270 === d.angle && (c.focusY += a[c.level] - c.height), c.height = a[c.level])
			} else if(this.layerStyle === Qs)
				for(a = this.network.vertexes.iterator; a.next();) {
					b = a.value;
					c = 0 === b.angle || 180 === b.angle;
					d = -1;
					for(e = 0; e < b.children.length; e++) {
						var f = b.children[e];
						d = Math.max(d, c ? f.width : f.height)
					}
					if(0 <= d)
						for(e = 0; e < b.children.length; e++) f = b.children[e], c ? (180 === b.angle && (f.focusX += d - f.width), f.width = d) : (270 === b.angle && (f.focusY += d - f.height), f.height =
							d)
				}
			for(a = this.Kb.iterator; a.next();) b = a.value, b instanceof Gs && this.layoutTree(b);
			this.arrangeTrees();
			this.updateParts()
		}
		this.network = null;
		this.Kb = new F;
		this.isValidLayout = !0
	};

	function Ks(a) {
		var b = new F;
		for(a = a.iterator; a.next();) {
			var c = a.value;
			c.initialized || b.add(c)
		}
		return b
	}
	zs.prototype.findRoots = function() {
		for(var a = this.network.vertexes, b = a.iterator; b.next();) {
			var c = b.value;
			switch(this.ad) {
				case Bs:
					0 === c.sourceEdges.count && this.Kb.add(c);
					break;
				case Is:
					0 === c.destinationEdges.count && this.Kb.add(c);
					break;
				default:
					A("Unhandled path value " + this.ad.toString())
			}
		}
		0 === this.Kb.count && (a = Ls(this, a), null !== a && this.Kb.add(a))
	};

	function Ls(a, b) {
		var c = 999999,
			d = null;
		for(b = b.iterator; b.next();) {
			var e = b.value;
			switch(a.ad) {
				case Bs:
					e.sourceEdges.count < c && (c = e.sourceEdges.count, d = e);
					break;
				case Is:
					e.destinationEdges.count < c && (c = e.destinationEdges.count, d = e);
					break;
				default:
					A("Unhandled path value " + a.ad.toString())
			}
		}
		return d
	}

	function Js(a, b) {
		if(null !== b) {
			switch(a.ad) {
				case Bs:
					if(0 < b.destinationEdges.count) {
						for(var c = new E, d = b.destinationVertexes; d.next();) {
							var e = d.value;
							Rs(a, b, e) && c.add(e)
						}
						0 < c.count && (b.children = c.La())
					}
					break;
				case Is:
					if(0 < b.sourceEdges.count) {
						c = new E;
						for(d = b.sourceVertexes; d.next();) e = d.value, Rs(a, b, e) && c.add(e);
						0 < c.count && (b.children = c.La())
					}
					break;
				default:
					A("Unhandled path value" + a.ad.toString())
			}
			c = b.children;
			d = c.length;
			for(e = 0; e < d; e++) {
				var f = c[e];
				f.initialized = !0;
				f.level = b.level + 1;
				f.parent = b;
				a.Kb.remove(f)
			}
			for(b =
				0; b < d; b++) Js(a, c[b])
		}
	}

	function Rs(a, b, c) {
		if(c.initialized) {
			if(null === b) var d = !1;
			else {
				for(d = b.parent; null !== d && d !== c;) d = d.parent;
				d = d === c
			}
			if(d || c.level > b.level) return !1;
			a.removeChild(c.parent, c)
		}
		return !0
	}
	zs.prototype.removeChild = function(a, b) {
		if(null !== a && null !== b) {
			for(var c = a.children, d = 0, e = 0; e < c.length; e++) c[e] === b && d++;
			if(0 < d) {
				d = Array(c.length - d);
				for(var f = e = 0; f < c.length; f++) c[f] !== b && (d[e++] = c[f]);
				a.children = d
			}
		}
	};

	function Ms(a, b) {
		if(null !== b) {
			a.initializeTreeVertexValues(b);
			b.alignment === Ss && a.sortTreeVertexChildren(b);
			for(var c = 0, d = b.childrenCount, e = 0, f = b.children, g = f.length, h = 0; h < g; h++) {
				var k = f[h];
				Ms(a, k);
				c += k.descendantCount + 1;
				d = Math.max(d, k.maxChildrenCount);
				e = Math.max(e, k.maxGenerationCount)
			}
			b.descendantCount = c;
			b.maxChildrenCount = d;
			b.maxGenerationCount = 0 < d ? e + 1 : 0
		}
	}

	function Ts(a, b) {
		switch(a.xp) {
			default:
				case Cs:
				return null !== b.parent ? b.parent : a.T;
			case Us:
					return null === b.parent ? a.T : null === b.parent.parent ? a.U : b.parent;
			case Vs:
					return null !== b.parent ? null !== b.parent.parent ? b.parent.parent : a.U : a.T;
			case Ws:
					var c = !0;
				if(0 === b.childrenCount) c = !1;
				else
					for(var d = b.children, e = d.length, f = 0; f < e; f++)
						if(0 < d[f].childrenCount) {
							c = !1;
							break
						} return c && null !== b.parent ? a.U : null !== b.parent ? b.parent : a.T
		}
	}
	zs.prototype.initializeTreeVertexValues = function(a) {
		a.copyInheritedPropertiesFrom(Ts(this, a));
		if(null !== a.parent && a.parent.alignment === Ss) {
			for(var b = a.angle, c = a.parent.children, d = 0; d < c.length && a !== c[d];) d++;
			0 === d % 2 ? d !== c.length - 1 && (b = 90 === b ? 180 : 180 === b ? 270 : 270 === b ? 180 : 270) : b = 90 === b ? 0 : 180 === b ? 90 : 270 === b ? 0 : 90;
			a.angle = b
		}
		a.initialized = !0
	};

	function Ns(a, b) {
		if(null !== b) {
			a.assignTreeVertexValues(b);
			b = b.children;
			for(var c = b.length, d = 0; d < c; d++) Ns(a, b[d])
		}
	}
	zs.prototype.assignTreeVertexValues = function() {};

	function Os(a, b) {
		if(null !== b) {
			b.alignment !== Ss && a.sortTreeVertexChildren(b);
			b = b.children;
			for(var c = b.length, d = 0; d < c; d++) Os(a, b[d])
		}
	}
	zs.prototype.sortTreeVertexChildren = function(a) {
		switch(a.sorting) {
			case Xs:
				break;
			case Ys:
				a.children.reverse();
				break;
			case Zs:
				a.children.sort(a.comparer);
				break;
			case $s:
				a.children.sort(a.comparer);
				a.children.reverse();
				break;
			default:
				A("Unhandled sorting value " + a.sorting.toString())
		}
	};
	zs.prototype.zu = function() {
		if(this.comments)
			for(var a = this.network.vertexes.iterator; a.next();) this.addComments(a.value)
	};
	zs.prototype.addComments = function(a) {
		var b = a.angle,
			c = a.parent,
			d = 0;
		var e = !1;
		null !== c && (d = c.angle, e = c.alignment, e = at(e));
		b = 90 === b || 270 === b;
		d = 90 === d || 270 === d;
		c = 0 === a.childrenCount;
		var f = 0,
			g = 0,
			h = 0,
			k = a.commentSpacing;
		if(null !== a.node)
			for(var l = a.node.Mu(); l.next();) {
				var m = l.value;
				"Comment" === m.category && m.canLayout() && (null === a.comments && (a.comments = []), a.comments.push(m), m.kc(), m = m.measuredBounds, b && !c || !e && !d && c || e && d && c ? (f = Math.max(f, m.width), g += m.height + Math.abs(h)) : (f += m.width + Math.abs(h), g = Math.max(g,
					m.height)), h = k)
			}
		null !== a.comments && (b && !c || !e && !d && c || e && d && c ? (f += Math.abs(a.commentMargin), g = Math.max(0, g - a.height)) : (g += Math.abs(a.commentMargin), f = Math.max(0, f - a.width)), e = M.allocAt(0, 0, a.bounds.width + f, a.bounds.height + g), a.bounds = e, M.free(e))
	};

	function at(a) {
		return a === bt || a === Ss || a === ct || a === dt
	}

	function et(a) {
		return a === bt || a === Ss
	}

	function ft(a) {
		var b = a.parent;
		if(null !== b) {
			var c = b.alignment;
			if(at(c)) {
				if(et(c)) {
					b = b.children;
					for(c = 0; c < b.length && a !== b[c];) c++;
					return 0 === c % 2
				}
				if(c === ct) return !0
			}
		}
		return !1
	}
	zs.prototype.layoutComments = function(a) {
		if(null !== a.comments) {
			var b = a.node.measuredBounds,
				c = a.parent,
				d = a.angle,
				e = 0;
			var f = !1;
			null !== c && (e = c.angle, f = c.alignment, f = at(f));
			d = 90 === d || 270 === d;
			c = 90 === e || 270 === e;
			for(var g = 0 === a.childrenCount, h = ft(a), k = 0, l = a.comments, m = l.length, n = G.alloc(), p = 0; p < m; p++) {
				var q = l[p],
					r = q.measuredBounds;
				if(d && !g || !f && !c && g || f && c && g) {
					if(135 < e && !f || c && h)
						if(0 <= a.commentMargin)
							for(n.h(a.bounds.x - a.commentMargin - r.width, a.bounds.y + k), q.move(n), q = q.vd(); q.next();) {
								var u = q.value;
								u.fromSpot =
									Td;
								u.toSpot = Ud
							} else
								for(n.h(a.bounds.x + 2 * a.focus.x - a.commentMargin, a.bounds.y + k), q.move(n), q = q.vd(); q.next();) u = q.value, u.fromSpot = Ud, u.toSpot = Td;
						else if(0 <= a.commentMargin)
						for(n.h(a.bounds.x + 2 * a.focus.x + a.commentMargin, a.bounds.y + k), q.move(n), q = q.vd(); q.next();) u = q.value, u.fromSpot = Ud, u.toSpot = Td;
					else
						for(n.h(a.bounds.x + a.commentMargin - r.width, a.bounds.y + k), q.move(n), q = q.vd(); q.next();) u = q.value, u.fromSpot = Td, u.toSpot = Ud;
					k = 0 <= a.commentSpacing ? k + (r.height + a.commentSpacing) : k + (a.commentSpacing - r.height)
				} else {
					if(135 <
						e && !f || !c && h)
						if(0 <= a.commentMargin)
							for(n.h(a.bounds.x + k, a.bounds.y - a.commentMargin - r.height), q.move(n), q = q.vd(); q.next();) u = q.value, u.fromSpot = Sd, u.toSpot = Vd;
						else
							for(n.h(a.bounds.x + k, a.bounds.y + 2 * a.focus.y - a.commentMargin), q.move(n), q = q.vd(); q.next();) u = q.value, u.fromSpot = Vd, u.toSpot = Sd;
					else if(0 <= a.commentMargin)
						for(n.h(a.bounds.x + k, a.bounds.y + 2 * a.focus.y + a.commentMargin), q.move(n), q = q.vd(); q.next();) u = q.value, u.fromSpot = Vd, u.toSpot = Sd;
					else
						for(n.h(a.bounds.x + k, a.bounds.y + a.commentMargin - r.height),
							q.move(n), q = q.vd(); q.next();) u = q.value, u.fromSpot = Sd, u.toSpot = Vd;
					k = 0 <= a.commentSpacing ? k + (r.width + a.commentSpacing) : k + (a.commentSpacing - r.width)
				}
			}
			G.free(n);
			b = k - a.commentSpacing - (d ? b.height : b.width);
			if(this.ad === Bs)
				for(a = a.destinationEdges; a.next();) e = a.value.link, null === e || e.isAvoiding || (e.fromEndSegmentLength = 0 < b ? b : NaN);
			else
				for(a = a.sourceEdges; a.next();) e = a.value.link, null === e || e.isAvoiding || (e.toEndSegmentLength = 0 < b ? b : NaN)
		}
	};
	zs.prototype.layoutTree = function(a) {
		if(null !== a) {
			for(var b = a.children, c = b.length, d = 0; d < c; d++) this.layoutTree(b[d]);
			switch(a.compaction) {
				case gt:
					ht(this, a);
					break;
				case it:
					if(a.alignment === Ss) ht(this, a);
					else if(0 === a.childrenCount) d = a.parent, c = !1, b = 0, null !== d && (b = d.angle, c = d.alignment, c = at(c)), d = ft(a), a.S.h(0, 0), a.ua.h(a.width, a.height), null === a.parent || null === a.comments || (180 !== b && 270 !== b || c) && !d ? a.ia.h(0, 0) : 180 === b && !c || (90 === b || 270 === b) && d ? a.ia.h(a.width - 2 * a.focus.x, 0) : a.ia.h(0, a.height - 2 * a.focus.y),
						a.Vp = null, a.iq = null;
					else {
						var e = jt(a);
						b = 90 === e || 270 === e;
						var f = 0,
							g = a.children,
							h = g.length;
						for(c = 0; c < h; c++) d = g[c], f = Math.max(f, b ? d.ua.width : d.ua.height);
						var k = a.alignment,
							l = k === kt,
							m = at(k),
							n = Math.max(0, a.breadthLimit);
						c = lt(a);
						var p = a.nodeSpacing,
							q = mt(a),
							r = a.rowSpacing,
							u = 0;
						if(k === nt || l || a.mm || a.nm && 1 === a.maxGenerationCount) u = Math.max(0, a.rowIndent);
						d = a.width;
						var v = a.height,
							x = 0,
							y = 0,
							z = 0,
							B = null,
							C = null,
							I = 0,
							J = 0,
							K = 0,
							X = 0,
							R = 0,
							la = 0,
							qa = 0,
							O = 0;
						m && !et(k) && 135 < e && g.reverse();
						if(et(k))
							if(1 < h)
								for(var xa = 0; xa < h; xa++) 0 ===
									xa % 2 && xa !== h - 1 && (O = Math.max(O, b ? g[xa].ua.width : g[xa].ua.height));
							else 1 === h && (O = b ? g[0].ua.width : g[0].ua.height);
						if(m) {
							switch(k) {
								case bt:
									y = 135 > e ? ot(a, g, O, x, y) : pt(a, g, O, x, y);
									O = y.x;
									x = y.width;
									y = y.height;
									break;
								case ct:
									for(B = 0; B < h; B++) C = g[B], n = C.ua, z = 0 === la ? 0 : r, b ? (C.S.h(f - n.width, X + z), x = Math.max(x, n.width), y = Math.max(y, X + z + n.height), X += z + n.height) : (C.S.h(K + z, f - n.height), x = Math.max(x, K + z + n.width), y = Math.max(y, n.height), K += z + n.width), la++;
									break;
								case dt:
									for(B = 0; B < h; B++) C = g[B], f = C.ua, n = 0 === la ? 0 : r, b ? (C.S.h(p /
										2 + a.focus.x, X + n), x = Math.max(x, f.width), y = Math.max(y, X + n + f.height), X += n + f.height) : (C.S.h(K + n, p / 2 + a.focus.y), x = Math.max(x, K + n + f.width), y = Math.max(y, f.height), K += n + f.width), la++
							}
							B = qt(this, 2);
							C = qt(this, 2);
							b ? (B[0].h(0, 0), B[1].h(0, y), C[0].h(x, 0)) : (B[0].h(0, 0), B[1].h(x, 0), C[0].h(0, y));
							C[1].h(x, y)
						} else
							for(xa = 0; xa < h; xa++) {
								var Pa = g[xa],
									T = Pa.ua;
								if(b) {
									0 < n && 0 < la && K + p + T.width > n && (K < f && rt(a, k, f - K, 0, qa, xa - 1), R++, la = 0, qa = xa, z = y, K = 0, X = 135 < e ? -y - r : y + r);
									st(this, Pa, 0, X);
									var ua = 0;
									if(0 === la) {
										if(B = Pa.Vp, C = Pa.iq, I = T.width,
											J = T.height, null === B || null === C || e !== jt(Pa)) B = qt(this, 2), C = qt(this, 2), B[0].h(0, 0), B[1].h(0, J), C[0].h(I, 0), C[1].h(I, J)
									} else {
										var mb = La();
										J = tt(this, a, Pa, B, C, I, J, mb);
										ua = J.x;
										B = mb[0];
										C = mb[1];
										I = J.width;
										J = J.height;
										Na(mb);
										K < T.width && 0 > ua && (ut(a, -ua, 0, qa, xa - 1), vt(B, -ua, 0), vt(C, -ua, 0), ua = 0)
									}
									Pa.S.h(ua, X);
									x = Math.max(x, I);
									y = Math.max(y, z + (0 === R ? 0 : r) + T.height);
									K = I
								} else {
									0 < n && 0 < la && X + p + T.height > n && (X < f && rt(a, k, 0, f - X, qa, xa - 1), R++, la = 0, qa = xa, z = x, X = 0, K = 135 < e ? -x - r : x + r);
									st(this, Pa, K, 0);
									ua = 0;
									if(0 === la) {
										if(B = Pa.Vp, C = Pa.iq,
											I = T.width, J = T.height, null === B || null === C || e !== jt(Pa)) B = qt(this, 2), C = qt(this, 2), B[0].h(0, 0), B[1].h(I, 0), C[0].h(0, J), C[1].h(I, J)
									} else mb = La(), J = tt(this, a, Pa, B, C, I, J, mb), ua = J.x, B = mb[0], C = mb[1], I = J.width, J = J.height, Na(mb), X < T.height && 0 > ua && (ut(a, 0, -ua, qa, xa - 1), vt(B, 0, -ua), vt(C, 0, -ua), ua = 0);
									Pa.S.h(K, ua);
									y = Math.max(y, J);
									x = Math.max(x, z + (0 === R ? 0 : r) + T.width);
									X = J
								}
								la++
							}
						0 < R && (b ? (y += Math.max(0, c), K < x && rt(a, k, x - K, 0, qa, h - 1), 0 < u && (l || ut(a, u, 0, 0, h - 1), x += u)) : (x += Math.max(0, c), X < y && rt(a, k, 0, y - X, qa, h - 1), 0 < u && (l || ut(a,
							0, u, 0, h - 1), y += u)));
						u = l = 0;
						switch(k) {
							case wt:
								b ? l += x / 2 - a.focus.x - q / 2 : u += y / 2 - a.focus.y - q / 2;
								break;
							case xt:
								0 < R ? b ? l += x / 2 - a.focus.x - q / 2 : u += y / 2 - a.focus.y - q / 2 : b ? (O = g[0].S.x + g[0].ia.x, l += O + (g[h - 1].S.x + g[h - 1].ia.x + 2 * g[h - 1].focus.x - O) / 2 - a.focus.x - q / 2) : (O = g[0].S.y + g[0].ia.y, u += O + (g[h - 1].S.y + g[h - 1].ia.y + 2 * g[h - 1].focus.y - O) / 2 - a.focus.y - q / 2);
								break;
							case nt:
								b ? (l -= q, x += q) : (u -= q, y += q);
								break;
							case kt:
								b ? (l += x - a.width + q, x += q) : (u += y - a.height + q, y += q);
								break;
							case bt:
								b ? 1 < h ? l += O + p / 2 - a.focus.x : l += g[0].focus.x - a.focus.x + g[0].ia.x :
									1 < h ? u += O + p / 2 - a.focus.y : u += g[0].focus.y - a.focus.y + g[0].ia.y;
								break;
							case ct:
								b ? l += x + p / 2 - a.focus.x : u += y + p / 2 - a.focus.y;
								break;
							case dt:
								break;
							default:
								A("Unhandled alignment value " + k.toString())
						}
						for(q = 0; q < h; q++) O = g[q], b ? O.S.h(O.S.x + O.ia.x - l, O.S.y + (135 < e ? (m ? -y : -O.ua.height) + O.ia.y - c : v + c + O.ia.y)) : O.S.h(O.S.x + (135 < e ? (m ? -x : -O.ua.width) + O.ia.x - c : d + c + O.ia.x), O.S.y + O.ia.y - u);
						h = g = 0;
						m ? b ? (x = yt(a, x, l), 0 > l && (l = 0), 135 < e && (u += y + c), y += v + c, k === dt && (g += p / 2 + a.focus.x), h += v + c) : (135 < e && (l += x + c), x += d + c, y = zt(a, y, u), 0 > u && (u = 0),
							k === dt && (h += p / 2 + a.focus.y), g += d + c) : b ? (null === a.comments ? d > x && (x = At(k, d - x, 0), g = x.x, h = x.y, x = d, l = 0) : x = yt(a, x, l), 0 > l && (g -= l, l = 0), 135 < e && (u += y + c), y = Math.max(Math.max(y, v), y + v + c), h += v + c) : (135 < e && (l += x + c), x = Math.max(Math.max(x, d), x + d + c), null === a.comments ? v > y && (y = At(k, 0, v - y), g = y.x, h = y.y, y = v, u = 0) : y = zt(a, y, u), 0 > u && (h -= u, u = 0), g += d + c);
						if(0 < R) e = qt(this, 4), R = qt(this, 4), b ? (e[2].h(0, v + c), e[3].h(e[2].x, y), R[2].h(x, e[2].y), R[3].h(R[2].x, e[3].y)) : (e[2].h(d + c, 0), e[3].h(x, e[2].y), R[2].h(e[2].x, y), R[3].h(e[3].x, R[2].y));
						else {
							e = qt(this, B.length + 2);
							R = qt(this, C.length + 2);
							for(k = 0; k < B.length; k++) m = B[k], e[k + 2].h(m.x + g, m.y + h);
							for(k = 0; k < C.length; k++) m = C[k], R[k + 2].h(m.x + g, m.y + h)
						}
						b ? (e[0].h(l, 0), e[1].h(e[0].x, v), e[2].y < e[1].y && (e[2].x > e[0].x ? e[2].assign(e[1]) : e[1].assign(e[2])), e[3].y < e[2].y && (e[3].x > e[0].x ? e[3].assign(e[2]) : e[2].assign(e[3])), R[0].h(l + d, 0), R[1].h(R[0].x, v), R[2].y < R[1].y && (R[2].x < R[0].x ? R[2].assign(R[1]) : R[1].assign(R[2])), R[3].y < R[2].y && (R[3].x < R[0].x ? R[3].assign(R[2]) : R[2].assign(R[3])), e[2].y -= c / 2, R[2].y -=
							c / 2) : (e[0].h(0, u), e[1].h(d, e[0].y), e[2].x < e[1].x && (e[2].y > e[0].y ? e[2].assign(e[1]) : e[1].assign(e[2])), e[3].x < e[2].x && (e[3].y > e[0].y ? e[3].assign(e[2]) : e[2].assign(e[3])), R[0].h(0, u + v), R[1].h(d, R[0].y), R[2].x < R[1].x && (R[2].y < R[0].y ? R[2].assign(R[1]) : R[1].assign(R[2])), R[3].x < R[2].x && (R[3].y < R[0].y ? R[3].assign(R[2]) : R[2].assign(R[3])), e[2].x -= c / 2, R[2].x -= c / 2);
						Bt(this, B);
						Bt(this, C);
						a.Vp = e;
						a.iq = R;
						a.ia.h(l, u);
						a.ua.h(x, y)
					}
					break;
				default:
					A("Unhandled compaction value " + a.compaction.toString())
			}
		}
	};

	function ht(a, b) {
		if(0 === b.childrenCount) {
			var c = !1,
				d = 0;
			null !== b.parent && (d = b.parent.angle, c = b.parent.alignment, c = at(c));
			var e = ft(b);
			b.S.h(0, 0);
			b.ua.h(b.width, b.height);
			null === b.parent || null === b.comments || (180 !== d && 270 !== d || c) && !e ? b.ia.h(0, 0) : 180 === d && !c || (90 === d || 270 === d) && e ? b.ia.h(b.width - 2 * b.focus.x, 0) : b.ia.h(0, b.height - 2 * b.focus.y)
		} else {
			d = jt(b);
			c = 90 === d || 270 === d;
			var f = 0;
			e = b.children;
			for(var g = e.length, h = 0; h < g; h++) {
				var k = e[h];
				f = Math.max(f, c ? k.ua.width : k.ua.height)
			}
			var l = b.alignment,
				m = l === nt,
				n = l ===
				kt;
			h = at(l);
			var p = Math.max(0, b.breadthLimit);
			k = lt(b);
			var q = b.nodeSpacing,
				r = mt(b),
				u = m || n ? 0 : r / 2,
				v = b.rowSpacing,
				x = 0;
			if(m || n || b.mm || b.nm && 1 === b.maxGenerationCount) x = Math.max(0, b.rowIndent);
			m = b.width;
			var y = b.height,
				z = 0,
				B = 0,
				C = 0,
				I = 0,
				J = 0,
				K = 0,
				X = 0,
				R = 0,
				la = 0;
			h && !et(l) && 135 < d && e.reverse();
			if(et(l))
				if(1 < g)
					for(var qa = 0; qa < g; qa++) {
						var O = e[qa],
							xa = O.ua;
						0 === qa % 2 && qa !== g - 1 && (la = Math.max(la, (c ? xa.width : xa.height) + Ct(O) - q))
					} else 1 === g && (la = c ? e[0].ua.width : e[0].ua.height);
			if(h) switch(l) {
				case bt:
				case Ss:
					B = 135 > d ? ot(b, e, la,
						z, B) : pt(b, e, la, z, B);
					la = B.x;
					z = B.width;
					B = B.height;
					break;
				case ct:
					for(a = 0; a < g; a++) p = e[a], u = p.ua, C = 0 === X ? 0 : v, c ? (p.S.h(f - u.width, J + C), z = Math.max(z, u.width), B = Math.max(B, J + C + u.height), J += C + u.height) : (p.S.h(I + C, f - u.height), z = Math.max(z, I + C + u.width), B = Math.max(B, u.height), I += C + u.width), X++;
					break;
				case dt:
					for(f = 0; f < g; f++) a = e[f], p = a.ua, u = 0 === X ? 0 : v, c ? (a.S.h(q / 2 + b.focus.x, J + u), z = Math.max(z, p.width), B = Math.max(B, J + u + p.height), J += u + p.height) : (a.S.h(I + u, q / 2 + b.focus.y), z = Math.max(z, I + u + p.width), B = Math.max(B, p.height),
						I += u + p.width), X++
			} else
				for(qa = 0; qa < g; qa++) {
					O = e[qa];
					xa = O.ua;
					if(c) {
						0 < p && 0 < X && I + q + xa.width > p && (I < f && rt(b, l, f - I, 0, R, qa - 1), K++, X = 0, R = qa, C = B, I = 0, J = 135 < d ? -B - v : B + v);
						var Pa = 0 === X ? u : q;
						st(a, O, 0, J);
						O.S.h(I + Pa, J);
						z = Math.max(z, I + Pa + xa.width);
						B = Math.max(B, C + (0 === K ? 0 : v) + xa.height);
						I += Pa + xa.width
					} else 0 < p && 0 < X && J + q + xa.height > p && (J < f && rt(b, l, 0, f - J, R, qa - 1), K++, X = 0, R = qa, C = z, J = 0, I = 135 < d ? -z - v : z + v), Pa = 0 === X ? u : q, st(a, O, I, 0), O.S.h(I, J + Pa), B = Math.max(B, J + Pa + xa.height), z = Math.max(z, C + (0 === K ? 0 : v) + xa.width), J += Pa + xa.height;
					X++
				}
			0 <
				K && (c ? (B += Math.max(0, k), I < z && rt(b, l, z - I, 0, R, g - 1), 0 < x && (n || ut(b, x, 0, 0, g - 1), z += x)) : (z += Math.max(0, k), J < B && rt(b, l, 0, B - J, R, g - 1), 0 < x && (n || ut(b, 0, x, 0, g - 1), B += x)));
			x = n = 0;
			switch(l) {
				case wt:
					c ? n += z / 2 - b.focus.x - r / 2 : x += B / 2 - b.focus.y - r / 2;
					break;
				case xt:
					0 < K ? c ? n += z / 2 - b.focus.x - r / 2 : x += B / 2 - b.focus.y - r / 2 : c ? (l = e[0].S.x + e[0].ia.x, n += l + (e[g - 1].S.x + e[g - 1].ia.x + 2 * e[g - 1].focus.x - l) / 2 - b.focus.x - r / 2) : (l = e[0].S.y + e[0].ia.y, x += l + (e[g - 1].S.y + e[g - 1].ia.y + 2 * e[g - 1].focus.y - l) / 2 - b.focus.y - r / 2);
					break;
				case nt:
					c ? (n -= r, z += r) : (x -= r, B +=
						r);
					break;
				case kt:
					c ? (n += z - b.width + r, z += r) : (x += B - b.height + r, B += r);
					break;
				case bt:
				case Ss:
					c ? 1 < g ? n += la + q / 2 - b.focus.x : n += e[0].focus.x - b.focus.x + e[0].ia.x : 1 < g ? x += la + q / 2 - b.focus.y : x += e[0].focus.y - b.focus.y + e[0].ia.y;
					break;
				case ct:
					c ? n += z + q / 2 - b.focus.x : x += B + q / 2 - b.focus.y;
					break;
				case dt:
					break;
				default:
					A("Unhandled alignment value " + l.toString())
			}
			for(r = 0; r < g; r++) l = e[r], c ? l.S.h(l.S.x + l.ia.x - n, l.S.y + (135 < d ? (h ? -B : -l.ua.height) + l.ia.y - k : y + k + l.ia.y)) : l.S.h(l.S.x + (135 < d ? (h ? -z : -l.ua.width) + l.ia.x - k : m + k + l.ia.x), l.S.y +
				l.ia.y - x);
			c ? (z = yt(b, z, n), 0 > n && (n = 0), 135 < d && (x += B + k), B += y + k) : (135 < d && (n += z + k), z += m + k, B = zt(b, B, x), 0 > x && (x = 0));
			b.ia.h(n, x);
			b.ua.h(z, B)
		}
	}

	function ot(a, b, c, d, e) {
		var f = b.length;
		if(0 === f) return new M(c, 0, d, e);
		if(1 === f) return a = b[0], d = a.ua.width, e = a.ua.height, new M(c, 0, d, e);
		for(var g = a.nodeSpacing, h = a.rowSpacing, k = 90 === jt(a), l = 0, m = 0, n = 0, p = 0; p < f; p++)
			if(!(0 !== p % 2 || 1 < f && p === f - 1)) {
				var q = b[p],
					r = q.ua,
					u = 0 === l ? 0 : h;
				if(k) {
					var v = Ct(q) - g;
					q.S.h(c - (r.width + v), n + u);
					d = Math.max(d, r.width + v);
					e = Math.max(e, n + u + r.height);
					n += u + r.height
				} else v = Ct(q) - g, q.S.h(m + u, c - (r.height + v)), e = Math.max(e, r.height + v), d = Math.max(d, m + u + r.width), m += u + r.width;
				l++
			}
		l = 0;
		q = m;
		p = n;
		k ?
			(m = c + g, n = 0) : (m = 0, n = c + g);
		for(r = 0; r < f; r++)
			if(0 !== r % 2) {
				u = b[r];
				v = u.ua;
				var x = 0 === l ? 0 : h;
				if(k) {
					var y = Ct(u) - g;
					u.S.h(m + y, n + x);
					d = Math.max(d, m + v.width + y);
					e = Math.max(e, n + x + v.height);
					n += x + v.height
				} else y = Ct(u) - g, u.S.h(m + x, n + y), d = Math.max(d, m + x + v.width), e = Math.max(e, n + v.height + y), m += x + v.width;
				l++
			}
		1 < f && 1 === f % 2 && (b = b[f - 1], f = b.ua, h = null === b.parent ? 0 : b.parent.rowSpacing, k ? (b.S.h(c + g / 2 - b.focus.x - b.ia.x, e + h), k = c + g / 2 - b.focus.x - b.ia.x, d = Math.max(d, k + f.width), 0 > k && (d -= k), e = Math.max(e, Math.max(p, n) + h + f.height), 0 > b.S.x &&
			(c = Dt(a, b.S.x, !1, c, g))) : (b.S.h(d + h, c + g / 2 - b.focus.y - b.ia.y), d = Math.max(d, Math.max(q, m) + h + f.width), n = c + g / 2 - b.focus.y - b.ia.y, e = Math.max(e, n + f.height), 0 > n && (e -= n), 0 > b.S.y && (c = Dt(a, b.S.y, !0, c, g))));
		return new M(c, 0, d, e)
	}

	function pt(a, b, c, d, e) {
		var f = b.length;
		if(0 === f) return new M(c, 0, d, e);
		if(1 === f) return b = b[0], d = b.ua.width, e = b.ua.height, new M(c, 0, d, e);
		for(var g = a.nodeSpacing, h = a.rowSpacing, k = 270 === jt(a), l = 0, m = 0, n = 0, p = 0; p < f; p++)
			if(!(0 !== p % 2 || 1 < f && p === f - 1)) {
				var q = b[p],
					r = q.ua,
					u = 0 === l ? 0 : h;
				if(k) {
					var v = Ct(q) - g;
					n -= u + r.height;
					q.S.h(c - (r.width + v), n);
					d = Math.max(d, r.width + v);
					e = Math.max(e, Math.abs(n))
				} else v = Ct(q) - g, m -= u + r.width, q.S.h(m, c - (r.height + v)), e = Math.max(e, r.height + v), d = Math.max(d, Math.abs(m));
				l++
			}
		l = 0;
		q = m;
		p = n;
		k ? (m =
			c + g, n = 0) : (m = 0, n = c + g);
		for(r = 0; r < f; r++)
			if(0 !== r % 2) {
				u = b[r];
				v = u.ua;
				var x = 0 === l ? 0 : h;
				if(k) {
					var y = Ct(u) - g;
					n -= x + v.height;
					u.S.h(m + y, n);
					d = Math.max(d, m + v.width + y);
					e = Math.max(e, Math.abs(n))
				} else y = Ct(u) - g, m -= x + v.width, u.S.h(m, n + y), e = Math.max(e, n + v.height + y), d = Math.max(d, Math.abs(m));
				l++
			}
		1 < f && 1 === f % 2 && (h = b[f - 1], l = h.ua, r = null === h.parent ? 0 : h.parent.rowSpacing, k ? (h.S.h(c + g / 2 - h.focus.x - h.ia.x, -e - l.height - r), m = c + g / 2 - h.focus.x - h.ia.x, d = Math.max(d, m + l.width), 0 > m && (d -= m), e = Math.max(e, Math.abs(Math.min(p, n)) + r + l.height),
			0 > h.S.x && (c = Dt(a, h.S.x, !1, c, g))) : (h.S.h(-d - l.width - r, c + g / 2 - h.focus.y - h.ia.y), d = Math.max(d, Math.abs(Math.min(q, m)) + r + l.width), n = c + g / 2 - h.focus.y - h.ia.y, e = Math.max(e, n + l.height), 0 > n && (e -= n), 0 > h.S.y && (c = Dt(a, h.S.y, !0, c, g))));
		for(a = 0; a < f; a++) g = b[a], k ? g.S.h(g.S.x, g.S.y + e) : g.S.h(g.S.x + d, g.S.y);
		return new M(c, 0, d, e)
	}

	function Ct(a) {
		return null === a.parent ? 0 : a.parent.nodeSpacing
	}

	function Dt(a, b, c, d, e) {
		a = a.children;
		for(var f = a.length, g = 0; g < f; g++) c ? a[g].S.h(a[g].S.x, a[g].S.y - b) : a[g].S.h(a[g].S.x - b, a[g].S.y);
		b = a[f - 1];
		return Math.max(d, c ? b.ia.y + b.focus.y - e / 2 : b.ia.x + b.focus.x - e / 2)
	}

	function yt(a, b, c) {
		switch(a.alignment) {
			case xt:
			case wt:
				return c + a.width > b && (b = c + a.width), 0 > c && (b -= c), b;
			case nt:
				return a.width > b ? a.width : b;
			case kt:
				return 2 * a.focus.x > b ? a.width : b + a.width - 2 * a.focus.x;
			case bt:
			case Ss:
				return Math.max(a.width, Math.max(b, c + a.width) - Math.min(0, c));
			case ct:
				return a.width - a.focus.x + a.nodeSpacing / 2 + b;
			case dt:
				return Math.max(a.width, a.focus.x + a.nodeSpacing / 2 + b);
			default:
				return b
		}
	}

	function zt(a, b, c) {
		switch(a.alignment) {
			case xt:
			case wt:
				return c + a.height > b && (b = c + a.height), 0 > c && (b -= c), b;
			case nt:
				return a.height > b ? a.height : b;
			case kt:
				return 2 * a.focus.y > b ? a.height : b + a.height - 2 * a.focus.y;
			case bt:
			case Ss:
				return Math.max(a.height, Math.max(b, c + a.height) - Math.min(0, c));
			case ct:
				return a.height - a.focus.y + a.nodeSpacing / 2 + b;
			case dt:
				return Math.max(a.height, a.focus.y + a.nodeSpacing / 2 + b);
			default:
				return b
		}
	}

	function At(a, b, c) {
		switch(a) {
			case wt:
				b /= 2;
				c /= 2;
				break;
			case xt:
				b /= 2;
				c /= 2;
				break;
			case nt:
				c = b = 0;
				break;
			case kt:
				break;
			default:
				A("Unhandled alignment value " + a.toString())
		}
		return new G(b, c)
	}

	function rt(a, b, c, d, e, f) {
		b = At(b, c, d);
		ut(a, b.x, b.y, e, f)
	}

	function ut(a, b, c, d, e) {
		if(0 !== b || 0 !== c)
			for(a = a.children; d <= e; d++) {
				var f = a[d].S;
				f.x += b;
				f.y += c
			}
	}

	function st(a, b, c, d) {
		var e = b.parent;
		switch(a.ad) {
			case Bs:
				for(a = b.sourceEdges; a.next();) b = a.value, b.fromVertex === e && b.relativePoint.h(c, d);
				break;
			case Is:
				for(a = b.destinationEdges; a.next();) b = a.value, b.toVertex === e && b.relativePoint.h(c, d);
				break;
			default:
				A("Unhandled path value " + a.ad.toString())
		}
	}

	function vt(a, b, c) {
		for(var d = 0; d < a.length; d++) {
			var e = a[d];
			e.x += b;
			e.y += c
		}
	}

	function tt(a, b, c, d, e, f, g, h) {
		var k = jt(b),
			l = 90 === k || 270 === k,
			m = b.nodeSpacing;
		b = d;
		var n = e;
		d = f;
		var p = g,
			q = c.Vp,
			r = c.iq;
		g = c.ua;
		var u = l ? Math.max(p, g.height) : Math.max(d, g.width);
		if(null === q || k !== jt(c)) q = qt(a, 2), r = qt(a, 2), l ? (q[0].h(0, 0), q[1].h(0, g.height), r[0].h(g.width, 0), r[1].h(r[0].x, q[1].y)) : (q[0].h(0, 0), q[1].h(g.width, 0), r[0].h(0, g.height), r[1].h(q[1].x, r[0].y));
		if(l) {
			p = 9999999;
			if(!(null === n || 2 > n.length || null === q || 2 > q.length))
				for(e = c = 0; c < n.length && e < q.length;) {
					f = n[c];
					var v = q[e];
					k = v.x;
					l = v.y;
					k += d;
					var x =
						f;
					c + 1 < n.length && (x = n[c + 1]);
					var y = v;
					v = y.x;
					y = y.y;
					e + 1 < q.length && (y = q[e + 1], v = y.x, y = y.y, v += d);
					var z = p;
					f.y === l ? z = k - f.x : f.y > l && f.y < y ? z = k + (f.y - l) / (y - l) * (v - k) - f.x : l > f.y && l < x.y && (z = k - (f.x + (l - f.y) / (x.y - f.y) * (x.x - f.x)));
					z < p && (p = z);
					x.y <= f.y ? c++ : y <= l ? e++ : (x.y <= y && c++, y <= x.y && e++)
				}
			p = d - p;
			p += m;
			c = q;
			e = p;
			if(null === b || 2 > b.length || null === c || 2 > c.length) d = null;
			else {
				m = qt(a, b.length + c.length);
				for(d = f = k = 0; f < c.length && c[f].y < b[0].y;) l = c[f++], m[d++].h(l.x + e, l.y);
				for(; k < b.length;) l = b[k++], m[d++].h(l.x, l.y);
				for(k = b[b.length - 1].y; f <
					c.length && c[f].y <= k;) f++;
				for(; f < c.length && c[f].y > k;) l = c[f++], m[d++].h(l.x + e, l.y);
				c = qt(a, d);
				for(k = 0; k < d; k++) c[k].assign(m[k]);
				Bt(a, m);
				d = c
			}
			f = r;
			k = p;
			if(null === n || 2 > n.length || null === f || 2 > f.length) e = null;
			else {
				m = qt(a, n.length + f.length);
				for(e = l = c = 0; c < n.length && n[c].y < f[0].y;) x = n[c++], m[e++].h(x.x, x.y);
				for(; l < f.length;) x = f[l++], m[e++].h(x.x + k, x.y);
				for(f = f[f.length - 1].y; c < n.length && n[c].y <= f;) c++;
				for(; c < n.length && n[c].y > f;) k = n[c++], m[e++].h(k.x, k.y);
				f = qt(a, e);
				for(c = 0; c < e; c++) f[c].assign(m[c]);
				Bt(a, m);
				e = f
			}
			f =
				Math.max(0, p) + g.width;
			g = u;
			Bt(a, b);
			Bt(a, q);
			Bt(a, n);
			Bt(a, r);
			h[0] = d;
			h[1] = e;
			return new M(p, 0, f, g)
		}
		d = 9999999;
		if(!(null === n || 2 > n.length || null === q || 2 > q.length))
			for(e = c = 0; c < n.length && e < q.length;) f = n[c], v = q[e], k = v.x, l = v.y, l += p, x = f, c + 1 < n.length && (x = n[c + 1]), y = v, v = y.x, y = y.y, e + 1 < q.length && (y = q[e + 1], v = y.x, y = y.y, y += p), z = d, f.x === k ? z = l - f.y : f.x > k && f.x < v ? z = l + (f.x - k) / (v - k) * (y - l) - f.y : k > f.x && k < x.x && (z = l - (f.y + (k - f.x) / (x.x - f.x) * (x.y - f.y))), z < d && (d = z), x.x <= f.x ? c++ : v <= k ? e++ : (x.x <= v && c++, v <= x.x && e++);
		p -= d;
		p += m;
		c = q;
		e = p;
		if(null ===
			b || 2 > b.length || null === c || 2 > c.length) d = null;
		else {
			m = qt(a, b.length + c.length);
			for(d = f = k = 0; f < c.length && c[f].x < b[0].x;) l = c[f++], m[d++].h(l.x, l.y + e);
			for(; k < b.length;) l = b[k++], m[d++].h(l.x, l.y);
			for(k = b[b.length - 1].x; f < c.length && c[f].x <= k;) f++;
			for(; f < c.length && c[f].x > k;) l = c[f++], m[d++].h(l.x, l.y + e);
			c = qt(a, d);
			for(k = 0; k < d; k++) c[k].assign(m[k]);
			Bt(a, m);
			d = c
		}
		f = r;
		k = p;
		if(null === n || 2 > n.length || null === f || 2 > f.length) e = null;
		else {
			m = qt(a, n.length + f.length);
			for(e = l = c = 0; c < n.length && n[c].x < f[0].x;) x = n[c++], m[e++].h(x.x, x.y);
			for(; l < f.length;) x = f[l++], m[e++].h(x.x, x.y + k);
			for(f = f[f.length - 1].x; c < n.length && n[c].x <= f;) c++;
			for(; c < n.length && n[c].x > f;) k = n[c++], m[e++].h(k.x, k.y);
			f = qt(a, e);
			for(c = 0; c < e; c++) f[c].assign(m[c]);
			Bt(a, m);
			e = f
		}
		f = u;
		g = Math.max(0, p) + g.height;
		Bt(a, b);
		Bt(a, q);
		Bt(a, n);
		Bt(a, r);
		h[0] = d;
		h[1] = e;
		return new M(p, 0, f, g)
	}

	function qt(a, b) {
		a = a.pu[b];
		if(void 0 !== a && (a = a.pop(), void 0 !== a)) return a;
		a = [];
		for(var c = 0; c < b; c++) a[c] = new G;
		return a
	}

	function Bt(a, b) {
		var c = b.length,
			d = a.pu[c];
		void 0 === d && (d = [], a.pu[c] = d);
		d.push(b)
	}
	zs.prototype.arrangeTrees = function() {
		if(this.Eb === Hs)
			for(var a = this.Kb.iterator; a.next();) {
				var b = a.value;
				if(b instanceof Gs) {
					var c = b.node;
					if(null !== c) {
						var d = c.position;
						c = d.x;
						d = d.y;
						isFinite(c) || (c = 0);
						isFinite(d) || (d = 0);
						Et(this, b, c, d)
					}
				}
			} else {
				a = [];
				for(b = this.Kb.iterator; b.next();) c = b.value, c instanceof Gs && a.push(c);
				switch(this.sorting) {
					case Xs:
						break;
					case Ys:
						a.reverse();
						break;
					case Zs:
						a.sort(this.comparer);
						break;
					case $s:
						a.sort(this.comparer);
						a.reverse();
						break;
					default:
						A("Unhandled sorting value " + this.sorting.toString())
				}
				c =
					this.arrangementOrigin;
				b = c.x;
				c = c.y;
				for(d = 0; d < a.length; d++) {
					var e = a[d];
					Et(this, e, b + e.ia.x, c + e.ia.y);
					switch(this.Eb) {
						case Es:
							c += e.ua.height + this.yd.height;
							break;
						case Ft:
							b += e.ua.width + this.yd.width;
							break;
						default:
							A("Unhandled arrangement value " + this.Eb.toString())
					}
				}
			}
	};

	function Et(a, b, c, d) {
		if(null !== b) {
			b.x = c;
			b.y = d;
			b = b.children;
			for(var e = b.length, f = 0; f < e; f++) {
				var g = b[f];
				Et(a, g, c + g.S.x, d + g.S.y)
			}
		}
	}
	zs.prototype.commitLayout = function() {
		this.Ev();
		this.commitNodes();
		this.Du();
		this.isRouting && this.commitLinks()
	};
	zs.prototype.commitNodes = function() {
		for(var a = this.network.vertexes.iterator; a.next();) a.value.commit();
		for(a.reset(); a.next();) this.layoutComments(a.value)
	};
	zs.prototype.Du = function() {
		if(this.layerStyle === Ps) {
			for(var a = this.gw, b = [], c = null, d = this.network.vertexes.iterator; d.next();) {
				var e = d.value;
				null === c ? c = e.bounds.copy() : c.Wc(e.bounds);
				var f = b[e.level];
				void 0 === f ? f = lt(e) : f = Math.max(f, lt(e));
				b[e.level] = f
			}
			for(d = 0; d < b.length; d++) void 0 === b[d] && (b[d] = 0);
			90 === this.angle || 270 === this.angle ? (c.gd(this.nodeSpacing / 2, this.layerSpacing), d = new G(-this.nodeSpacing / 2, -this.layerSpacing / 2)) : (c.gd(this.layerSpacing, this.nodeSpacing / 2), d = new G(-this.layerSpacing / 2, -this.nodeSpacing /
				2));
			e = [];
			c = 90 === this.angle || 270 === this.angle ? c.width : c.height;
			f = 0;
			if(180 === this.angle || 270 === this.angle)
				for(var g = 0; g < a.length; g++) f += a[g] + b[g];
			for(g = 0; g < a.length; g++) {
				var h = a[g] + b[g];
				270 === this.angle ? (f -= h, e.push(new M(0, f, c, h))) : 90 === this.angle ? (e.push(new M(0, f, c, h)), f += h) : 180 === this.angle ? (f -= h, e.push(new M(f, 0, h, c))) : (e.push(new M(f, 0, h, c)), f += h)
			}
			this.commitLayers(e, d)
		}
	};
	zs.prototype.commitLayers = function() {};
	zs.prototype.commitLinks = function() {
		for(var a = this.network.edges.iterator; a.next();) a.value.commit()
	};
	zs.prototype.Ev = function() {
		for(var a = this.Kb.iterator; a.next();) {
			var b = a.value;
			b instanceof Gs && Gt(this, b)
		}
	};

	function Gt(a, b) {
		if(null !== b) {
			a.setPortSpots(b);
			b = b.children;
			for(var c = b.length, d = 0; d < c; d++) Gt(a, b[d])
		}
	}
	zs.prototype.setPortSpots = function(a) {
		var b = a.alignment;
		if(at(b)) {
			var c = this.ad === Bs,
				d = jt(a);
			switch(d) {
				case 0:
					var e = Ud;
					break;
				case 90:
					e = Vd;
					break;
				case 180:
					e = Td;
					break;
				default:
					e = Sd
			}
			var f = a.children,
				g = f.length;
			switch(b) {
				case bt:
				case Ss:
					for(b = 0; b < g; b++) {
						var h = f[b];
						h = (c ? h.sourceEdges : h.destinationEdges).first();
						if(null !== h && (h = h.link, null !== h)) {
							var k = 90 === d || 270 === d ? Td : Sd;
							if(1 === g || b === g - 1 && 1 === g % 2) switch(d) {
								case 0:
									k = Td;
									break;
								case 90:
									k = Sd;
									break;
								case 180:
									k = Ud;
									break;
								default:
									k = Vd
							} else 0 === b % 2 && (k = 90 === d || 270 ===
								d ? Ud : Vd);
							c ? (a.setsPortSpot && (h.fromSpot = e), a.setsChildPortSpot && (h.toSpot = k)) : (a.setsPortSpot && (h.fromSpot = k), a.setsChildPortSpot && (h.toSpot = e))
						}
					}
					break;
				case ct:
					d = 90 === d || 270 === d ? Ud : Vd;
					for(f = c ? a.destinationEdges : a.sourceEdges; f.next();) g = f.value.link, null !== g && (c ? (a.setsPortSpot && (g.fromSpot = e), a.setsChildPortSpot && (g.toSpot = d)) : (a.setsPortSpot && (g.fromSpot = d), a.setsChildPortSpot && (g.toSpot = e)));
					break;
				case dt:
					for(d = 90 === d || 270 === d ? Td : Sd, f = c ? a.destinationEdges : a.sourceEdges; f.next();) g = f.value.link,
						null !== g && (c ? (a.setsPortSpot && (g.fromSpot = e), a.setsChildPortSpot && (g.toSpot = d)) : (a.setsPortSpot && (g.fromSpot = d), a.setsChildPortSpot && (g.toSpot = e)))
			}
		} else if(c = jt(a), this.ad === Bs)
			for(e = a.destinationEdges; e.next();) {
				if(d = e.value.link, null !== d) {
					if(a.setsPortSpot)
						if(a.portSpot.jb()) switch(c) {
							case 0:
								d.fromSpot = Ud;
								break;
							case 90:
								d.fromSpot = Vd;
								break;
							case 180:
								d.fromSpot = Td;
								break;
							default:
								d.fromSpot = Sd
						} else d.fromSpot = a.portSpot;
					if(a.setsChildPortSpot)
						if(a.childPortSpot.jb()) switch(c) {
							case 0:
								d.toSpot = Td;
								break;
							case 90:
								d.toSpot = Sd;
								break;
							case 180:
								d.toSpot = Ud;
								break;
							default:
								d.toSpot = Vd
						} else d.toSpot = a.childPortSpot
				}
			} else
				for(e = a.sourceEdges; e.next();)
					if(d = e.value.link, null !== d) {
						if(a.setsPortSpot)
							if(a.portSpot.jb()) switch(c) {
								case 0:
									d.toSpot = Ud;
									break;
								case 90:
									d.toSpot = Vd;
									break;
								case 180:
									d.toSpot = Td;
									break;
								default:
									d.toSpot = Sd
							} else d.toSpot = a.portSpot;
						if(a.setsChildPortSpot)
							if(a.childPortSpot.jb()) switch(c) {
								case 0:
									d.fromSpot = Td;
									break;
								case 90:
									d.fromSpot = Sd;
									break;
								case 180:
									d.fromSpot = Ud;
									break;
								default:
									d.fromSpot = Vd
							} else d.fromSpot =
								a.childPortSpot
					}
	};

	function jt(a) {
		a = a.angle;
		return 45 >= a ? 0 : 135 >= a ? 90 : 225 >= a ? 180 : 315 >= a ? 270 : 0
	}

	function lt(a) {
		var b = jt(a);
		b = 90 === b || 270 === b;
		var c = a.layerSpacing;
		if(0 < a.layerSpacingParentOverlap) {
			var d = Math.min(1, a.layerSpacingParentOverlap);
			c -= b ? a.height * d : a.width * d
		}
		c < (b ? -a.height : -a.width) && (c = b ? -a.height : -a.width);
		return c
	}

	function mt(a) {
		var b = jt(a),
			c = a.nodeIndent;
		if(0 < a.nodeIndentPastParent) {
			var d = Math.min(1, a.nodeIndentPastParent);
			c += 90 === b || 270 === b ? a.width * d : a.height * d
		}
		return c = Math.max(0, c)
	}
	oa.Object.defineProperties(zs.prototype, {
		roots: {
			get: function() {
				return this.Kb
			},
			set: function(a) {
				this.Kb !== a && (this.Kb = a, this.B())
			}
		},
		path: {
			get: function() {
				return this.Fo
			},
			set: function(a) {
				this.Fo !== a && (this.Fo = a, this.B())
			}
		},
		treeStyle: {
			get: function() {
				return this.xp
			},
			set: function(a) {
				this.Eb === a || a !== Cs && a !== Vs && a !== Ws && a !== Us || (this.xp = a, this.B())
			}
		},
		layerStyle: {
			get: function() {
				return this.Fr
			},
			set: function(a) {
				this.Eb === a || a !== Ds && a !== Qs && a !== Ps || (this.Fr = a, this.B())
			}
		},
		comments: {
			get: function() {
				return this.Zc
			},
			set: function(a) {
				this.Zc !== a && (this.Zc = a, this.B())
			}
		},
		arrangement: {
			get: function() {
				return this.Eb
			},
			set: function(a) {
				this.Eb === a || a !== Es && a !== Ft && a !== Hs || (this.Eb = a, this.B())
			}
		},
		arrangementSpacing: {
			get: function() {
				return this.yd
			},
			set: function(a) {
				this.yd.A(a) || (this.yd.assign(a), this.B())
			}
		},
		rootDefaults: {
			get: function() {
				return this.T
			},
			set: function(a) {
				this.T !== a && (this.T = a, this.B())
			}
		},
		alternateDefaults: {
			get: function() {
				return this.U
			},
			set: function(a) {
				this.U !== a && (this.U = a, this.B())
			}
		},
		sorting: {
			get: function() {
				return this.T.sorting
			},
			set: function(a) {
				this.T.sorting === a || a !== Xs && a !== Ys && a !== Zs && !$s || (this.T.sorting = a, this.B())
			}
		},
		comparer: {
			get: function() {
				return this.T.comparer
			},
			set: function(a) {
				this.T.comparer !==
					a && (this.T.comparer = a, this.B())
			}
		},
		angle: {
			get: function() {
				return this.T.angle
			},
			set: function(a) {
				this.T.angle !== a && (0 === a || 90 === a || 180 === a || 270 === a ? (this.T.angle = a, this.B()) : A("TreeLayout.angle must be 0, 90, 180, or 270"))
			}
		},
		alignment: {
			get: function() {
				return this.T.alignment
			},
			set: function(a) {
				this.T.alignment !== a && (this.T.alignment = a, this.B())
			}
		},
		nodeIndent: {
			get: function() {
				return this.T.nodeIndent
			},
			set: function(a) {
				this.T.nodeIndent !==
					a && 0 <= a && (this.T.nodeIndent = a, this.B())
			}
		},
		nodeIndentPastParent: {
			get: function() {
				return this.T.nodeIndentPastParent
			},
			set: function(a) {
				this.T.nodeIndentPastParent !== a && 0 <= a && 1 >= a && (this.T.nodeIndentPastParent = a, this.B())
			}
		},
		nodeSpacing: {
			get: function() {
				return this.T.nodeSpacing
			},
			set: function(a) {
				this.T.nodeSpacing !== a && (this.T.nodeSpacing = a, this.B())
			}
		},
		layerSpacing: {
			get: function() {
				return this.T.layerSpacing
			},
			set: function(a) {
				this.T.layerSpacing !==
					a && (this.T.layerSpacing = a, this.B())
			}
		},
		layerSpacingParentOverlap: {
			get: function() {
				return this.T.layerSpacingParentOverlap
			},
			set: function(a) {
				this.T.layerSpacingParentOverlap !== a && 0 <= a && 1 >= a && (this.T.layerSpacingParentOverlap = a, this.B())
			}
		},
		compaction: {
			get: function() {
				return this.T.compaction
			},
			set: function(a) {
				this.T.compaction === a || a !== gt && a !== it || (this.T.compaction = a, this.B())
			}
		},
		breadthLimit: {
			get: function() {
				return this.T.breadthLimit
			},
			set: function(a) {
				this.T.breadthLimit !== a && 0 <= a && (this.T.breadthLimit = a, this.B())
			}
		},
		rowSpacing: {
			get: function() {
				return this.T.rowSpacing
			},
			set: function(a) {
				this.T.rowSpacing !== a && (this.T.rowSpacing = a, this.B())
			}
		},
		rowIndent: {
			get: function() {
				return this.T.rowIndent
			},
			set: function(a) {
				this.T.rowIndent !== a && 0 <= a && (this.T.rowIndent = a, this.B())
			}
		},
		commentSpacing: {
			get: function() {
				return this.T.commentSpacing
			},
			set: function(a) {
				this.T.commentSpacing !==
					a && (this.T.commentSpacing = a, this.B())
			}
		},
		commentMargin: {
			get: function() {
				return this.T.commentMargin
			},
			set: function(a) {
				this.T.commentMargin !== a && (this.T.commentMargin = a, this.B())
			}
		},
		setsPortSpot: {
			get: function() {
				return this.T.setsPortSpot
			},
			set: function(a) {
				this.T.setsPortSpot !== a && (this.T.setsPortSpot = a, this.B())
			}
		},
		portSpot: {
			get: function() {
				return this.T.portSpot
			},
			set: function(a) {
				this.T.portSpot.A(a) || (this.T.portSpot =
					a, this.B())
			}
		},
		setsChildPortSpot: {
			get: function() {
				return this.T.setsChildPortSpot
			},
			set: function(a) {
				this.T.setsChildPortSpot !== a && (this.T.setsChildPortSpot = a, this.B())
			}
		},
		childPortSpot: {
			get: function() {
				return this.T.childPortSpot
			},
			set: function(a) {
				this.T.childPortSpot.A(a) || (this.T.childPortSpot = a, this.B())
			}
		},
		alternateSorting: {
			get: function() {
				return this.U.sorting
			},
			set: function(a) {
				this.U.sorting === a || a !== Xs && a !== Ys &&
					a !== Zs && !$s || (this.U.sorting = a, this.B())
			}
		},
		alternateComparer: {
			get: function() {
				return this.U.comparer
			},
			set: function(a) {
				this.U.comparer !== a && (this.U.comparer = a, this.B())
			}
		},
		alternateAngle: {
			get: function() {
				return this.U.angle
			},
			set: function(a) {
				this.U.angle === a || 0 !== a && 90 !== a && 180 !== a && 270 !== a || (this.U.angle = a, this.B())
			}
		},
		alternateAlignment: {
			get: function() {
				return this.U.alignment
			},
			set: function(a) {
				this.U.alignment !==
					a && (this.U.alignment = a, this.B())
			}
		},
		alternateNodeIndent: {
			get: function() {
				return this.U.nodeIndent
			},
			set: function(a) {
				this.U.nodeIndent !== a && 0 <= a && (this.U.nodeIndent = a, this.B())
			}
		},
		alternateNodeIndentPastParent: {
			get: function() {
				return this.U.nodeIndentPastParent
			},
			set: function(a) {
				this.U.nodeIndentPastParent !== a && 0 <= a && 1 >= a && (this.U.nodeIndentPastParent = a, this.B())
			}
		},
		alternateNodeSpacing: {
			get: function() {
				return this.U.nodeSpacing
			},
			set: function(a) {
				this.U.nodeSpacing !== a && (this.U.nodeSpacing = a, this.B())
			}
		},
		alternateLayerSpacing: {
			get: function() {
				return this.U.layerSpacing
			},
			set: function(a) {
				this.U.layerSpacing !== a && (this.U.layerSpacing = a, this.B())
			}
		},
		alternateLayerSpacingParentOverlap: {
			get: function() {
				return this.U.layerSpacingParentOverlap
			},
			set: function(a) {
				this.U.layerSpacingParentOverlap !== a && 0 <= a && 1 >= a && (this.U.layerSpacingParentOverlap = a, this.B())
			}
		},
		alternateCompaction: {
			get: function() {
				return this.U.compaction
			},
			set: function(a) {
				this.U.compaction === a || a !== gt && a !== it || (this.U.compaction = a, this.B())
			}
		},
		alternateBreadthLimit: {
			get: function() {
				return this.U.breadthLimit
			},
			set: function(a) {
				this.U.breadthLimit !== a && 0 <= a && (this.U.breadthLimit = a, this.B())
			}
		},
		alternateRowSpacing: {
			get: function() {
				return this.U.rowSpacing
			},
			set: function(a) {
				this.U.rowSpacing !== a && (this.U.rowSpacing = a, this.B())
			}
		},
		alternateRowIndent: {
			get: function() {
				return this.U.rowIndent
			},
			set: function(a) {
				this.U.rowIndent !== a && 0 <= a && (this.U.rowIndent = a, this.B())
			}
		},
		alternateCommentSpacing: {
			get: function() {
				return this.U.commentSpacing
			},
			set: function(a) {
				this.U.commentSpacing !== a && (this.U.commentSpacing = a, this.B())
			}
		},
		alternateCommentMargin: {
			get: function() {
				return this.U.commentMargin
			},
			set: function(a) {
				this.U.commentMargin !== a && (this.U.commentMargin = a, this.B())
			}
		},
		alternateSetsPortSpot: {
			get: function() {
				return this.U.setsPortSpot
			},
			set: function(a) {
				this.U.setsPortSpot !== a && (this.U.setsPortSpot = a, this.B())
			}
		},
		alternatePortSpot: {
			get: function() {
				return this.U.portSpot
			},
			set: function(a) {
				this.U.portSpot.A(a) || (this.U.portSpot = a, this.B())
			}
		},
		alternateSetsChildPortSpot: {
			get: function() {
				return this.U.setsChildPortSpot
			},
			set: function(a) {
				this.U.setsChildPortSpot !== a && (this.U.setsChildPortSpot = a, this.B())
			}
		},
		alternateChildPortSpot: {
			get: function() {
				return this.U.childPortSpot
			},
			set: function(a) {
				this.U.childPortSpot.A(a) || (this.U.childPortSpot = a, this.B())
			}
		}
	});
	var As = new D(zs, "PathDefault", -1),
		Bs = new D(zs, "PathDestination", 0),
		Is = new D(zs, "PathSource", 1),
		Xs = new D(zs, "SortingForwards", 10),
		Ys = new D(zs, "SortingReverse", 11),
		Zs = new D(zs, "SortingAscending", 12),
		$s = new D(zs, "SortingDescending", 13),
		wt = new D(zs, "AlignmentCenterSubtrees", 20),
		xt = new D(zs, "AlignmentCenterChildren", 21),
		nt = new D(zs, "AlignmentStart", 22),
		kt = new D(zs, "AlignmentEnd", 23),
		bt = new D(zs, "AlignmentBus", 24),
		Ss = new D(zs, "AlignmentBusBranching", 25),
		ct = new D(zs, "AlignmentTopLeftBus", 26),
		dt = new D(zs,
			"AlignmentBottomRightBus", 27),
		gt = new D(zs, "CompactionNone", 30),
		it = new D(zs, "CompactionBlock", 31),
		Cs = new D(zs, "StyleLayered", 40),
		Ws = new D(zs, "StyleLastParents", 41),
		Vs = new D(zs, "StyleAlternating", 42),
		Us = new D(zs, "StyleRootOnly", 43),
		Es = new D(zs, "ArrangementVertical", 50),
		Ft = new D(zs, "ArrangementHorizontal", 51),
		Hs = new D(zs, "ArrangementFixedRoots", 52),
		Ds = new D(zs, "LayerIndividual", 60),
		Qs = new D(zs, "LayerSiblings", 61),
		Ps = new D(zs, "LayerUniform", 62);
	zs.className = "TreeLayout";
	zs.PathDefault = As;
	zs.PathDestination = Bs;
	zs.PathSource = Is;
	zs.SortingForwards = Xs;
	zs.SortingReverse = Ys;
	zs.SortingAscending = Zs;
	zs.SortingDescending = $s;
	zs.AlignmentCenterSubtrees = wt;
	zs.AlignmentCenterChildren = xt;
	zs.AlignmentStart = nt;
	zs.AlignmentEnd = kt;
	zs.AlignmentBus = bt;
	zs.AlignmentBusBranching = Ss;
	zs.AlignmentTopLeftBus = ct;
	zs.AlignmentBottomRightBus = dt;
	zs.CompactionNone = gt;
	zs.CompactionBlock = it;
	zs.StyleLayered = Cs;
	zs.StyleLastParents = Ws;
	zs.StyleAlternating = Vs;
	zs.StyleRootOnly = Us;
	zs.ArrangementVertical = Es;
	zs.ArrangementHorizontal = Ft;
	zs.ArrangementFixedRoots = Hs;
	zs.LayerIndividual = Ds;
	zs.LayerSiblings = Qs;
	zs.LayerUniform = Ps;

	function Fs(a) {
		zp.call(this, a)
	}
	na(Fs, zp);
	Fs.prototype.createVertex = function() {
		return new Gs(this)
	};
	Fs.prototype.createEdge = function() {
		return new Ht(this)
	};
	Fs.className = "TreeNetwork";

	function Gs(a) {
		Cp.call(this, a);
		this.Va = !1;
		this.Lc = null;
		this.K = [];
		this.nd = this.eb = this.da = this.Wa = 0;
		this.Zc = null;
		this.S = new G(0, 0);
		this.ua = new L(0, 0);
		this.ia = new G(0, 0);
		this.nm = this.mm = this.Bz = !1;
		this.iq = this.Vp = null;
		this.Sc = Xs;
		this.Nc = Ip;
		this.Bc = 0;
		this.zb = xt;
		this.Rr = this.Qr = 0;
		this.Tr = 20;
		this.je = 50;
		this.Er = 0;
		this.Mq = it;
		this.Fq = 0;
		this.es = 25;
		this.Lq = this.ds = 10;
		this.Kq = 20;
		this.qs = !0;
		this.Zr = Hd;
		this.ps = !0;
		this.Iq = Hd
	}
	na(Gs, Cp);
	Gs.prototype.copyInheritedPropertiesFrom = function(a) {
		null !== a && (this.Sc = a.sorting, this.Nc = a.comparer, this.Bc = a.angle, this.zb = a.alignment, this.Qr = a.nodeIndent, this.Rr = a.nodeIndentPastParent, this.Tr = a.nodeSpacing, this.je = a.layerSpacing, this.Er = a.layerSpacingParentOverlap, this.Mq = a.compaction, this.Fq = a.breadthLimit, this.es = a.rowSpacing, this.ds = a.rowIndent, this.Lq = a.commentSpacing, this.Kq = a.commentMargin, this.qs = a.setsPortSpot, this.Zr = a.portSpot, this.ps = a.setsChildPortSpot, this.Iq = a.childPortSpot)
	};
	oa.Object.defineProperties(Gs.prototype, {
		initialized: {
			get: function() {
				return this.Va
			},
			set: function(a) {
				this.Va !== a && (this.Va = a)
			}
		},
		parent: {
			get: function() {
				return this.Lc
			},
			set: function(a) {
				this.Lc !== a && (this.Lc = a)
			}
		},
		children: {
			get: function() {
				return this.K
			},
			set: function(a) {
				if(this.K !== a) {
					if(null !== a)
						for(var b = a.length, c = 0; c < b; c++);
					this.K = a
				}
			}
		},
		level: {
			get: function() {
				return this.Wa
			},
			set: function(a) {
				this.Wa !==
					a && (this.Wa = a)
			}
		},
		descendantCount: {
			get: function() {
				return this.da
			},
			set: function(a) {
				this.da !== a && (this.da = a)
			}
		},
		maxChildrenCount: {
			get: function() {
				return this.eb
			},
			set: function(a) {
				this.eb !== a && (this.eb = a)
			}
		},
		maxGenerationCount: {
			get: function() {
				return this.nd
			},
			set: function(a) {
				this.nd !== a && (this.nd = a)
			}
		},
		comments: {
			get: function() {
				return this.Zc
			},
			set: function(a) {
				if(this.Zc !== a) {
					if(null !== a)
						for(var b =
								a.length, c = 0; c < b; c++);
					this.Zc = a
				}
			}
		},
		sorting: {
			get: function() {
				return this.Sc
			},
			set: function(a) {
				this.Sc !== a && (this.Sc = a)
			}
		},
		comparer: {
			get: function() {
				return this.Nc
			},
			set: function(a) {
				this.Nc !== a && (this.Nc = a)
			}
		},
		angle: {
			get: function() {
				return this.Bc
			},
			set: function(a) {
				this.Bc !== a && (this.Bc = a)
			}
		},
		alignment: {
			get: function() {
				return this.zb
			},
			set: function(a) {
				this.zb !== a && (this.zb = a)
			}
		},
		nodeIndent: {
			get: function() {
				return this.Qr
			},
			set: function(a) {
				this.Qr !== a && (this.Qr = a)
			}
		},
		nodeIndentPastParent: {
			get: function() {
				return this.Rr
			},
			set: function(a) {
				this.Rr !== a && (this.Rr = a)
			}
		},
		nodeSpacing: {
			get: function() {
				return this.Tr
			},
			set: function(a) {
				this.Tr !== a && (this.Tr = a)
			}
		},
		layerSpacing: {
			get: function() {
				return this.je
			},
			set: function(a) {
				this.je !== a && (this.je = a)
			}
		},
		layerSpacingParentOverlap: {
			get: function() {
				return this.Er
			},
			set: function(a) {
				this.Er !== a && (this.Er = a)
			}
		},
		compaction: {
			get: function() {
				return this.Mq
			},
			set: function(a) {
				this.Mq !== a && (this.Mq = a)
			}
		},
		breadthLimit: {
			get: function() {
				return this.Fq
			},
			set: function(a) {
				this.Fq !== a && (this.Fq = a)
			}
		},
		rowSpacing: {
			get: function() {
				return this.es
			},
			set: function(a) {
				this.es !== a && (this.es = a)
			}
		},
		rowIndent: {
			get: function() {
				return this.ds
			},
			set: function(a) {
				this.ds !==
					a && (this.ds = a)
			}
		},
		commentSpacing: {
			get: function() {
				return this.Lq
			},
			set: function(a) {
				this.Lq !== a && (this.Lq = a)
			}
		},
		commentMargin: {
			get: function() {
				return this.Kq
			},
			set: function(a) {
				this.Kq !== a && (this.Kq = a)
			}
		},
		setsPortSpot: {
			get: function() {
				return this.qs
			},
			set: function(a) {
				this.qs !== a && (this.qs = a)
			}
		},
		portSpot: {
			get: function() {
				return this.Zr
			},
			set: function(a) {
				this.Zr.A(a) || (this.Zr = a)
			}
		},
		setsChildPortSpot: {
			get: function() {
				return this.ps
			},
			set: function(a) {
				this.ps !== a && (this.ps = a)
			}
		},
		childPortSpot: {
			get: function() {
				return this.Iq
			},
			set: function(a) {
				this.Iq.A(a) || (this.Iq = a)
			}
		},
		childrenCount: {
			get: function() {
				return this.children.length
			}
		},
		relativePosition: {
			get: function() {
				return this.S
			},
			set: function(a) {
				this.S.set(a)
			}
		},
		subtreeSize: {
			get: function() {
				return this.ua
			},
			set: function(a) {
				this.ua.set(a)
			}
		},
		subtreeOffset: {
			get: function() {
				return this.ia
			},
			set: function(a) {
				this.ia.set(a)
			}
		}
	});
	Gs.className = "TreeVertex";

	function Ht(a) {
		Dp.call(this, a);
		this.iu = new G(0, 0)
	}
	na(Ht, Dp);
	Ht.prototype.commit = function() {
		var a = this.link;
		if(null !== a && !a.isAvoiding) {
			var b = this.network.layout,
				c = null,
				d = null;
			switch(b.ad) {
				case Bs:
					c = this.fromVertex;
					d = this.toVertex;
					break;
				case Is:
					c = this.toVertex;
					d = this.fromVertex;
					break;
				default:
					A("Unhandled path value " + b.ad.toString())
			}
			if(null !== c && null !== d)
				if(b = this.iu, 0 !== b.x || 0 !== b.y || c.Bz) {
					d = c.bounds;
					var e = jt(c),
						f = lt(c),
						g = c.rowSpacing;
					a.Pi();
					var h = a.curve === Wg,
						k = a.isOrthogonal,
						l;
					a.yh();
					if(k || h) {
						for(l = 2; 4 < a.pointsCount;) a.rv(2);
						var m = a.i(1);
						var n = a.i(2)
					} else {
						for(l =
							1; 3 < a.pointsCount;) a.rv(1);
						m = a.i(0);
						n = a.i(a.pointsCount - 1)
					}
					var p = a.i(a.pointsCount - 1);
					0 === e ? (c.alignment === kt ? (e = d.bottom + b.y, 0 === b.y && m.y > p.y + c.rowIndent && (e = Math.min(e, Math.max(m.y, e - mt(c))))) : c.alignment === nt ? (e = d.top + b.y, 0 === b.y && m.y < p.y - c.rowIndent && (e = Math.max(e, Math.min(m.y, e + mt(c))))) : e = c.mm || c.nm && 1 === c.maxGenerationCount ? d.top - c.ia.y + b.y : d.y + d.height / 2 + b.y, h ? (a.m(l, m.x, e), l++, a.m(l, d.right + f, e), l++, a.m(l, d.right + f + (b.x - g) / 3, e), l++, a.m(l, d.right + f + 2 * (b.x - g) / 3, e), l++, a.m(l, d.right + f + (b.x -
						g), e), l++, a.m(l, n.x, e)) : (k && (a.m(l, d.right + f / 2, m.y), l++), a.m(l, d.right + f / 2, e), l++, a.m(l, d.right + f + b.x - (k ? g / 2 : g), e), l++, k && a.m(l, a.i(l - 1).x, n.y))) : 90 === e ? (c.alignment === kt ? (e = d.right + b.x, 0 === b.x && m.x > p.x + c.rowIndent && (e = Math.min(e, Math.max(m.x, e - mt(c))))) : c.alignment === nt ? (e = d.left + b.x, 0 === b.x && m.x < p.x - c.rowIndent && (e = Math.max(e, Math.min(m.x, e + mt(c))))) : e = c.mm || c.nm && 1 === c.maxGenerationCount ? d.left - c.ia.x + b.x : d.x + d.width / 2 + b.x, h ? (a.m(l, e, m.y), l++, a.m(l, e, d.bottom + f), l++, a.m(l, e, d.bottom + f + (b.y - g) /
						3), l++, a.m(l, e, d.bottom + f + 2 * (b.y - g) / 3), l++, a.m(l, e, d.bottom + f + (b.y - g)), l++, a.m(l, e, n.y)) : (k && (a.m(l, m.x, d.bottom + f / 2), l++), a.m(l, e, d.bottom + f / 2), l++, a.m(l, e, d.bottom + f + b.y - (k ? g / 2 : g)), l++, k && a.m(l, n.x, a.i(l - 1).y))) : 180 === e ? (c.alignment === kt ? (e = d.bottom + b.y, 0 === b.y && m.y > p.y + c.rowIndent && (e = Math.min(e, Math.max(m.y, e - mt(c))))) : c.alignment === nt ? (e = d.top + b.y, 0 === b.y && m.y < p.y - c.rowIndent && (e = Math.max(e, Math.min(m.y, e + mt(c))))) : e = c.mm || c.nm && 1 === c.maxGenerationCount ? d.top - c.ia.y + b.y : d.y + d.height / 2 + b.y, h ?
						(a.m(l, m.x, e), l++, a.m(l, d.left - f, e), l++, a.m(l, d.left - f + (b.x + g) / 3, e), l++, a.m(l, d.left - f + 2 * (b.x + g) / 3, e), l++, a.m(l, d.left - f + (b.x + g), e), l++, a.m(l, n.x, e)) : (k && (a.m(l, d.left - f / 2, m.y), l++), a.m(l, d.left - f / 2, e), l++, a.m(l, d.left - f + b.x + (k ? g / 2 : g), e), l++, k && a.m(l, a.i(l - 1).x, n.y))) : 270 === e ? (c.alignment === kt ? (e = d.right + b.x, 0 === b.x && m.x > p.x + c.rowIndent && (e = Math.min(e, Math.max(m.x, e - mt(c))))) : c.alignment === nt ? (e = d.left + b.x, 0 === b.x && m.x < p.x - c.rowIndent && (e = Math.max(e, Math.min(m.x, e + mt(c))))) : e = c.mm || c.nm && 1 === c.maxGenerationCount ?
						d.left - c.ia.x + b.x : d.x + d.width / 2 + b.x, h ? (a.m(l, e, m.y), l++, a.m(l, e, d.top - f), l++, a.m(l, e, d.top - f + (b.y + g) / 3), l++, a.m(l, e, d.top - f + 2 * (b.y + g) / 3), l++, a.m(l, e, d.top - f + (b.y + g)), l++, a.m(l, e, n.y)) : (k && (a.m(l, m.x, d.top - f / 2), l++), a.m(l, e, d.top - f / 2), l++, a.m(l, e, d.top - f + b.y + (k ? g / 2 : g)), l++, k && a.m(l, n.x, a.i(l - 1).y))) : A("Invalid angle " + e);
					a.jf()
				} else a = this.link, f = jt(c), f !== jt(d) && (g = lt(c), h = c.bounds, c = d.bounds, 0 === f && c.left - h.right < g + 1 || 90 === f && c.top - h.bottom < g + 1 || 180 === f && h.left - c.right < g + 1 || 270 === f && h.top - c.bottom <
					g + 1 || (a.Pi(), c = a.curve === Wg, b = a.isOrthogonal, d = at(this.fromVertex.alignment), a.yh(), 0 === f ? (f = h.right + g / 2, c ? 4 === a.pointsCount && (c = a.i(3).y, a.M(1, f - 20, a.i(1).y), a.m(2, f - 20, c), a.m(3, f, c), a.m(4, f + 20, c), a.M(5, a.i(5).x, c)) : b ? d ? a.M(3, a.i(2).x, a.i(4).y) : 6 === a.pointsCount && (a.M(2, f, a.i(2).y), a.M(3, f, a.i(3).y)) : 4 === a.pointsCount ? a.m(2, f, a.i(2).y) : 3 === a.pointsCount ? a.M(1, f, a.i(2).y) : 2 === a.pointsCount && a.m(1, f, a.i(1).y)) : 90 === f ? (f = h.bottom + g / 2, c ? 4 === a.pointsCount && (c = a.i(3).x, a.M(1, a.i(1).x, f - 20), a.m(2, c, f - 20),
						a.m(3, c, f), a.m(4, c, f + 20), a.M(5, c, a.i(5).y)) : b ? d ? a.M(3, a.i(2).x, a.i(4).y) : 6 === a.pointsCount && (a.M(2, a.i(2).x, f), a.M(3, a.i(3).x, f)) : 4 === a.pointsCount ? a.m(2, a.i(2).x, f) : 3 === a.pointsCount ? a.M(1, a.i(2).x, f) : 2 === a.pointsCount && a.m(1, a.i(1).x, f)) : 180 === f ? (f = h.left - g / 2, c ? 4 === a.pointsCount && (c = a.i(3).y, a.M(1, f + 20, a.i(1).y), a.m(2, f + 20, c), a.m(3, f, c), a.m(4, f - 20, c), a.M(5, a.i(5).x, c)) : b ? d ? a.M(3, a.i(2).x, a.i(4).y) : 6 === a.pointsCount && (a.M(2, f, a.i(2).y), a.M(3, f, a.i(3).y)) : 4 === a.pointsCount ? a.m(2, f, a.i(2).y) : 3 === a.pointsCount ?
						a.M(1, f, a.i(2).y) : 2 === a.pointsCount && a.m(1, f, a.i(1).y)) : 270 === f && (f = h.top - g / 2, c ? 4 === a.pointsCount && (c = a.i(3).x, a.M(1, a.i(1).x, f + 20), a.m(2, c, f + 20), a.m(3, c, f), a.m(4, c, f - 20), a.M(5, c, a.i(5).y)) : b ? d ? a.M(3, a.i(2).x, a.i(4).y) : 6 === a.pointsCount && (a.M(2, a.i(2).x, f), a.M(3, a.i(3).x, f)) : 4 === a.pointsCount ? a.m(2, a.i(2).x, f) : 3 === a.pointsCount ? a.M(1, a.i(2).x, f) : 2 === a.pointsCount && a.m(1, a.i(1).x, f)), a.jf()))
		}
	};
	oa.Object.defineProperties(Ht.prototype, {
		relativePoint: {
			get: function() {
				return this.iu
			},
			set: function(a) {
				this.iu.set(a)
			}
		}
	});
	Ht.className = "TreeEdge";
	Va.prototype.initializeStandardTools = function() {
		Af(this, "Action", new jh, this.mouseDownTools);
		Af(this, "Relinking", new Jf, this.mouseDownTools);
		Af(this, "LinkReshaping", new Ug, this.mouseDownTools);
		Af(this, "Resizing", new ah, this.mouseDownTools);
		Af(this, "Rotating", new gh, this.mouseDownTools);
		Af(this, "Linking", new Mg, this.mouseMoveTools);
		Af(this, "Dragging", new Cf, this.mouseMoveTools);
		Af(this, "DragSelecting", new mh, this.mouseMoveTools);
		Af(this, "Panning", new nh, this.mouseMoveTools);
		Af(this, "ContextMenu", new ph,
			this.mouseUpTools);
		Af(this, "TextEditing", new vh, this.mouseUpTools);
		Af(this, "ClickCreating", new kh, this.mouseUpTools);
		Af(this, "ClickSelecting", new ih, this.mouseUpTools)
	};
	Q.prototype.Xu = function() {
		this.Sw("SVG", new Kl(this, w.document))
	};
	dn("Horizontal", new mm);
	dn("Spot", new om);
	dn("Table", new sm);
	dn("Viewbox", new xm);
	dn("TableRow", new vm);
	dn("TableColumn", new wm);
	dn("Graduated", new Gm);
	qi.add(Fq.type, aq);
	qi.add(Iq.type, oq);
	var It = {
			licenseKey: "",
			version: "2.0.0-beta6",
			Group: V,
			EnumValue: D,
			List: E,
			Set: F,
			Map: Nb,
			Point: G,
			Size: L,
			Rect: M,
			Margin: Pc,
			Spot: N,
			Geometry: ee,
			PathFigure: Se,
			PathSegment: Te,
			InputEvent: Ve,
			DiagramEvent: Xe,
			ChangedEvent: Ye,
			Model: Z,
			GraphLinksModel: Fq,
			TreeModel: Iq,
			Binding: Bi,
			Transaction: gf,
			UndoManager: hf,
			CommandHandler: Gk,
			Tool: kf,
			DraggingTool: Cf,
			DraggingInfo: Kf,
			LinkingBaseTool: pg,
			LinkingTool: Mg,
			RelinkingTool: Jf,
			LinkReshapingTool: Ug,
			ResizingTool: ah,
			RotatingTool: gh,
			ClickSelectingTool: ih,
			ActionTool: jh,
			ClickCreatingTool: kh,
			HTMLInfo: uf,
			ContextMenuTool: ph,
			DragSelectingTool: mh,
			PanningTool: nh,
			TextEditingTool: vh,
			ToolManager: Va,
			AnimationManager: Nh,
			Layer: ci,
			Diagram: Q,
			Palette: Ak,
			Overview: Ck,
			Brush: jl,
			GraphObject: P,
			Panel: Y,
			RowColumnDefinition: Kj,
			Shape: qg,
			TextBlock: wh,
			TextBlockMetrics: Im,
			Picture: Qj,
			Part: U,
			Adornment: pf,
			Node: W,
			Link: S,
			Placeholder: bh,
			Layout: vi,
			LayoutNetwork: zp,
			LayoutVertex: Cp,
			LayoutEdge: Dp,
			GridLayout: Bk,
			PanelLayout: Dl,
			CircularLayout: Jq,
			CircularNetwork: ar,
			CircularVertex: nr,
			CircularEdge: or,
			ForceDirectedLayout: pr,
			ForceDirectedNetwork: qr,
			ForceDirectedVertex: Cr,
			ForceDirectedEdge: Dr,
			LayeredDigraphLayout: Er,
			LayeredDigraphNetwork: Jr,
			LayeredDigraphVertex: xs,
			LayeredDigraphEdge: ys,
			TreeLayout: zs,
			TreeNetwork: Fs,
			TreeVertex: Gs,
			TreeEdge: Ht
		},
		Jt = ["go"],
		Kt = this;
	Jt[0] in Kt || !Kt.execScript || Kt.execScript("var " + Jt[0]);
	for(var Lt; Jt.length && (Lt = Jt.shift());) {
		var Mt;
		if(Mt = !Jt.length) Mt = void 0 !== It;
		Mt ? Kt[Lt] = It : Kt[Lt] && Kt[Lt] !== Object.prototype[Lt] ? Kt = Kt[Lt] : Kt = Kt[Lt] = {}
	}
	w.module && "object" === typeof w.module && "object" === typeof w.module.exports ? w.module.exports = It : w.define && "function" === typeof w.define && w.define.amd ? (w.go = It, w.define(It)) : w.go = It;
	'undefined' !== typeof module && 'object' === typeof module.exports && (module.exports = go);
})(self);